Return-Path: <linux-stm32-bounces@st-md-mailman.stormreply.com>
X-Original-To: lists+linux-stm32@lfdr.de
Delivered-To: lists+linux-stm32@lfdr.de
Received: from stm-ict-prod-mailman-01.stormreply.prv (st-md-mailman.stormreply.com [52.209.6.89])
	by mail.lfdr.de (Postfix) with ESMTPS id F28461301F
	for <lists+linux-stm32@lfdr.de>; Fri,  3 May 2019 16:27:46 +0200 (CEST)
Received: from ip-172-31-3-76.eu-west-1.compute.internal (localhost [127.0.0.1])
	by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTP id A779CC58181
	for <lists+linux-stm32@lfdr.de>; Fri,  3 May 2019 14:27:46 +0000 (UTC)
Received: from smtp-out.xnet.cz (smtp-out.xnet.cz [178.217.244.18])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTPS id 2F7F4C58180
 for <linux-stm32@st-md-mailman.stormreply.com>;
 Fri,  3 May 2019 14:27:45 +0000 (UTC)
Received: from meh.true.cz (meh.true.cz [108.61.167.218])
 (Authenticated sender: petr@true.cz)
 by smtp-out.xnet.cz (Postfix) with ESMTPSA id 316AC4ACF;
 Fri,  3 May 2019 16:27:43 +0200 (CEST)
Received: by meh.true.cz (OpenSMTPD) with ESMTP id 8367ae67;
 Fri, 3 May 2019 16:27:41 +0200 (CEST)
From: =?UTF-8?q?Petr=20=C5=A0tetiar?= <ynezz@true.cz>
To: netdev@vger.kernel.org, devicetree@vger.kernel.org,
 Andreas Larsson <andreas@gaisler.com>,
 "David S. Miller" <davem@davemloft.net>,
 Maxime Ripard <maxime.ripard@bootlin.com>, Chen-Yu Tsai <wens@csie.org>,
 Thor Thayer <thor.thayer@linux.intel.com>,
 Florian Fainelli <f.fainelli@gmail.com>, Doug Berger <opendmb@gmail.com>,
 Sunil Goutham <sgoutham@cavium.com>, Robert Richter <rric@kernel.org>,
 Fugang Duan <fugang.duan@nxp.com>, Madalin Bucur <madalin.bucur@nxp.com>,
 Pantelis Antoniou <pantelis.antoniou@gmail.com>,
 Claudiu Manoil <claudiu.manoil@nxp.com>, Li Yang <leoyang.li@nxp.com>,
 Yisen Zhuang <yisen.zhuang@huawei.com>,
 Salil Mehta <salil.mehta@huawei.com>, Hauke Mehrtens <hauke@hauke-m.de>,
 Sebastian Hesselbarth <sebastian.hesselbarth@gmail.com>,
 Thomas Petazzoni <thomas.petazzoni@bootlin.com>,
 Mirko Lindner <mlindner@marvell.com>,
 Stephen Hemminger <stephen@networkplumber.org>,
 Felix Fietkau <nbd@openwrt.org>, John Crispin <john@phrozen.org>,
 Sean Wang <sean.wang@mediatek.com>,
 Nelson Chang <nelson.chang@mediatek.com>,
 Matthias Brugger <matthias.bgg@gmail.com>,
 Vladimir Zapolskiy <vz@mleia.com>,
 Sylvain Lemieux <slemieux.tyco@gmail.com>,
 Sergei Shtylyov <sergei.shtylyov@cogentembedded.com>,
 Byungho An <bh74.an@samsung.com>, Girish K S <ks.giri@samsung.com>,
 Vipul Pandya <vipul.pandya@samsung.com>,
 Kunihiko Hayashi <hayashi.kunihiko@socionext.com>,
 Giuseppe Cavallaro <peppe.cavallaro@st.com>,
 Alexandre Torgue <alexandre.torgue@st.com>,
 Jose Abreu <joabreu@synopsys.com>,
 Maxime Coquelin <mcoquelin.stm32@gmail.com>,
 Grygorii Strashko <grygorii.strashko@ti.com>,
 Wingman Kwok <w-kwok2@ti.com>, Murali Karicheri <m-karicheri2@ti.com>,
 Michal Simek <michal.simek@xilinx.com>,
 Anirudha Sarangi <anirudh@xilinx.com>, John Linn <John.Linn@xilinx.com>
Date: Fri,  3 May 2019 16:27:10 +0200
Message-Id: <1556893635-18549-6-git-send-email-ynezz@true.cz>
X-Mailer: git-send-email 1.9.1
In-Reply-To: <1556893635-18549-1-git-send-email-ynezz@true.cz>
References: <1556893635-18549-1-git-send-email-ynezz@true.cz>
MIME-Version: 1.0
Cc: Andrew Lunn <andrew@lunn.ch>, linuxppc-dev@lists.ozlabs.org,
 linux-mediatek@lists.infradead.org, linux-kernel@vger.kernel.org,
 linux-renesas-soc@vger.kernel.org,
 Srinivas Kandagatla <srinivas.kandagatla@linaro.org>,
 bcm-kernel-feedback-list@broadcom.com, nios2-dev@lists.rocketboards.org,
 =?UTF-8?q?Petr=20=C5=A0tetiar?= <ynezz@true.cz>, linux-omap@vger.kernel.org,
 Frank Rowand <frowand.list@gmail.com>,
 linux-stm32@st-md-mailman.stormreply.com, linux-arm-kernel@lists.infradead.org,
 Heiner Kallweit <hkallweit1@gmail.com>
Subject: [Linux-stm32] [PATCH v4 05/10] net: ethernet: support
	of_get_mac_address new ERR_PTR error
X-BeenThere: linux-stm32@st-md-mailman.stormreply.com
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: <linux-stm32.st-md-mailman.stormreply.com>
List-Unsubscribe: <https://st-md-mailman.stormreply.com/mailman/options/linux-stm32>, 
 <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=unsubscribe>
List-Archive: <http://st-md-mailman.stormreply.com/pipermail/linux-stm32/>
List-Post: <mailto:linux-stm32@st-md-mailman.stormreply.com>
List-Help: <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=help>
List-Subscribe: <https://st-md-mailman.stormreply.com/mailman/listinfo/linux-stm32>, 
 <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linux-stm32-bounces@st-md-mailman.stormreply.com
Sender: "Linux-stm32" <linux-stm32-bounces@st-md-mailman.stormreply.com>

VGhlcmUgd2FzIE5WTUVNIHN1cHBvcnQgYWRkZWQgdG8gb2ZfZ2V0X21hY19hZGRyZXNzLCBzbyBp
dCBjb3VsZCBub3cgcmV0dXJuCkVSUl9QVFIgZW5jb2RlZCBlcnJvciB2YWx1ZXMsIHNvIHdlIG5l
ZWQgdG8gYWRqdXN0IGFsbCBjdXJyZW50IHVzZXJzIG9mCm9mX2dldF9tYWNfYWRkcmVzcyB0byB0
aGlzIG5ldyBmYWN0LgoKV2hpbGUgYXQgaXQsIHJlbW92ZSBzdXBlcmZsdW91cyBpc192YWxpZF9l
dGhlcl9hZGRyIGFzIHRoZSBNQUMgYWRkcmVzcwpyZXR1cm5lZCBmcm9tIG9mX2dldF9tYWNfYWRk
cmVzcyBpcyBhbHdheXMgdmFsaWQgYW5kIGNoZWNrZWQgYnkKaXNfdmFsaWRfZXRoZXJfYWRkciBh
bnl3YXkuCgpTaWduZWQtb2ZmLWJ5OiBQZXRyIMWgdGV0aWFyIDx5bmV6ekB0cnVlLmN6PgotLS0K
CiBDaGFuZ2VzIHNpbmNlIHYzOgoKICAqIElTX0VSUl9PUl9OVUxMIC0+IElTX0VSUgoKIGRyaXZl
cnMvbmV0L2V0aGVybmV0L2Flcm9mbGV4L2dyZXRoLmMgICAgICAgICAgICAgICAgIHwgMiArLQog
ZHJpdmVycy9uZXQvZXRoZXJuZXQvYWxsd2lubmVyL3N1bjRpLWVtYWMuYyAgICAgICAgICAgfCAy
ICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9hbHRlcmEvYWx0ZXJhX3RzZV9tYWluLmMgICAgICAg
ICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L2FyYy9lbWFjX21haW4uYyAgICAgICAgICAg
ICAgICAgIHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvYXVyb3JhL25iODgwMC5jICAgICAg
ICAgICAgICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9icm9hZGNvbS9iY21zeXNw
b3J0LmMgICAgICAgICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L2Jyb2FkY29tL2Jn
bWFjLWJjbWEuYyAgICAgICAgICAgIHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvYnJvYWRj
b20vYmdtYWMtcGxhdGZvcm0uYyAgICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9i
cm9hZGNvbS9nZW5ldC9iY21nZW5ldC5jICAgICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVy
bmV0L2Nhdml1bS9vY3Rlb24vb2N0ZW9uX21nbXQuYyAgICAgIHwgMiArLQogZHJpdmVycy9uZXQv
ZXRoZXJuZXQvY2F2aXVtL3RodW5kZXIvdGh1bmRlcl9iZ3guYyAgICAgfCAyICstCiBkcml2ZXJz
L25ldC9ldGhlcm5ldC9kYXZpY29tL2RtOTAwMC5jICAgICAgICAgICAgICAgICB8IDIgKy0KIGRy
aXZlcnMvbmV0L2V0aGVybmV0L2V0aG9jLmMgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMiAr
LQogZHJpdmVycy9uZXQvZXRoZXJuZXQvZXpjaGlwL25wc19lbmV0LmMgICAgICAgICAgICAgICAg
fCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9mcmVlc2NhbGUvZmVjX21haW4uYyAgICAgICAg
ICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L2ZyZWVzY2FsZS9mZWNfbXBjNTJ4eC5j
ICAgICAgICAgIHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvZnJlZXNjYWxlL2ZtYW4vbWFj
LmMgICAgICAgICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9mcmVlc2NhbGUvZnNf
ZW5ldC9mc19lbmV0LW1haW4uYyB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L2ZyZWVzY2Fs
ZS9naWFuZmFyLmMgICAgICAgICAgICAgIHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvZnJl
ZXNjYWxlL3VjY19nZXRoLmMgICAgICAgICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5l
dC9oaXNpbGljb24vaGlzaV9mZW1hYy5jICAgICAgICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0
aGVybmV0L2hpc2lsaWNvbi9oaXg1aGQyX2dtYWMuYyAgICAgICAgIHwgMiArLQogZHJpdmVycy9u
ZXQvZXRoZXJuZXQvbGFudGlxX3hyeDIwMC5jICAgICAgICAgICAgICAgICAgfCAyICstCiBkcml2
ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL212NjQzeHhfZXRoLmMgICAgICAgICAgICB8IDIgKy0K
IGRyaXZlcnMvbmV0L2V0aGVybmV0L21hcnZlbGwvbXZuZXRhLmMgICAgICAgICAgICAgICAgIHwg
MiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvbWFydmVsbC9weGExNjhfZXRoLmMgICAgICAgICAg
ICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL3NreTIuYyAgICAgICAgICAg
ICAgICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L21lZGlhdGVrL210a19ldGhfc29j
LmMgICAgICAgICAgIHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvbWljcmVsL2tzODg1MS5j
ICAgICAgICAgICAgICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9taWNyZWwva3M4
ODUxX21sbC5jICAgICAgICAgICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L21pY3Jv
Y2hpcC9lbmMyOGo2MC5jICAgICAgICAgICAgIHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQv
bnhwL2xwY19ldGguYyAgICAgICAgICAgICAgICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhl
cm5ldC9xdWFsY29tbS9xY2Ffc3BpLmMgICAgICAgICAgICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0
L2V0aGVybmV0L3F1YWxjb21tL3FjYV91YXJ0LmMgICAgICAgICAgICAgIHwgMiArLQogZHJpdmVy
cy9uZXQvZXRoZXJuZXQvcmVuZXNhcy9yYXZiX21haW4uYyAgICAgICAgICAgICAgfCAyICstCiBk
cml2ZXJzL25ldC9ldGhlcm5ldC9yZW5lc2FzL3NoX2V0aC5jICAgICAgICAgICAgICAgICB8IDIg
Ky0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L3NhbXN1bmcvc3hnYmUvc3hnYmVfcGxhdGZvcm0uYyAg
IHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvc29jaW9uZXh0L3NuaV9hdmUuYyAgICAgICAg
ICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC9zdG1pY3JvL3N0bW1hYy9zdG1tYWNf
bWFpbi5jICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L3RpL2Nwc3cuYyAgICAgICAg
ICAgICAgICAgICAgICAgIHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJuZXQvdGkvbmV0Y3BfY29y
ZS5jICAgICAgICAgICAgICAgICAgfCAyICstCiBkcml2ZXJzL25ldC9ldGhlcm5ldC93aXpuZXQv
dzUxMDAuYyAgICAgICAgICAgICAgICAgICB8IDIgKy0KIGRyaXZlcnMvbmV0L2V0aGVybmV0L3hp
bGlueC9sbF90ZW1hY19tYWluLmMgICAgICAgICAgIHwgMiArLQogZHJpdmVycy9uZXQvZXRoZXJu
ZXQveGlsaW54L3hpbGlueF9heGllbmV0X21haW4uYyAgICAgfCAyICstCiBkcml2ZXJzL25ldC9l
dGhlcm5ldC94aWxpbngveGlsaW54X2VtYWNsaXRlLmMgICAgICAgICB8IDIgKy0KIG5ldC9ldGhl
cm5ldC9ldGguYyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMiArLQogNDYg
ZmlsZXMgY2hhbmdlZCwgNDYgaW5zZXJ0aW9ucygrKSwgNDYgZGVsZXRpb25zKC0pCgpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvYWVyb2ZsZXgvZ3JldGguYyBiL2RyaXZlcnMvbmV0
L2V0aGVybmV0L2Flcm9mbGV4L2dyZXRoLmMKaW5kZXggNDdlNTk4NC4uN2M1Y2YwMiAxMDA2NDQK
LS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvYWVyb2ZsZXgvZ3JldGguYworKysgYi9kcml2ZXJz
L25ldC9ldGhlcm5ldC9hZXJvZmxleC9ncmV0aC5jCkBAIC0xNDU5LDcgKzE0NTksNyBAQCBzdGF0
aWMgaW50IGdyZXRoX29mX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKm9mZGV2KQogCQlj
b25zdCB1OCAqYWRkcjsKIAogCQlhZGRyID0gb2ZfZ2V0X21hY19hZGRyZXNzKG9mZGV2LT5kZXYu
b2Zfbm9kZSk7Ci0JCWlmIChhZGRyKSB7CisJCWlmICghSVNfRVJSKGFkZHIpKSB7CiAJCQlmb3Ig
KGkgPSAwOyBpIDwgNjsgaSsrKQogCQkJCW1hY2FkZHJbaV0gPSAodW5zaWduZWQgaW50KSBhZGRy
W2ldOwogCQl9IGVsc2UgewpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvYWxsd2lu
bmVyL3N1bjRpLWVtYWMuYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2FsbHdpbm5lci9zdW40aS1l
bWFjLmMKaW5kZXggZTFhY2FmYS4uMzdlYmQ4OSAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRo
ZXJuZXQvYWxsd2lubmVyL3N1bjRpLWVtYWMuYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9h
bGx3aW5uZXIvc3VuNGktZW1hYy5jCkBAIC04NzAsNyArODcwLDcgQEAgc3RhdGljIGludCBlbWFj
X3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCiAKIAkvKiBSZWFkIE1BQy1hZGRy
ZXNzIGZyb20gRFQgKi8KIAltYWNfYWRkciA9IG9mX2dldF9tYWNfYWRkcmVzcyhucCk7Ci0JaWYg
KG1hY19hZGRyKQorCWlmICghSVNfRVJSKG1hY19hZGRyKSkKIAkJbWVtY3B5KG5kZXYtPmRldl9h
ZGRyLCBtYWNfYWRkciwgRVRIX0FMRU4pOwogCiAJLyogQ2hlY2sgaWYgdGhlIE1BQyBhZGRyZXNz
IGlzIHZhbGlkLCBpZiBub3QgZ2V0IGEgcmFuZG9tIG9uZSAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9uZXQvZXRoZXJuZXQvYWx0ZXJhL2FsdGVyYV90c2VfbWFpbi5jIGIvZHJpdmVycy9uZXQvZXRo
ZXJuZXQvYWx0ZXJhL2FsdGVyYV90c2VfbWFpbi5jCmluZGV4IGFhMWQxZjUuLjg3N2U2N2YgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2FsdGVyYS9hbHRlcmFfdHNlX21haW4uYwor
KysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9hbHRlcmEvYWx0ZXJhX3RzZV9tYWluLmMKQEAgLTE1
MzcsNyArMTUzNyw3IEBAIHN0YXRpYyBpbnQgYWx0ZXJhX3RzZV9wcm9iZShzdHJ1Y3QgcGxhdGZv
cm1fZGV2aWNlICpwZGV2KQogCiAJLyogZ2V0IGRlZmF1bHQgTUFDIGFkZHJlc3MgZnJvbSBkZXZp
Y2UgdHJlZSAqLwogCW1hY2FkZHIgPSBvZl9nZXRfbWFjX2FkZHJlc3MocGRldi0+ZGV2Lm9mX25v
ZGUpOwotCWlmIChtYWNhZGRyKQorCWlmICghSVNfRVJSKG1hY2FkZHIpKQogCQlldGhlcl9hZGRy
X2NvcHkobmRldi0+ZGV2X2FkZHIsIG1hY2FkZHIpOwogCWVsc2UKIAkJZXRoX2h3X2FkZHJfcmFu
ZG9tKG5kZXYpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvYXJjL2VtYWNfbWFp
bi5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvYXJjL2VtYWNfbWFpbi5jCmluZGV4IGZmM2Q2ODUu
LjdmODlhZDUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2FyYy9lbWFjX21haW4u
YworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9hcmMvZW1hY19tYWluLmMKQEAgLTk2MCw3ICs5
NjAsNyBAQCBpbnQgYXJjX2VtYWNfcHJvYmUoc3RydWN0IG5ldF9kZXZpY2UgKm5kZXYsIGludCBp
bnRlcmZhY2UpCiAJLyogR2V0IE1BQyBhZGRyZXNzIGZyb20gZGV2aWNlIHRyZWUgKi8KIAltYWNf
YWRkciA9IG9mX2dldF9tYWNfYWRkcmVzcyhkZXYtPm9mX25vZGUpOwogCi0JaWYgKG1hY19hZGRy
KQorCWlmICghSVNfRVJSKG1hY19hZGRyKSkKIAkJbWVtY3B5KG5kZXYtPmRldl9hZGRyLCBtYWNf
YWRkciwgRVRIX0FMRU4pOwogCWVsc2UKIAkJZXRoX2h3X2FkZHJfcmFuZG9tKG5kZXYpOwpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvYXVyb3JhL25iODgwMC5jIGIvZHJpdmVycy9u
ZXQvZXRoZXJuZXQvYXVyb3JhL25iODgwMC5jCmluZGV4IDZmNTYyNzYuLmViYjBhNDMgMTAwNjQ0
Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2F1cm9yYS9uYjg4MDAuYworKysgYi9kcml2ZXJz
L25ldC9ldGhlcm5ldC9hdXJvcmEvbmI4ODAwLmMKQEAgLTE0NjEsNyArMTQ2MSw3IEBAIHN0YXRp
YyBpbnQgbmI4ODAwX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCiAJZGV2LT5p
cnEgPSBpcnE7CiAKIAltYWMgPSBvZl9nZXRfbWFjX2FkZHJlc3MocGRldi0+ZGV2Lm9mX25vZGUp
OwotCWlmIChtYWMpCisJaWYgKCFJU19FUlIobWFjKSkKIAkJZXRoZXJfYWRkcl9jb3B5KGRldi0+
ZGV2X2FkZHIsIG1hYyk7CiAKIAlpZiAoIWlzX3ZhbGlkX2V0aGVyX2FkZHIoZGV2LT5kZXZfYWRk
cikpCmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9icm9hZGNvbS9iY21zeXNwb3J0
LmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9icm9hZGNvbS9iY21zeXNwb3J0LmMKaW5kZXggYmMz
YWMzNi4uNTYzOGRjMCAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvYnJvYWRjb20v
YmNtc3lzcG9ydC5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Jyb2FkY29tL2JjbXN5c3Bv
cnQuYwpAQCAtMjU0OCw3ICsyNTQ4LDcgQEAgc3RhdGljIGludCBiY21fc3lzcG9ydF9wcm9iZShz
dHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQogCiAJLyogSW5pdGlhbGl6ZSBuZXRkZXZpY2Ug
bWVtYmVycyAqLwogCW1hY2FkZHIgPSBvZl9nZXRfbWFjX2FkZHJlc3MoZG4pOwotCWlmICghbWFj
YWRkciB8fCAhaXNfdmFsaWRfZXRoZXJfYWRkcihtYWNhZGRyKSkgeworCWlmIChJU19FUlIobWFj
YWRkcikpIHsKIAkJZGV2X3dhcm4oJnBkZXYtPmRldiwgInVzaW5nIHJhbmRvbSBFdGhlcm5ldCBN
QUNcbiIpOwogCQlldGhfaHdfYWRkcl9yYW5kb20oZGV2KTsKIAl9IGVsc2UgewpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvYnJvYWRjb20vYmdtYWMtYmNtYS5jIGIvZHJpdmVycy9u
ZXQvZXRoZXJuZXQvYnJvYWRjb20vYmdtYWMtYmNtYS5jCmluZGV4IDZmZTA3NGMuLjE5NGIzNWEg
MTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Jyb2FkY29tL2JnbWFjLWJjbWEuYwor
KysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9icm9hZGNvbS9iZ21hYy1iY21hLmMKQEAgLTEzMiw3
ICsxMzIsNyBAQCBzdGF0aWMgaW50IGJnbWFjX3Byb2JlKHN0cnVjdCBiY21hX2RldmljZSAqY29y
ZSkKIAkJbWFjID0gb2ZfZ2V0X21hY19hZGRyZXNzKGJnbWFjLT5kZXYtPm9mX25vZGUpOwogCiAJ
LyogSWYgbm8gTUFDIGFkZHJlc3MgYXNzaWduZWQgdmlhIGRldmljZSB0cmVlLCBjaGVjayBTUFJP
TSAqLwotCWlmICghbWFjKSB7CisJaWYgKElTX0VSUihtYWMpKSB7CiAJCXN3aXRjaCAoY29yZS0+
Y29yZV91bml0KSB7CiAJCWNhc2UgMDoKIAkJCW1hYyA9IHNwcm9tLT5ldDBtYWM7CmRpZmYgLS1n
aXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9icm9hZGNvbS9iZ21hYy1wbGF0Zm9ybS5jIGIvZHJp
dmVycy9uZXQvZXRoZXJuZXQvYnJvYWRjb20vYmdtYWMtcGxhdGZvcm0uYwppbmRleCA4OTRlZGE1
Li42ZGMwZGQ5IDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9icm9hZGNvbS9iZ21h
Yy1wbGF0Zm9ybS5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Jyb2FkY29tL2JnbWFjLXBs
YXRmb3JtLmMKQEAgLTE5Myw3ICsxOTMsNyBAQCBzdGF0aWMgaW50IGJnbWFjX3Byb2JlKHN0cnVj
dCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCiAJYmdtYWMtPmRtYV9kZXYgPSAmcGRldi0+ZGV2Owog
CiAJbWFjX2FkZHIgPSBvZl9nZXRfbWFjX2FkZHJlc3MobnApOwotCWlmIChtYWNfYWRkcikKKwlp
ZiAoIUlTX0VSUihtYWNfYWRkcikpCiAJCWV0aGVyX2FkZHJfY29weShiZ21hYy0+bmV0X2Rldi0+
ZGV2X2FkZHIsIG1hY19hZGRyKTsKIAllbHNlCiAJCWRldl93YXJuKCZwZGV2LT5kZXYsICJNQUMg
YWRkcmVzcyBub3QgcHJlc2VudCBpbiBkZXZpY2UgdHJlZVxuIik7CmRpZmYgLS1naXQgYS9kcml2
ZXJzL25ldC9ldGhlcm5ldC9icm9hZGNvbS9nZW5ldC9iY21nZW5ldC5jIGIvZHJpdmVycy9uZXQv
ZXRoZXJuZXQvYnJvYWRjb20vZ2VuZXQvYmNtZ2VuZXQuYwppbmRleCA5ODMyNDVjLi43OTliNzQz
IDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9icm9hZGNvbS9nZW5ldC9iY21nZW5l
dC5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Jyb2FkY29tL2dlbmV0L2JjbWdlbmV0LmMK
QEAgLTM0NzYsNyArMzQ3Niw3IEBAIHN0YXRpYyBpbnQgYmNtZ2VuZXRfcHJvYmUoc3RydWN0IHBs
YXRmb3JtX2RldmljZSAqcGRldikKIAogCWlmIChkbikgewogCQltYWNhZGRyID0gb2ZfZ2V0X21h
Y19hZGRyZXNzKGRuKTsKLQkJaWYgKCFtYWNhZGRyKSB7CisJCWlmIChJU19FUlIobWFjYWRkcikp
IHsKIAkJCWRldl9lcnIoJnBkZXYtPmRldiwgImNhbid0IGZpbmQgTUFDIGFkZHJlc3NcbiIpOwog
CQkJZXJyID0gLUVJTlZBTDsKIAkJCWdvdG8gZXJyOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQv
ZXRoZXJuZXQvY2F2aXVtL29jdGVvbi9vY3Rlb25fbWdtdC5jIGIvZHJpdmVycy9uZXQvZXRoZXJu
ZXQvY2F2aXVtL29jdGVvbi9vY3Rlb25fbWdtdC5jCmluZGV4IDUzNTljMTAuLjE1YjExMzAgMTAw
NjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Nhdml1bS9vY3Rlb24vb2N0ZW9uX21nbXQu
YworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9jYXZpdW0vb2N0ZW9uL29jdGVvbl9tZ210LmMK
QEAgLTE1MDMsNyArMTUwMyw3IEBAIHN0YXRpYyBpbnQgb2N0ZW9uX21nbXRfcHJvYmUoc3RydWN0
IHBsYXRmb3JtX2RldmljZSAqcGRldikKIAogCW1hYyA9IG9mX2dldF9tYWNfYWRkcmVzcyhwZGV2
LT5kZXYub2Zfbm9kZSk7CiAKLQlpZiAobWFjKQorCWlmICghSVNfRVJSKG1hYykpCiAJCW1lbWNw
eShuZXRkZXYtPmRldl9hZGRyLCBtYWMsIEVUSF9BTEVOKTsKIAllbHNlCiAJCWV0aF9od19hZGRy
X3JhbmRvbShuZXRkZXYpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvY2F2aXVt
L3RodW5kZXIvdGh1bmRlcl9iZ3guYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Nhdml1bS90aHVu
ZGVyL3RodW5kZXJfYmd4LmMKaW5kZXggNjczYzU3Yi4uN2RkZTQ0YiAxMDA2NDQKLS0tIGEvZHJp
dmVycy9uZXQvZXRoZXJuZXQvY2F2aXVtL3RodW5kZXIvdGh1bmRlcl9iZ3guYworKysgYi9kcml2
ZXJzL25ldC9ldGhlcm5ldC9jYXZpdW0vdGh1bmRlci90aHVuZGVyX2JneC5jCkBAIC0xNDg0LDcg
KzE0ODQsNyBAQCBzdGF0aWMgaW50IGJneF9pbml0X29mX3BoeShzdHJ1Y3QgYmd4ICpiZ3gpCiAJ
CQlicmVhazsKIAogCQltYWMgPSBvZl9nZXRfbWFjX2FkZHJlc3Mobm9kZSk7Ci0JCWlmIChtYWMp
CisJCWlmICghSVNfRVJSKG1hYykpCiAJCQlldGhlcl9hZGRyX2NvcHkoYmd4LT5sbWFjW2xtYWNd
Lm1hYywgbWFjKTsKIAogCQlTRVRfTkVUREVWX0RFVigmYmd4LT5sbWFjW2xtYWNdLm5ldGRldiwg
JmJneC0+cGRldi0+ZGV2KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Rhdmlj
b20vZG05MDAwLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9kYXZpY29tL2RtOTAwMC5jCmluZGV4
IGMyNTg2ZjQuLjk1M2VlNTYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Rhdmlj
b20vZG05MDAwLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvZGF2aWNvbS9kbTkwMDAuYwpA
QCAtMTQxMiw3ICsxNDEyLDcgQEAgc3RhdGljIHN0cnVjdCBkbTkwMDBfcGxhdF9kYXRhICpkbTkw
MDBfcGFyc2VfZHQoc3RydWN0IGRldmljZSAqZGV2KQogCQlwZGF0YS0+ZmxhZ3MgfD0gRE05MDAw
X1BMQVRGX05PX0VFUFJPTTsKIAogCW1hY19hZGRyID0gb2ZfZ2V0X21hY19hZGRyZXNzKG5wKTsK
LQlpZiAobWFjX2FkZHIpCisJaWYgKCFJU19FUlIobWFjX2FkZHIpKQogCQltZW1jcHkocGRhdGEt
PmRldl9hZGRyLCBtYWNfYWRkciwgc2l6ZW9mKHBkYXRhLT5kZXZfYWRkcikpOwogCiAJcmV0dXJu
IHBkYXRhOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvZXRob2MuYyBiL2RyaXZl
cnMvbmV0L2V0aGVybmV0L2V0aG9jLmMKaW5kZXggMGYzZTdmMi4uNzFkYTA0OSAxMDA2NDQKLS0t
IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvZXRob2MuYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5l
dC9ldGhvYy5jCkBAIC0xMTUzLDcgKzExNTMsNyBAQCBzdGF0aWMgaW50IGV0aG9jX3Byb2JlKHN0
cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCiAJCWNvbnN0IHZvaWQgKm1hYzsKIAogCQltYWMg
PSBvZl9nZXRfbWFjX2FkZHJlc3MocGRldi0+ZGV2Lm9mX25vZGUpOwotCQlpZiAobWFjKQorCQlp
ZiAoIUlTX0VSUihtYWMpKQogCQkJZXRoZXJfYWRkcl9jb3B5KG5ldGRldi0+ZGV2X2FkZHIsIG1h
Yyk7CiAJCXByaXYtPnBoeV9pZCA9IC0xOwogCX0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0
aGVybmV0L2V6Y2hpcC9ucHNfZW5ldC5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvZXpjaGlwL25w
c19lbmV0LmMKaW5kZXggNjU5ZjFhZC4uYjRjZTI2MSAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQv
ZXRoZXJuZXQvZXpjaGlwL25wc19lbmV0LmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvZXpj
aGlwL25wc19lbmV0LmMKQEAgLTYxNiw3ICs2MTYsNyBAQCBzdGF0aWMgczMyIG5wc19lbmV0X3By
b2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCiAKIAkvKiBzZXQga2VybmVsIE1BQyBh
ZGRyZXNzIHRvIGRldiAqLwogCW1hY19hZGRyID0gb2ZfZ2V0X21hY19hZGRyZXNzKGRldi0+b2Zf
bm9kZSk7Ci0JaWYgKG1hY19hZGRyKQorCWlmICghSVNfRVJSKG1hY19hZGRyKSkKIAkJZXRoZXJf
YWRkcl9jb3B5KG5kZXYtPmRldl9hZGRyLCBtYWNfYWRkcik7CiAJZWxzZQogCQlldGhfaHdfYWRk
cl9yYW5kb20obmRldik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9mcmVlc2Nh
bGUvZmVjX21haW4uYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ZyZWVzY2FsZS9mZWNfbWFpbi5j
CmluZGV4IGE5NmFkMjAuLmFhN2Q0ZTIgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0
L2ZyZWVzY2FsZS9mZWNfbWFpbi5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ZyZWVzY2Fs
ZS9mZWNfbWFpbi5jCkBAIC0xNjU1LDcgKzE2NTUsNyBAQCBzdGF0aWMgdm9pZCBmZWNfZ2V0X21h
YyhzdHJ1Y3QgbmV0X2RldmljZSAqbmRldikKIAkJc3RydWN0IGRldmljZV9ub2RlICpucCA9IGZl
cC0+cGRldi0+ZGV2Lm9mX25vZGU7CiAJCWlmIChucCkgewogCQkJY29uc3QgY2hhciAqbWFjID0g
b2ZfZ2V0X21hY19hZGRyZXNzKG5wKTsKLQkJCWlmIChtYWMpCisJCQlpZiAoIUlTX0VSUihtYWMp
KQogCQkJCWlhcCA9ICh1bnNpZ25lZCBjaGFyICopIG1hYzsKIAkJfQogCX0KZGlmZiAtLWdpdCBh
L2RyaXZlcnMvbmV0L2V0aGVybmV0L2ZyZWVzY2FsZS9mZWNfbXBjNTJ4eC5jIGIvZHJpdmVycy9u
ZXQvZXRoZXJuZXQvZnJlZXNjYWxlL2ZlY19tcGM1Mnh4LmMKaW5kZXggYzE5NjhiMy4uN2I3ZTUy
NiAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvZnJlZXNjYWxlL2ZlY19tcGM1Mnh4
LmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvZnJlZXNjYWxlL2ZlY19tcGM1Mnh4LmMKQEAg
LTkwMiw3ICs5MDIsNyBAQCBzdGF0aWMgaW50IG1wYzUyeHhfZmVjX3Byb2JlKHN0cnVjdCBwbGF0
Zm9ybV9kZXZpY2UgKm9wKQogCSAqIEZpcnN0IHRyeSB0byByZWFkIE1BQyBhZGRyZXNzIGZyb20g
RFQKIAkgKi8KIAltYWNfYWRkciA9IG9mX2dldF9tYWNfYWRkcmVzcyhucCk7Ci0JaWYgKG1hY19h
ZGRyKSB7CisJaWYgKCFJU19FUlIobWFjX2FkZHIpKSB7CiAJCW1lbWNweShuZGV2LT5kZXZfYWRk
ciwgbWFjX2FkZHIsIEVUSF9BTEVOKTsKIAl9IGVsc2UgewogCQlzdHJ1Y3QgbXBjNTJ4eF9mZWMg
X19pb21lbSAqZmVjID0gcHJpdi0+ZmVjOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJu
ZXQvZnJlZXNjYWxlL2ZtYW4vbWFjLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9mcmVlc2NhbGUv
Zm1hbi9tYWMuYwppbmRleCAzYzIxNDg2Li45Y2QyYzI4IDEwMDY0NAotLS0gYS9kcml2ZXJzL25l
dC9ldGhlcm5ldC9mcmVlc2NhbGUvZm1hbi9tYWMuYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5l
dC9mcmVlc2NhbGUvZm1hbi9tYWMuYwpAQCAtNzI0LDcgKzcyNCw3IEBAIHN0YXRpYyBpbnQgbWFj
X3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKl9vZl9kZXYpCiAKIAkvKiBHZXQgdGhlIE1B
QyBhZGRyZXNzICovCiAJbWFjX2FkZHIgPSBvZl9nZXRfbWFjX2FkZHJlc3MobWFjX25vZGUpOwot
CWlmICghbWFjX2FkZHIpIHsKKwlpZiAoSVNfRVJSKG1hY19hZGRyKSkgewogCQlkZXZfZXJyKGRl
diwgIm9mX2dldF9tYWNfYWRkcmVzcyglcE9GKSBmYWlsZWRcbiIsIG1hY19ub2RlKTsKIAkJZXJy
ID0gLUVJTlZBTDsKIAkJZ290byBfcmV0dXJuX29mX2dldF9wYXJlbnQ7CmRpZmYgLS1naXQgYS9k
cml2ZXJzL25ldC9ldGhlcm5ldC9mcmVlc2NhbGUvZnNfZW5ldC9mc19lbmV0LW1haW4uYyBiL2Ry
aXZlcnMvbmV0L2V0aGVybmV0L2ZyZWVzY2FsZS9mc19lbmV0L2ZzX2VuZXQtbWFpbi5jCmluZGV4
IDdjNTQ4ZWQuLjkwZWE3YTEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2ZyZWVz
Y2FsZS9mc19lbmV0L2ZzX2VuZXQtbWFpbi5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Zy
ZWVzY2FsZS9mc19lbmV0L2ZzX2VuZXQtbWFpbi5jCkBAIC0xMDE0LDcgKzEwMTQsNyBAQCBzdGF0
aWMgaW50IGZzX2VuZXRfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqb2ZkZXYpCiAJc3Bp
bl9sb2NrX2luaXQoJmZlcC0+dHhfbG9jayk7CiAKIAltYWNfYWRkciA9IG9mX2dldF9tYWNfYWRk
cmVzcyhvZmRldi0+ZGV2Lm9mX25vZGUpOwotCWlmIChtYWNfYWRkcikKKwlpZiAoIUlTX0VSUiht
YWNfYWRkcikpCiAJCW1lbWNweShuZGV2LT5kZXZfYWRkciwgbWFjX2FkZHIsIEVUSF9BTEVOKTsK
IAogCXJldCA9IGZlcC0+b3BzLT5hbGxvY2F0ZV9iZChuZGV2KTsKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvbmV0L2V0aGVybmV0L2ZyZWVzY2FsZS9naWFuZmFyLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5l
dC9mcmVlc2NhbGUvZ2lhbmZhci5jCmluZGV4IDQ1ZmNjOTYuLmRmMTNjNjkgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvbmV0L2V0aGVybmV0L2ZyZWVzY2FsZS9naWFuZmFyLmMKKysrIGIvZHJpdmVycy9u
ZXQvZXRoZXJuZXQvZnJlZXNjYWxlL2dpYW5mYXIuYwpAQCAtODcyLDcgKzg3Miw3IEBAIHN0YXRp
YyBpbnQgZ2Zhcl9vZl9pbml0KHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKm9mZGV2LCBzdHJ1Y3Qg
bmV0X2RldmljZSAqKnBkZXYpCiAKIAltYWNfYWRkciA9IG9mX2dldF9tYWNfYWRkcmVzcyhucCk7
CiAKLQlpZiAobWFjX2FkZHIpCisJaWYgKCFJU19FUlIobWFjX2FkZHIpKQogCQltZW1jcHkoZGV2
LT5kZXZfYWRkciwgbWFjX2FkZHIsIEVUSF9BTEVOKTsKIAogCWlmIChtb2RlbCAmJiAhc3RyY2Fz
ZWNtcChtb2RlbCwgIlRTRUMiKSkKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2Zy
ZWVzY2FsZS91Y2NfZ2V0aC5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvZnJlZXNjYWxlL3VjY19n
ZXRoLmMKaW5kZXggZWIzZTY1ZS4uMjE2ZTk5YSAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRo
ZXJuZXQvZnJlZXNjYWxlL3VjY19nZXRoLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvZnJl
ZXNjYWxlL3VjY19nZXRoLmMKQEAgLTM5MTAsNyArMzkxMCw3IEBAIHN0YXRpYyBpbnQgdWNjX2dl
dGhfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSogb2ZkZXYpCiAJfQogCiAJbWFjX2FkZHIg
PSBvZl9nZXRfbWFjX2FkZHJlc3MobnApOwotCWlmIChtYWNfYWRkcikKKwlpZiAoIUlTX0VSUiht
YWNfYWRkcikpCiAJCW1lbWNweShkZXYtPmRldl9hZGRyLCBtYWNfYWRkciwgRVRIX0FMRU4pOwog
CiAJdWdldGgtPnVnX2luZm8gPSB1Z19pbmZvOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRo
ZXJuZXQvaGlzaWxpY29uL2hpc2lfZmVtYWMuYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2hpc2ls
aWNvbi9oaXNpX2ZlbWFjLmMKaW5kZXggMmMyODA4OC4uOTZjMzJhZSAxMDA2NDQKLS0tIGEvZHJp
dmVycy9uZXQvZXRoZXJuZXQvaGlzaWxpY29uL2hpc2lfZmVtYWMuYworKysgYi9kcml2ZXJzL25l
dC9ldGhlcm5ldC9oaXNpbGljb24vaGlzaV9mZW1hYy5jCkBAIC04NzAsNyArODcwLDcgQEAgc3Rh
dGljIGludCBoaXNpX2ZlbWFjX2Rydl9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2
KQogCQkJICAgcGh5X21vZGVzKHBoeS0+aW50ZXJmYWNlKSk7CiAKIAltYWNfYWRkciA9IG9mX2dl
dF9tYWNfYWRkcmVzcyhub2RlKTsKLQlpZiAobWFjX2FkZHIpCisJaWYgKCFJU19FUlIobWFjX2Fk
ZHIpKQogCQlldGhlcl9hZGRyX2NvcHkobmRldi0+ZGV2X2FkZHIsIG1hY19hZGRyKTsKIAlpZiAo
IWlzX3ZhbGlkX2V0aGVyX2FkZHIobmRldi0+ZGV2X2FkZHIpKSB7CiAJCWV0aF9od19hZGRyX3Jh
bmRvbShuZGV2KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L2hpc2lsaWNvbi9o
aXg1aGQyX2dtYWMuYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2hpc2lsaWNvbi9oaXg1aGQyX2dt
YWMuYwppbmRleCBlNWQ4NTNiLi5iMWNiNThmIDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhl
cm5ldC9oaXNpbGljb24vaGl4NWhkMl9nbWFjLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQv
aGlzaWxpY29uL2hpeDVoZDJfZ21hYy5jCkBAIC0xMjI5LDcgKzEyMjksNyBAQCBzdGF0aWMgaW50
IGhpeDVoZDJfZGV2X3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCiAJfQogCiAJ
bWFjX2FkZHIgPSBvZl9nZXRfbWFjX2FkZHJlc3Mobm9kZSk7Ci0JaWYgKG1hY19hZGRyKQorCWlm
ICghSVNfRVJSKG1hY19hZGRyKSkKIAkJZXRoZXJfYWRkcl9jb3B5KG5kZXYtPmRldl9hZGRyLCBt
YWNfYWRkcik7CiAJaWYgKCFpc192YWxpZF9ldGhlcl9hZGRyKG5kZXYtPmRldl9hZGRyKSkgewog
CQlldGhfaHdfYWRkcl9yYW5kb20obmRldik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhl
cm5ldC9sYW50aXFfeHJ4MjAwLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9sYW50aXFfeHJ4MjAw
LmMKaW5kZXggZDI5MTA0ZC4uY2RhNjQxZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJu
ZXQvbGFudGlxX3hyeDIwMC5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L2xhbnRpcV94cngy
MDAuYwpAQCAtNDc4LDcgKzQ3OCw3IEBAIHN0YXRpYyBpbnQgeHJ4MjAwX3Byb2JlKHN0cnVjdCBw
bGF0Zm9ybV9kZXZpY2UgKnBkZXYpCiAJfQogCiAJbWFjID0gb2ZfZ2V0X21hY19hZGRyZXNzKG5w
KTsKLQlpZiAobWFjICYmIGlzX3ZhbGlkX2V0aGVyX2FkZHIobWFjKSkKKwlpZiAoIUlTX0VSUiht
YWMpKQogCQlldGhlcl9hZGRyX2NvcHkobmV0X2Rldi0+ZGV2X2FkZHIsIG1hYyk7CiAJZWxzZQog
CQlldGhfaHdfYWRkcl9yYW5kb20obmV0X2Rldik7CmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9l
dGhlcm5ldC9tYXJ2ZWxsL212NjQzeHhfZXRoLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9tYXJ2
ZWxsL212NjQzeHhfZXRoLmMKaW5kZXggMjkyYTY2OC4uMDdlMjU0ZiAxMDA2NDQKLS0tIGEvZHJp
dmVycy9uZXQvZXRoZXJuZXQvbWFydmVsbC9tdjY0M3h4X2V0aC5jCisrKyBiL2RyaXZlcnMvbmV0
L2V0aGVybmV0L21hcnZlbGwvbXY2NDN4eF9ldGguYwpAQCAtMjc0OSw3ICsyNzQ5LDcgQEAgc3Rh
dGljIGludCBtdjY0M3h4X2V0aF9zaGFyZWRfb2ZfYWRkX3BvcnQoc3RydWN0IHBsYXRmb3JtX2Rl
dmljZSAqcGRldiwKIAl9CiAKIAltYWNfYWRkciA9IG9mX2dldF9tYWNfYWRkcmVzcyhwbnApOwot
CWlmIChtYWNfYWRkcikKKwlpZiAoIUlTX0VSUihtYWNfYWRkcikpCiAJCW1lbWNweShwcGQubWFj
X2FkZHIsIG1hY19hZGRyLCBFVEhfQUxFTik7CiAKIAltdjY0M3h4X2V0aF9wcm9wZXJ0eShwbnAs
ICJ0eC1xdWV1ZS1zaXplIiwgcHBkLnR4X3F1ZXVlX3NpemUpOwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9uZXQvZXRoZXJuZXQvbWFydmVsbC9tdm5ldGEuYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L21h
cnZlbGwvbXZuZXRhLmMKaW5kZXggYzBhMzcxOC4uZjc3NzUxMCAxMDA2NDQKLS0tIGEvZHJpdmVy
cy9uZXQvZXRoZXJuZXQvbWFydmVsbC9tdm5ldGEuYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5l
dC9tYXJ2ZWxsL212bmV0YS5jCkBAIC00NTYzLDcgKzQ1NjMsNyBAQCBzdGF0aWMgaW50IG12bmV0
YV9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQogCX0KIAogCWR0X21hY19hZGRy
ID0gb2ZfZ2V0X21hY19hZGRyZXNzKGRuKTsKLQlpZiAoZHRfbWFjX2FkZHIpIHsKKwlpZiAoIUlT
X0VSUihkdF9tYWNfYWRkcikpIHsKIAkJbWFjX2Zyb20gPSAiZGV2aWNlIHRyZWUiOwogCQltZW1j
cHkoZGV2LT5kZXZfYWRkciwgZHRfbWFjX2FkZHIsIEVUSF9BTEVOKTsKIAl9IGVsc2UgewpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWFydmVsbC9weGExNjhfZXRoLmMgYi9kcml2
ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL3B4YTE2OF9ldGguYwppbmRleCAzNWYyMTQyLi4xMzNm
NWJlIDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL3B4YTE2OF9ldGgu
YworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL3B4YTE2OF9ldGguYwpAQCAtMTQ2
MSw3ICsxNDYxLDcgQEAgc3RhdGljIGludCBweGExNjhfZXRoX3Byb2JlKHN0cnVjdCBwbGF0Zm9y
bV9kZXZpY2UgKnBkZXYpCiAJaWYgKHBkZXYtPmRldi5vZl9ub2RlKQogCQltYWNfYWRkciA9IG9m
X2dldF9tYWNfYWRkcmVzcyhwZGV2LT5kZXYub2Zfbm9kZSk7CiAKLQlpZiAobWFjX2FkZHIgJiYg
aXNfdmFsaWRfZXRoZXJfYWRkcihtYWNfYWRkcikpIHsKKwlpZiAoIUlTX0VSUihtYWNfYWRkcikp
IHsKIAkJZXRoZXJfYWRkcl9jb3B5KGRldi0+ZGV2X2FkZHIsIG1hY19hZGRyKTsKIAl9IGVsc2Ug
ewogCQkvKiB0cnkgcmVhZGluZyB0aGUgbWFjIGFkZHJlc3MsIGlmIHNldCBieSB0aGUgYm9vdGxv
YWRlciAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWFydmVsbC9za3kyLmMg
Yi9kcml2ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL3NreTIuYwppbmRleCA4YjM0OTVlLi5jNDA1
MGVjIDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL3NreTIuYworKysg
Yi9kcml2ZXJzL25ldC9ldGhlcm5ldC9tYXJ2ZWxsL3NreTIuYwpAQCAtNDgwOCw3ICs0ODA4LDcg
QEAgc3RhdGljIHN0cnVjdCBuZXRfZGV2aWNlICpza3kyX2luaXRfbmV0ZGV2KHN0cnVjdCBza3ky
X2h3ICpodywgdW5zaWduZWQgcG9ydCwKIAkgKiAyKSBmcm9tIGludGVybmFsIHJlZ2lzdGVycyBz
ZXQgYnkgYm9vdGxvYWRlcgogCSAqLwogCWlhcCA9IG9mX2dldF9tYWNfYWRkcmVzcyhody0+cGRl
di0+ZGV2Lm9mX25vZGUpOwotCWlmIChpYXApCisJaWYgKCFJU19FUlIoaWFwKSkKIAkJbWVtY3B5
KGRldi0+ZGV2X2FkZHIsIGlhcCwgRVRIX0FMRU4pOwogCWVsc2UKIAkJbWVtY3B5X2Zyb21pbyhk
ZXYtPmRldl9hZGRyLCBody0+cmVncyArIEIyX01BQ18xICsgcG9ydCAqIDgsCmRpZmYgLS1naXQg
YS9kcml2ZXJzL25ldC9ldGhlcm5ldC9tZWRpYXRlay9tdGtfZXRoX3NvYy5jIGIvZHJpdmVycy9u
ZXQvZXRoZXJuZXQvbWVkaWF0ZWsvbXRrX2V0aF9zb2MuYwppbmRleCA1NDlkMzY0Li44MzA5ZGJi
IDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9tZWRpYXRlay9tdGtfZXRoX3NvYy5j
CisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L21lZGlhdGVrL210a19ldGhfc29jLmMKQEAgLTIw
MjcsNyArMjAyNyw3IEBAIHN0YXRpYyBpbnQgX19pbml0IG10a19pbml0KHN0cnVjdCBuZXRfZGV2
aWNlICpkZXYpCiAJY29uc3QgY2hhciAqbWFjX2FkZHI7CiAKIAltYWNfYWRkciA9IG9mX2dldF9t
YWNfYWRkcmVzcyhtYWMtPm9mX25vZGUpOwotCWlmIChtYWNfYWRkcikKKwlpZiAoIUlTX0VSUiht
YWNfYWRkcikpCiAJCWV0aGVyX2FkZHJfY29weShkZXYtPmRldl9hZGRyLCBtYWNfYWRkcik7CiAK
IAkvKiBJZiB0aGUgbWFjIGFkZHJlc3MgaXMgaW52YWxpZCwgdXNlIHJhbmRvbSBtYWMgYWRkcmVz
cyAgKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L21pY3JlbC9rczg4NTEuYyBi
L2RyaXZlcnMvbmV0L2V0aGVybmV0L21pY3JlbC9rczg4NTEuYwppbmRleCA3ODQ5MTE5Li5iNDQx
NzJhIDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9taWNyZWwva3M4ODUxLmMKKysr
IGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWljcmVsL2tzODg1MS5jCkBAIC00MjUsNyArNDI1LDcg
QEAgc3RhdGljIHZvaWQga3M4ODUxX2luaXRfbWFjKHN0cnVjdCBrczg4NTFfbmV0ICprcykKIAlj
b25zdCB1OCAqbWFjX2FkZHI7CiAKIAltYWNfYWRkciA9IG9mX2dldF9tYWNfYWRkcmVzcyhrcy0+
c3BpZGV2LT5kZXYub2Zfbm9kZSk7Ci0JaWYgKG1hY19hZGRyKSB7CisJaWYgKCFJU19FUlIobWFj
X2FkZHIpKSB7CiAJCW1lbWNweShkZXYtPmRldl9hZGRyLCBtYWNfYWRkciwgRVRIX0FMRU4pOwog
CQlrczg4NTFfd3JpdGVfbWFjX2FkZHIoZGV2KTsKIAkJcmV0dXJuOwpkaWZmIC0tZ2l0IGEvZHJp
dmVycy9uZXQvZXRoZXJuZXQvbWljcmVsL2tzODg1MV9tbGwuYyBiL2RyaXZlcnMvbmV0L2V0aGVy
bmV0L21pY3JlbC9rczg4NTFfbWxsLmMKaW5kZXggYzk0Njg0MS4uZGM3NmIwZCAxMDA2NDQKLS0t
IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWljcmVsL2tzODg1MV9tbGwuYworKysgYi9kcml2ZXJz
L25ldC9ldGhlcm5ldC9taWNyZWwva3M4ODUxX21sbC5jCkBAIC0xMzI3LDcgKzEzMjcsNyBAQCBz
dGF0aWMgaW50IGtzODg1MV9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQogCS8q
IG92ZXJ3cml0aW5nIHRoZSBkZWZhdWx0IE1BQyBhZGRyZXNzICovCiAJaWYgKHBkZXYtPmRldi5v
Zl9ub2RlKSB7CiAJCW1hYyA9IG9mX2dldF9tYWNfYWRkcmVzcyhwZGV2LT5kZXYub2Zfbm9kZSk7
Ci0JCWlmIChtYWMpCisJCWlmICghSVNfRVJSKG1hYykpCiAJCQltZW1jcHkoa3MtPm1hY19hZGRy
LCBtYWMsIEVUSF9BTEVOKTsKIAl9IGVsc2UgewogCQlzdHJ1Y3Qga3M4ODUxX21sbF9wbGF0Zm9y
bV9kYXRhICpwZGF0YTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L21pY3JvY2hp
cC9lbmMyOGo2MC5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWljcm9jaGlwL2VuYzI4ajYwLmMK
aW5kZXggOGY3MjU4Ny4uZDU1NTNlMiAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQv
bWljcm9jaGlwL2VuYzI4ajYwLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvbWljcm9jaGlw
L2VuYzI4ajYwLmMKQEAgLTE1ODgsNyArMTU4OCw3IEBAIHN0YXRpYyBpbnQgZW5jMjhqNjBfcHJv
YmUoc3RydWN0IHNwaV9kZXZpY2UgKnNwaSkKIAl9CiAKIAltYWNhZGRyID0gb2ZfZ2V0X21hY19h
ZGRyZXNzKHNwaS0+ZGV2Lm9mX25vZGUpOwotCWlmIChtYWNhZGRyKQorCWlmICghSVNfRVJSKG1h
Y2FkZHIpKQogCQlldGhlcl9hZGRyX2NvcHkoZGV2LT5kZXZfYWRkciwgbWFjYWRkcik7CiAJZWxz
ZQogCQlldGhfaHdfYWRkcl9yYW5kb20oZGV2KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0
aGVybmV0L254cC9scGNfZXRoLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9ueHAvbHBjX2V0aC5j
CmluZGV4IDg5ZDE3MzkuLmRhMTM4ZWQgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0
L254cC9scGNfZXRoLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvbnhwL2xwY19ldGguYwpA
QCAtMTM2OCw3ICsxMzY4LDcgQEAgc3RhdGljIGludCBscGNfZXRoX2Rydl9wcm9iZShzdHJ1Y3Qg
cGxhdGZvcm1fZGV2aWNlICpwZGV2KQogCiAJaWYgKCFpc192YWxpZF9ldGhlcl9hZGRyKG5kZXYt
PmRldl9hZGRyKSkgewogCQljb25zdCBjaGFyICptYWNhZGRyID0gb2ZfZ2V0X21hY19hZGRyZXNz
KG5wKTsKLQkJaWYgKG1hY2FkZHIpCisJCWlmICghSVNfRVJSKG1hY2FkZHIpKQogCQkJbWVtY3B5
KG5kZXYtPmRldl9hZGRyLCBtYWNhZGRyLCBFVEhfQUxFTik7CiAJfQogCWlmICghaXNfdmFsaWRf
ZXRoZXJfYWRkcihuZGV2LT5kZXZfYWRkcikpCmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhl
cm5ldC9xdWFsY29tbS9xY2Ffc3BpLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9xdWFsY29tbS9x
Y2Ffc3BpLmMKaW5kZXggOTdmOTI5NS4uYjI4MzYwYiAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQv
ZXRoZXJuZXQvcXVhbGNvbW0vcWNhX3NwaS5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L3F1
YWxjb21tL3FjYV9zcGkuYwpAQCAtOTY2LDcgKzk2Niw3IEBACiAKIAltYWMgPSBvZl9nZXRfbWFj
X2FkZHJlc3Moc3BpLT5kZXYub2Zfbm9kZSk7CiAKLQlpZiAobWFjKQorCWlmICghSVNfRVJSKG1h
YykpCiAJCWV0aGVyX2FkZHJfY29weShxY2EtPm5ldF9kZXYtPmRldl9hZGRyLCBtYWMpOwogCiAJ
aWYgKCFpc192YWxpZF9ldGhlcl9hZGRyKHFjYS0+bmV0X2Rldi0+ZGV2X2FkZHIpKSB7CmRpZmYg
LS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9xdWFsY29tbS9xY2FfdWFydC5jIGIvZHJpdmVy
cy9uZXQvZXRoZXJuZXQvcXVhbGNvbW0vcWNhX3VhcnQuYwppbmRleCBkYjYwNjhjLi41OTA2MTY4
IDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC9xdWFsY29tbS9xY2FfdWFydC5jCisr
KyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L3F1YWxjb21tL3FjYV91YXJ0LmMKQEAgLTM1MSw3ICsz
NTEsNyBAQCBzdGF0aWMgaW50IHFjYV91YXJ0X3Byb2JlKHN0cnVjdCBzZXJkZXZfZGV2aWNlICpz
ZXJkZXYpCiAKIAltYWMgPSBvZl9nZXRfbWFjX2FkZHJlc3Moc2VyZGV2LT5kZXYub2Zfbm9kZSk7
CiAKLQlpZiAobWFjKQorCWlmICghSVNfRVJSKG1hYykpCiAJCWV0aGVyX2FkZHJfY29weShxY2Et
Pm5ldF9kZXYtPmRldl9hZGRyLCBtYWMpOwogCiAJaWYgKCFpc192YWxpZF9ldGhlcl9hZGRyKHFj
YS0+bmV0X2Rldi0+ZGV2X2FkZHIpKSB7CmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9ldGhlcm5l
dC9yZW5lc2FzL3JhdmJfbWFpbi5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvcmVuZXNhcy9yYXZi
X21haW4uYwppbmRleCA4MTU0YjM4Li4wYzBkY2Y4IDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9l
dGhlcm5ldC9yZW5lc2FzL3JhdmJfbWFpbi5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L3Jl
bmVzYXMvcmF2Yl9tYWluLmMKQEAgLTExMSw3ICsxMTEsNyBAQCBzdGF0aWMgdm9pZCByYXZiX3Nl
dF9idWZmZXJfYWxpZ24oc3RydWN0IHNrX2J1ZmYgKnNrYikKICAqLwogc3RhdGljIHZvaWQgcmF2
Yl9yZWFkX21hY19hZGRyZXNzKHN0cnVjdCBuZXRfZGV2aWNlICpuZGV2LCBjb25zdCB1OCAqbWFj
KQogewotCWlmIChtYWMpIHsKKwlpZiAoIUlTX0VSUihtYWMpKSB7CiAJCWV0aGVyX2FkZHJfY29w
eShuZGV2LT5kZXZfYWRkciwgbWFjKTsKIAl9IGVsc2UgewogCQl1MzIgbWFociA9IHJhdmJfcmVh
ZChuZGV2LCBNQUhSKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L3JlbmVzYXMv
c2hfZXRoLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9yZW5lc2FzL3NoX2V0aC5jCmluZGV4IGUz
M2FmMzcuLjRkNGJlNjYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L3JlbmVzYXMv
c2hfZXRoLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvcmVuZXNhcy9zaF9ldGguYwpAQCAt
MzE5Myw3ICszMTkzLDcgQEAgc3RhdGljIHN0cnVjdCBzaF9ldGhfcGxhdF9kYXRhICpzaF9ldGhf
cGFyc2VfZHQoc3RydWN0IGRldmljZSAqZGV2KQogCXBkYXRhLT5waHlfaW50ZXJmYWNlID0gcmV0
OwogCiAJbWFjX2FkZHIgPSBvZl9nZXRfbWFjX2FkZHJlc3MobnApOwotCWlmIChtYWNfYWRkcikK
KwlpZiAoIUlTX0VSUihtYWNfYWRkcikpCiAJCW1lbWNweShwZGF0YS0+bWFjX2FkZHIsIG1hY19h
ZGRyLCBFVEhfQUxFTik7CiAKIAlwZGF0YS0+bm9fZXRoZXJfbGluayA9CmRpZmYgLS1naXQgYS9k
cml2ZXJzL25ldC9ldGhlcm5ldC9zYW1zdW5nL3N4Z2JlL3N4Z2JlX3BsYXRmb3JtLmMgYi9kcml2
ZXJzL25ldC9ldGhlcm5ldC9zYW1zdW5nL3N4Z2JlL3N4Z2JlX3BsYXRmb3JtLmMKaW5kZXggZmJk
MDBjYi4uM2VjZDRjZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvc2Ftc3VuZy9z
eGdiZS9zeGdiZV9wbGF0Zm9ybS5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L3NhbXN1bmcv
c3hnYmUvc3hnYmVfcGxhdGZvcm0uYwpAQCAtMTI0LDcgKzEyNCw3IEBAIHN0YXRpYyBpbnQgc3hn
YmVfcGxhdGZvcm1fcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKIAl9CiAKIAkv
KiBHZXQgTUFDIGFkZHJlc3MgaWYgYXZhaWxhYmxlIChEVCkgKi8KLQlpZiAobWFjKQorCWlmICgh
SVNfRVJSKG1hYykpCiAJCWV0aGVyX2FkZHJfY29weShwcml2LT5kZXYtPmRldl9hZGRyLCBtYWMp
OwogCiAJLyogR2V0IHRoZSBUWC9SWCBJUlEgbnVtYmVycyAqLwpkaWZmIC0tZ2l0IGEvZHJpdmVy
cy9uZXQvZXRoZXJuZXQvc29jaW9uZXh0L3NuaV9hdmUuYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0
L3NvY2lvbmV4dC9zbmlfYXZlLmMKaW5kZXggYmI2ZDVmYi4uNTFhN2I0OCAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9uZXQvZXRoZXJuZXQvc29jaW9uZXh0L3NuaV9hdmUuYworKysgYi9kcml2ZXJzL25l
dC9ldGhlcm5ldC9zb2Npb25leHQvc25pX2F2ZS5jCkBAIC0xNTk5LDcgKzE1OTksNyBAQCBzdGF0
aWMgaW50IGF2ZV9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQogCW5kZXYtPm1h
eF9tdHUgPSBBVkVfTUFYX0VUSEZSQU1FIC0gKEVUSF9ITEVOICsgRVRIX0ZDU19MRU4pOwogCiAJ
bWFjX2FkZHIgPSBvZl9nZXRfbWFjX2FkZHJlc3MobnApOwotCWlmIChtYWNfYWRkcikKKwlpZiAo
IUlTX0VSUihtYWNfYWRkcikpCiAJCWV0aGVyX2FkZHJfY29weShuZGV2LT5kZXZfYWRkciwgbWFj
X2FkZHIpOwogCiAJLyogaWYgdGhlIG1hYyBhZGRyZXNzIGlzIGludmFsaWQsIHVzZSByYW5kb20g
bWFjIGFkZHJlc3MgKi8KZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L3N0bWljcm8v
c3RtbWFjL3N0bW1hY19tYWluLmMgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC9zdG1pY3JvL3N0bW1h
Yy9zdG1tYWNfbWFpbi5jCmluZGV4IDQ4NzEyNDMuLjFiZTBhOWQgMTAwNjQ0Ci0tLSBhL2RyaXZl
cnMvbmV0L2V0aGVybmV0L3N0bWljcm8vc3RtbWFjL3N0bW1hY19tYWluLmMKKysrIGIvZHJpdmVy
cy9uZXQvZXRoZXJuZXQvc3RtaWNyby9zdG1tYWMvc3RtbWFjX21haW4uYwpAQCAtNDI2Miw3ICs0
MjYyLDcgQEAgaW50IHN0bW1hY19kdnJfcHJvYmUoc3RydWN0IGRldmljZSAqZGV2aWNlLAogCXBy
aXYtPndvbF9pcnEgPSByZXMtPndvbF9pcnE7CiAJcHJpdi0+bHBpX2lycSA9IHJlcy0+bHBpX2ly
cTsKIAotCWlmIChyZXMtPm1hYykKKwlpZiAoIUlTX0VSUihyZXMtPm1hYykpCiAJCW1lbWNweShw
cml2LT5kZXYtPmRldl9hZGRyLCByZXMtPm1hYywgRVRIX0FMRU4pOwogCiAJZGV2X3NldF9kcnZk
YXRhKGRldmljZSwgcHJpdi0+ZGV2KTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0
L3RpL2Nwc3cuYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L3RpL2Nwc3cuYwppbmRleCBhNTkxNTgz
Li45NjU4YTU1IDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC90aS9jcHN3LmMKKysr
IGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvdGkvY3Bzdy5jCkBAIC0zMzQ0LDcgKzMzNDQsNyBAQCBz
dGF0aWMgaW50IGNwc3dfcHJvYmVfZHQoc3RydWN0IGNwc3dfcGxhdGZvcm1fZGF0YSAqZGF0YSwK
IAogbm9fcGh5X3NsYXZlOgogCQltYWNfYWRkciA9IG9mX2dldF9tYWNfYWRkcmVzcyhzbGF2ZV9u
b2RlKTsKLQkJaWYgKG1hY19hZGRyKSB7CisJCWlmICghSVNfRVJSKG1hY19hZGRyKSkgewogCQkJ
bWVtY3B5KHNsYXZlX2RhdGEtPm1hY19hZGRyLCBtYWNfYWRkciwgRVRIX0FMRU4pOwogCQl9IGVs
c2UgewogCQkJcmV0ID0gdGlfY21fZ2V0X21hY2lkKCZwZGV2LT5kZXYsIGksCmRpZmYgLS1naXQg
YS9kcml2ZXJzL25ldC9ldGhlcm5ldC90aS9uZXRjcF9jb3JlLmMgYi9kcml2ZXJzL25ldC9ldGhl
cm5ldC90aS9uZXRjcF9jb3JlLmMKaW5kZXggZDg0N2Y2Ny4uZTkyNWNlMyAxMDA2NDQKLS0tIGEv
ZHJpdmVycy9uZXQvZXRoZXJuZXQvdGkvbmV0Y3BfY29yZS5jCisrKyBiL2RyaXZlcnMvbmV0L2V0
aGVybmV0L3RpL25ldGNwX2NvcmUuYwpAQCAtMjA0NSw3ICsyMDQ1LDcgQEAgc3RhdGljIGludCBu
ZXRjcF9jcmVhdGVfaW50ZXJmYWNlKHN0cnVjdCBuZXRjcF9kZXZpY2UgKm5ldGNwX2RldmljZSwK
IAkJZGV2bV9yZWxlYXNlX21lbV9yZWdpb24oZGV2LCByZXMuc3RhcnQsIHNpemUpOwogCX0gZWxz
ZSB7CiAJCW1hY19hZGRyID0gb2ZfZ2V0X21hY19hZGRyZXNzKG5vZGVfaW50ZXJmYWNlKTsKLQkJ
aWYgKG1hY19hZGRyKQorCQlpZiAoIUlTX0VSUihtYWNfYWRkcikpCiAJCQlldGhlcl9hZGRyX2Nv
cHkobmRldi0+ZGV2X2FkZHIsIG1hY19hZGRyKTsKIAkJZWxzZQogCQkJZXRoX3JhbmRvbV9hZGRy
KG5kZXYtPmRldl9hZGRyKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L2V0aGVybmV0L3dpem5l
dC93NTEwMC5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvd2l6bmV0L3c1MTAwLmMKaW5kZXggZDhi
YTUxMi4uNjIxMTIwYiAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvZXRoZXJuZXQvd2l6bmV0L3c1
MTAwLmMKKysrIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQvd2l6bmV0L3c1MTAwLmMKQEAgLTExNjQs
NyArMTE2NCw3IEBAIGludCB3NTEwMF9wcm9iZShzdHJ1Y3QgZGV2aWNlICpkZXYsIGNvbnN0IHN0
cnVjdCB3NTEwMF9vcHMgKm9wcywKIAlJTklUX1dPUksoJnByaXYtPnNldHJ4X3dvcmssIHc1MTAw
X3NldHJ4X3dvcmspOwogCUlOSVRfV09SSygmcHJpdi0+cmVzdGFydF93b3JrLCB3NTEwMF9yZXN0
YXJ0X3dvcmspOwogCi0JaWYgKG1hY19hZGRyKQorCWlmICghSVNfRVJSKG1hY19hZGRyKSkKIAkJ
bWVtY3B5KG5kZXYtPmRldl9hZGRyLCBtYWNfYWRkciwgRVRIX0FMRU4pOwogCWVsc2UKIAkJZXRo
X2h3X2FkZHJfcmFuZG9tKG5kZXYpOwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQv
eGlsaW54L2xsX3RlbWFjX21haW4uYyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L3hpbGlueC9sbF90
ZW1hY19tYWluLmMKaW5kZXggNDRlZmZmYi4uNDQ4NDZhYyAxMDA2NDQKLS0tIGEvZHJpdmVycy9u
ZXQvZXRoZXJuZXQveGlsaW54L2xsX3RlbWFjX21haW4uYworKysgYi9kcml2ZXJzL25ldC9ldGhl
cm5ldC94aWxpbngvbGxfdGVtYWNfbWFpbi5jCkBAIC0xMDc3LDcgKzEwNzcsNyBAQCBzdGF0aWMg
aW50IHRlbWFjX29mX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKm9wKQogCiAJLyogUmV0
cmlldmUgdGhlIE1BQyBhZGRyZXNzICovCiAJYWRkciA9IG9mX2dldF9tYWNfYWRkcmVzcyhvcC0+
ZGV2Lm9mX25vZGUpOwotCWlmICghYWRkcikgeworCWlmIChJU19FUlIoYWRkcikpIHsKIAkJZGV2
X2Vycigmb3AtPmRldiwgImNvdWxkIG5vdCBmaW5kIE1BQyBhZGRyZXNzXG4iKTsKIAkJcmMgPSAt
RU5PREVWOwogCQlnb3RvIGVycl9pb3VubWFwXzI7CmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9l
dGhlcm5ldC94aWxpbngveGlsaW54X2F4aWVuZXRfbWFpbi5jIGIvZHJpdmVycy9uZXQvZXRoZXJu
ZXQveGlsaW54L3hpbGlueF9heGllbmV0X21haW4uYwppbmRleCA0MDQxYzc1Li4xMDhmYmM3IDEw
MDY0NAotLS0gYS9kcml2ZXJzL25ldC9ldGhlcm5ldC94aWxpbngveGlsaW54X2F4aWVuZXRfbWFp
bi5jCisrKyBiL2RyaXZlcnMvbmV0L2V0aGVybmV0L3hpbGlueC94aWxpbnhfYXhpZW5ldF9tYWlu
LmMKQEAgLTE1OTYsNyArMTU5Niw3IEBAIHN0YXRpYyBpbnQgYXhpZW5ldF9wcm9iZShzdHJ1Y3Qg
cGxhdGZvcm1fZGV2aWNlICpwZGV2KQogCiAJLyogUmV0cmlldmUgdGhlIE1BQyBhZGRyZXNzICov
CiAJbWFjX2FkZHIgPSBvZl9nZXRfbWFjX2FkZHJlc3MocGRldi0+ZGV2Lm9mX25vZGUpOwotCWlm
ICghbWFjX2FkZHIpIHsKKwlpZiAoSVNfRVJSKG1hY19hZGRyKSkgewogCQlkZXZfZXJyKCZwZGV2
LT5kZXYsICJjb3VsZCBub3QgZmluZCBNQUMgYWRkcmVzc1xuIik7CiAJCWdvdG8gZnJlZV9uZXRk
ZXY7CiAJfQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvZXRoZXJuZXQveGlsaW54L3hpbGlueF9l
bWFjbGl0ZS5jIGIvZHJpdmVycy9uZXQvZXRoZXJuZXQveGlsaW54L3hpbGlueF9lbWFjbGl0ZS5j
CmluZGV4IGIwM2E0MTcuLjIzNzZiZWUgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L2V0aGVybmV0
L3hpbGlueC94aWxpbnhfZW1hY2xpdGUuYworKysgYi9kcml2ZXJzL25ldC9ldGhlcm5ldC94aWxp
bngveGlsaW54X2VtYWNsaXRlLmMKQEAgLTExNDMsNyArMTE0Myw3IEBAIHN0YXRpYyBpbnQgeGVt
YWNsaXRlX29mX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKm9mZGV2KQogCWxwLT5yeF9w
aW5nX3BvbmcgPSBnZXRfYm9vbChvZmRldiwgInhsbngscngtcGluZy1wb25nIik7CiAJbWFjX2Fk
ZHJlc3MgPSBvZl9nZXRfbWFjX2FkZHJlc3Mob2ZkZXYtPmRldi5vZl9ub2RlKTsKIAotCWlmICht
YWNfYWRkcmVzcykgeworCWlmICghSVNfRVJSKG1hY19hZGRyZXNzKSkgewogCQkvKiBTZXQgdGhl
IE1BQyBhZGRyZXNzLiAqLwogCQltZW1jcHkobmRldi0+ZGV2X2FkZHIsIG1hY19hZGRyZXNzLCBF
VEhfQUxFTik7CiAJfSBlbHNlIHsKZGlmZiAtLWdpdCBhL25ldC9ldGhlcm5ldC9ldGguYyBiL25l
dC9ldGhlcm5ldC9ldGguYwppbmRleCBmN2EzZDdhLi5jYjU1YmI3IDEwMDY0NAotLS0gYS9uZXQv
ZXRoZXJuZXQvZXRoLmMKKysrIGIvbmV0L2V0aGVybmV0L2V0aC5jCkBAIC01NTQsNyArNTU0LDcg
QEAgaW50IGV0aF9wbGF0Zm9ybV9nZXRfbWFjX2FkZHJlc3Moc3RydWN0IGRldmljZSAqZGV2LCB1
OCAqbWFjX2FkZHIpCiAJYWRkciA9IE5VTEw7CiAJaWYgKGRwKQogCQlhZGRyID0gb2ZfZ2V0X21h
Y19hZGRyZXNzKGRwKTsKLQlpZiAoIWFkZHIpCisJaWYgKElTX0VSUihhZGRyKSkKIAkJYWRkciA9
IGFyY2hfZ2V0X3BsYXRmb3JtX21hY19hZGRyZXNzKCk7CiAKIAlpZiAoIWFkZHIpCi0tIAoxLjku
MQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KTGludXgt
c3RtMzIgbWFpbGluZyBsaXN0CkxpbnV4LXN0bTMyQHN0LW1kLW1haWxtYW4uc3Rvcm1yZXBseS5j
b20KaHR0cHM6Ly9zdC1tZC1tYWlsbWFuLnN0b3JtcmVwbHkuY29tL21haWxtYW4vbGlzdGluZm8v
bGludXgtc3RtMzIK
