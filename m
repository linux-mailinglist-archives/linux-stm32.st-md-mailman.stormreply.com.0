Return-Path: <linux-stm32-bounces@st-md-mailman.stormreply.com>
X-Original-To: lists+linux-stm32@lfdr.de
Delivered-To: lists+linux-stm32@lfdr.de
Received: from stm-ict-prod-mailman-01.stormreply.prv (st-md-mailman.stormreply.com [52.209.6.89])
	by mail.lfdr.de (Postfix) with ESMTPS id 22EB4A6D7E9
	for <lists+linux-stm32@lfdr.de>; Mon, 24 Mar 2025 11:00:28 +0100 (CET)
Received: from ip-172-31-3-47.eu-west-1.compute.internal (localhost [127.0.0.1])
	by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTP id D2BD3C78F67;
	Mon, 24 Mar 2025 10:00:27 +0000 (UTC)
Received: from mail-wr1-f53.google.com (mail-wr1-f53.google.com
 [209.85.221.53])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTPS id 47B31C78F65
 for <linux-stm32@st-md-mailman.stormreply.com>;
 Mon, 24 Mar 2025 10:00:27 +0000 (UTC)
Received: by mail-wr1-f53.google.com with SMTP id
 ffacd0b85a97d-3995ff6b066so2349489f8f.3
 for <linux-stm32@st-md-mailman.stormreply.com>;
 Mon, 24 Mar 2025 03:00:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=linaro.org; s=google; t=1742810427; x=1743415227;
 darn=st-md-mailman.stormreply.com; 
 h=content-transfer-encoding:mime-version:references:in-reply-to
 :message-id:date:subject:cc:to:from:from:to:cc:subject:date
 :message-id:reply-to;
 bh=/FmjOPqcaSgOCi/9ya/DEiNHkW/DQmRDIocf1JDp9+8=;
 b=nZXLtpSo5IEpNcTqMFmSGWUsPbgC0Ms72NLyiUtfD6gH/qLcPK7YVpArhw1QkDVXkS
 ckZlBE5IuS+5P/xFHYivEmskMstw4fxnrQs43sHR5nfrxBquULTBsv3fQ6vgtDA3MZYQ
 iSgZN/zIzv4T7OOsjyLXJcEoQ+qsnqXxhVE1775oAHn9qEuASX+JD6MHkeERmRuMb9hh
 IkiPGNeIa4xZES8H3xOd3DeUKQggcSKhiGciGFwM9zonYd0/EN8vPo00DjnQUGgProkF
 p99qdpMsW8YFY2V29jNgRH9zwxkTQkhNm4wjKOQWtFAnURO4Wsxd5e7JLlYXFugJ7pJP
 kh0w==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20230601; t=1742810427; x=1743415227;
 h=content-transfer-encoding:mime-version:references:in-reply-to
 :message-id:date:subject:cc:to:from:x-gm-message-state:from:to:cc
 :subject:date:message-id:reply-to;
 bh=/FmjOPqcaSgOCi/9ya/DEiNHkW/DQmRDIocf1JDp9+8=;
 b=wzWZdBNr9Jxodl5NG/porNPaIAx/igZFK+aVRYt0o+echAVKW1jO9LnPwqrjPicIJw
 Cdwrl6QRtzZhFfAy3vqcoTLD8r0qY/9+7vhGceB8ObKut3BWRo0tbfGFxwNgTXnN4fwx
 qXSuGlUepNH37rwjJH0OZmSC9uJaL0yhUyQTrxK8SZ48GzIjHDarA9FF64NKXd8/SAc9
 cAV+Ypre49rZHVhlgvRLxyPNo3NYFbdwzBCfec2Sth5V0SIkHFXXIV5LEKkWQww4exmk
 x40QmAegUWFy3mjVcRHPDOhcK4IlowRyGNkycJKKck9oODfOWXfDooZsHW1kxmi3yFuv
 bADg==
X-Forwarded-Encrypted: i=1;
 AJvYcCXc81b3YeEWvqq/8ZD5Ni6o5k+zqIGbdeiEPjHiSY7oefxpHVK5amRMiohztHmyaWVOnBxnjxNOjnQXsA==@st-md-mailman.stormreply.com
X-Gm-Message-State: AOJu0YzAOl32c1X/vAONFQ4QhRfcMOUTaY+/HHFICx51f7VPoOA8xpSB
 AaZC9IALRrUgF/df35mBQL9nzQGuu6wIPfNnTMGvwGtydQkY9s3t5t2dS0ZCwKk=
X-Gm-Gg: ASbGncviXRO8PWhqEQnqktXB8l9Ztdx8mdNrp7Jy0guWfoc4vmhZ1hAwSmTk2ZmPuk9
 1vLqDuThi8DE3dpM4cDwHkgjeFcZHRYS6szwgoKdR2WYzcW0i7mR3QCcqdnunc4Th9+dmc50uCS
 zM1UqY2CcvdZte7M3EU0EUnanvzfk/0Dch6g2am8wpcIQGFnKjJ7ckkvbOqjj5NJLT88o+aZ+xU
 6G/jelDJR29tV+dKC+OtSWmSXrGSmhl/M3S3V/W+FOxVTgmB+fyE0EHlIT6llQzoPf3bE9B/YhM
 RhCeCo4DoW8yIr9f0KNS8pqU95UOMz3dFpgx2ZXBtJakS9kI90RlfXBMBAf1AQtXq/5sJII=
X-Google-Smtp-Source: AGHT+IGVcrLVHoOTq4/wluY4r9/7ywY6Fvcgq3Q6i6IZAu6RWwf0g5/FYB/5JvHPK57ITvhCpfeXbw==
X-Received: by 2002:a5d:5846:0:b0:391:4559:8761 with SMTP id
 ffacd0b85a97d-3997f94da30mr9523006f8f.36.1742810426550; 
 Mon, 24 Mar 2025 03:00:26 -0700 (PDT)
Received: from mai.. (146725694.box.freepro.com. [130.180.211.218])
 by smtp.gmail.com with ESMTPSA id
 ffacd0b85a97d-3997f995611sm10625933f8f.15.2025.03.24.03.00.25
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Mon, 24 Mar 2025 03:00:26 -0700 (PDT)
From: Daniel Lezcano <daniel.lezcano@linaro.org>
To: daniel.lezcano@linaro.org,
	tglx@linutronix.de
Date: Mon, 24 Mar 2025 11:00:06 +0100
Message-ID: <20250324100008.346009-2-daniel.lezcano@linaro.org>
X-Mailer: git-send-email 2.43.0
In-Reply-To: <20250324100008.346009-1-daniel.lezcano@linaro.org>
References: <20250324100008.346009-1-daniel.lezcano@linaro.org>
MIME-Version: 1.0
Cc: "moderated list:ARM/STM32 ARCHITECTURE"
 <linux-stm32@st-md-mailman.stormreply.com>,
 Larisa Grigore <Larisa.Grigore@nxp.com>, linux-kernel@vger.kernel.org,
 Maxime Coquelin <mcoquelin.stm32@gmail.com>,
 Thomas Fossati <thomas.fossati@linaro.org>,
 Ghennadi Procopciuc <ghennadi.procopciuc@nxp.com>,
 "moderated list:ARM/STM32 ARCHITECTURE" <linux-arm-kernel@lists.infradead.org>
Subject: [Linux-stm32] [PATCH 2/2] clocksource/drivers/nxp-timer: Add the
	System Timer Module for the s32g platform
X-BeenThere: linux-stm32@st-md-mailman.stormreply.com
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: <linux-stm32.st-md-mailman.stormreply.com>
List-Unsubscribe: <https://st-md-mailman.stormreply.com/mailman/options/linux-stm32>, 
 <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=unsubscribe>
List-Archive: <http://st-md-mailman.stormreply.com/pipermail/linux-stm32/>
List-Post: <mailto:linux-stm32@st-md-mailman.stormreply.com>
List-Help: <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=help>
List-Subscribe: <https://st-md-mailman.stormreply.com/mailman/listinfo/linux-stm32>, 
 <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linux-stm32-bounces@st-md-mailman.stormreply.com
Sender: "Linux-stm32" <linux-stm32-bounces@st-md-mailman.stormreply.com>

U1RNIHN1cHBvcnRzIGNvbW1vbmx5IHJlcXVpcmVkIHN5c3RlbSBhbmQgYXBwbGljYXRpb24gc29m
dHdhcmUgdGltaW5nCmZ1bmN0aW9ucy4gU1RNIGluY2x1ZGVzIGEgMzItYml0IGNvdW50LXVwIHRp
bWVyIGFuZCBmb3VyIDMyLWJpdApjb21wYXJlIGNoYW5uZWxzIHdpdGggYSBzZXBhcmF0ZSBpbnRl
cnJ1cHQgc291cmNlIGZvciBlYWNoCmNoYW5uZWwuIFRoZSB0aW1lciBpcyBkcml2ZW4gYnkgdGhl
IFNUTSBtb2R1bGUgY2xvY2sgZGl2aWRlZCBieSBhbgo4LWJpdCBwcmVzY2FsZSB2YWx1ZSAoMSB0
byAyNTYpLgoKU1RNIGhhcyB0aGUgZm9sbG93aW5nIGZlYXR1cmVzOgogICAg4oCiIE9uZSAzMi1i
aXQgY291bnQtdXAgdGltZXIgd2l0aCBhbiA4LWJpdCBwcmVzY2FsZXIKICAgIOKAoiBGb3VyIDMy
LWJpdCBjb21wYXJlIGNoYW5uZWxzCiAgICDigKIgQW4gaW5kZXBlbmRlbnQgaW50ZXJydXB0IHNv
dXJjZSBmb3IgZWFjaCBjaGFubmVsCiAgICDigKIgQWJpbGl0eSB0byBzdG9wIHRoZSB0aW1lciBp
biBEZWJ1ZyBtb2RlCgpUaGUgczMyZyBwbGF0Zm9ybSBpcyBkZWNsaW5lZCBpbnRvIHR3byB2ZXJz
aW9ucywgdGhlIHMzMmcyIGFuZCB0aGUKczMyZzMuIFRoZSBmb3JtZXIgaGFzIGEgU1RNIGJsb2Nr
IHdpdGggOCB0aW1lcnMgYW5kIHRoZSBsYXR0ZXIgaGFzIDEyCnRpbWVycy4KClRoZXJlIGlzIGEg
c3BlY2lhbCBTVE0gaW5zdGFuY2UgY2FsbGVkIFNUTV9UUyB3aGljaCBpcyBkZWRpY2F0ZWQgdG8K
dGhlIHRpbWVzdGFtcC4gVGhlIDd0aCBTVE0gaW5zdGFuY2UgU1RNXzA3IGlzIGRpcmVjdGx5IHRp
ZWQgdG8gdGhlClNUTV9UUyB3aGljaCBtZWFucyBpdCBpcyBub3QgdXNhYmxlIGFzIGEgY2xvY2tl
dmVudC4KClRoaXMgZHJpdmVyIHByb3ZpZGVzIHRoZSBjb3JlIGNvZGUgdG8gc3VwcG9ydCBib3Ro
IHBsYXRmb3JtIGJ1dCBvbmx5CnRoZSBzMzJnMiBpcyBjb25maWd1cmVkLiBBZGRpbmcgdGhlIHMz
MmczIFNUTSBzdXBwb3J0IGlzCnN0cmFpZ2hmb3J3YXJkLgoKVGhlIGZpcnN0IHByb2JlZCBTVE0g
aXMgdXNlZCBhcyBhIGNsb2Nrc291cmNlLCB0aGUgc2Vjb25kIHdpbGwgYmUgdGhlCmJyb2FkY2Fz
dCB0aW1lciBhbmQgdGhlIHJlc3QgYXJlIHVzZWQgYXMgYSBjbG9ja2V2ZW50IHdpdGggdGhlCmFm
ZmluaXR5IHNldCB0byBhIENQVS4gVGhlIHJhdGluZyBpcyBoaWdoZXIgdGhhbiB0aGUgQVJNIGFy
Y2hpdGVjdGVkCnRpbWVycywgc28gaWYgdGhleSBhcmUgZW5hYmxlZCBpbiB0aGUga2VybmVsIGNv
bmZpZ3VyYXRpb24sIHRoZXkgd2lsbAp0YWtlIG92ZXIgYW5kIHVzZWQgaW4gcGxhY2Ugb2YgdGhl
IGFyY2hpdGVjdGVkIHRpbWVycy4gVGhlIHBsYWZvcm0KZGF0YSBpcyB1c2VkIHRvIHNwZWNpZnkg
aWYgYSBjbG9ja3NvdXJjZSwgYSBicm9hZGNhc3QgY2xvY2tldmVudCBvciBhCnBlci1jcHUgY2xv
Y2tldmVudCBpcyBkZXNpcmVkIHRodXMgYWxsb3dpbmcgbW9yZSBmbGV4aWJpbGl0eSBpbiB0aGUK
ZnV0dXJlIHRvIGNvbmZpZ3VyZSB0aGUgU1RNcyBvbiB0aGUgc3lzdGVtLgoKQ2M6IFRob21hcyBG
b3NzYXRpIDx0aG9tYXMuZm9zc2F0aUBsaW5hcm8ub3JnPgpDby1kZXZlbG9wZWQtYnk6IExhcmlz
YSBHcmlnb3JlIDxMYXJpc2EuR3JpZ29yZUBueHAuY29tPgpTaWduZWQtb2ZmLWJ5OiBMYXJpc2Eg
R3JpZ29yZSA8TGFyaXNhLkdyaWdvcmVAbnhwLmNvbT4KQ28tZGV2ZWxvcGVkLWJ5OiBHaGVubmFk
aSBQcm9jb3BjaXVjIDxnaGVubmFkaS5wcm9jb3BjaXVjQG54cC5jb20+ClNpZ25lZC1vZmYtYnk6
IEdoZW5uYWRpIFByb2NvcGNpdWMgPGdoZW5uYWRpLnByb2NvcGNpdWNAbnhwLmNvbT4KQ28tZGV2
ZWxvcGVkLWJ5OiBEYW5pZWwgTGV6Y2FubyA8ZGFuaWVsLmxlemNhbm9AbGluYXJvLm9yZz4KU2ln
bmVkLW9mZi1ieTogRGFuaWVsIExlemNhbm8gPGRhbmllbC5sZXpjYW5vQGxpbmFyby5vcmc+Ci0t
LQogZHJpdmVycy9jbG9ja3NvdXJjZS9LY29uZmlnICAgICAgICAgfCAgIDkgKwogZHJpdmVycy9j
bG9ja3NvdXJjZS9NYWtlZmlsZSAgICAgICAgfCAgIDIgKwogZHJpdmVycy9jbG9ja3NvdXJjZS90
aW1lci1ueHAtc3RtLmMgfCA1MjQgKysrKysrKysrKysrKysrKysrKysrKysrKysrKwogMyBmaWxl
cyBjaGFuZ2VkLCA1MzUgaW5zZXJ0aW9ucygrKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMv
Y2xvY2tzb3VyY2UvdGltZXItbnhwLXN0bS5jCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9jbG9ja3Nv
dXJjZS9LY29uZmlnIGIvZHJpdmVycy9jbG9ja3NvdXJjZS9LY29uZmlnCmluZGV4IDQ4N2M4NTI1
OTk2Ny4uZTg2ZTMyNzM5MmFmIDEwMDY0NAotLS0gYS9kcml2ZXJzL2Nsb2Nrc291cmNlL0tjb25m
aWcKKysrIGIvZHJpdmVycy9jbG9ja3NvdXJjZS9LY29uZmlnCkBAIC03NjMsNCArNzYzLDEzIEBA
IGNvbmZpZyBSQUxJTktfVElNRVIKIAkgIEVuYWJsZXMgc3VwcG9ydCBmb3Igc3lzdGVtIHRpY2sg
Y291bnRlciBwcmVzZW50IG9uCiAJICBSYWxpbmsgU29DcyBSVDMzNTIgYW5kIE1UNzYyMC4KIAor
Y29uZmlnIE5YUF9TVE1fVElNRVIKKwlib29sICJOWFAgU3lzdGVtIFRpbWVyIE1vZHVsZSBkcml2
ZXIiCisJZGVwZW5kcyBvbiBBUkNIX1MzMiB8fCBDT01QSUxFX1RFU1QKKwlzZWxlY3QgQ0xLU1JD
X01NSU8KKwloZWxwCisJICBTdXBwb3J0IGZvciBOWFAgU3lzdGVtIFRpbWVyIE1vZHVsZS4gSXQg
d2lsbCBjcmVhdGUsIGluIHRoaXMKKwkgIG9yZGVyLCBhIGNsb2Nrc291cmNlLCBhIGJyb2FkY2Fz
dCBjbG9ja2V2ZW50IGFuZCBhIHBlciBjcHUKKwkgIGNsb2NrZXZlbnQuCisKIGVuZG1lbnUKZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvY2xvY2tzb3VyY2UvTWFrZWZpbGUgYi9kcml2ZXJzL2Nsb2Nrc291
cmNlL01ha2VmaWxlCmluZGV4IDQzZWYxNmE0ZWZhNi4uYzNhOTJlNmI5Zjk0IDEwMDY0NAotLS0g
YS9kcml2ZXJzL2Nsb2Nrc291cmNlL01ha2VmaWxlCisrKyBiL2RyaXZlcnMvY2xvY2tzb3VyY2Uv
TWFrZWZpbGUKQEAgLTkyLDMgKzkyLDUgQEAgb2JqLSQoQ09ORklHX0dYUF9USU1FUikJCQkrPSB0
aW1lci1neHAubwogb2JqLSQoQ09ORklHX0NMS1NSQ19MT09OR1NPTjFfUFdNKQkrPSB0aW1lci1s
b29uZ3NvbjEtcHdtLm8KIG9iai0kKENPTkZJR19FUDkzWFhfVElNRVIpCQkrPSB0aW1lci1lcDkz
eHgubwogb2JqLSQoQ09ORklHX1JBTElOS19USU1FUikJCSs9IHRpbWVyLXJhbGluay5vCitvYmot
JChDT05GSUdfTlhQX1NUTV9USU1FUikJCSs9IHRpbWVyLW54cC1zdG0ubworCmRpZmYgLS1naXQg
YS9kcml2ZXJzL2Nsb2Nrc291cmNlL3RpbWVyLW54cC1zdG0uYyBiL2RyaXZlcnMvY2xvY2tzb3Vy
Y2UvdGltZXItbnhwLXN0bS5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAw
MC4uYjY3ZTQzODQ4N2FlCi0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9jbG9ja3NvdXJjZS90
aW1lci1ueHAtc3RtLmMKQEAgLTAsMCArMSw1MjQgQEAKKy8vIFNQRFgtTGljZW5zZS1JZGVudGlm
aWVyOiBHUEwtMi4wLW9yLWxhdGVyCisvKgorICogQ29weXJpZ2h0IDIwMTYgRnJlZXNjYWxlIFNl
bWljb25kdWN0b3IsIEluYy4KKyAqIENvcHlyaWdodCAyMDE4LDIwMjEtMjAyNSBOWFAKKyAqCisg
KiBOWFAgU3lzdGVtIFRpbWVyIE1vZHVsZToKKyAqCisgKiAgU1RNIHN1cHBvcnRzIGNvbW1vbmx5
IHJlcXVpcmVkIHN5c3RlbSBhbmQgYXBwbGljYXRpb24gc29mdHdhcmUKKyAqICB0aW1pbmcgZnVu
Y3Rpb25zLiBTVE0gaW5jbHVkZXMgYSAzMi1iaXQgY291bnQtdXAgdGltZXIgYW5kIGZvdXIKKyAq
ICAzMi1iaXQgY29tcGFyZSBjaGFubmVscyB3aXRoIGEgc2VwYXJhdGUgaW50ZXJydXB0IHNvdXJj
ZSBmb3IgZWFjaAorICogIGNoYW5uZWwuIFRoZSB0aW1lciBpcyBkcml2ZW4gYnkgdGhlIFNUTSBt
b2R1bGUgY2xvY2sgZGl2aWRlZCBieSBhbgorICogIDgtYml0IHByZXNjYWxlIHZhbHVlICgxIHRv
IDI1NikuIEl0IGhhcyBhYmlsaXR5IHRvIHN0b3AgdGhlIHRpbWVyCisgKiAgaW4gRGVidWcgbW9k
ZQorICoKKyAqLworI2luY2x1ZGUgPGxpbnV4L2Nsay5oPgorI2luY2x1ZGUgPGxpbnV4L2Nsb2Nr
Y2hpcHMuaD4KKyNpbmNsdWRlIDxsaW51eC9jcHVob3RwbHVnLmg+CisjaW5jbHVkZSA8bGludXgv
aW50ZXJydXB0Lmg+CisjaW5jbHVkZSA8bGludXgvbW9kdWxlLmg+CisjaW5jbHVkZSA8bGludXgv
b2ZfYWRkcmVzcy5oPgorI2luY2x1ZGUgPGxpbnV4L29mX2lycS5oPgorI2luY2x1ZGUgPGxpbnV4
L29mX2RldmljZS5oPgorI2luY2x1ZGUgPGxpbnV4L3BsYXRmb3JtX2RldmljZS5oPgorI2luY2x1
ZGUgPGxpbnV4L3NjaGVkX2Nsb2NrLmg+CisKKy8qCisgKiBFYWNoIHN0bSBoYXMgNCBjaGFubmVs
cyB3aGljaCB0YWtlIDB4MTAgQnl0ZXMgcmVnaXN0ZXIgc3BhY2UKKyAqLworI2RlZmluZSBTVE1f
Q0hBTk5FTChuKQkoMHgxMCAqICgobikgKyAxKSkKKworI2RlZmluZSBTVE1fQ0NSCQkJMHgwMAor
I2RlZmluZSBTVE1fQ0NSX0NFTgkJQklUKDApCisKKyNkZWZpbmUgU1RNX0NJUgkJCTB4MDQKKyNk
ZWZpbmUgU1RNX0NJUl9DSUYJCUJJVCgwKQorCisjZGVmaW5lIFNUTV9DTVAJCQkweDA4CisKKyNk
ZWZpbmUgU1RNX0NSCQkJMHgwMAorI2RlZmluZSBTVE1fQ1JfVEVOCQlCSVQoMCkKKyNkZWZpbmUg
U1RNX0NSX0ZSWgkJQklUKDEpCisjZGVmaW5lIFNUTV9DUl9DUFNfT0ZGU0VUCTh1CisjZGVmaW5l
IFNUTV9DUl9DUFNfTUFTSwkJR0VOTUFTSygxNSwgU1RNX0NSX0NQU19PRkZTRVQpCisjZGVmaW5l
IFNUTV9DUl9DUFMoeCkJCSgoKHgpIDw8IFNUTV9DUl9DUFNfT0ZGU0VUKSAmIFNUTV9DUl9DUFNf
TUFTSykKKworI2RlZmluZSBTVE1fQ05UCQkJMHgwNAorCisjZGVmaW5lIFNUTV9FTkFCTEVfTUFT
SwkoU1RNX0NSX0ZSWiB8IFNUTV9DUl9URU4pCisKK3N0cnVjdCBzdG1fY2xvY2tzb3VyY2Ugewor
CXN0cnVjdCBjbG9ja3NvdXJjZSBjczsKKwlpbnQgY291bnRlcjsKK307CisKK3N0cnVjdCBzdG1f
Y2xvY2tldmVudCB7CisJc3RydWN0IGNsb2NrX2V2ZW50X2RldmljZSBjZWQ7CisJdW5zaWduZWQg
bG9uZyBkZWx0YTsKK307CisKK3N0cnVjdCBzdG1fdGltZXIgeworCXZvaWQgX19pb21lbSAqYmFz
ZTsKKwl1bnNpZ25lZCBsb25nIHJhdGU7CisJdW5pb24geworCQlzdHJ1Y3Qgc3RtX2Nsb2Nrc291
cmNlIHNjczsKKwkJc3RydWN0IHN0bV9jbG9ja2V2ZW50IHNjZTsKKwl9OworfTsKKworc3RhdGlj
IERFRklORV9QRVJfQ1BVKHN0cnVjdCBzdG1fdGltZXIgKiwgc3RtX3RpbWVycyk7CisKK3N0YXRp
YyBzdHJ1Y3Qgc3RtX3RpbWVyICpzdG1fc2NoZWRfY2xvY2s7CisKKy8qKgorICogc3RydWN0IHN0
bV9pbnN0YW5jZXMgLSBhIHNldCBvZiBjb3VudGVyIGZvciB0aGUgU1RNIGluaXRpYWxpemVkCisg
KgorICogQGNsb2Nrc291cmNlOiBhbiBpbnRlZ2VyIGdpdmluZyB0aGUgbnVtYmVyIG9mIGluaXRp
YWxpemVkIGNsb2Nrc291cmNlCisgKiBAY2xvY2tldmVudF9wZXJfY3B1OiBhbiBpbnRlZ2VyIGdp
dmluZyB0aGUgbnVtYmVyIG9mIGluaXRpYWxpemVkIGNsb2NrZXZlbnQgcGVyIGNwdQorICogQGNs
b2NrZXZlbnRfYnJvYWRjYXN0OiBhbiBpbnRlZ2VyIGdpdmluZyB0aGUgbnVtYmVyIG9mIGluaXRp
YWxpemVkIGJyb2FkY2FzdCBjbG9ja2V2ZW50CisgKiBAZmVhdHVyZXM6IGEgc2V0IG9mIGZsYWcg
dGVsbGluZyB3aGF0IGtpbmQgb2YgdGltZXIgdG8gaW5pdGlhbGl6ZQorICovCitzdHJ1Y3Qgc3Rt
X2luc3RhbmNlcyB7CisJaW50IGNsb2Nrc291cmNlOworCWludCBjbG9ja2V2ZW50X3Blcl9jcHU7
CisJaW50IGNsb2NrZXZlbnRfYnJvYWRjYXN0OworCWludCBmZWF0dXJlczsKK307CisKKyNkZWZp
bmUgU1RNX0NMS1NSQwkJQklUKDApCisjZGVmaW5lIFNUTV9DTEtFVlRfUEVSX0NQVQlCSVQoMSkK
KyNkZWZpbmUgU1RNX0NMS0VWVF9CUk9BRENBU1QJQklUKDIpCisKK3N0YXRpYyBzdHJ1Y3Qgc3Rt
X2Nsb2Nrc291cmNlICpjc190b19zY3Moc3RydWN0IGNsb2Nrc291cmNlICpjcykKK3sKKwlyZXR1
cm4gY29udGFpbmVyX29mKGNzLCBzdHJ1Y3Qgc3RtX2Nsb2Nrc291cmNlLCBjcyk7Cit9CisKK3N0
YXRpYyBzdHJ1Y3Qgc3RtX2Nsb2NrZXZlbnQgKmNlZF90b19zY2VkKHN0cnVjdCBjbG9ja19ldmVu
dF9kZXZpY2UgKmNlZCkKK3sKKwlyZXR1cm4gY29udGFpbmVyX29mKGNlZCwgc3RydWN0IHN0bV9j
bG9ja2V2ZW50LCBjZWQpOworfQorCitzdGF0aWMgc3RydWN0IHN0bV90aW1lciAqY3NfdG9fc3Rt
KHN0cnVjdCBjbG9ja3NvdXJjZSAqY3MpCit7CisJc3RydWN0IHN0bV9jbG9ja3NvdXJjZSAqc2Nz
ID0gY3NfdG9fc2NzKGNzKTsKKworCXJldHVybiBjb250YWluZXJfb2Yoc2NzLCBzdHJ1Y3Qgc3Rt
X3RpbWVyLCBzY3MpOworfQorCitzdGF0aWMgc3RydWN0IHN0bV90aW1lciAqY2VkX3RvX3N0bShz
dHJ1Y3QgY2xvY2tfZXZlbnRfZGV2aWNlICpjZWQpCit7CisgICAgICAgIHN0cnVjdCBzdG1fY2xv
Y2tldmVudCAqc2NlID0gY2VkX3RvX3NjZWQoY2VkKTsKKworICAgICAgICByZXR1cm4gY29udGFp
bmVyX29mKHNjZSwgc3RydWN0IHN0bV90aW1lciwgc2NlKTsKK30KKworc3RhdGljIHU2NCBub3Ry
YWNlIG54cF9zdG1fcmVhZF9zY2hlZF9jbG9jayh2b2lkKQoreworCXJldHVybiByZWFkbChzdG1f
c2NoZWRfY2xvY2stPmJhc2UgKyBTVE1fQ05UKTsKK30KKworc3RhdGljIHUzMiBueHBfc3RtX2Ns
b2Nrc291cmNlX2dldGNudChzdHJ1Y3Qgc3RtX3RpbWVyICpzdG1fdGltZXIpCit7CisJcmV0dXJu
IHJlYWRsKHN0bV90aW1lci0+YmFzZSArIFNUTV9DTlQpOworfQorCitzdGF0aWMgdm9pZCBueHBf
c3RtX2Nsb2Nrc291cmNlX3NldGNudChzdHJ1Y3Qgc3RtX3RpbWVyICpzdG1fdGltZXIsIHUzMiBj
bnQpCit7CisJd3JpdGVsKGNudCwgc3RtX3RpbWVyLT5iYXNlICsgU1RNX0NOVCk7Cit9CisKK3N0
YXRpYyB1NjQgbnhwX3N0bV9jbG9ja3NvdXJjZV9yZWFkKHN0cnVjdCBjbG9ja3NvdXJjZSAqY3Mp
Cit7CisJc3RydWN0IHN0bV90aW1lciAqc3RtX3RpbWVyID0gY3NfdG9fc3RtKGNzKTsKKworCXJl
dHVybiAodTY0KW54cF9zdG1fY2xvY2tzb3VyY2VfZ2V0Y250KHN0bV90aW1lcik7Cit9CisKK3N0
YXRpYyBpbnQgbnhwX3N0bV9jbG9ja3NvdXJjZV9lbmFibGUoc3RydWN0IGNsb2Nrc291cmNlICpj
cykKK3sKKwlzdHJ1Y3Qgc3RtX3RpbWVyICpzdG1fdGltZXIgPSBjc190b19zdG0oY3MpOworCXUz
MiByZWc7CisKKwlyZWcgPSByZWFkbChzdG1fdGltZXItPmJhc2UgKyBTVE1fQ1IpOworCXJlZyAm
PSB+U1RNX0NSX0NQU19NQVNLOworCXJlZyB8PSBTVE1fRU5BQkxFX01BU0s7CisKKwl3cml0ZWwo
cmVnLCBzdG1fdGltZXItPmJhc2UgKyBTVE1fQ1IpOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRp
YyB2b2lkIG54cF9zdG1fY2xvY2tzb3VyY2VfZGlzYWJsZShzdHJ1Y3QgY2xvY2tzb3VyY2UgKmNz
KQoreworCXN0cnVjdCBzdG1fdGltZXIgKnN0bV90aW1lciA9IGNzX3RvX3N0bShjcyk7CisJdTMy
IHJlZzsKKworCXJlZyA9IHJlYWRsKHN0bV90aW1lci0+YmFzZSArIFNUTV9DUik7CisJcmVnICY9
IH4oU1RNX0NSX0NQU19NQVNLIHwgU1RNX0VOQUJMRV9NQVNLKTsKKworCXdyaXRlbChyZWcsIHN0
bV90aW1lci0+YmFzZSArIFNUTV9DUik7Cit9CisKK3N0YXRpYyB2b2lkIG54cF9zdG1fY2xvY2tz
b3VyY2Vfc3VzcGVuZChzdHJ1Y3QgY2xvY2tzb3VyY2UgKmNzKQoreworCXN0cnVjdCBzdG1fdGlt
ZXIgKnN0bV90aW1lciA9IGNzX3RvX3N0bShjcyk7CisKKwlueHBfc3RtX2Nsb2Nrc291cmNlX2Rp
c2FibGUoY3MpOworCXN0bV90aW1lci0+c2NzLmNvdW50ZXIgPSBueHBfc3RtX2Nsb2Nrc291cmNl
X2dldGNudChzdG1fdGltZXIpOworfQorCitzdGF0aWMgdm9pZCBueHBfc3RtX2Nsb2Nrc291cmNl
X3Jlc3VtZShzdHJ1Y3QgY2xvY2tzb3VyY2UgKmNzKQoreworCXN0cnVjdCBzdG1fdGltZXIgKnN0
bV90aW1lciA9IGNzX3RvX3N0bShjcyk7CisKKwlueHBfc3RtX2Nsb2Nrc291cmNlX3NldGNudChz
dG1fdGltZXIsIHN0bV90aW1lci0+c2NzLmNvdW50ZXIpOworCW54cF9zdG1fY2xvY2tzb3VyY2Vf
ZW5hYmxlKGNzKTsKK30KKworc3RhdGljIGludCBfX2luaXQgbnhwX3N0bV9jbG9ja3NvdXJjZV9p
bml0KHN0cnVjdCBkZXZpY2UgKmRldiwgY29uc3QgY2hhciAqbmFtZSwKKwkJCQkJICAgdm9pZCBf
X2lvbWVtICpiYXNlLCBzdHJ1Y3QgY2xrICpjbGspCit7CisJc3RydWN0IHN0bV90aW1lciAqc3Rt
X3RpbWVyOworCWludCByZXQ7CisKKwlzdG1fdGltZXIgPSBkZXZtX2t6YWxsb2MoZGV2LCBzaXpl
b2YoKnN0bV90aW1lciksIEdGUF9LRVJORUwpOworCWlmICghc3RtX3RpbWVyKQorCQlyZXR1cm4g
LUVOT01FTTsKKworCXN0bV90aW1lci0+YmFzZSA9IGJhc2U7CisJc3RtX3RpbWVyLT5yYXRlID0g
Y2xrX2dldF9yYXRlKGNsayk7CisKKwlzdG1fdGltZXItPnNjcy5jcy5uYW1lID0gbmFtZTsKKwlz
dG1fdGltZXItPnNjcy5jcy5yYXRpbmcgPSA0NjA7CisJc3RtX3RpbWVyLT5zY3MuY3MucmVhZCA9
IG54cF9zdG1fY2xvY2tzb3VyY2VfcmVhZDsKKwlzdG1fdGltZXItPnNjcy5jcy5lbmFibGUgPSBu
eHBfc3RtX2Nsb2Nrc291cmNlX2VuYWJsZTsKKwlzdG1fdGltZXItPnNjcy5jcy5kaXNhYmxlID0g
bnhwX3N0bV9jbG9ja3NvdXJjZV9kaXNhYmxlOworCXN0bV90aW1lci0+c2NzLmNzLnN1c3BlbmQg
PSBueHBfc3RtX2Nsb2Nrc291cmNlX3N1c3BlbmQ7CisJc3RtX3RpbWVyLT5zY3MuY3MucmVzdW1l
ID0gbnhwX3N0bV9jbG9ja3NvdXJjZV9yZXN1bWU7CisJc3RtX3RpbWVyLT5zY3MuY3MubWFzayA9
IENMT0NLU09VUkNFX01BU0soMzIpOworCXN0bV90aW1lci0+c2NzLmNzLmZsYWdzID0gQ0xPQ0tf
U09VUkNFX0lTX0NPTlRJTlVPVVM7CisKKwlyZXQgPSBjbG9ja3NvdXJjZV9yZWdpc3Rlcl9oeigm
c3RtX3RpbWVyLT5zY3MuY3MsIHN0bV90aW1lci0+cmF0ZSk7CisJaWYgKHJldCkKKwkJcmV0dXJu
IHJldDsKKworCXN0bV9zY2hlZF9jbG9jayA9IHN0bV90aW1lcjsKKworCXNjaGVkX2Nsb2NrX3Jl
Z2lzdGVyKG54cF9zdG1fcmVhZF9zY2hlZF9jbG9jaywgMzIsIHN0bV90aW1lci0+cmF0ZSk7CisK
KwlkZXZfc2V0X2RydmRhdGEoZGV2LCBzdG1fdGltZXIpOworCisJZGV2X2RiZyhkZXYsICJSZWdp
c3RlcmVkIGNsb2Nrc291cmNlICVzXG4iLCBuYW1lKTsKKworCXJldHVybiAwOworfQorCitzdGF0
aWMgaW50IG54cF9zdG1fY2xvY2tldmVudF9yZWFkX2NvdW50ZXIoc3RydWN0IHN0bV90aW1lciAq
c3RtX3RpbWVyKQoreworCXJldHVybiByZWFkbChzdG1fdGltZXItPmJhc2UgKyBTVE1fQ05UKTsK
K30KKworc3RhdGljIHZvaWQgbnhwX3N0bV9jbG9ja2V2ZW50X2Rpc2FibGUoc3RydWN0IHN0bV90
aW1lciAqc3RtX3RpbWVyKQoreworCS8qCisJICogVGhlIGNvdW50ZXIgaXMgc2hhcmVkIGJldHdl
ZW4gY2hhbm5lbHMgYW5kIHdpbGwgY29udGludWUgdG8KKwkgKiBiZSBpbmNyZW1lbnRlZC4gSWYg
U1RNX0NNUCB2YWx1ZSBpcyB0b28gc21hbGwsIHRoZSBuZXh0IGV2ZW50IGNhbgorCSAqIGJlIGxv
c3QgaWYgd2UgZG9uJ3QgZGlzYWJsZSB0aGUgZW50aXJlIG1vZHVsZS4KKwkgKiBEaXNhYmxpbmcg
dGhlIGVudGlyZSBtb2R1bGUsIG1ha2VzIFNUTSBub3Qgc3VpdGFibGUgYXMgY2xvY2tzb3VyY2Uu
CisJICovCisJd3JpdGVsKDAsIHN0bV90aW1lci0+YmFzZSArIFNUTV9DUik7CisJd3JpdGVsKDAs
IHN0bV90aW1lci0+YmFzZSArIFNUTV9DSEFOTkVMKDApICsgU1RNX0NDUik7Cit9CisKK3N0YXRp
YyB2b2lkIG54cF9zdG1fY2xvY2tldmVudF9lbmFibGUoc3RydWN0IHN0bV90aW1lciAqc3RtX3Rp
bWVyKQoreworCXUzMiByZWcgPSByZWFkbChzdG1fdGltZXItPmJhc2UgKyBTVE1fQ1IpOworCisJ
cmVnICY9IH5TVE1fQ1JfQ1BTX01BU0s7CisJcmVnIHw9IFNUTV9FTkFCTEVfTUFTSzsKKworCXdy
aXRlbChyZWcsIHN0bV90aW1lci0+YmFzZSArIFNUTV9DUik7CisJd3JpdGVsKFNUTV9DQ1JfQ0VO
LCBzdG1fdGltZXItPmJhc2UgKyBTVE1fQ0hBTk5FTCgwKSArIFNUTV9DQ1IpOworfQorCitzdGF0
aWMgdm9pZCBueHBfc3RtX2Nsb2NrZXZlbnRfaXJxX2NscihzdHJ1Y3Qgc3RtX3RpbWVyICpzdG1f
dGltZXIpCit7CisJLyogQ2xlYXIgdGhlIGludGVycnVwdCAqLworCXdyaXRlbChTVE1fQ0lSX0NJ
Riwgc3RtX3RpbWVyLT5iYXNlICsgU1RNX0NIQU5ORUwoMCkgKyBTVE1fQ0lSKTsKK30KKworc3Rh
dGljIHZvaWQgbnhwX3N0bV9jbG9ja2V2ZW50X2lycV9hY2soc3RydWN0IHN0bV90aW1lciAqc3Rt
X3RpbWVyKQoreworCXUzMiB2YWw7CisKKwlueHBfc3RtX2Nsb2NrZXZlbnRfaXJxX2NscihzdG1f
dGltZXIpOworCisJLyoKKwkgKiBVcGRhdGUgU1RNX0NNUCB2YWx1ZSB1c2luZyB0aGUgY291bnRl
ciB2YWx1ZQorCSAqLworCXZhbCA9IG54cF9zdG1fY2xvY2tldmVudF9yZWFkX2NvdW50ZXIoc3Rt
X3RpbWVyKSArIHN0bV90aW1lci0+c2NlLmRlbHRhOworCisJd3JpdGVsKHZhbCwgc3RtX3RpbWVy
LT5iYXNlICsgU1RNX0NIQU5ORUwoMCkgKyBTVE1fQ01QKTsKK30KKworc3RhdGljIGlycXJldHVy
bl90IG54cF9zdG1fY2xvY2tldmVudF9pbnRlcnJ1cHQoaW50IGlycSwgdm9pZCAqZGV2X2lkKQor
eworCXN0cnVjdCBjbG9ja19ldmVudF9kZXZpY2UgKmNlZCA9IGRldl9pZDsKKwlzdHJ1Y3Qgc3Rt
X3RpbWVyICpzdG1fdGltZXIgPSBjZWRfdG9fc3RtKGNlZCk7CisKKwlueHBfc3RtX2Nsb2NrZXZl
bnRfaXJxX2FjayhzdG1fdGltZXIpOworCisJLyoKKwkgKiBzdG0gaGFyZHdhcmUgZG9lc24ndCBz
dXBwb3J0IG9uZXNob3QsIGl0IHdpbGwgZ2VuZXJhdGUgYW4KKwkgKiBpbnRlcnJ1cHQgYW5kIHN0
YXJ0IHRoZSBjb3VudGVyIGFnYWluIHNvIHNvZnR3YXJlIG5lZWQgdG8KKwkgKiBkaXNhYmxlIHRo
ZSB0aW1lciB0byBzdG9wIHRoZSBjb3VudGVyIGxvb3AgaW4gT05FU0hPVCBtb2RlLgorCSAqLwor
CWlmIChsaWtlbHkoY2xvY2tldmVudF9zdGF0ZV9vbmVzaG90KGNlZCkpKQorCQlueHBfc3RtX2Ns
b2NrZXZlbnRfZGlzYWJsZShzdG1fdGltZXIpOworCisJY2VkLT5ldmVudF9oYW5kbGVyKGNlZCk7
CisKKwlyZXR1cm4gSVJRX0hBTkRMRUQ7Cit9CisKK3N0YXRpYyBpbnQgbnhwX3N0bV9jbG9ja2V2
ZW50X3NodXRkb3duKHN0cnVjdCBjbG9ja19ldmVudF9kZXZpY2UgKmNlZCkKK3sKKwlzdHJ1Y3Qg
c3RtX3RpbWVyICpzdG1fdGltZXIgPSBjZWRfdG9fc3RtKGNlZCk7CisKKwlueHBfc3RtX2Nsb2Nr
ZXZlbnRfZGlzYWJsZShzdG1fdGltZXIpOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQg
bnhwX3N0bV9jbG9ja2V2ZW50X3NldF9uZXh0X2V2ZW50KHVuc2lnbmVkIGxvbmcgZGVsdGEsIHN0
cnVjdCBjbG9ja19ldmVudF9kZXZpY2UgKmNlZCkKK3sKKwlzdHJ1Y3Qgc3RtX3RpbWVyICpzdG1f
dGltZXIgPSBjZWRfdG9fc3RtKGNlZCk7CisJdTMyIHZhbDsKKworCW54cF9zdG1fY2xvY2tldmVu
dF9kaXNhYmxlKHN0bV90aW1lcik7CisKKwlzdG1fdGltZXItPnNjZS5kZWx0YSA9IGRlbHRhOwor
CisJdmFsID0gbnhwX3N0bV9jbG9ja2V2ZW50X3JlYWRfY291bnRlcihzdG1fdGltZXIpICsgZGVs
dGE7CisKKwl3cml0ZWwodmFsLCBzdG1fdGltZXItPmJhc2UgKyBTVE1fQ0hBTk5FTCgwKSArIFNU
TV9DTVApOworCisJbnhwX3N0bV9jbG9ja2V2ZW50X2VuYWJsZShzdG1fdGltZXIpOworCisJcmV0
dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgbnhwX3N0bV9jbG9ja2V2ZW50X3NldF9wZXJpb2RpYyhz
dHJ1Y3QgY2xvY2tfZXZlbnRfZGV2aWNlICpjZWQpCit7CisJc3RydWN0IHN0bV90aW1lciAqc3Rt
X3RpbWVyID0gY2VkX3RvX3N0bShjZWQpOworCisgICAgICAgIHJldHVybiBueHBfc3RtX2Nsb2Nr
ZXZlbnRfc2V0X25leHRfZXZlbnQoc3RtX3RpbWVyLT5yYXRlLCBjZWQpOworfQorCitzdGF0aWMg
aW50IF9faW5pdCBueHBfc3RtX2Nsb2NrZXZlbnRfYnJvYWRjYXN0X2luaXQoc3RydWN0IGRldmlj
ZSAqZGV2LCBjb25zdCBjaGFyICpuYW1lLCB2b2lkIF9faW9tZW0gKmJhc2UsCisJCQkJCQkgICAg
aW50IGlycSwgc3RydWN0IGNsayAqY2xrKQoreworCXN0cnVjdCBzdG1fdGltZXIgKnN0bV90aW1l
cjsKKwlpbnQgcmV0OworCisJc3RtX3RpbWVyID0gZGV2bV9remFsbG9jKGRldiwgc2l6ZW9mKCpz
dG1fdGltZXIpLCBHRlBfS0VSTkVMKTsKKwlpZiAoIXN0bV90aW1lcikKKwkJcmV0dXJuIC1FTk9N
RU07CisKKwlzdG1fdGltZXItPmJhc2UgPSBiYXNlOworCXN0bV90aW1lci0+cmF0ZSA9IGNsa19n
ZXRfcmF0ZShjbGspOworCisJc3RtX3RpbWVyLT5zY2UuY2VkLm5hbWUgPSBuYW1lOworCXN0bV90
aW1lci0+c2NlLmNlZC5mZWF0dXJlcyA9IENMT0NLX0VWVF9GRUFUX1BFUklPRElDIHwgQ0xPQ0tf
RVZUX0ZFQVRfT05FU0hPVDsKKwlzdG1fdGltZXItPnNjZS5jZWQuc2V0X3N0YXRlX3NodXRkb3du
ID0gbnhwX3N0bV9jbG9ja2V2ZW50X3NodXRkb3duOworCXN0bV90aW1lci0+c2NlLmNlZC5zZXRf
c3RhdGVfcGVyaW9kaWMgPSBueHBfc3RtX2Nsb2NrZXZlbnRfc2V0X3BlcmlvZGljOworCXN0bV90
aW1lci0+c2NlLmNlZC5zZXRfbmV4dF9ldmVudCA9IG54cF9zdG1fY2xvY2tldmVudF9zZXRfbmV4
dF9ldmVudDsKKwlzdG1fdGltZXItPnNjZS5jZWQuY3B1bWFzayA9IGNwdV9wb3NzaWJsZV9tYXNr
OworCXN0bV90aW1lci0+c2NlLmNlZC5yYXRpbmcgPSA0NjA7CisJc3RtX3RpbWVyLT5zY2UuY2Vk
LmlycSA9IGlycTsKKworCW54cF9zdG1fY2xvY2tldmVudF9pcnFfY2xyKHN0bV90aW1lcik7CisK
KwlyZXQgPSByZXF1ZXN0X2lycShpcnEsIG54cF9zdG1fY2xvY2tldmVudF9pbnRlcnJ1cHQsCisJ
CQkgIElSUUZfVElNRVIgfCBJUlFGX05PQkFMQU5DSU5HLCBuYW1lLCAmc3RtX3RpbWVyLT5zY2Uu
Y2VkKTsKKwlpZiAocmV0KSB7CisJCWRldl9lcnIoZGV2LCAiVW5hYmxlIHRvIGFsbG9jYXRlIGlu
dGVycnVwdCBsaW5lOiAlZFxuIiwgcmV0KTsKKwkJcmV0dXJuIHJldDsKKwl9CisKKwljbG9ja2V2
ZW50c19jb25maWdfYW5kX3JlZ2lzdGVyKCZzdG1fdGltZXItPnNjZS5jZWQsIHN0bV90aW1lci0+
cmF0ZSwgMSwgMHhmZmZmZmZmZik7CisKKwlkZXZfZGJnKGRldiwgIlJlZ2lzdGVyZWQgYnJvYWRj
YXN0IGNsb2NrZXZlbnQgJXMgaXJxPSVkXG4iLCBuYW1lLCBpcnEpOworCisJcmV0dXJuIDA7Cit9
CisKK3N0YXRpYyBpbnQgX19pbml0IG54cF9zdG1fY2xvY2tldmVudF9wZXJfY3B1X2luaXQoc3Ry
dWN0IGRldmljZSAqZGV2LCBjb25zdCBjaGFyICpuYW1lLCB2b2lkIF9faW9tZW0gKmJhc2UsCisJ
CQkJCQkgIGludCBpcnEsIHN0cnVjdCBjbGsgKmNsaywgaW50IGNwdSkKK3sKKwlzdHJ1Y3Qgc3Rt
X3RpbWVyICpzdG1fdGltZXI7CisJaW50IHJldDsKKworCXN0bV90aW1lciA9IGRldm1fa3phbGxv
YyhkZXYsIHNpemVvZigqc3RtX3RpbWVyKSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFzdG1fdGltZXIp
CisJCXJldHVybiAtRU5PTUVNOworCisJc3RtX3RpbWVyLT5iYXNlID0gYmFzZTsKKwlzdG1fdGlt
ZXItPnJhdGUgPSBjbGtfZ2V0X3JhdGUoY2xrKTsKKworCXN0bV90aW1lci0+c2NlLmNlZC5uYW1l
ID0gbmFtZTsKKwlzdG1fdGltZXItPnNjZS5jZWQuZmVhdHVyZXMgPSBDTE9DS19FVlRfRkVBVF9Q
RVJJT0RJQyB8IENMT0NLX0VWVF9GRUFUX09ORVNIT1Q7CisJc3RtX3RpbWVyLT5zY2UuY2VkLnNl
dF9zdGF0ZV9zaHV0ZG93biA9IG54cF9zdG1fY2xvY2tldmVudF9zaHV0ZG93bjsKKwlzdG1fdGlt
ZXItPnNjZS5jZWQuc2V0X3N0YXRlX3BlcmlvZGljID0gbnhwX3N0bV9jbG9ja2V2ZW50X3NldF9w
ZXJpb2RpYzsKKwlzdG1fdGltZXItPnNjZS5jZWQuc2V0X25leHRfZXZlbnQgPSBueHBfc3RtX2Ns
b2NrZXZlbnRfc2V0X25leHRfZXZlbnQ7CisJc3RtX3RpbWVyLT5zY2UuY2VkLmNwdW1hc2sgPSBj
cHVtYXNrX29mKGNwdSk7CisJc3RtX3RpbWVyLT5zY2UuY2VkLnJhdGluZyA9IDQ2MDsKKwlzdG1f
dGltZXItPnNjZS5jZWQuaXJxID0gaXJxOworCisJbnhwX3N0bV9jbG9ja2V2ZW50X2lycV9jbHIo
c3RtX3RpbWVyKTsKKworCXJldCA9IHJlcXVlc3RfaXJxKGlycSwgbnhwX3N0bV9jbG9ja2V2ZW50
X2ludGVycnVwdCwKKwkJCSAgSVJRRl9USU1FUiB8IElSUUZfTk9CQUxBTkNJTkcsIG5hbWUsICZz
dG1fdGltZXItPnNjZS5jZWQpOworCWlmIChyZXQpIHsKKwkJZGV2X2VycihkZXYsICJVbmFibGUg
dG8gYWxsb2NhdGUgaW50ZXJydXB0IGxpbmU6ICVkXG4iLCByZXQpOworCQlyZXR1cm4gcmV0Owor
CX0KKworCXBlcl9jcHUoc3RtX3RpbWVycywgY3B1KSA9IHN0bV90aW1lcjsKKworCWRldl9kYmco
ZGV2LCAiSW5pdGlhbGl6ZWQgcGVyIGNwdSBjbG9ja2V2ZW50IG5hbWU9JXMsIGlycT0lZCwgY3B1
PSVkXG4iLCBuYW1lLCBpcnEsIGNwdSk7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGludCBu
eHBfc3RtX2Nsb2NrZXZlbnRfc3RhcnRpbmdfY3B1KHVuc2lnbmVkIGludCBjcHUpCit7CisJc3Ry
dWN0IHN0bV90aW1lciAqc3RtX3RpbWVyID0gcGVyX2NwdShzdG1fdGltZXJzLCBjcHUpOworCWlu
dCByZXQ7CisKKwlpZiAoV0FSTl9PTighc3RtX3RpbWVyKSkKKwkJcmV0dXJuIC1FRkFVTFQ7CisK
KwlyZXQgPSBpcnFfZm9yY2VfYWZmaW5pdHkoc3RtX3RpbWVyLT5zY2UuY2VkLmlycSwgY3B1bWFz
a19vZihjcHUpKTsKKwlpZiAocmV0KQorCQlyZXR1cm4gcmV0OworCisJY2xvY2tldmVudHNfY29u
ZmlnX2FuZF9yZWdpc3Rlcigmc3RtX3RpbWVyLT5zY2UuY2VkLCBzdG1fdGltZXItPnJhdGUsIDEs
IDB4ZmZmZmZmZmYpOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgX19pbml0IG54cF9z
dG1fdGltZXJfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKK3sKKwlzdHJ1Y3Qg
ZGV2aWNlICpkZXYgPSAmcGRldi0+ZGV2OworCXN0cnVjdCBkZXZpY2Vfbm9kZSAqbnAgPSBkZXYt
Pm9mX25vZGU7CisJc3RydWN0IHN0bV9pbnN0YW5jZXMgKnN0bV9pbnN0YW5jZXM7CisJY29uc3Qg
Y2hhciAqbmFtZSA9IG9mX25vZGVfZnVsbF9uYW1lKG5wKTsKKwl2b2lkIF9faW9tZW0gKmJhc2U7
CisJaW50IGlycSwgcmV0OworCXN0cnVjdCBjbGsgKmNsazsKKworCXN0bV9pbnN0YW5jZXMgPSAo
dHlwZW9mKHN0bV9pbnN0YW5jZXMpKW9mX2RldmljZV9nZXRfbWF0Y2hfZGF0YShkZXYpOworCWlm
ICghc3RtX2luc3RhbmNlcykgeworCQlkZXZfZXJyKGRldiwgIk5vIFNUTSBpbnN0YW5jZXMgYXNz
b2NpYXRlZCB3aXRoIGEgY3B1Iik7CisJCXJldHVybiAtRUlOVkFMOworCX0KKworCWJhc2UgPSBk
ZXZtX29mX2lvbWFwKGRldiwgbnAsIDAsIE5VTEwpOworCWlmIChJU19FUlIoYmFzZSkpIHsKKwkJ
ZGV2X2VycihkZXYsICJGYWlsZWQgdG8gaW9tYXAgJXBPRm5cbiIsIG5wKTsKKwkJcmV0dXJuIFBU
Ul9FUlIoYmFzZSk7CisJfQorCisJaXJxID0gaXJxX29mX3BhcnNlX2FuZF9tYXAobnAsIDApOwor
CWlmIChpcnEgPD0gMCkgeworCQlkZXZfZXJyKGRldiwgIkZhaWxlZCB0byBwYXJzZSBhbmQgbWFw
IElSUTogJWRcbiIsIGlycSk7CisJCXJldHVybiAtRUlOVkFMOworCX0KKworCWNsayA9IGRldm1f
Y2xrX2dldChkZXYsIE5VTEwpOworCWlmIChJU19FUlIoY2xrKSkgeworCQlkZXZfZXJyKGRldiwg
IkNsb2NrIG5vdCBmb3VuZFxuIik7CisJCXJldHVybiBQVFJfRVJSKGNsayk7CisJfQorCisJcmV0
ID0gY2xrX3ByZXBhcmVfZW5hYmxlKGNsayk7CisJaWYgKHJldCkgeworCQlkZXZfZXJyKGRldiwg
IkZhaWxlZCB0byBlbmFibGUgU1RNIHRpbWVyIGNsb2NrOiAlZFxuIiwgcmV0KTsKKwkJcmV0dXJu
IHJldDsKKwl9CisKKwlpZiAoIXN0bV9pbnN0YW5jZXMtPmNsb2Nrc291cmNlICYmIChzdG1faW5z
dGFuY2VzLT5mZWF0dXJlcyAmIFNUTV9DTEtTUkMpKSB7CisKKwkJLyoKKwkJICogRmlyc3QgcHJv
YmVkIFNUTSB3aWxsIGJlIGEgY2xvY2tzb3VyY2UKKwkJICovCisJCXJldCA9IG54cF9zdG1fY2xv
Y2tzb3VyY2VfaW5pdChkZXYsIG5hbWUsIGJhc2UsIGNsayk7CisJCWlmIChyZXQpCisJCQlyZXR1
cm4gcmV0OworCQlzdG1faW5zdGFuY2VzLT5jbG9ja3NvdXJjZSsrOworCisJfSBlbHNlIGlmICgh
c3RtX2luc3RhbmNlcy0+Y2xvY2tldmVudF9icm9hZGNhc3QgJiYKKwkJICAgKHN0bV9pbnN0YW5j
ZXMtPmZlYXR1cmVzICYgU1RNX0NMS0VWVF9CUk9BRENBU1QpKSB7CisKKwkJLyoKKwkJICogU2Vj
b25kIHByb2JlZCBTVE0gd2lsbCBiZSBhIGJyb2FkY2FzdCBjbG9ja2V2ZW50CisJCSAqLworCQly
ZXQgPSBueHBfc3RtX2Nsb2NrZXZlbnRfYnJvYWRjYXN0X2luaXQoZGV2LCBuYW1lLCBiYXNlLCBp
cnEsIGNsayk7CisJCWlmIChyZXQpCisJCQlyZXR1cm4gcmV0OworCQlzdG1faW5zdGFuY2VzLT5j
bG9ja2V2ZW50X2Jyb2FkY2FzdCsrOworCisJfSBlbHNlIGlmIChzdG1faW5zdGFuY2VzLT5jbG9j
a2V2ZW50X3Blcl9jcHUgPCBudW1fcG9zc2libGVfY3B1cygpICYmCisJCSAgIChzdG1faW5zdGFu
Y2VzLT5mZWF0dXJlcyAmIFNUTV9DTEtFVlRfUEVSX0NQVSkpIHsKKworCQkvKgorCQkgKiBOZXh0
IHByb2JlZCBTVE0gd2lsbCBiZSBhIHBlciBDUFUgY2xvY2tldmVudCwgdW50aWwKKwkJICogd2Ug
cHJvYmUgYXMgbXVjaCBhcyB3ZSBoYXZlIENQVXMgYXZhaWxhYmxlIG9uIHRoZQorCQkgKiBzeXN0
ZW0sIHdlIGRvIGEgcGFydGlhbCBpbml0aWFsaXphdGlvbgorCQkgKi8KKwkJcmV0ID0gbnhwX3N0
bV9jbG9ja2V2ZW50X3Blcl9jcHVfaW5pdChkZXYsIG5hbWUsIGJhc2UsIGlycSwgY2xrLAorCQkJ
CQkJICAgICAgc3RtX2luc3RhbmNlcy0+Y2xvY2tldmVudF9wZXJfY3B1KTsKKwkJaWYgKHJldCkK
KwkJCXJldHVybiByZXQ7CisKKwkJc3RtX2luc3RhbmNlcy0+Y2xvY2tldmVudF9wZXJfY3B1Kys7
CisKKwkJLyoKKwkJICogVGhlIG51bWJlciBvZiBwcm9iZWQgU1RNIGZvciBwZXIgQ1BVIGNsb2Nr
ZXZlbnQgaXMKKwkJICogZXF1YWwgdG8gdGhlIG51bWJlciBvZiBhdmFpbGFibGUgQ1BVcyBvbiB0
aGUKKwkJICogc3lzdGVtLiBXZSBpbnN0YWxsIHRoZSBjcHUgaG90cGx1ZyB0byBmaW5pc2ggdGhl
CisJCSAqIGluaXRpYWxpemF0aW9uIGJ5IHJlZ2lzdGVyaW5nIHRoZSBjbG9ja2V2ZW50cworCQkg
Ki8KKwkJaWYgKHN0bV9pbnN0YW5jZXMtPmNsb2NrZXZlbnRfcGVyX2NwdSA9PSBudW1fcG9zc2li
bGVfY3B1cygpKSB7CisJCQlyZXQgPSBjcHVocF9zZXR1cF9zdGF0ZShDUFVIUF9BUF9PTkxJTkVf
RFlOLCAiU1RNIHRpbWVyOnN0YXJ0aW5nIiwKKwkJCQkJCW54cF9zdG1fY2xvY2tldmVudF9zdGFy
dGluZ19jcHUsIE5VTEwpOworCQkJaWYgKHJldCA8IDApCisJCQkJcmV0dXJuIHJldDsKKwkJfQor
CX0KKworCXJldHVybiAwOworfQorCitzdGF0aWMgc3RydWN0IHN0bV9pbnN0YW5jZXMgczMyZ19z
dG1faW5zdGFuY2VzID0geyAuZmVhdHVyZXMgPSBTVE1fQ0xLU1JDIHwgU1RNX0NMS0VWVF9QRVJf
Q1BVIH07CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lkIG54cF9zdG1fb2ZfbWF0
Y2hbXSA9IHsKKwl7IC5jb21wYXRpYmxlID0gIm54cCxzMzJnMi1zdG0iLCAmczMyZ19zdG1faW5z
dGFuY2VzIH0sCisJeyB9Cit9OworTU9EVUxFX0RFVklDRV9UQUJMRShvZiwgbnhwX3N0bV9vZl9t
YXRjaCk7CisKK3N0YXRpYyBzdHJ1Y3QgcGxhdGZvcm1fZHJpdmVyIG54cF9zdG1fcHJvYmUgPSB7
CisJLnByb2JlCT0gbnhwX3N0bV90aW1lcl9wcm9iZSwKKwkuZHJpdmVyCT0geworCQkubmFtZSA9
ICJueHAtc3RtIiwKKwkJLm9mX21hdGNoX3RhYmxlID0gb2ZfbWF0Y2hfcHRyKG54cF9zdG1fb2Zf
bWF0Y2gpLAorCX0sCit9OworbW9kdWxlX3BsYXRmb3JtX2RyaXZlcihueHBfc3RtX3Byb2JlKTsK
KworTU9EVUxFX0RFU0NSSVBUSU9OKCJOWFAgU3lzdGVtIFRpbWVyIE1vZHVsZSBkcml2ZXIiKTsK
K01PRFVMRV9MSUNFTlNFKCJHUEwiKTsKLS0gCjIuNDMuMAoKX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KTGludXgtc3RtMzIgbWFpbGluZyBsaXN0CkxpbnV4
LXN0bTMyQHN0LW1kLW1haWxtYW4uc3Rvcm1yZXBseS5jb20KaHR0cHM6Ly9zdC1tZC1tYWlsbWFu
LnN0b3JtcmVwbHkuY29tL21haWxtYW4vbGlzdGluZm8vbGludXgtc3RtMzIK
