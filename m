Return-Path: <linux-stm32-bounces@st-md-mailman.stormreply.com>
X-Original-To: lists+linux-stm32@lfdr.de
Delivered-To: lists+linux-stm32@lfdr.de
Received: from stm-ict-prod-mailman-01.stormreply.prv (st-md-mailman.stormreply.com [52.209.6.89])
	by mail.lfdr.de (Postfix) with ESMTPS id D25A782AC36
	for <lists+linux-stm32@lfdr.de>; Thu, 11 Jan 2024 11:41:39 +0100 (CET)
Received: from ip-172-31-3-47.eu-west-1.compute.internal (localhost [127.0.0.1])
	by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTP id 95E8CC6DD6E;
	Thu, 11 Jan 2024 10:41:39 +0000 (UTC)
Received: from mx07-00178001.pphosted.com (mx07-00178001.pphosted.com
 [185.132.182.106])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested)
 by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTPS id C17A5C6DD66
 for <linux-stm32@st-md-mailman.stormreply.com>;
 Thu, 11 Jan 2024 10:41:38 +0000 (UTC)
Received: from pps.filterd (m0288072.ppops.net [127.0.0.1])
 by mx07-00178001.pphosted.com (8.17.1.24/8.17.1.24) with ESMTP id
 40B91YTI019501; Thu, 11 Jan 2024 11:41:12 +0100
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=foss.st.com; h=
 from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-type:content-transfer-encoding; s=
 selector1; bh=O0GTRGzHq+lXcjuEoVz/Hv58BuKjLq6gAZg49Kmnq/8=; b=xi
 TmrOgAEuZBDtIbk1N5ngJtd0YnbIqfU0KLuexK9+cWctzxOg6pIHL0qQdWBijYte
 4IbFlnBwbTAWTdzBgn/Lsa7gzuOTWBmnlREIGGHvjlRHK5xPqwh1pesmb1GnvioC
 KS69dYdq5OAFuD+NKKNDq0Lm+H2OnekiN+Xv5mfNTQGPuJ62nE77GflPXmi3naSU
 yna04EubvuqjuhqCZCt6P0uuosfKjWdkg2olvkDrBKx1FCx8j7mWIId3mFOYMYp1
 p6fY6jamEBIOYdiXJw8c6rdVe0uuOsL1t/Km9bBJ34xy4TclB/vrAZ/TrDgGb+6J
 h1Zs1GPsIFayOt14+yQQ==
Received: from beta.dmz-eu.st.com (beta.dmz-eu.st.com [164.129.1.35])
 by mx07-00178001.pphosted.com (PPS) with ESMTPS id 3vexpg57t8-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Thu, 11 Jan 2024 11:41:12 +0100 (CET)
Received: from euls16034.sgp.st.com (euls16034.sgp.st.com [10.75.44.20])
 by beta.dmz-eu.st.com (STMicroelectronics) with ESMTP id 7F3D9100049;
 Thu, 11 Jan 2024 11:41:11 +0100 (CET)
Received: from Webmail-eu.st.com (shfdag1node2.st.com [10.75.129.70])
 by euls16034.sgp.st.com (STMicroelectronics) with ESMTP id 746752309E3;
 Thu, 11 Jan 2024 11:41:11 +0100 (CET)
Received: from localhost (10.252.29.122) by SHFDAG1NODE2.st.com (10.75.129.70)
 with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256) id 15.1.2507.27; Thu, 11 Jan
 2024 11:41:08 +0100
From: Raphael Gallais-Pou <raphael.gallais-pou@foss.st.com>
To: Yannick Fertre <yannick.fertre@foss.st.com>, Raphael Gallais-Pou
 <raphael.gallais-pou@foss.st.com>, Philippe Cornu
 <philippe.cornu@foss.st.com>, Maarten Lankhorst
 <maarten.lankhorst@linux.intel.com>, Maxime Ripard <mripard@kernel.org>,
 Thomas Zimmermann <tzimmermann@suse.de>,
 David Airlie <airlied@gmail.com>, Daniel Vetter <daniel@ffwll.ch>,
 Rob Herring <robh+dt@kernel.org>, Krzysztof
 Kozlowski <krzysztof.kozlowski+dt@linaro.org>, Conor Dooley
 <conor+dt@kernel.org>, Maxime Coquelin <mcoquelin.stm32@gmail.com>,
 Alexandre Torgue <alexandre.torgue@foss.st.com>,
 Philipp Zabel <p.zabel@pengutronix.de>
Date: Thu, 11 Jan 2024 11:40:45 +0100
Message-ID: <20240111104049.38695-3-raphael.gallais-pou@foss.st.com>
X-Mailer: git-send-email 2.25.1
In-Reply-To: <20240111104049.38695-1-raphael.gallais-pou@foss.st.com>
References: <20240111104049.38695-1-raphael.gallais-pou@foss.st.com>
MIME-Version: 1.0
X-Originating-IP: [10.252.29.122]
X-ClientProxiedBy: SHFCAS1NODE1.st.com (10.75.129.72) To SHFDAG1NODE2.st.com
 (10.75.129.70)
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.272,Aquarius:18.0.997,Hydra:6.0.619,FMLib:17.11.176.26
 definitions=2024-01-05_08,2024-01-05_01,2023-05-22_02
Cc: linux-arm-kernel@lists.infradead.org, devicetree@vger.kernel.org,
 linux-stm32@st-md-mailman.stormreply.com, dri-devel@lists.freedesktop.org,
 linux-kernel@vger.kernel.org
Subject: [Linux-stm32] [PATCH v2 2/6] drm/stm: lvds: add new STM32 LVDS
	Display Interface Transmitter driver
X-BeenThere: linux-stm32@st-md-mailman.stormreply.com
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: <linux-stm32.st-md-mailman.stormreply.com>
List-Unsubscribe: <https://st-md-mailman.stormreply.com/mailman/options/linux-stm32>, 
 <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=unsubscribe>
List-Archive: <http://st-md-mailman.stormreply.com/pipermail/linux-stm32/>
List-Post: <mailto:linux-stm32@st-md-mailman.stormreply.com>
List-Help: <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=help>
List-Subscribe: <https://st-md-mailman.stormreply.com/mailman/listinfo/linux-stm32>, 
 <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linux-stm32-bounces@st-md-mailman.stormreply.com
Sender: "Linux-stm32" <linux-stm32-bounces@st-md-mailman.stormreply.com>

VGhlIExvdy1Wb2x0YWdlIERpZmZlcmVudGlhbCBTaWduYWxpbmcgKExWRFMpIERpc3BsYXkgSW50
ZXJmYWNlClRyYW5zbWl0dGVyIGhhbmRsZXMgdGhlIExWRFMgcHJvdG9jb2w6IGl0IG1hcHMgdGhl
IHBpeGVscyByZWNlaXZlZCBmcm9tCnRoZSB1cHN0cmVhbSBQaXhlbC1ETUEgTENELVRGVCBEaXNw
bGF5IENvbnRyb2xsZXIgKExUREMpIG9udG8gdGhlIExWRFMKUEhZLgoKSXQgcmVncm91cHMgdGhy
ZWUgc3ViIGJsb2NrczoKCSogTFZEUyBob3N0OiBoYW5kbGVzIHRoZSBMVkRTIHByb3RvY29sIChG
UEQgLyBPcGVuTERJKSBhbmQgbWFwcwoJICBpdHMgaW5wdXQgcGl4ZWxzIG9udG8gdGhlIGRhdGEg
bGFuZXMgb2YgdGhlIFBIWQoJKiBMVkRTIFBIWTogcGFyYWxsZWxpemUgdGhlIGRhdGEgYW5kIGRy
aXZlcyB0aGUgTFZEUyBkYXRhIGxhbmVzCgkqIExWRFMgd3JhcHBlcjogaGFuZGxlcyB0b3AtbGV2
ZWwgc2V0dGluZ3MKClRoZSBMVkRTIGNvbnRyb2xsZXIgZHJpdmVyIHN1cHBvcnRzIHRoZSBmb2xs
b3dpbmcgaGlnaC1sZXZlbCBmZWF0dXJlczoKCSogRkRQLUxpbmstSSBhbmQgT3BlbkxESSAodjAu
OTUpIHByb3RvY29scwoJKiBTaW5nbGUtTGluayBvciBEdWFsLUxpbmsgb3BlcmF0aW9uCgkqIFNp
bmdsZS1EaXNwbGF5IG9yIERvdWJsZS1EaXNwbGF5ICh3aXRoIHRoZSBzYW1lIGNvbnRlbnQKCSAg
ZHVwbGljYXRlZCBvbiBib3RoKQoJKiBGbGV4aWJsZSBCaXQtTWFwcGluZywgaW5jbHVkaW5nIEpF
SURBIGFuZCBWRVNBCgkqIFJHQjg4OCBvciBSR0I2NjYgb3V0cHV0CgkqIFN5bmNocm9ub3VzIGRl
c2lnbiwgd2l0aCBvbmUgaW5wdXQgcGl4ZWwgcGVyIGNsb2NrIGN5Y2xlCgpTaWduZWQtb2ZmLWJ5
OiBSYXBoYWVsIEdhbGxhaXMtUG91IDxyYXBoYWVsLmdhbGxhaXMtcG91QGZvc3Muc3QuY29tPgot
LS0KQ2hhbmdlcyBpbiB2MjoKCS0gRml4ZWQgQ2FtZWwgQ2FzZSBtYWNyb3MKCS0gUmVtb3ZlZCBk
ZWJ1ZyBsb2cKLS0tCiBkcml2ZXJzL2dwdS9kcm0vc3RtL0tjb25maWcgIHwgICAxMSArCiBkcml2
ZXJzL2dwdS9kcm0vc3RtL01ha2VmaWxlIHwgICAgMiArCiBkcml2ZXJzL2dwdS9kcm0vc3RtL2x2
ZHMuYyAgIHwgMTIyNSArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCiAzIGZpbGVz
IGNoYW5nZWQsIDEyMzggaW5zZXJ0aW9ucygrKQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMv
Z3B1L2RybS9zdG0vbHZkcy5jCgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3N0bS9LY29u
ZmlnIGIvZHJpdmVycy9ncHUvZHJtL3N0bS9LY29uZmlnCmluZGV4IGZhNDljZGU0M2JiMi4uOTYy
NzgxNGQwMjdjIDEwMDY0NAotLS0gYS9kcml2ZXJzL2dwdS9kcm0vc3RtL0tjb25maWcKKysrIGIv
ZHJpdmVycy9ncHUvZHJtL3N0bS9LY29uZmlnCkBAIC0yMCwzICsyMCwxNCBAQCBjb25maWcgRFJN
X1NUTV9EU0kKIAlzZWxlY3QgRFJNX0RXX01JUElfRFNJCiAJaGVscAogCSAgQ2hvb3NlIHRoaXMg
b3B0aW9uIGZvciBNSVBJIERTSSBzdXBwb3J0IG9uIFNUTWljcm9lbGVjdHJvbmljcyBTb0MuCisK
K2NvbmZpZyBEUk1fU1RNX0xWRFMKKwl0cmlzdGF0ZSAiU1RNaWNyb2VsZWN0cm9uaWNzIExWRFMg
RGlzcGxheSBJbnRlcmZhY2UgVHJhbnNtaXR0ZXIgRFJNIGRyaXZlciIKKwlkZXBlbmRzIG9uIERS
TV9TVE0KKwloZWxwCisJICBFbmFibGUgc3VwcG9ydCBmb3IgTFZEUyBlbmNvZGVycyBvbiBTVE1p
Y3JvZWxlY3Ryb25pY3MgU29DLgorCSAgVGhlIFNUTSBMVkRTIGlzIGEgYnJpZGdlIHdoaWNoIHNl
cmlhbGl6ZSBwaXhlbCBzdHJlYW0gb250bworCSAgYSBMVkRTIHByb3RvY29sLgorCisJICBUbyBj
b21waWxlIHRoaXMgZHJpdmVyIGFzIGEgbW9kdWxlLCBjaG9vc2UgTSBoZXJlOiB0aGUgbW9kdWxl
IHdpbGwgYmUKKwkgIGNhbGxlZCBsdmRzLgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3N0
bS9NYWtlZmlsZSBiL2RyaXZlcnMvZ3B1L2RybS9zdG0vTWFrZWZpbGUKaW5kZXggNGRmNWNhZjAx
ZjM1Li5hZDc0MGQ2MTc1YTYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvZ3B1L2RybS9zdG0vTWFrZWZp
bGUKKysrIGIvZHJpdmVycy9ncHUvZHJtL3N0bS9NYWtlZmlsZQpAQCAtNSw0ICs1LDYgQEAgc3Rt
LWRybS15IDo9IFwKIAogb2JqLSQoQ09ORklHX0RSTV9TVE1fRFNJKSArPSBkd19taXBpX2RzaS1z
dG0ubwogCitvYmotJChDT05GSUdfRFJNX1NUTV9MVkRTKSArPSBsdmRzLm8KKwogb2JqLSQoQ09O
RklHX0RSTV9TVE0pICs9IHN0bS1kcm0ubwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ncHUvZHJtL3N0
bS9sdmRzLmMgYi9kcml2ZXJzL2dwdS9kcm0vc3RtL2x2ZHMuYwpuZXcgZmlsZSBtb2RlIDEwMDY0
NAppbmRleCAwMDAwMDAwMDAwMDAuLmJlYjhiN2U0MzdhMAotLS0gL2Rldi9udWxsCisrKyBiL2Ry
aXZlcnMvZ3B1L2RybS9zdG0vbHZkcy5jCkBAIC0wLDAgKzEsMTIyNSBAQAorLy8gU1BEWC1MaWNl
bnNlLUlkZW50aWZpZXI6IEdQTC0yLjAtb25seQorLyoKKyAqIENvcHlyaWdodCAoQykgMjAyMywg
U1RNaWNyb2VsZWN0cm9uaWNzIC0gQWxsIFJpZ2h0cyBSZXNlcnZlZAorICogQXV0aG9yKHMpOiBS
YXBoYcOrbCBHQUxMQUlTLVBPVSA8cmFwaGFlbC5nYWxsYWlzLXBvdUBmb3NzLnN0LmNvbT4gZm9y
IFNUTWljcm9lbGVjdHJvbmljcy4KKyAqLworCisjaW5jbHVkZSA8ZHJtL2RybV9hdG9taWNfaGVs
cGVyLmg+CisjaW5jbHVkZSA8ZHJtL2RybV9icmlkZ2UuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX2Rl
dmljZS5oPgorI2luY2x1ZGUgPGRybS9kcm1fb2YuaD4KKyNpbmNsdWRlIDxkcm0vZHJtX3BhbmVs
Lmg+CisjaW5jbHVkZSA8ZHJtL2RybV9wcmludC5oPgorI2luY2x1ZGUgPGRybS9kcm1fcHJvYmVf
aGVscGVyLmg+CisKKyNpbmNsdWRlIDxsaW51eC9jbGsuaD4KKyNpbmNsdWRlIDxsaW51eC9jbGst
cHJvdmlkZXIuaD4KKyNpbmNsdWRlIDxsaW51eC9pby5oPgorI2luY2x1ZGUgPGxpbnV4L2lvcG9s
bC5oPgorI2luY2x1ZGUgPGxpbnV4L21lZGlhLWJ1cy1mb3JtYXQuaD4KKyNpbmNsdWRlIDxsaW51
eC9tb2R1bGUuaD4KKyNpbmNsdWRlIDxsaW51eC9vZl9kZXZpY2UuaD4KKyNpbmNsdWRlIDxsaW51
eC9yZXNldC5oPgorCisvKiBMVkRTIEhvc3QgcmVnaXN0ZXJzICovCisjZGVmaW5lIExWRFNfQ1IJ
CTB4MDAwMCAgLyogY29uZmlndXJhdGlvbiByZWdpc3RlciAqLworI2RlZmluZSBMVkRTX0RNTENS
MAkweDAwMDQgIC8qIGRhdGEgbWFwcGluZyBsc2IgY29uZmlndXJhdGlvbiByZWdpc3RlciAwICov
CisjZGVmaW5lIExWRFNfRE1NQ1IwCTB4MDAwOCAgLyogZGF0YSBtYXBwaW5nIG1zYiBjb25maWd1
cmF0aW9uIHJlZ2lzdGVyIDAgKi8KKyNkZWZpbmUgTFZEU19ETUxDUjEJMHgwMDBDICAvKiBkYXRh
IG1hcHBpbmcgbHNiIGNvbmZpZ3VyYXRpb24gcmVnaXN0ZXIgMSAqLworI2RlZmluZSBMVkRTX0RN
TUNSMQkweDAwMTAgIC8qIGRhdGEgbWFwcGluZyBtc2IgY29uZmlndXJhdGlvbiByZWdpc3RlciAx
ICovCisjZGVmaW5lIExWRFNfRE1MQ1IyCTB4MDAxNCAgLyogZGF0YSBtYXBwaW5nIGxzYiBjb25m
aWd1cmF0aW9uIHJlZ2lzdGVyIDIgKi8KKyNkZWZpbmUgTFZEU19ETU1DUjIJMHgwMDE4ICAvKiBk
YXRhIG1hcHBpbmcgbXNiIGNvbmZpZ3VyYXRpb24gcmVnaXN0ZXIgMiAqLworI2RlZmluZSBMVkRT
X0RNTENSMwkweDAwMUMgIC8qIGRhdGEgbWFwcGluZyBsc2IgY29uZmlndXJhdGlvbiByZWdpc3Rl
ciAzICovCisjZGVmaW5lIExWRFNfRE1NQ1IzCTB4MDAyMCAgLyogZGF0YSBtYXBwaW5nIG1zYiBj
b25maWd1cmF0aW9uIHJlZ2lzdGVyIDMgKi8KKyNkZWZpbmUgTFZEU19ETUxDUjQJMHgwMDI0ICAv
KiBkYXRhIG1hcHBpbmcgbHNiIGNvbmZpZ3VyYXRpb24gcmVnaXN0ZXIgNCAqLworI2RlZmluZSBM
VkRTX0RNTUNSNAkweDAwMjggIC8qIGRhdGEgbWFwcGluZyBtc2IgY29uZmlndXJhdGlvbiByZWdp
c3RlciA0ICovCisjZGVmaW5lIExWRFNfQ0RMMUNSCTB4MDAyQyAgLyogY2hhbm5lbCBkaXN0cmli
IGxpbmsgMSBjb25maWd1cmF0aW9uIHJlZ2lzdGVyICovCisjZGVmaW5lIExWRFNfQ0RMMkNSCTB4
MDAzMCAgLyogY2hhbm5lbCBkaXN0cmliIGxpbmsgMiBjb25maWd1cmF0aW9uIHJlZ2lzdGVyICov
CisKKyNkZWZpbmUgQ0RMMUNSX0RFRkFVTFQJMHgwNDMyMSAvKiBEZWZhdWx0IHZhbHVlIGZvciBD
REwxQ1IgKi8KKyNkZWZpbmUgQ0RMMkNSX0RFRkFVTFQJMHg1OTg3NiAvKiBEZWZhdWx0IHZhbHVl
IGZvciBDREwyQ1IgKi8KKworI2RlZmluZSBMVkRTX0RNTENSKGJpdCkJKExWRFNfRE1MQ1IwICsg
MHg4ICogKGJpdCkpCisjZGVmaW5lIExWRFNfRE1NQ1IoYml0KQkoTFZEU19ETU1DUjAgKyAweDgg
KiAoYml0KSkKKworLyogTFZEUyBXcmFwcGVyIHJlZ2lzdGVycyAqLworI2RlZmluZSBMVkRTX1dD
TEtDUgkweDExQjAgIC8qIFdyYXBwZXIgY2xvY2sgY29udHJvbCByZWdpc3RlciAqLworCisjZGVm
aW5lIExWRFNfSFdDRkdSCTB4MUZGMCAgLyogSFcgY29uZmlndXJhdGlvbiByZWdpc3RlcgkqLwor
I2RlZmluZSBMVkRTX1ZFUlIJMHgxRkY0ICAvKiBWZXJzaW9uIHJlZ2lzdGVyCSovCisjZGVmaW5l
IExWRFNfSVBJRFIJMHgxRkY4ICAvKiBJZGVudGlmaWNhdGlvbiByZWdpc3RlcgkqLworI2RlZmlu
ZSBMVkRTX1NJRFIJMHgxRkZDICAvKiBTaXplIElkZW50aWZpY2F0aW9uIHJlZ2lzdGVyCSovCisK
Ky8qIEJpdGZpZWxkIGRlc2NyaXB0aW9uICovCisjZGVmaW5lIENSX0xWRFNFTglCSVQoMCkgIC8q
IExWRFMgUEhZIEVuYWJsZSAqLworI2RlZmluZSBDUl9IU1BPTAlCSVQoMSkgIC8qIEhvcml6b250
YWwgU3luY2hyb25pemF0aW9uIFBvbGFyaXR5ICovCisjZGVmaW5lIENSX1ZTUE9MCUJJVCgyKSAg
LyogVmVydGljYWwgU3luY2hyb25pemF0aW9uIFBvbGFyaXR5ICovCisjZGVmaW5lIENSX0RFUE9M
CUJJVCgzKSAgLyogRGF0YSBFbmFibGUgUG9sYXJpdHkgKi8KKyNkZWZpbmUgQ1JfQ0kJCUJJVCg0
KSAgLyogQ29udHJvbCBJbnRlcm5hbCAoc29mdHdhcmUgY29udHJvbGxlZCBiaXQpICovCisjZGVm
aW5lIENSX0xLTU9ECUJJVCg1KSAgLyogTGluayBNb2RlLCBmb3IgYm90aCBMaW5rcyAqLworI2Rl
ZmluZSBDUl9MS1BIQQlCSVQoNikgIC8qIExpbmsgUGhhc2UsIGZvciBib3RoIExpbmtzICovCisj
ZGVmaW5lIENSX0xLMVBPTAlHRU5NQVNLKDIwLCAxNikgIC8qIExpbmstMSBvdXRwdXQgUG9sYXJp
dHkgKi8KKyNkZWZpbmUgQ1JfTEsyUE9MCUdFTk1BU0soMjUsIDIxKSAgLyogTGluay0yIG91dHB1
dCBQb2xhcml0eSAqLworCisjZGVmaW5lIERNTUNSX01BUDAJR0VOTUFTSyg0LCAwKSAvKiBNYXBw
aW5nIGZvciBiaXQgMCBvZiBkYXRhbGFuZSB4ICovCisjZGVmaW5lIERNTUNSX01BUDEJR0VOTUFT
Syg5LCA1KSAvKiBNYXBwaW5nIGZvciBiaXQgMSBvZiBkYXRhbGFuZSB4ICovCisjZGVmaW5lIERN
TUNSX01BUDIJR0VOTUFTSygxNCwgMTApIC8qIE1hcHBpbmcgZm9yIGJpdCAyIG9mIGRhdGFsYW5l
IHggKi8KKyNkZWZpbmUgRE1NQ1JfTUFQMwlHRU5NQVNLKDE5LCAxNSkgLyogTWFwcGluZyBmb3Ig
Yml0IDMgb2YgZGF0YWxhbmUgeCAqLworI2RlZmluZSBETUxDUl9NQVA0CUdFTk1BU0soNCwgMCkg
LyogTWFwcGluZyBmb3IgYml0IDQgb2YgZGF0YWxhbmUgeCAqLworI2RlZmluZSBETUxDUl9NQVA1
CUdFTk1BU0soOSwgNSkgLyogTWFwcGluZyBmb3IgYml0IDUgb2YgZGF0YWxhbmUgeCAqLworI2Rl
ZmluZSBETUxDUl9NQVA2CUdFTk1BU0soMTQsIDEwKSAvKiBNYXBwaW5nIGZvciBiaXQgNiBvZiBk
YXRhbGFuZSB4ICovCisKKyNkZWZpbmUgQ0RMQ1JfRElTVFIwCUdFTk1BU0soMywgMCkgLyogQ2hh
bm5lbCBkaXN0cmlidXRpb24gZm9yIGxhbmUgMCAqLworI2RlZmluZSBDRExDUl9ESVNUUjEJR0VO
TUFTSyg3LCA0KSAvKiBDaGFubmVsIGRpc3RyaWJ1dGlvbiBmb3IgbGFuZSAxICovCisjZGVmaW5l
IENETENSX0RJU1RSMglHRU5NQVNLKDExLCA4KSAvKiBDaGFubmVsIGRpc3RyaWJ1dGlvbiBmb3Ig
bGFuZSAyICovCisjZGVmaW5lIENETENSX0RJU1RSMwlHRU5NQVNLKDE1LCAxMikgLyogQ2hhbm5l
bCBkaXN0cmlidXRpb24gZm9yIGxhbmUgMyAqLworI2RlZmluZSBDRExDUl9ESVNUUjQJR0VOTUFT
SygxOSwgMTYpIC8qIENoYW5uZWwgZGlzdHJpYnV0aW9uIGZvciBsYW5lIDQgKi8KKworI2RlZmlu
ZSBQSFlfR0NSX0JJVF9DTEtfT1VUCUJJVCgwKSAgLyogQklUIGNsb2NrIGVuYWJsZSAqLworI2Rl
ZmluZSBQSFlfR0NSX0xTX0NMS19PVVQJQklUKDQpICAvKiBMUyBjbG9jayBlbmFibGUgKi8KKyNk
ZWZpbmUgUEhZX0dDUl9EUF9DTEtfT1VUCUJJVCg4KSAgLyogRFAgY2xvY2sgZW5hYmxlICovCisj
ZGVmaW5lIFBIWV9HQ1JfUlNUWgkJQklUKDI0KSAvKiBMVkRTIFBIWSBkaWdpdGFsIHJlc2V0ICov
CisjZGVmaW5lIFBIWV9HQ1JfRElWX1JTVE4JQklUKDI1KSAvKiBPdXRwdXQgZGl2aWRlciByZXNl
dCAqLworI2RlZmluZSBQSFlfU0NSX1RYX0VOCQlCSVQoMTYpIC8qIFRyYW5zbWlzc2lvbiBtb2Rl
IGVuYWJsZSAqLworLyogQ3VycmVudCBtb2RlIGRyaXZlciBlbmFibGUgKi8KKyNkZWZpbmUgUEhZ
X0NNQ1JfQ01fRU5fREwJKEJJVCgyOCkgfCBCSVQoMjApIHwgQklUKDEyKSB8IEJJVCg0KSkKKyNk
ZWZpbmUgUEhZX0NNQ1JfQ01fRU5fREw0CUJJVCg0KQorLyogQmlhcyBlbmFibGUgKi8KKyNkZWZp
bmUgUEhZX0JDUjFfRU5fQklBU19ETAkoQklUKDE2KSB8IEJJVCgxMikgfCBCSVQoOCkgfCBCSVQo
NCkgfCBCSVQoMCkpCisjZGVmaW5lIFBIWV9CQ1IyX0JJQVNfRU4JQklUKDI4KQorLyogVm9sdGFn
ZSBtb2RlIGRyaXZlciBlbmFibGUgKi8KKyNkZWZpbmUgUEhZX0JDUjNfVk1fRU5fREwJKEJJVCgx
NikgfCBCSVQoMTIpIHwgQklUKDgpIHwgQklUKDQpIHwgQklUKDApKQorI2RlZmluZSBQSFlfRENS
X1BPV0VSX09LCUJJVCgxMikKKyNkZWZpbmUgUEhZX0NGR0NSX0VOX0RJR19ETAlHRU5NQVNLKDQs
IDApIC8qIExWRFMgUEhZIGRpZ2l0YWwgbGFuZSBlbmFibGUgKi8KKyNkZWZpbmUgUEhZX1BMTENS
MV9QTExfRU4JQklUKDApIC8qIExWRFMgUEhZIFBMTCBlbmFibGUgKi8KKyNkZWZpbmUgUEhZX1BM
TENSMV9FTl9TRAlCSVQoMSkgLyogTFZEUyBQSFkgUExMIHNpZ21hLWRlbHRhIHNpZ25hbCBlbmFi
bGUgKi8KKyNkZWZpbmUgUEhZX1BMTENSMV9FTl9UV0cJQklUKDIpIC8qIExWRFMgUEhZIFBMTCB0
cmlhbmd1bGFyIHdhdmUgZ2VuZXJhdG9yIGVuYWJsZSAqLworI2RlZmluZSBQSFlfUExMQ1IxX0RJ
Vl9FTglCSVQoOCkgLyogTFZEUyBQSFkgUExMIGRpdmlkZXJzIGVuYWJsZSAqLworI2RlZmluZSBQ
SFlfUExMQ1IyX05ESVYJCUdFTk1BU0soMjUsIDE2KSAvKiBORElWIG1hc2sgdmFsdWUgKi8KKyNk
ZWZpbmUgUEhZX1BMTENSMl9CRElWCQlHRU5NQVNLKDksIDApICAgLyogQkRJViBtYXNrIHZhbHVl
ICovCisjZGVmaW5lIFBIWV9QTExTUl9QTExfTE9DSwlCSVQoMCkgLyogTFZEUyBQSFkgUExMIGxv
Y2sgc3RhdHVzICovCisjZGVmaW5lIFBIWV9QTExTRENSMV9NRElWCUdFTk1BU0soOSwgMCkgICAv
KiBNRElWIG1hc2sgdmFsdWUgKi8KKyNkZWZpbmUgUEhZX1BMTFRFU1RDUl9URElWCUdFTk1BU0so
MjUsIDE2KSAvKiBURElWIG1hc2sgdmFsdWUgKi8KKyNkZWZpbmUgUEhZX1BMTFRFU1RDUl9DTEtf
RU4JQklUKDApIC8qIFRlc3QgY2xvY2sgZW5hYmxlICovCisjZGVmaW5lIFBIWV9QTExURVNUQ1Jf
RU4JQklUKDgpIC8qIFRlc3QgZGl2aWRlciBvdXRwdXQgZW5hYmxlICovCisKKyNkZWZpbmUgV0NM
S0NSX1NFQ05EX0NMS1BJWF9TRUwJQklUKDApIC8qIFBpeGVsIGNsb2NrIHNlbGVjdGlvbiAqLwor
I2RlZmluZSBXQ0xLQ1JfU1JDU0VMCQlCSVQoOCkgLyogU291cmNlIHNlbGVjdGlvbiBmb3IgdGhl
IHBpeGVsIGNsb2NrICovCisKKy8qIFNsZWVwICYgdGltZW91dCBmb3IgcGxsIGxvY2svdW5sb2Nr
ICovCisjZGVmaW5lIFNMRUVQX1VTCTEwMDAKKyNkZWZpbmUgVElNRU9VVF9VUwkyMDAwMDAKKwor
LyoKKyAqIFRoZSBsaW5rIHBoYXNlIGRlZmluZXMgd2hldGhlciBhbiBPREQgcGl4ZWwgaXMgY2Fy
cmllZCBvdmVyIHRvZ2V0aGVyIHdpdGgKKyAqIHRoZSBuZXh0IEVWRU4gcGl4ZWwgb3IgdG9nZXRo
ZXIgd2l0aCB0aGUgcHJldmlvdXMgRVZFTiBwaXhlbC4KKyAqCisgKiBMVkRTX0RVQUxfTElOS19F
VkVOX09ERF9QSVhFTFMgKExLUEhBID0gMCkKKyAqCisgKiAsLS0tLS0tLS0uICAsLS0tLS0tLS0u
ICAsLS0tLS0tLS0uICAsLS0tLS0tLS0uICAsLS0tLS0tLS0tLgorICogfCBPREQgIExLIFwvIFBJ
WEVMICAzIFwvIFBJWEVMICAxIFwvIFBJWEVMJyAxIFwvIFBJWEVMJyAzIHwKKyAqIHwgRVZFTiBM
SyAvXCBQSVhFTCAgMiAvXCBQSVhFTCcgMCAvXCBQSVhFTCcgMiAvXCBQSVhFTCcgNCB8CisgKiBg
LS0tLS0tLS0nICBgLS0tLS0tLS0nICBgLS0tLS0tLS0nICBgLS0tLS0tLS0nICBgLS0tLS0tLS0t
JworICoKKyAqIExWRFNfRFVBTF9MSU5LX09ERF9FVkVOX1BJWEVMUyAoTEtQSEEgPSAxKQorICoK
KyAqICwtLS0tLS0tLS4gICwtLS0tLS0tLS4gICwtLS0tLS0tLS4gICwtLS0tLS0tLS4gICwtLS0t
LS0tLS0uCisgKiB8IE9ERCAgTEsgXC8gUElYRUwgIDMgXC8gUElYRUwgIDEgXC8gUElYRUwnIDEg
XC8gUElYRUwnIDMgfAorICogfCBFVkVOIExLIC9cIFBJWEVMICA0IC9cIFBJWEVMICAyIC9cIFBJ
WEVMJyAwIC9cIFBJWEVMJyAyIHwKKyAqIGAtLS0tLS0tLScgIGAtLS0tLS0tLScgIGAtLS0tLS0t
LScgIGAtLS0tLS0tLScgIGAtLS0tLS0tLS0nCisgKgorICovCitlbnVtIGx2ZHNfbGlua190eXBl
IHsKKwlMVkRTX1NJTkdMRV9MSU5LX1BSSU1BUlkgPSAwLAorCUxWRFNfU0lOR0xFX0xJTktfU0VD
T05EQVJZLAorCUxWRFNfRFVBTF9MSU5LX0VWRU5fT0REX1BJWEVMUywKKwlMVkRTX0RVQUxfTElO
S19PRERfRVZFTl9QSVhFTFMsCit9OworCitlbnVtIGx2ZHNfcGl4ZWwgeworCVBJWF9SXzAgPSAw
LAorCVBJWF9SXzEsCisJUElYX1JfMiwKKwlQSVhfUl8zLAorCVBJWF9SXzQsCisJUElYX1JfNSwK
KwlQSVhfUl82LAorCVBJWF9SXzcsCisJUElYX0dfMCwKKwlQSVhfR18xLAorCVBJWF9HXzIsCisJ
UElYX0dfMywKKwlQSVhfR180LAorCVBJWF9HXzUsCisJUElYX0dfNiwKKwlQSVhfR183LAorCVBJ
WF9CXzAsCisJUElYX0JfMSwKKwlQSVhfQl8yLAorCVBJWF9CXzMsCisJUElYX0JfNCwKKwlQSVhf
Ql81LAorCVBJWF9CXzYsCisJUElYX0JfNywKKwlQSVhfSF9TLAorCVBJWF9WX1MsCisJUElYX0Rf
RSwKKwlQSVhfQ19FLAorCVBJWF9DX0ksCisJUElYX1RPRywKKwlQSVhfT05FLAorCVBJWF9aRVIs
Cit9OworCitzdHJ1Y3QgcGh5X3JlZ19vZmZzZXRzIHsKKwl1MzIgR0NSOwkvKiBHbG9iYWwgQ29u
dHJvbCBSZWdpc3RlcgkqLworCXUzMiBDTUNSMTsgICAgLyogQ3VycmVudCBNb2RlIENvbnRyb2wg
UmVnaXN0ZXIgMSAqLworCXUzMiBDTUNSMjsgICAgLyogQ3VycmVudCBNb2RlIENvbnRyb2wgUmVn
aXN0ZXIgMiAqLworCXUzMiBTQ1I7ICAgICAgLyogU2VyaWFsIENvbnRyb2wgUmVnaXN0ZXIJKi8K
Kwl1MzIgQkNSMTsgICAgIC8qIEJpYXMgQ29udHJvbCBSZWdpc3RlciAxCSovCisJdTMyIEJDUjI7
ICAgICAvKiBCaWFzIENvbnRyb2wgUmVnaXN0ZXIgMgkqLworCXUzMiBCQ1IzOyAgICAgLyogQmlh
cyBDb250cm9sIFJlZ2lzdGVyIDMJKi8KKwl1MzIgTVBMQ1I7ICAgIC8qIE1vbml0b3IgUExMIExv
Y2sgQ29udHJvbCBSZWdpc3RlciAqLworCXUzMiBEQ1I7ICAgICAgLyogRGVidWcgQ29udHJvbCBS
ZWdpc3RlcgkqLworCXUzMiBTU1IxOyAgICAgLyogU3BhcmUgU3RhdHVzIFJlZ2lzdGVyIDEJKi8K
Kwl1MzIgQ0ZHQ1I7ICAgIC8qIENvbmZpZ3VyYXRpb24gQ29udHJvbCBSZWdpc3RlciAqLworCXUz
MiBQTExDUjE7ICAgLyogUExMX01PREUgMSBDb250cm9sIFJlZ2lzdGVyCSovCisJdTMyIFBMTENS
MjsgICAvKiBQTExfTU9ERSAyIENvbnRyb2wgUmVnaXN0ZXIJKi8KKwl1MzIgUExMU1I7ICAgIC8q
IFBMTCBTdGF0dXMgUmVnaXN0ZXIJKi8KKwl1MzIgUExMU0RDUjE7IC8qIFBMTF9TRF8xIENvbnRy
b2wgUmVnaXN0ZXIJKi8KKwl1MzIgUExMU0RDUjI7IC8qIFBMTF9TRF8yIENvbnRyb2wgUmVnaXN0
ZXIJKi8KKwl1MzIgUExMVFdHQ1IxOy8qIFBMTF9UV0dfMSBDb250cm9sIFJlZ2lzdGVyCSovCisJ
dTMyIFBMTFRXR0NSMjsvKiBQTExfVFdHXzIgQ29udHJvbCBSZWdpc3RlcgkqLworCXUzMiBQTExD
UENSOyAgLyogUExMX0NQIENvbnRyb2wgUmVnaXN0ZXIJKi8KKwl1MzIgUExMVEVTVENSOy8qIFBM
TF9URVNUIENvbnRyb2wgUmVnaXN0ZXIJKi8KK307CisKK3N0cnVjdCBsdmRzX3BoeV9pbmZvIHsK
Kwl1MzIgYmFzZTsKKwlzdHJ1Y3QgcGh5X3JlZ19vZmZzZXRzIG9mczsKK307CisKK3N0YXRpYyBz
dHJ1Y3QgbHZkc19waHlfaW5mbyBsdmRzX3BoeV8xNmZmX3ByaW1hcnkgPSB7CisJLmJhc2UgPSAw
eDEwMDAsCisJLm9mcyA9IHsKKwkJLkdDUiA9IDB4MCwKKwkJLkNNQ1IxID0gMHhDLAorCQkuQ01D
UjIgPSAweDEwLAorCQkuU0NSID0gMHgyMCwKKwkJLkJDUjEgPSAweDJDLAorCQkuQkNSMiA9IDB4
MzAsCisJCS5CQ1IzID0gMHgzNCwKKwkJLk1QTENSID0gMHg2NCwKKwkJLkRDUiA9IDB4ODQsCisJ
CS5TU1IxID0gMHg4OCwKKwkJLkNGR0NSID0gMHhBMCwKKwkJLlBMTENSMSA9IDB4QzAsCisJCS5Q
TExDUjIgPSAweEM0LAorCQkuUExMU1IgPSAweEM4LAorCQkuUExMU0RDUjEgPSAweENDLAorCQku
UExMU0RDUjIgPSAweEQwLAorCQkuUExMVFdHQ1IxID0gMHhENCwKKwkJLlBMTFRXR0NSMiA9IDB4
RDgsCisJCS5QTExDUENSID0gMHhFMCwKKwkJLlBMTFRFU1RDUiA9IDB4RTgsCisJfQorfTsKKwor
c3RhdGljIHN0cnVjdCBsdmRzX3BoeV9pbmZvIGx2ZHNfcGh5XzE2ZmZfc2Vjb25kYXJ5ID0gewor
CS5iYXNlID0gMHgxMTAwLAorCS5vZnMgPSB7CisJCS5HQ1IgPSAweDAsCisJCS5DTUNSMSA9IDB4
QywKKwkJLkNNQ1IyID0gMHgxMCwKKwkJLlNDUiA9IDB4MjAsCisJCS5CQ1IxID0gMHgyQywKKwkJ
LkJDUjIgPSAweDMwLAorCQkuQkNSMyA9IDB4MzQsCisJCS5NUExDUiA9IDB4NjQsCisJCS5EQ1Ig
PSAweDg0LAorCQkuU1NSMSA9IDB4ODgsCisJCS5DRkdDUiA9IDB4QTAsCisJCS5QTExDUjEgPSAw
eEMwLAorCQkuUExMQ1IyID0gMHhDNCwKKwkJLlBMTFNSID0gMHhDOCwKKwkJLlBMTFNEQ1IxID0g
MHhDQywKKwkJLlBMTFNEQ1IyID0gMHhEMCwKKwkJLlBMTFRXR0NSMSA9IDB4RDQsCisJCS5QTExU
V0dDUjIgPSAweEQ4LAorCQkuUExMQ1BDUiA9IDB4RTAsCisJCS5QTExURVNUQ1IgPSAweEU4LAor
CX0KK307CisKK3N0cnVjdCBzdG1fbHZkcyB7CisJdm9pZCBfX2lvbWVtICpiYXNlOworCXN0cnVj
dCBkZXZpY2UgKmRldjsKKwlzdHJ1Y3QgY2xrICpwY2xrOwkJLyogQVBCIHBlcmlwaGVyYWwgY2xv
Y2sgKi8KKwlzdHJ1Y3QgY2xrICpwbGxyZWZfY2xrOwkJLyogUmVmZXJlbmNlIGNsb2NrIGZvciB0
aGUgaW50ZXJuYWwgUExMICovCisJc3RydWN0IGNsa19odyBsdmRzX2NrX3B4OwkvKiBQaXhlbCBj
bG9jayAqLworCXUzMiBwaXhlbF9jbG9ja19yYXRlOwkJLyogUGl4ZWwgY2xvY2sgcmF0ZSAqLwor
CisJc3RydWN0IGx2ZHNfcGh5X2luZm8gKnByaW1hcnk7CisJc3RydWN0IGx2ZHNfcGh5X2luZm8g
KnNlY29uZGFyeTsKKworCXN0cnVjdCBkcm1fYnJpZGdlIGx2ZHNfYnJpZGdlOworCXN0cnVjdCBk
cm1fYnJpZGdlICpuZXh0X2JyaWRnZTsKKwlzdHJ1Y3QgZHJtX2Nvbm5lY3RvciBjb25uZWN0b3I7
CisJc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyOworCXN0cnVjdCBkcm1fcGFuZWwgKnBhbmVs
OworCisJdTMyIGh3X3ZlcnNpb247CisJdTMyIGxpbmtfdHlwZTsKK307CisKKyNkZWZpbmUgYnJp
ZGdlX3RvX3N0bV9sdmRzKGIpIFwKKwljb250YWluZXJfb2YoYiwgc3RydWN0IHN0bV9sdmRzLCBs
dmRzX2JyaWRnZSkKKworI2RlZmluZSBjb25uZWN0b3JfdG9fc3RtX2x2ZHMoYykgXAorCWNvbnRh
aW5lcl9vZihjLCBzdHJ1Y3Qgc3RtX2x2ZHMsIGNvbm5lY3RvcikKKworI2RlZmluZSBsdmRzX2lz
X2R1YWxfbGluayhsdmRzKSBcCisJKHsJXAorCXR5cGVvZihsdmRzKSBfX2x2ZHMgPSAobHZkcyk7
CVwKKwlfX2x2ZHMgPT0gTFZEU19EVUFMX0xJTktfRVZFTl9PRERfUElYRUxTIHx8CVwKKwlfX2x2
ZHMgPT0gTFZEU19EVUFMX0xJTktfT0REX0VWRU5fUElYRUxTOwlcCisJfSkKKworc3RhdGljIGlu
bGluZSB2b2lkIGx2ZHNfd3JpdGUoc3RydWN0IHN0bV9sdmRzICpsdmRzLCB1MzIgcmVnLCB1MzIg
dmFsKQoreworCXdyaXRlbCh2YWwsIGx2ZHMtPmJhc2UgKyByZWcpOworfQorCitzdGF0aWMgaW5s
aW5lIHUzMiBsdmRzX3JlYWQoc3RydWN0IHN0bV9sdmRzICpsdmRzLCB1MzIgcmVnKQoreworCXJl
dHVybiByZWFkbChsdmRzLT5iYXNlICsgcmVnKTsKK30KKworc3RhdGljIGlubGluZSB2b2lkIGx2
ZHNfc2V0KHN0cnVjdCBzdG1fbHZkcyAqbHZkcywgdTMyIHJlZywgdTMyIG1hc2spCit7CisJbHZk
c193cml0ZShsdmRzLCByZWcsIGx2ZHNfcmVhZChsdmRzLCByZWcpIHwgbWFzayk7Cit9CisKK3N0
YXRpYyBpbmxpbmUgdm9pZCBsdmRzX2NsZWFyKHN0cnVjdCBzdG1fbHZkcyAqbHZkcywgdTMyIHJl
ZywgdTMyIG1hc2spCit7CisJbHZkc193cml0ZShsdmRzLCByZWcsIGx2ZHNfcmVhZChsdmRzLCBy
ZWcpICYgfm1hc2spOworfQorCisvKgorICogRXhwZWN0ZWQgSkVJREEtUkdCODg4IGRhdGEgdG8g
YmUgc2VudCBpbiBMU0IgZm9ybWF0CisgKgkgICAgYml0NiAuLi4uLi4uLi4uLi4uLi4uLi4uLi4u
Li4uLi4uYml0MAorICogQ0hBTjAgICB7T05FLCBPTkUsIFpFUk8sIFpFUk8sIFpFUk8sIE9ORSwg
T05FfQorICogQ0hBTjEgICB7RzIsICBSNywgIFI2LCAgIFI1LCAgIFI0LCAgIFIzLCAgUjJ9Cisg
KiBDSEFOMiAgIHtCMywgIEIyLCAgRzcsICAgRzYsICAgRzUsICAgRzQsICBHM30KKyAqIENIQU4z
ICAge0RFLCAgVlMsICBIUywgICBCNywgICBCNiwgICBCNSwgIEI0fQorICogQ0hBTjQgICB7Q0Us
ICBCMSwgIEIwLCAgIEcxLCAgIEcwLCAgIFIxLCAgUjB9CisgKi8KK2VudW0gbHZkc19waXhlbCBs
dmRzX2JpdG1hcF9qZWlkYV9yZ2I4ODhbNV1bN10gPSB7CisJeyBQSVhfT05FLCBQSVhfT05FLCBQ
SVhfWkVSLCBQSVhfWkVSLCBQSVhfWkVSLCBQSVhfT05FLCBQSVhfT05FIH0sCisJeyBQSVhfR18y
LCBQSVhfUl83LCBQSVhfUl82LCBQSVhfUl81LCBQSVhfUl80LCBQSVhfUl8zLCBQSVhfUl8yIH0s
CisJeyBQSVhfQl8zLCBQSVhfQl8yLCBQSVhfR183LCBQSVhfR182LCBQSVhfR181LCBQSVhfR180
LCBQSVhfR18zIH0sCisJeyBQSVhfRF9FLCBQSVhfVl9TLCBQSVhfSF9TLCBQSVhfQl83LCBQSVhf
Ql82LCBQSVhfQl81LCBQSVhfQl80IH0sCisJeyBQSVhfQ19FLCBQSVhfQl8xLCBQSVhfQl8wLCBQ
SVhfR18xLCBQSVhfR18wLCBQSVhfUl8xLCBQSVhfUl8wIH0KK307CisKKy8qCisgKiBFeHBlY3Rl
ZCBWRVNBLVJHQjg4OCBkYXRhIHRvIGJlIHNlbnQgaW4gTFNCIGZvcm1hdAorICoJICAgIGJpdDYg
Li4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLmJpdDAKKyAqIENIQU4wICAge09ORSwgT05FLCBa
RVJPLCBaRVJPLCBaRVJPLCBPTkUsIE9ORX0KKyAqIENIQU4xICAge0cwLCAgUjUsICBSNCwgICBS
MywgICBSMiwgICBSMSwgIFIwfQorICogQ0hBTjIgICB7QjEsICBCMCwgIEc1LCAgIEc0LCAgIEcz
LCAgIEcyLCAgRzF9CisgKiBDSEFOMyAgIHtERSwgIFZTLCAgSFMsICAgQjUsICAgQjQsICAgQjMs
ICBCMn0KKyAqIENIQU40ICAge0NFLCAgQjcsICBCNiwgICBHNywgICBHNiwgICBSNywgIFI2fQor
ICovCitlbnVtIGx2ZHNfcGl4ZWwgbHZkc19iaXRtYXBfdmVzYV9yZ2I4ODhbNV1bN10gPSB7CisJ
eyBQSVhfT05FLCBQSVhfT05FLCBQSVhfWkVSLCBQSVhfWkVSLCBQSVhfWkVSLCBQSVhfT05FLCBQ
SVhfT05FIH0sCisJeyBQSVhfR18wLCBQSVhfUl81LCBQSVhfUl80LCBQSVhfUl8zLCBQSVhfUl8y
LCBQSVhfUl8xLCBQSVhfUl8wIH0sCisJeyBQSVhfQl8xLCBQSVhfQl8wLCBQSVhfR181LCBQSVhf
R180LCBQSVhfR18zLCBQSVhfR18yLCBQSVhfR18xIH0sCisJeyBQSVhfRF9FLCBQSVhfVl9TLCBQ
SVhfSF9TLCBQSVhfQl81LCBQSVhfQl80LCBQSVhfQl8zLCBQSVhfQl8yIH0sCisJeyBQSVhfQ19F
LCBQSVhfQl83LCBQSVhfQl82LCBQSVhfR183LCBQSVhfR182LCBQSVhfUl83LCBQSVhfUl82IH0K
K307CisKKy8qCisgKiBDbG9ja3MgYW5kIFBIWSByZWxhdGVkIGZ1bmN0aW9ucworICovCitzdGF0
aWMgaW50IGx2ZHNfcGxsX2VuYWJsZShzdHJ1Y3Qgc3RtX2x2ZHMgKmx2ZHMsIHN0cnVjdCBsdmRz
X3BoeV9pbmZvICpwaHkpCit7CisJc3RydWN0IGRybV9kZXZpY2UgKmRybSA9IGx2ZHMtPmx2ZHNf
YnJpZGdlLmRldjsKKwl1MzIgbHZkc19nY3I7CisJaW50IHZhbCwgcmV0OworCisJLyoKKwkgKiBQ
TEwgbG9jayB0aW1pbmcgY29udHJvbCBmb3IgdGhlIG1vbml0b3IgdW5tYXNrIGFmdGVyIHN0YXJ0
dXAgKHBsbF9lbikKKwkgKiBBZGp1c3RlZCB2YWx1ZSBzbyB0aGF0IHRoZSBtYXNraW5nIHdpbmRv
dyBpcyBvcGVuZWQgYXQgc3RhcnQtdXAKKwkgKi8KKwlsdmRzX3dyaXRlKGx2ZHMsIHBoeS0+YmFz
ZSArIHBoeS0+b2ZzLk1QTENSLCAoMHgyMDAgLSAweDE2MCkgPDwgMTYpOworCisJLyogRW5hYmxl
IGJpYXMgKi8KKwlsdmRzX3dyaXRlKGx2ZHMsIHBoeS0+YmFzZSArIHBoeS0+b2ZzLkJDUjIsIFBI
WV9CQ1IyX0JJQVNfRU4pOworCisJLyogRW5hYmxlIERQLCBMUywgQklUIGNsb2NrIG91dHB1dCAq
LworCWx2ZHNfZ2NyID0gUEhZX0dDUl9EUF9DTEtfT1VUIHwgUEhZX0dDUl9MU19DTEtfT1VUIHwg
UEhZX0dDUl9CSVRfQ0xLX09VVDsKKwlsdmRzX3NldChsdmRzLCBwaHktPmJhc2UgKyBwaHktPm9m
cy5HQ1IsIGx2ZHNfZ2NyKTsKKworCS8qIFBvd2VyIHVwIGFsbCBvdXRwdXQgZGl2aWRlcnMgKi8K
KwlsdmRzX3NldChsdmRzLCBwaHktPmJhc2UgKyBwaHktPm9mcy5QTExURVNUQ1IsIFBIWV9QTExU
RVNUQ1JfRU4pOworCWx2ZHNfc2V0KGx2ZHMsIHBoeS0+YmFzZSArIHBoeS0+b2ZzLlBMTENSMSwg
UEhZX1BMTENSMV9ESVZfRU4pOworCisJLyogU2V0IFBIWSBpbiBzZXJpYWwgdHJhbnNtaXNzaW9u
IG1vZGUgKi8KKwlsdmRzX3NldChsdmRzLCBwaHktPmJhc2UgKyBwaHktPm9mcy5TQ1IsIFBIWV9T
Q1JfVFhfRU4pOworCisJLyogRW5hYmxlIHRoZSBMVkRTIFBMTCAmIHdhaXQgZm9yIGl0cyBsb2Nr
ICovCisJbHZkc19zZXQobHZkcywgcGh5LT5iYXNlICsgcGh5LT5vZnMuUExMQ1IxLCBQSFlfUExM
Q1IxX1BMTF9FTik7CisJcmV0ID0gcmVhZGxfcG9sbF90aW1lb3V0X2F0b21pYyhsdmRzLT5iYXNl
ICsgcGh5LT5iYXNlICsgcGh5LT5vZnMuUExMU1IsCisJCQkJCXZhbCwgdmFsICYgUEhZX1BMTFNS
X1BMTF9MT0NLLAorCQkJCQlTTEVFUF9VUywgVElNRU9VVF9VUyk7CisJaWYgKHJldCkKKwkJZHJt
X2Vycihkcm0sICIhVElNRU9VVCEgd2FpdGluZyBQTEwsIGxldCdzIGNvbnRpbnVlXG4iKTsKKwor
CS8qIFdDTEtDUl9TRUNORF9DTEtQSVhfU0VMIGlzIGZvciBkdWFsIGxpbmsgKi8KKwlsdmRzX3dy
aXRlKGx2ZHMsIExWRFNfV0NMS0NSLCBXQ0xLQ1JfU0VDTkRfQ0xLUElYX1NFTCk7CisKKwlsdmRz
X3NldChsdmRzLCBwaHktPm9mcy5QTExURVNUQ1IsIFBIWV9QTExURVNUQ1JfQ0xLX0VOKTsKKwor
CXJldHVybiByZXQ7Cit9CisKK3N0YXRpYyBpbnQgcGxsX2dldF9jbGtvdXRfa2h6KGludCBjbGtp
bl9raHosIGludCBiZGl2LCBpbnQgbWRpdiwgaW50IG5kaXYpCit7CisJaW50IGRpdmlzb3IgPSBu
ZGl2ICogYmRpdjsKKworCS8qIFByZXZlbnRzIGZyb20gZGl2aXNpb24gYnkgMCAqLworCWlmICgh
ZGl2aXNvcikKKwkJcmV0dXJuIDA7CisKKwlyZXR1cm4gY2xraW5fa2h6ICogbWRpdiAvIGRpdmlz
b3I7Cit9CisKKyNkZWZpbmUgVERJVgk3MAorI2RlZmluZSBORElWX01JTgkyCisjZGVmaW5lIE5E
SVZfTUFYCTYKKyNkZWZpbmUgQkRJVl9NSU4JMgorI2RlZmluZSBCRElWX01BWAk2CisjZGVmaW5l
IE1ESVZfTUlOCTEKKyNkZWZpbmUgTURJVl9NQVgJMTAyMworCitzdGF0aWMgaW50IGx2ZHNfcGxs
X2dldF9wYXJhbXMoc3RydWN0IHN0bV9sdmRzICpsdmRzLAorCQkJICAgICAgIHVuc2lnbmVkIGlu
dCBjbGtpbl9raHosIHVuc2lnbmVkIGludCBjbGtvdXRfa2h6LAorCQkJICAgICAgIHVuc2lnbmVk
IGludCAqYmRpdiwgdW5zaWduZWQgaW50ICptZGl2LCB1bnNpZ25lZCBpbnQgKm5kaXYpCit7CisJ
aW50IGRlbHRhLCBiZXN0X2RlbHRhOyAvKiBhbGwgaW4ga2h6ICovCisJaW50IGksIG8sIG47CisK
KwkvKiBFYXJseSBjaGVja3MgcHJldmVudGluZyBkaXZpc2lvbiBieSAwICYgb2RkIHJlc3VsdHMg
Ki8KKwlpZiAoY2xraW5fa2h6IDw9IDAgfHwgY2xrb3V0X2toeiA8PSAwKQorCQlyZXR1cm4gLUVJ
TlZBTDsKKworCWJlc3RfZGVsdGEgPSAxMDAwMDAwOyAvKiBiaWcgc3RhcnRlZCB2YWx1ZSAoMTAw
MDAwMGtoeikgKi8KKworCWZvciAoaSA9IE5ESVZfTUlOOyBpIDw9IE5ESVZfTUFYOyBpKyspIHsK
KwkJZm9yIChvID0gQkRJVl9NSU47IG8gPD0gQkRJVl9NQVg7IG8rKykgeworCQkJbiA9IERJVl9S
T1VORF9DTE9TRVNUKGkgKiBvICogY2xrb3V0X2toeiwgY2xraW5fa2h6KTsKKwkJCS8qIENoZWNr
IG5kaXYgYWNjb3JkaW5nIHRvIHZjbyByYW5nZSAqLworCQkJaWYgKG4gPCBNRElWX01JTiB8fCBu
ID4gTURJVl9NQVgpCisJCQkJY29udGludWU7CisJCQkvKiBDaGVjayBpZiBuZXcgZGVsdGEgaXMg
YmV0dGVyICYgc2F2ZXMgcGFyYW1ldGVycyAqLworCQkJZGVsdGEgPSBwbGxfZ2V0X2Nsa291dF9r
aHooY2xraW5fa2h6LCBpLCBuLCBvKSAtIGNsa291dF9raHo7CisJCQlpZiAoZGVsdGEgPCAwKQor
CQkJCWRlbHRhID0gLWRlbHRhOworCQkJaWYgKGRlbHRhIDwgYmVzdF9kZWx0YSkgeworCQkJCSpu
ZGl2ID0gaTsKKwkJCQkqbWRpdiA9IG47CisJCQkJKmJkaXYgPSBvOworCQkJCWJlc3RfZGVsdGEg
PSBkZWx0YTsKKwkJCX0KKwkJCS8qIGZhc3QgcmV0dXJuIGluIGNhc2Ugb2YgInBlcmZlY3QgcmVz
dWx0IiAqLworCQkJaWYgKCFkZWx0YSkKKwkJCQlyZXR1cm4gMDsKKwkJfQorCX0KKworCXJldHVy
biAwOworfQorCitzdGF0aWMgdm9pZCBsdmRzX3BsbF9jb25maWcoc3RydWN0IHN0bV9sdmRzICps
dmRzLCBzdHJ1Y3QgbHZkc19waHlfaW5mbyAqcGh5KQoreworCXVuc2lnbmVkIGludCBwbGxfaW5f
a2h6LCBiZGl2ID0gMCwgbWRpdiA9IDAsIG5kaXYgPSAwOworCXN0cnVjdCBjbGtfaHcgKmh3Y2xr
OworCWludCBtdWx0aXBsaWVyOworCisJLyoKKwkgKiBUaGUgTFZEUyBQSFkgaW5jbHVkZXMgYSBs
b3cgcG93ZXIgbG93IGppdHRlciBoaWdoIHBlcmZvcm1hbmNlIGFuZAorCSAqIGhpZ2hseSBjb25m
aWd1cmF0aW9uIFBoYXNlIExvY2tlZCBMb29wIHN1cHBvcnRpbmcgaW50ZWdlciBhbmQKKwkgKiBm
cmFjdGlvbmFsIG11bHRpcGxpY2F0aW9uIHJhdGlvcyBhbmQgU3ByZWFkIFNwZWN0cnVtIENsb2Nr
aW5nLiAgSW4KKwkgKiBpbnRlZ2VyIG1vZGUsIHRoZSBvbmx5IHNvZnR3YXJlIHN1cHBvcnRlZCBm
ZWF0dXJlIGZvciBub3csIHRoZSBQTEwgaXMKKwkgKiBtYWRlIG9mIGEgcHJlLWRpdmlkZXIgTkRJ
ViwgYSBmZWVkYmFjayBtdWx0aXBsaWVyIE1ESVYsIGZvbGxvd2VkIGJ5CisJICogc2V2ZXJhbCBw
b3N0LWRpdmlkZXJzLCBlYWNoIG9uZSB3aXRoIGEgc3BlY2lmaWMgYXBwbGljYXRpb24uCisJICoK
KwkgKiAgICAgICAgICAsLS0tLS0tLiAgICAgICAgICwtLS0tLS4gICAgICwtLS0tLS4KKwkgKiBG
cmVmIC0tPiB8IE5ESVYgfCAtRnBkZi0+IHwgUEZEIHwgLS0+IHwgVkNPIHwgLS0tLS0tLS0+IEZ2
Y28KKwkgKiAgICAgICAgICBgLS0tLS0tJyAgICAgLC0+IHwgICAgIHwgICAgIGAtLS0tLScgIHwK
KwkgKiAgICAgICAgICAgICAgICAgICAgICAgfCAgIGAtLS0tLScgICAgICAgICAgICAgIHwKKwkg
KiAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICwtLS0tLS0uICAgICAgIHwKKwkgKiAg
ICAgICAgICAgICAgICAgICAgICAgYC0tLS0tLS0tIHwgTURJViB8IDwtLS0tLScKKwkgKiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAtLS0tLS0nCisJICoKKwkgKiBGcm9tIHRoZSBv
dXRwdXQgb2YgdGhlIFZDTywgdGhlIGNsb2NrIGNhbiBiZSBvcHRpb25hbGx5IGV4dHJhY3RlZCBv
bgorCSAqIHRoZSBSQ0MgY2xvY2sgb2JzZXJ2ZXIsIHdpdGggYSBkaXZpZGVyIFRESVYsIGZvciB0
ZXN0aW5nIHB1cnBvc2UsIG9yCisJICogaXMgcGFzc2VkIHRocm91Z2ggYSBwcm9ncmFtbWFibGUg
cG9zdC1kaXZpZGVyIEJESVYuICBGaW5hbGx5LCB0aGUKKwkgKiBmcmVxdWVuY3kgY2FuIGJlIGRp
dmlkZWQgZnVydGhlciB3aXRoIHR3byBmaXhlZCBkaXZpZGVycy4KKwkgKgorCSAqICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICwtLS0tLS0tLS4KKwkgKiAgICAgICAgICAgICAgICAgICAgLC0t
LS0tPiB8IERQIGRpdiB8IC0tLS0tLS0tLS0tLS0tLS0+IEZkcAorCSAqICAgICAgICAgICwtLS0t
LS0uICB8ICAgICAgIGAtLS0tLS0tLScKKwkgKiBGdmNvIC0tPiB8IEJESVYgfCAtLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+IEZiaXQKKwkgKiAgICAgIHwgICBgLS0tLS0tJyAg
ICAsLS0tLS0tLiAgIHwKKwkgKiAgICAgIGAtLS0tLS0tLS0tLS0tPiB8IFRESVYgfCAtLS4tLS0t
LS0tLS0tLS0tLS0tLS0tLS0+IENsa09icworCSAqICAgICAgICAgICAgICAgICAgICAgICctLS0t
LS0nICAgfCAgICAsLS0tLS0tLS0uCisJICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBgLS0+IHwgTFMgZGl2IHwgLS0tLS0tPiBGbHMKKwkgKiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgJy0tLS0tLS0tJworCSAqCisJICogVGhlIExTIGFuZCBEUCBjbG9jayBk
aXZpZGVycyBvcGVyYXRlIGF0IGEgZml4ZWQgcmF0aW8gb2YgNyBhbmQgMy41CisJICogcmVzcGVj
dGl2ZWx5IHdpdGggcmVnYXJkcyB0byBmYml0LiBMUyBkaXZpZGVyIGNvbnZlcnRzIHRoZSBiaXQg
Y2xvY2sKKwkgKiB0byBhIHBpeGVsIGNsb2NrIHBlciBsYW5lIHBlciBjbG9jayBzYW1wbGUgKEZs
cykuICBUaGlzIGlzIHVzZWZ1bAorCSAqIHdoZW4gdXNlZCB0byBnZW5lcmF0ZSBhIGRvdCBjbG9j
ayBmb3IgdGhlIGRpc3BsYXkgdW5pdCBSR0Igb3V0cHV0LAorCSAqIGFuZCBEUCBkaXZpZGVyIGlz
LgorCSAqLworCisJaHdjbGsgPSBfX2Nsa19nZXRfaHcobHZkcy0+cGxscmVmX2Nsayk7CisJaWYg
KCFod2NsaykKKwkJcmV0dXJuOworCisJcGxsX2luX2toeiA9IGNsa19od19nZXRfcmF0ZShod2Ns
aykgLyAxMDAwOworCisJaWYgKGx2ZHNfaXNfZHVhbF9saW5rKGx2ZHMtPmxpbmtfdHlwZSkpCisJ
CW11bHRpcGxpZXIgPSAyOworCWVsc2UKKwkJbXVsdGlwbGllciA9IDE7CisKKwlsdmRzX3BsbF9n
ZXRfcGFyYW1zKGx2ZHMsIHBsbF9pbl9raHosCisJCQkgICAgbHZkcy0+cGl4ZWxfY2xvY2tfcmF0
ZSAqIDcgLyAxMDAwIC8gbXVsdGlwbGllciwKKwkJCSAgICAmYmRpdiwgJm1kaXYsICZuZGl2KTsK
KworCS8qIFNldCBCRElWLCBNRElWIGFuZCBORElWICovCisJbHZkc193cml0ZShsdmRzLCBwaHkt
PmJhc2UgKyBwaHktPm9mcy5QTExDUjIsIG5kaXYgPDwgMTYpOworCWx2ZHNfc2V0KGx2ZHMsIHBo
eS0+YmFzZSArIHBoeS0+b2ZzLlBMTENSMiwgYmRpdik7CisJbHZkc193cml0ZShsdmRzLCBwaHkt
PmJhc2UgKyBwaHktPm9mcy5QTExTRENSMSwgbWRpdik7CisKKwkvKiBIYXJkY29kZSBURElWIGFz
IGR5bmFtaWMgdmFsdWVzIGFyZSBub3QgeWV0IGltcGxlbWVudGVkICovCisJbHZkc193cml0ZShs
dmRzLCBwaHktPmJhc2UgKyBwaHktPm9mcy5QTExURVNUQ1IsIFRESVYgPDwgMTYpOworCisJLyoK
KwkgKiBGb3Igbm93LCBQTEwganVzdCBuZWVkcyB0byBiZSBpbiBpbnRlZ2VyIG1vZGUKKwkgKiBG
cmFjdGlvbmFsIGFuZCBzcHJlYWQgc3BlY3RydW0gY2xvY2tpbmcgYXJlIG5vdCB5ZXQgaW1wbGVt
ZW50ZWQKKwkgKgorCSAqIFBMTCBpbnRlZ2VyIG1vZGU6CisJICoJLSBQTVJZX1BMTF9UV0dfU1RF
UCA9IFBNUllfUExMX1NEX0lOVF9SQVRJTworCSAqCS0gRU5fVFdHID0gMAorCSAqCS0gRU5fU0Qg
PSAwCisJICoJLSBET1dOX1NQUkVBRCA9IDAKKwkgKgorCSAqIFBMTCBmcmFjdGlvbmFsIG1vZGU6
CisJICoJLSBFTl9UV0cgPSAwCisJICoJLSBFTl9TRCA9IDEKKwkgKgktIERPV05fU1BSRUFEID0g
MAorCSAqCisJICogU3ByZWFkIFNwZWN0cnVtIENsb2NraW5nCisJICoJLSBFTl9UV0cgPSAxCisJ
ICoJLSBFTl9TRCA9IDEKKwkgKi8KKworCS8qIERpc2FibGUgVFdHIGFuZCBTRCAqLworCWx2ZHNf
Y2xlYXIobHZkcywgcGh5LT5iYXNlICsgcGh5LT5vZnMuUExMQ1IxLCBQSFlfUExMQ1IxX0VOX1RX
RyB8IFBIWV9QTExDUjFfRU5fU0QpOworCisJLyogUG93ZXIgdXAgYmlhcyBhbmQgUExMIGRpdmlk
ZXJzICovCisJbHZkc19zZXQobHZkcywgcGh5LT5iYXNlICsgcGh5LT5vZnMuRENSLCBQSFlfRENS
X1BPV0VSX09LKTsKKwlsdmRzX3NldChsdmRzLCBwaHktPmJhc2UgKyBwaHktPm9mcy5DTUNSMSwg
UEhZX0NNQ1JfQ01fRU5fREwpOworCWx2ZHNfc2V0KGx2ZHMsIHBoeS0+YmFzZSArIHBoeS0+b2Zz
LkNNQ1IyLCBQSFlfQ01DUl9DTV9FTl9ETDQpOworCisJLyogU2V0IHVwIHZvbHRhZ2UgbW9kZSAq
LworCWx2ZHNfc2V0KGx2ZHMsIHBoeS0+YmFzZSArIHBoeS0+b2ZzLlBMTENQQ1IsIDB4MSk7CisJ
bHZkc19zZXQobHZkcywgcGh5LT5iYXNlICsgcGh5LT5vZnMuQkNSMywgUEhZX0JDUjNfVk1fRU5f
REwpOworCWx2ZHNfc2V0KGx2ZHMsIHBoeS0+YmFzZSArIHBoeS0+b2ZzLkJDUjEsIFBIWV9CQ1Ix
X0VOX0JJQVNfREwpOworCS8qIEVuYWJsZSBkaWdpdGFsIGRhdGFsYW5lcyAqLworCWx2ZHNfc2V0
KGx2ZHMsIHBoeS0+YmFzZSArIHBoeS0+b2ZzLkNGR0NSLCBQSFlfQ0ZHQ1JfRU5fRElHX0RMKTsK
K30KKworc3RhdGljIGludCBsdmRzX3BpeGVsX2Nsa19lbmFibGUoc3RydWN0IGNsa19odyAqaHcp
Cit7CisJc3RydWN0IHN0bV9sdmRzICpsdmRzID0gY29udGFpbmVyX29mKGh3LCBzdHJ1Y3Qgc3Rt
X2x2ZHMsIGx2ZHNfY2tfcHgpOworCXN0cnVjdCBkcm1fZGV2aWNlICpkcm0gPSBsdmRzLT5sdmRz
X2JyaWRnZS5kZXY7CisJc3RydWN0IGx2ZHNfcGh5X2luZm8gKnBoeTsKKwlpbnQgcmV0OworCisJ
cmV0ID0gY2xrX3ByZXBhcmVfZW5hYmxlKGx2ZHMtPnBjbGspOworCWlmIChyZXQpIHsKKwkJZHJt
X2Vycihkcm0sICJGYWlsZWQgdG8gZW5hYmxlIGx2ZHMgcGVyaXBoZXJhbCBjbGtcbiIpOworCQly
ZXR1cm4gcmV0OworCX0KKworCXJldCA9IGNsa19wcmVwYXJlX2VuYWJsZShsdmRzLT5wbGxyZWZf
Y2xrKTsKKwlpZiAocmV0KSB7CisJCWRybV9lcnIoZHJtLCAiRmFpbGVkIHRvIGVuYWJsZSBsdmRz
IHJlZmVyZW5jZSBjbGtcbiIpOworCQljbGtfZGlzYWJsZV91bnByZXBhcmUobHZkcy0+cGNsayk7
CisJCXJldHVybiByZXQ7CisJfQorCisJLyogSW4gY2FzZSB3ZSBhcmUgb3BlcmF0aW5nIGluIGR1
YWwgbGluayB0aGUgc2Vjb25kIFBIWSBpcyBzZXQgYmVmb3JlIHRoZSBwcmltYXJ5IFBIWS4gKi8K
KwlpZiAobHZkcy0+c2Vjb25kYXJ5KSB7CisJCXBoeSA9IGx2ZHMtPnNlY29uZGFyeTsKKworCQkv
KiBSZWxlYXNlIExWRFMgUEhZIGZyb20gcmVzZXQgbW9kZSAqLworCQlsdmRzX3NldChsdmRzLCBw
aHktPmJhc2UgKyBwaHktPm9mcy5HQ1IsIFBIWV9HQ1JfRElWX1JTVE4gfCBQSFlfR0NSX1JTVFop
OworCQlsdmRzX3BsbF9jb25maWcobHZkcywgcGh5KTsKKworCQlyZXQgPSBsdmRzX3BsbF9lbmFi
bGUobHZkcywgcGh5KTsKKwkJaWYgKHJldCkgeworCQkJZHJtX2Vycihkcm0sICJGYWlsZWQgdG8g
ZW5hYmxlIHNlY29uZGFyeSBQSFkgUExMOiAlZFxuIiwgcmV0KTsKKwkJCXJldHVybiByZXQ7CisJ
CX0KKwl9CisKKwlpZiAobHZkcy0+cHJpbWFyeSkgeworCQlwaHkgPSBsdmRzLT5wcmltYXJ5Owor
CisJCS8qIFJlbGVhc2UgTFZEUyBQSFkgZnJvbSByZXNldCBtb2RlICovCisJCWx2ZHNfc2V0KGx2
ZHMsIHBoeS0+YmFzZSArIHBoeS0+b2ZzLkdDUiwgUEhZX0dDUl9ESVZfUlNUTiB8IFBIWV9HQ1Jf
UlNUWik7CisJCWx2ZHNfcGxsX2NvbmZpZyhsdmRzLCBwaHkpOworCisJCXJldCA9IGx2ZHNfcGxs
X2VuYWJsZShsdmRzLCBwaHkpOworCQlpZiAocmV0KSB7CisJCQlkcm1fZXJyKGRybSwgIkZhaWxl
ZCB0byBlbmFibGUgcHJpbWFyeSBQSFkgUExMOiAlZFxuIiwgcmV0KTsKKwkJCXJldHVybiByZXQ7
CisJCX0KKwl9CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIHZvaWQgbHZkc19waXhlbF9jbGtf
ZGlzYWJsZShzdHJ1Y3QgY2xrX2h3ICpodykKK3sKKwlzdHJ1Y3Qgc3RtX2x2ZHMgKmx2ZHMgPSBj
b250YWluZXJfb2YoaHcsIHN0cnVjdCBzdG1fbHZkcywgbHZkc19ja19weCk7CisKKwkvKgorCSAq
IEZvciBlYWNoIFBIWToKKwkgKiBEaXNhYmxlIERQLCBMUywgQklUIGNsb2NrIG91dHB1dHMKKwkg
KiBTaHV0ZG93biB0aGUgUExMCisJICogQXNzZXJ0IExWRFMgUEhZIGluIHJlc2V0IG1vZGUKKwkg
Ki8KKworCWlmIChsdmRzLT5wcmltYXJ5KSB7CisJCWx2ZHNfY2xlYXIobHZkcywgbHZkcy0+cHJp
bWFyeS0+YmFzZSArIGx2ZHMtPnByaW1hcnktPm9mcy5HQ1IsCisJCQkgICAoUEhZX0dDUl9EUF9D
TEtfT1VUIHwgUEhZX0dDUl9MU19DTEtfT1VUIHwgUEhZX0dDUl9CSVRfQ0xLX09VVCkpOworCQls
dmRzX2NsZWFyKGx2ZHMsIGx2ZHMtPnByaW1hcnktPmJhc2UgKyBsdmRzLT5wcmltYXJ5LT5vZnMu
UExMQ1IxLAorCQkJICAgUEhZX1BMTENSMV9QTExfRU4pOworCQlsdmRzX2NsZWFyKGx2ZHMsIGx2
ZHMtPnByaW1hcnktPmJhc2UgKyBsdmRzLT5wcmltYXJ5LT5vZnMuR0NSLAorCQkJICAgUEhZX0dD
Ul9ESVZfUlNUTiB8IFBIWV9HQ1JfUlNUWik7CisJfQorCisJaWYgKGx2ZHMtPnNlY29uZGFyeSkg
eworCQlsdmRzX2NsZWFyKGx2ZHMsIGx2ZHMtPnNlY29uZGFyeS0+YmFzZSArIGx2ZHMtPnNlY29u
ZGFyeS0+b2ZzLkdDUiwKKwkJCSAgIChQSFlfR0NSX0RQX0NMS19PVVQgfCBQSFlfR0NSX0xTX0NM
S19PVVQgfCBQSFlfR0NSX0JJVF9DTEtfT1VUKSk7CisJCWx2ZHNfY2xlYXIobHZkcywgbHZkcy0+
c2Vjb25kYXJ5LT5iYXNlICsgbHZkcy0+c2Vjb25kYXJ5LT5vZnMuUExMQ1IxLAorCQkJICAgUEhZ
X1BMTENSMV9QTExfRU4pOworCQlsdmRzX2NsZWFyKGx2ZHMsIGx2ZHMtPnNlY29uZGFyeS0+YmFz
ZSArIGx2ZHMtPnNlY29uZGFyeS0+b2ZzLkdDUiwKKwkJCSAgIFBIWV9HQ1JfRElWX1JTVE4gfCBQ
SFlfR0NSX1JTVFopOworCX0KKworCWNsa19kaXNhYmxlX3VucHJlcGFyZShsdmRzLT5wbGxyZWZf
Y2xrKTsKKwljbGtfZGlzYWJsZV91bnByZXBhcmUobHZkcy0+cGNsayk7Cit9CisKK3N0YXRpYyB1
bnNpZ25lZCBsb25nIGx2ZHNfcGl4ZWxfY2xrX3JlY2FsY19yYXRlKHN0cnVjdCBjbGtfaHcgKmh3
LAorCQkJCQkJdW5zaWduZWQgbG9uZyBwYXJlbnRfcmF0ZSkKK3sKKwlzdHJ1Y3Qgc3RtX2x2ZHMg
Kmx2ZHMgPSBjb250YWluZXJfb2YoaHcsIHN0cnVjdCBzdG1fbHZkcywgbHZkc19ja19weCk7CisJ
c3RydWN0IGRybV9kZXZpY2UgKmRybSA9IGx2ZHMtPmx2ZHNfYnJpZGdlLmRldjsKKwl1bnNpZ25l
ZCBpbnQgcGxsX2luX2toeiwgYmRpdiwgbWRpdiwgbmRpdjsKKwlpbnQgcmV0LCBtdWx0aXBsaWVy
LCBwbGxfb3V0X2toejsKKwl1MzIgdmFsOworCisJcmV0ID0gY2xrX3ByZXBhcmVfZW5hYmxlKGx2
ZHMtPnBjbGspOworCWlmIChyZXQpIHsKKwkJZHJtX2Vycihkcm0sICJGYWlsZWQgdG8gZW5hYmxl
IGx2ZHMgcGVyaXBoZXJhbCBjbGtcbiIpOworCQlyZXR1cm4gMDsKKwl9CisKKwlpZiAobHZkc19p
c19kdWFsX2xpbmsobHZkcy0+bGlua190eXBlKSkKKwkJbXVsdGlwbGllciA9IDI7CisJZWxzZQor
CQltdWx0aXBsaWVyID0gMTsKKworCXZhbCA9IGx2ZHNfcmVhZChsdmRzLCBsdmRzLT5wcmltYXJ5
LT5iYXNlICsgbHZkcy0+cHJpbWFyeS0+b2ZzLlBMTENSMik7CisKKwluZGl2ID0gKHZhbCAmIFBI
WV9QTExDUjJfTkRJVikgPj4gMTY7CisJYmRpdiA9ICh2YWwgJiBQSFlfUExMQ1IyX0JESVYpID4+
IDA7CisKKwltZGl2ID0gKHVuc2lnbmVkIGludClsdmRzX3JlYWQobHZkcywKKwkJCQkgICAgICAg
bHZkcy0+cHJpbWFyeS0+YmFzZSArIGx2ZHMtPnByaW1hcnktPm9mcy5QTExTRENSMSk7CisKKwlw
bGxfaW5fa2h6ID0gKHVuc2lnbmVkIGludCkocGFyZW50X3JhdGUgLyAxMDAwKTsKKworCS8qIENv
bXB1dGUgdmFsdWVzIGlmIG5vdCB5ZXQgYWNjZXNzaWJsZSAqLworCWlmICh2YWwgPT0gMCB8fCBt
ZGl2ID09IDApIHsKKwkJbHZkc19wbGxfZ2V0X3BhcmFtcyhsdmRzLCBwbGxfaW5fa2h6LAorCQkJ
CSAgICBsdmRzLT5waXhlbF9jbG9ja19yYXRlICogNyAvIDEwMDAgLyBtdWx0aXBsaWVyLAorCQkJ
CSAgICAmYmRpdiwgJm1kaXYsICZuZGl2KTsKKwl9CisKKwlwbGxfb3V0X2toeiA9IHBsbF9nZXRf
Y2xrb3V0X2toeihwbGxfaW5fa2h6LCBiZGl2LCBtZGl2LCBuZGl2KTsKKwlkcm1fZGJnKGRybSwg
Im5kaXYgJWQgLCBiZGl2ICVkLCBtZGl2ICVkLCBwbGxfb3V0X2toeiAlZFxuIiwKKwkJbmRpdiwg
YmRpdiwgbWRpdiwgcGxsX291dF9raHopOworCisJLyoKKwkgKiAxLzcgYmVjYXVzZSBmb3IgZWFj
aCBwaXhlbCBpbiAxIGxhbmUgdGhlcmUgaXMgNyBiaXRzCisJICogV2Ugd2FudCBwaXhjbGssIG5v
dCBiaXRjbGsKKwkgKi8KKwlsdmRzLT5waXhlbF9jbG9ja19yYXRlID0gcGxsX291dF9raHogKiAx
MDAwICogbXVsdGlwbGllciAvIDc7CisKKwljbGtfZGlzYWJsZV91bnByZXBhcmUobHZkcy0+cGNs
ayk7CisKKwlyZXR1cm4gKHVuc2lnbmVkIGxvbmcpbHZkcy0+cGl4ZWxfY2xvY2tfcmF0ZTsKK30K
Kworc3RhdGljIGxvbmcgbHZkc19waXhlbF9jbGtfcm91bmRfcmF0ZShzdHJ1Y3QgY2xrX2h3ICpo
dywgdW5zaWduZWQgbG9uZyByYXRlLAorCQkJCSAgICAgIHVuc2lnbmVkIGxvbmcgKnBhcmVudF9y
YXRlKQoreworCXN0cnVjdCBzdG1fbHZkcyAqbHZkcyA9IGNvbnRhaW5lcl9vZihodywgc3RydWN0
IHN0bV9sdmRzLCBsdmRzX2NrX3B4KTsKKwl1bnNpZ25lZCBpbnQgcGxsX2luX2toeiwgYmRpdiA9
IDAsIG1kaXYgPSAwLCBuZGl2ID0gMDsKKwljb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29u
bmVjdG9yOworCWNvbnN0IHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlICptb2RlOworCWludCBtdWx0
aXBsaWVyOworCisJY29ubmVjdG9yID0gJmx2ZHMtPmNvbm5lY3RvcjsKKwlpZiAoIWNvbm5lY3Rv
cikKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwlpZiAobGlzdF9lbXB0eSgmY29ubmVjdG9yLT5tb2Rl
cykpIHsKKwkJZHJtX2RiZyhjb25uZWN0b3ItPmRldiwgImNvbm5lY3RvcjogZW1wdHkgbW9kZXMg
bGlzdFxuIik7CisJCXJldHVybiAtRUlOVkFMOworCX0KKworCW1vZGUgPSBsaXN0X2ZpcnN0X2Vu
dHJ5KCZjb25uZWN0b3ItPm1vZGVzLAorCQkJCXN0cnVjdCBkcm1fZGlzcGxheV9tb2RlLCBoZWFk
KTsKKworCXBsbF9pbl9raHogPSAodW5zaWduZWQgaW50KSgqcGFyZW50X3JhdGUgLyAxMDAwKTsK
KworCWlmIChsdmRzX2lzX2R1YWxfbGluayhsdmRzLT5saW5rX3R5cGUpKQorCQltdWx0aXBsaWVy
ID0gMjsKKwllbHNlCisJCW11bHRpcGxpZXIgPSAxOworCisJbHZkc19wbGxfZ2V0X3BhcmFtcyhs
dmRzLCBwbGxfaW5fa2h6LCBtb2RlLT5jbG9jayAqIDcgLyBtdWx0aXBsaWVyLCAmYmRpdiwgJm1k
aXYsICZuZGl2KTsKKworCS8qCisJICogMS83IGJlY2F1c2UgZm9yIGVhY2ggcGl4ZWwgaW4gMSBs
YW5lIHRoZXJlIGlzIDcgYml0cworCSAqIFdlIHdhbnQgcGl4Y2xrLCBub3QgYml0Y2xrCisJICov
CisJbHZkcy0+cGl4ZWxfY2xvY2tfcmF0ZSA9ICh1bnNpZ25lZCBsb25nKXBsbF9nZXRfY2xrb3V0
X2toeihwbGxfaW5fa2h6LCBiZGl2LCBtZGl2LCBuZGl2KQorCQkJCQkgKiAxMDAwICogbXVsdGlw
bGllciAvIDc7CisKKwlyZXR1cm4gbHZkcy0+cGl4ZWxfY2xvY2tfcmF0ZTsKK30KKworc3RhdGlj
IGNvbnN0IHN0cnVjdCBjbGtfb3BzIGx2ZHNfcGl4ZWxfY2xrX29wcyA9IHsKKwkuZW5hYmxlID0g
bHZkc19waXhlbF9jbGtfZW5hYmxlLAorCS5kaXNhYmxlID0gbHZkc19waXhlbF9jbGtfZGlzYWJs
ZSwKKwkucmVjYWxjX3JhdGUgPSBsdmRzX3BpeGVsX2Nsa19yZWNhbGNfcmF0ZSwKKwkucm91bmRf
cmF0ZSA9IGx2ZHNfcGl4ZWxfY2xrX3JvdW5kX3JhdGUsCit9OworCitzdGF0aWMgY29uc3Qgc3Ry
dWN0IGNsa19pbml0X2RhdGEgY2xrX2RhdGEgPSB7CisJLm5hbWUgPSAiY2xrX3BpeF9sdmRzIiwK
Kwkub3BzID0gJmx2ZHNfcGl4ZWxfY2xrX29wcywKKwkucGFyZW50X25hbWVzID0gKGNvbnN0IGNo
YXIgKiBbXSkgeyJja19rZXJfbHZkc3BoeSJ9LAorCS5udW1fcGFyZW50cyA9IDEsCisJLmZsYWdz
ID0gQ0xLX0lHTk9SRV9VTlVTRUQsCit9OworCitzdGF0aWMgdm9pZCBsdmRzX3BpeGVsX2Nsa191
bnJlZ2lzdGVyKHZvaWQgKmRhdGEpCit7CisJc3RydWN0IHN0bV9sdmRzICpsdmRzID0gZGF0YTsK
KworCW9mX2Nsa19kZWxfcHJvdmlkZXIobHZkcy0+ZGV2LT5vZl9ub2RlKTsKKwljbGtfaHdfdW5y
ZWdpc3RlcigmbHZkcy0+bHZkc19ja19weCk7Cit9CisKK3N0YXRpYyBpbnQgbHZkc19waXhlbF9j
bGtfcmVnaXN0ZXIoc3RydWN0IHN0bV9sdmRzICpsdmRzKQoreworCXN0cnVjdCBkZXZpY2Vfbm9k
ZSAqbm9kZSA9IGx2ZHMtPmRldi0+b2Zfbm9kZTsKKwlpbnQgcmV0OworCisJbHZkcy0+bHZkc19j
a19weC5pbml0ID0gJmNsa19kYXRhOworCisJLyogc2V0IHRoZSByYXRlIGJ5IGRlZmF1bHQgYXQg
MTQ4NTAwMDAwICovCisJbHZkcy0+cGl4ZWxfY2xvY2tfcmF0ZSA9IDE0ODUwMDAwMDsKKworCXJl
dCA9IGNsa19od19yZWdpc3RlcihsdmRzLT5kZXYsICZsdmRzLT5sdmRzX2NrX3B4KTsKKwlpZiAo
cmV0KQorCQlyZXR1cm4gcmV0OworCisJcmV0ID0gb2ZfY2xrX2FkZF9od19wcm92aWRlcihub2Rl
LCBvZl9jbGtfaHdfc2ltcGxlX2dldCwKKwkJCQkgICAgICZsdmRzLT5sdmRzX2NrX3B4KTsKKwlp
ZiAocmV0KQorCQljbGtfaHdfdW5yZWdpc3RlcigmbHZkcy0+bHZkc19ja19weCk7CisKKwlyZXR1
cm4gcmV0OworfQorCisvKgorICogSG9zdCBjb25maWd1cmF0aW9uIHJlbGF0ZWQKKyAqLworc3Rh
dGljIHZvaWQgbHZkc19jb25maWdfZGF0YV9tYXBwaW5nKHN0cnVjdCBzdG1fbHZkcyAqbHZkcykK
K3sKKwlzdHJ1Y3QgZHJtX2RldmljZSAqZHJtID0gbHZkcy0+bHZkc19icmlkZ2UuZGV2OworCWNv
bnN0IHN0cnVjdCBkcm1fZGlzcGxheV9pbmZvICppbmZvOworCWVudW0gbHZkc19waXhlbCAoKmJp
dG1hcClbN107CisJdTMyIGx2ZHNfZG1sY3IsIGx2ZHNfZG1tY3I7CisJaW50IGk7CisKKwlpbmZv
ID0gJigmbHZkcy0+Y29ubmVjdG9yKS0+ZGlzcGxheV9pbmZvOworCWlmICghaW5mby0+bnVtX2J1
c19mb3JtYXRzIHx8ICFpbmZvLT5idXNfZm9ybWF0cykgeworCQlkcm1fd2Fybihkcm0sICJObyBM
VkRTIGJ1cyBmb3JtYXQgcmVwb3J0ZWRcbiIpOworCQlyZXR1cm47CisJfQorCisJc3dpdGNoIChp
bmZvLT5idXNfZm9ybWF0c1swXSkgeworCWNhc2UgTUVESUFfQlVTX0ZNVF9SR0I2NjZfMVg3WDNf
U1BXRzogLyogVkVTQS1SR0I2NjYgKi8KKwkJZHJtX3dhcm4oZHJtLCAiUGl4ZWwgZm9ybWF0IHdp
dGggZGF0YSBtYXBwaW5nIG5vdCB5ZXQgc3VwcG9ydGVkLlxuIik7CisJCXJldHVybjsKKwljYXNl
IE1FRElBX0JVU19GTVRfUkdCODg4XzFYN1g0X1NQV0c6IC8qIFZFU0EtUkdCODg4ICovCisJCWJp
dG1hcCA9IGx2ZHNfYml0bWFwX3Zlc2FfcmdiODg4OworCQlicmVhazsKKwljYXNlIE1FRElBX0JV
U19GTVRfUkdCODg4XzFYN1g0X0pFSURBOiAvKiBKRUlEQS1SR0I4ODggKi8KKwkJYml0bWFwID0g
bHZkc19iaXRtYXBfamVpZGFfcmdiODg4OworCQlicmVhazsKKwlkZWZhdWx0OgorCQlkcm1fd2Fy
bihkcm0sICJVbnN1cHBvcnRlZCBMVkRTIGJ1cyBmb3JtYXQgMHglMDR4XG4iLCBpbmZvLT5idXNf
Zm9ybWF0c1swXSk7CisJCXJldHVybjsKKwl9CisKKwkvKiBTZXQgYml0bWFwIGZvciBlYWNoIGxh
bmUgKi8KKwlmb3IgKGkgPSAwOyBpIDwgNTsgaSsrKSB7CisJCWx2ZHNfZG1sY3IgPSAoKGJpdG1h
cFtpXVswXSkKKwkJCSAgICAgICsgKGJpdG1hcFtpXVsxXSA8PCA1KQorCQkJICAgICAgKyAoYml0
bWFwW2ldWzJdIDw8IDEwKQorCQkJICAgICAgKyAoYml0bWFwW2ldWzNdIDw8IDE1KSk7CisJCWx2
ZHNfZG1tY3IgPSAoKGJpdG1hcFtpXVs0XSkKKwkJCSAgICAgICsgKGJpdG1hcFtpXVs1XSA8PCA1
KQorCQkJICAgICAgKyAoYml0bWFwW2ldWzZdIDw8IDEwKSk7CisKKwkJbHZkc193cml0ZShsdmRz
LCBMVkRTX0RNTENSKGkpLCBsdmRzX2RtbGNyKTsKKwkJbHZkc193cml0ZShsdmRzLCBMVkRTX0RN
TUNSKGkpLCBsdmRzX2RtbWNyKTsKKwl9Cit9CisKK3N0YXRpYyB2b2lkIGx2ZHNfY29uZmlnX21v
ZGUoc3RydWN0IHN0bV9sdmRzICpsdmRzKQoreworCXUzMiBidXNfZmxhZ3MsIGx2ZHNfY3IgPSAw
LCBsdmRzX2NkbDFjciA9IDAsIGx2ZHNfY2RsMmNyID0gMDsKKwljb25zdCBzdHJ1Y3QgZHJtX2Rp
c3BsYXlfbW9kZSAqbW9kZTsKKwljb25zdCBzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVjdG9y
OworCisJY29ubmVjdG9yID0gJmx2ZHMtPmNvbm5lY3RvcjsKKwlpZiAoIWNvbm5lY3RvcikKKwkJ
cmV0dXJuOworCisJaWYgKGxpc3RfZW1wdHkoJmNvbm5lY3Rvci0+bW9kZXMpKSB7CisJCWRybV9k
YmcoY29ubmVjdG9yLT5kZXYsICJjb25uZWN0b3I6IGVtcHR5IG1vZGVzIGxpc3RcbiIpOworCQly
ZXR1cm47CisJfQorCisJYnVzX2ZsYWdzID0gY29ubmVjdG9yLT5kaXNwbGF5X2luZm8uYnVzX2Zs
YWdzOworCW1vZGUgPSBsaXN0X2ZpcnN0X2VudHJ5KCZjb25uZWN0b3ItPm1vZGVzLAorCQkJCXN0
cnVjdCBkcm1fZGlzcGxheV9tb2RlLCBoZWFkKTsKKworCWx2ZHNfY2xlYXIobHZkcywgTFZEU19D
UiwgQ1JfTEtNT0QpOworCWx2ZHNfY2xlYXIobHZkcywgTFZEU19DREwxQ1IsIENETENSX0RJU1RS
MCB8IENETENSX0RJU1RSMSB8IENETENSX0RJU1RSMiB8CisJCQkJICAgICAgQ0RMQ1JfRElTVFIz
IHwgQ0RMQ1JfRElTVFI0KTsKKwlsdmRzX2NsZWFyKGx2ZHMsIExWRFNfQ0RMMkNSLCBDRExDUl9E
SVNUUjAgfCBDRExDUl9ESVNUUjEgfCBDRExDUl9ESVNUUjIgfAorCQkJCSAgICAgIENETENSX0RJ
U1RSMyB8IENETENSX0RJU1RSNCk7CisKKwkvKiBTZXQgY2hhbm5lbCBkaXN0cmlidXRpb24gKi8K
KwlpZiAobHZkcy0+cHJpbWFyeSkKKwkJbHZkc19jZGwxY3IgPSBDREwxQ1JfREVGQVVMVDsKKwor
CWlmIChsdmRzLT5zZWNvbmRhcnkpIHsKKwkJbHZkc19jciB8PSBDUl9MS01PRDsKKwkJbHZkc19j
ZGwyY3IgPSBDREwyQ1JfREVGQVVMVDsKKwl9CisKKwkvKiBTZXQgc2lnbmFsIHBvbGFyaXR5ICov
CisJaWYgKGJ1c19mbGFncyAmIERSTV9CVVNfRkxBR19ERV9MT1cpCisJCWx2ZHNfY3IgfD0gQ1Jf
REVQT0w7CisKKwlpZiAobW9kZS0+ZmxhZ3MgJiBEUk1fTU9ERV9GTEFHX05IU1lOQykKKwkJbHZk
c19jciB8PSBDUl9IU1BPTDsKKworCWlmIChtb2RlLT5mbGFncyAmIERSTV9NT0RFX0ZMQUdfTlZT
WU5DKQorCQlsdmRzX2NyIHw9IENSX1ZTUE9MOworCisJc3dpdGNoIChsdmRzLT5saW5rX3R5cGUp
IHsKKwljYXNlIExWRFNfRFVBTF9MSU5LX0VWRU5fT0REX1BJWEVMUzogLyogTEtQSEEgPSAwICov
CisJCWx2ZHNfY3IgJj0gfkNSX0xLUEhBOworCQlicmVhazsKKwljYXNlIExWRFNfRFVBTF9MSU5L
X09ERF9FVkVOX1BJWEVMUzogLyogTEtQSEEgPSAxICovCisJCWx2ZHNfY3IgfD0gQ1JfTEtQSEE7
CisJCWJyZWFrOworCWRlZmF1bHQ6CisJCWRybV9ub3RpY2UobHZkcy0+bHZkc19icmlkZ2UuZGV2
LCAiTm8gcGhhc2UgcHJlY2lzZWQsIHNldHRpbmcgZGVmYXVsdFxuIik7CisJCWx2ZHNfY3IgJj0g
fkNSX0xLUEhBOworCQlicmVhazsKKwl9CisKKwkvKiBXcml0ZSBjb25maWcgdG8gcmVnaXN0ZXJz
ICovCisJbHZkc19zZXQobHZkcywgTFZEU19DUiwgbHZkc19jcik7CisJbHZkc193cml0ZShsdmRz
LCBMVkRTX0NETDFDUiwgbHZkc19jZGwxY3IpOworCWx2ZHNfd3JpdGUobHZkcywgTFZEU19DREwy
Q1IsIGx2ZHNfY2RsMmNyKTsKK30KKworc3RhdGljIGludCBsdmRzX2Nvbm5lY3Rvcl9nZXRfbW9k
ZXMoc3RydWN0IGRybV9jb25uZWN0b3IgKmNvbm5lY3RvcikKK3sKKwlzdHJ1Y3Qgc3RtX2x2ZHMg
Kmx2ZHMgPSBjb25uZWN0b3JfdG9fc3RtX2x2ZHMoY29ubmVjdG9yKTsKKworCXJldHVybiBkcm1f
cGFuZWxfZ2V0X21vZGVzKGx2ZHMtPnBhbmVsLCBjb25uZWN0b3IpOworfQorCitzdGF0aWMgaW50
IGx2ZHNfY29ubmVjdG9yX2F0b21pY19jaGVjayhzdHJ1Y3QgZHJtX2Nvbm5lY3RvciAqY29ubmVj
dG9yLAorCQkJCSAgICAgICBzdHJ1Y3QgZHJtX2F0b21pY19zdGF0ZSAqc3RhdGUpCit7CisJY29u
c3Qgc3RydWN0IGRybV9kaXNwbGF5X21vZGUgKnBhbmVsX21vZGU7CisJc3RydWN0IGRybV9jb25u
ZWN0b3Jfc3RhdGUgKmNvbm5fc3RhdGU7CisJc3RydWN0IGRybV9jcnRjX3N0YXRlICpjcnRjX3N0
YXRlOworCisJY29ubl9zdGF0ZSA9IGRybV9hdG9taWNfZ2V0X25ld19jb25uZWN0b3Jfc3RhdGUo
c3RhdGUsIGNvbm5lY3Rvcik7CisJaWYgKCFjb25uX3N0YXRlKQorCQlyZXR1cm4gLUVJTlZBTDsK
KworCWlmIChsaXN0X2VtcHR5KCZjb25uZWN0b3ItPm1vZGVzKSkgeworCQlkcm1fZGJnKGNvbm5l
Y3Rvci0+ZGV2LCAiY29ubmVjdG9yOiBlbXB0eSBtb2RlcyBsaXN0XG4iKTsKKwkJcmV0dXJuIC1F
SU5WQUw7CisJfQorCisJaWYgKCFjb25uX3N0YXRlLT5jcnRjKQorCQlyZXR1cm4gLUVJTlZBTDsK
KworCXBhbmVsX21vZGUgPSBsaXN0X2ZpcnN0X2VudHJ5KCZjb25uZWN0b3ItPm1vZGVzLAorCQkJ
CSAgICAgIHN0cnVjdCBkcm1fZGlzcGxheV9tb2RlLCBoZWFkKTsKKworCS8qIFdlJ3JlIG5vdCBh
bGxvd2VkIHRvIG1vZGlmeSB0aGUgcmVzb2x1dGlvbi4gKi8KKwljcnRjX3N0YXRlID0gZHJtX2F0
b21pY19nZXRfY3J0Y19zdGF0ZShzdGF0ZSwgY29ubl9zdGF0ZS0+Y3J0Yyk7CisJaWYgKElTX0VS
UihjcnRjX3N0YXRlKSkKKwkJcmV0dXJuIFBUUl9FUlIoY3J0Y19zdGF0ZSk7CisKKwlpZiAoY3J0
Y19zdGF0ZS0+bW9kZS5oZGlzcGxheSAhPSBwYW5lbF9tb2RlLT5oZGlzcGxheSB8fAorCSAgICBj
cnRjX3N0YXRlLT5tb2RlLnZkaXNwbGF5ICE9IHBhbmVsX21vZGUtPnZkaXNwbGF5KQorCQlyZXR1
cm4gLUVJTlZBTDsKKworCS8qIFRoZSBmbGF0IHBhbmVsIG1vZGUgaXMgZml4ZWQsIGp1c3QgY29w
eSBpdCB0byB0aGUgYWRqdXN0ZWQgbW9kZS4gKi8KKwlkcm1fbW9kZV9jb3B5KCZjcnRjX3N0YXRl
LT5hZGp1c3RlZF9tb2RlLCBwYW5lbF9tb2RlKTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMg
Y29uc3Qgc3RydWN0IGRybV9jb25uZWN0b3JfaGVscGVyX2Z1bmNzIGx2ZHNfY29ubl9oZWxwZXJf
ZnVuY3MgPSB7CisJLmdldF9tb2RlcyA9IGx2ZHNfY29ubmVjdG9yX2dldF9tb2RlcywKKwkuYXRv
bWljX2NoZWNrID0gbHZkc19jb25uZWN0b3JfYXRvbWljX2NoZWNrLAorfTsKKworc3RhdGljIGNv
bnN0IHN0cnVjdCBkcm1fY29ubmVjdG9yX2Z1bmNzIGx2ZHNfY29ubl9mdW5jcyA9IHsKKwkucmVz
ZXQgPSBkcm1fYXRvbWljX2hlbHBlcl9jb25uZWN0b3JfcmVzZXQsCisJLmZpbGxfbW9kZXMgPSBk
cm1faGVscGVyX3Byb2JlX3NpbmdsZV9jb25uZWN0b3JfbW9kZXMsCisJLmRlc3Ryb3kgPSBkcm1f
Y29ubmVjdG9yX2NsZWFudXAsCisJLmF0b21pY19kdXBsaWNhdGVfc3RhdGUgPSBkcm1fYXRvbWlj
X2hlbHBlcl9jb25uZWN0b3JfZHVwbGljYXRlX3N0YXRlLAorCS5hdG9taWNfZGVzdHJveV9zdGF0
ZSA9IGRybV9hdG9taWNfaGVscGVyX2Nvbm5lY3Rvcl9kZXN0cm95X3N0YXRlLAorfTsKKworc3Rh
dGljIGludCBsdmRzX2F0dGFjaChzdHJ1Y3QgZHJtX2JyaWRnZSAqYnJpZGdlLAorCQkgICAgICAg
ZW51bSBkcm1fYnJpZGdlX2F0dGFjaF9mbGFncyBmbGFncykKK3sKKwlzdHJ1Y3Qgc3RtX2x2ZHMg
Kmx2ZHMgPSBicmlkZ2VfdG9fc3RtX2x2ZHMoYnJpZGdlKTsKKwlzdHJ1Y3QgZHJtX2Nvbm5lY3Rv
ciAqY29ubmVjdG9yID0gJmx2ZHMtPmNvbm5lY3RvcjsKKwlzdHJ1Y3QgZHJtX2VuY29kZXIgKmVu
Y29kZXIgPSBicmlkZ2UtPmVuY29kZXI7CisJaW50IHJldDsKKworCWlmICghYnJpZGdlLT5lbmNv
ZGVyKSB7CisJCWRybV9lcnIoYnJpZGdlLT5kZXYsICJQYXJlbnQgZW5jb2RlciBvYmplY3Qgbm90
IGZvdW5kXG4iKTsKKwkJcmV0dXJuIC1FTk9ERVY7CisJfQorCisJLyogU2V0IHRoZSBlbmNvZGVy
IHR5cGUgYXMgY2FsbGVyIGRvZXMgbm90IGtub3cgaXQgKi8KKwlicmlkZ2UtPmVuY29kZXItPmVu
Y29kZXJfdHlwZSA9IERSTV9NT0RFX0VOQ09ERVJfTFZEUzsKKworCS8qIE5vIGNsb25pbmcgc3Vw
cG9ydCAqLworCWJyaWRnZS0+ZW5jb2Rlci0+cG9zc2libGVfY2xvbmVzID0gMDsKKworCS8qIElm
IHdlIGhhdmUgYSBuZXh0IGJyaWRnZSBqdXN0IGF0dGFjaCBpdC4gKi8KKwlpZiAobHZkcy0+bmV4
dF9icmlkZ2UpCisJCXJldHVybiBkcm1fYnJpZGdlX2F0dGFjaChicmlkZ2UtPmVuY29kZXIsIGx2
ZHMtPm5leHRfYnJpZGdlLAorCQkJCQkgYnJpZGdlLCBmbGFncyk7CisKKwlpZiAoZmxhZ3MgJiBE
Uk1fQlJJREdFX0FUVEFDSF9OT19DT05ORUNUT1IpIHsKKwkJZHJtX2VycihicmlkZ2UtPmRldiwg
IkZpeCBicmlkZ2UgZHJpdmVyIHRvIG1ha2UgY29ubmVjdG9yIG9wdGlvbmFsISIpOworCQlyZXR1
cm4gLUVJTlZBTDsKKwl9CisKKwkvKiBPdGhlcndpc2UgaWYgd2UgaGF2ZSBhIHBhbmVsLCBjcmVh
dGUgYSBjb25uZWN0b3IuICovCisJaWYgKCFsdmRzLT5wYW5lbCkKKwkJcmV0dXJuIDA7CisKKwly
ZXQgPSBkcm1fY29ubmVjdG9yX2luaXQoYnJpZGdlLT5kZXYsIGNvbm5lY3RvciwKKwkJCQkgJmx2
ZHNfY29ubl9mdW5jcywgRFJNX01PREVfQ09OTkVDVE9SX0xWRFMpOworCWlmIChyZXQgPCAwKQor
CQlyZXR1cm4gcmV0OworCisJZHJtX2Nvbm5lY3Rvcl9oZWxwZXJfYWRkKGNvbm5lY3RvciwgJmx2
ZHNfY29ubl9oZWxwZXJfZnVuY3MpOworCisJcmV0ID0gZHJtX2Nvbm5lY3Rvcl9hdHRhY2hfZW5j
b2Rlcihjb25uZWN0b3IsIGVuY29kZXIpOworCisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIHZv
aWQgbHZkc19hdG9taWNfZW5hYmxlKHN0cnVjdCBkcm1fYnJpZGdlICpicmlkZ2UsCisJCQkgICAg
ICAgc3RydWN0IGRybV9icmlkZ2Vfc3RhdGUgKm9sZF9icmlkZ2Vfc3RhdGUpCit7CisJc3RydWN0
IGRybV9hdG9taWNfc3RhdGUgKnN0YXRlID0gb2xkX2JyaWRnZV9zdGF0ZS0+YmFzZS5zdGF0ZTsK
KwlzdHJ1Y3Qgc3RtX2x2ZHMgKmx2ZHMgPSBicmlkZ2VfdG9fc3RtX2x2ZHMoYnJpZGdlKTsKKwlz
dHJ1Y3QgZHJtX2Nvbm5lY3Rvcl9zdGF0ZSAqY29ubl9zdGF0ZTsKKwlzdHJ1Y3QgZHJtX2Nvbm5l
Y3RvciAqY29ubmVjdG9yOworCWludCByZXQ7CisKKwlyZXQgPSBjbGtfcHJlcGFyZV9lbmFibGUo
bHZkcy0+cGNsayk7CisJaWYgKHJldCkgeworCQlkcm1fZXJyKGJyaWRnZS0+ZGV2LCAiRmFpbGVk
IHRvIGVuYWJsZSBsdmRzIHBlcmlwaGVyYWwgY2xrXG4iKTsKKwkJcmV0dXJuOworCX0KKworCWNv
bm5lY3RvciA9IGRybV9hdG9taWNfZ2V0X25ld19jb25uZWN0b3JfZm9yX2VuY29kZXIoc3RhdGUs
IGJyaWRnZS0+ZW5jb2Rlcik7CisJaWYgKCFjb25uZWN0b3IpCisJCXJldHVybjsKKworCWNvbm5f
c3RhdGUgPSBkcm1fYXRvbWljX2dldF9uZXdfY29ubmVjdG9yX3N0YXRlKHN0YXRlLCBjb25uZWN0
b3IpOworCWlmICghY29ubl9zdGF0ZSkKKwkJcmV0dXJuOworCisJbHZkc19jb25maWdfbW9kZShs
dmRzKTsKKworCS8qIFNldCBEYXRhIE1hcHBpbmcgKi8KKwlsdmRzX2NvbmZpZ19kYXRhX21hcHBp
bmcobHZkcyk7CisKKwkvKiBUdXJuIHRoZSBvdXRwdXQgb24uICovCisJbHZkc19zZXQobHZkcywg
TFZEU19DUiwgQ1JfTFZEU0VOKTsKKworCWlmIChsdmRzLT5wYW5lbCkgeworCQlkcm1fcGFuZWxf
cHJlcGFyZShsdmRzLT5wYW5lbCk7CisJCWRybV9wYW5lbF9lbmFibGUobHZkcy0+cGFuZWwpOwor
CX0KK30KKworc3RhdGljIHZvaWQgbHZkc19hdG9taWNfZGlzYWJsZShzdHJ1Y3QgZHJtX2JyaWRn
ZSAqYnJpZGdlLAorCQkJCXN0cnVjdCBkcm1fYnJpZGdlX3N0YXRlICpvbGRfYnJpZGdlX3N0YXRl
KQoreworCXN0cnVjdCBzdG1fbHZkcyAqbHZkcyA9IGJyaWRnZV90b19zdG1fbHZkcyhicmlkZ2Up
OworCisJaWYgKGx2ZHMtPnBhbmVsKSB7CisJCWRybV9wYW5lbF9kaXNhYmxlKGx2ZHMtPnBhbmVs
KTsKKwkJZHJtX3BhbmVsX3VucHJlcGFyZShsdmRzLT5wYW5lbCk7CisJfQorCisJLyogRGlzYWJs
ZSBMVkRTIG1vZHVsZSAqLworCWx2ZHNfY2xlYXIobHZkcywgTFZEU19DUiwgQ1JfTFZEU0VOKTsK
KworCWNsa19kaXNhYmxlX3VucHJlcGFyZShsdmRzLT5wY2xrKTsKK30KKworc3RhdGljIGNvbnN0
IHN0cnVjdCBkcm1fYnJpZGdlX2Z1bmNzIGx2ZHNfYnJpZGdlX2Z1bmNzID0geworCS5hdHRhY2gg
PSBsdmRzX2F0dGFjaCwKKwkuYXRvbWljX2VuYWJsZSA9IGx2ZHNfYXRvbWljX2VuYWJsZSwKKwku
YXRvbWljX2Rpc2FibGUgPSBsdmRzX2F0b21pY19kaXNhYmxlLAorCS5hdG9taWNfZHVwbGljYXRl
X3N0YXRlID0gZHJtX2F0b21pY19oZWxwZXJfYnJpZGdlX2R1cGxpY2F0ZV9zdGF0ZSwKKwkuYXRv
bWljX2Rlc3Ryb3lfc3RhdGUgPSBkcm1fYXRvbWljX2hlbHBlcl9icmlkZ2VfZGVzdHJveV9zdGF0
ZSwKKwkuYXRvbWljX3Jlc2V0ID0gZHJtX2F0b21pY19oZWxwZXJfYnJpZGdlX3Jlc2V0LAorfTsK
Kworc3RhdGljIGludCBsdmRzX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCit7
CisJc3RydWN0IGRldmljZV9ub2RlICpwb3J0MSwgKnBvcnQyLCAqcmVtb3RlOworCXN0cnVjdCBk
ZXZpY2UgKmRldiA9ICZwZGV2LT5kZXY7CisJc3RydWN0IHJlc2V0X2NvbnRyb2wgKnJzdGM7CisJ
c3RydWN0IHN0bV9sdmRzICpsdmRzOworCWludCByZXQsIGR1YWxfbGluazsKKworCWRldl9kYmco
ZGV2LCAiUHJvYmluZyBMVkRTIGRyaXZlci4uLlxuIik7CisKKwlsdmRzID0gZGV2bV9remFsbG9j
KGRldiwgc2l6ZW9mKCpsdmRzKSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFsdmRzKQorCQlyZXR1cm4g
LUVOT01FTTsKKworCWx2ZHMtPmRldiA9IGRldjsKKworCXJldCA9IGRybV9vZl9maW5kX3BhbmVs
X29yX2JyaWRnZShkZXYtPm9mX25vZGUsIDEsIDAsCisJCQkJCSAgJmx2ZHMtPnBhbmVsLCAmbHZk
cy0+bmV4dF9icmlkZ2UpOworCWlmIChyZXQpIHsKKwkJZGV2X2Vycl9wcm9iZShkZXYsIHJldCwg
IlBhbmVsIG5vdCBmb3VuZFxuIik7CisJCXJldHVybiByZXQ7CisJfQorCisJbHZkcy0+YmFzZSA9
IGRldm1fcGxhdGZvcm1faW9yZW1hcF9yZXNvdXJjZShwZGV2LCAwKTsKKwlpZiAoSVNfRVJSKGx2
ZHMtPmJhc2UpKSB7CisJCXJldCA9IFBUUl9FUlIobHZkcy0+YmFzZSk7CisJCWRldl9lcnIoZGV2
LCAiVW5hYmxlIHRvIGdldCByZWdzICVkXG4iLCByZXQpOworCQlyZXR1cm4gcmV0OworCX0KKwor
CWx2ZHMtPnBjbGsgPSBkZXZtX2Nsa19nZXQoZGV2LCAicGNsayIpOworCWlmIChJU19FUlIobHZk
cy0+cGNsaykpIHsKKwkJcmV0ID0gUFRSX0VSUihsdmRzLT5wY2xrKTsKKwkJZGV2X2VycihkZXYs
ICJVbmFibGUgdG8gZ2V0IHBlcmlwaGVyYWwgY2xvY2s6ICVkXG4iLCByZXQpOworCQlyZXR1cm4g
cmV0OworCX0KKworCXJldCA9IGNsa19wcmVwYXJlX2VuYWJsZShsdmRzLT5wY2xrKTsKKwlpZiAo
cmV0KSB7CisJCWRldl9lcnIoZGV2LCAiJXM6IEZhaWxlZCB0byBlbmFibGUgcGVyaXBoZXJhbCBj
bGtcbiIsIF9fZnVuY19fKTsKKwkJcmV0dXJuIHJldDsKKwl9CisKKwlyc3RjID0gZGV2bV9yZXNl
dF9jb250cm9sX2dldF9leGNsdXNpdmUoZGV2LCBOVUxMKTsKKworCWlmIChJU19FUlIocnN0Yykp
IHsKKwkJcmV0ID0gUFRSX0VSUihyc3RjKTsKKwkJZ290byBlcnJfbHZkc19wcm9iZTsKKwl9CisK
KwlyZXNldF9jb250cm9sX2Fzc2VydChyc3RjKTsKKwl1c2xlZXBfcmFuZ2UoMTAsIDIwKTsKKwly
ZXNldF9jb250cm9sX2RlYXNzZXJ0KHJzdGMpOworCisJcG9ydDEgPSBvZl9ncmFwaF9nZXRfcG9y
dF9ieV9pZChkZXYtPm9mX25vZGUsIDEpOworCXBvcnQyID0gb2ZfZ3JhcGhfZ2V0X3BvcnRfYnlf
aWQoZGV2LT5vZl9ub2RlLCAyKTsKKwlkdWFsX2xpbmsgPSBkcm1fb2ZfbHZkc19nZXRfZHVhbF9s
aW5rX3BpeGVsX29yZGVyKHBvcnQxLCBwb3J0Mik7CisKKwlzd2l0Y2ggKGR1YWxfbGluaykgewor
CWNhc2UgRFJNX0xWRFNfRFVBTF9MSU5LX09ERF9FVkVOX1BJWEVMUzoKKwkJbHZkcy0+bGlua190
eXBlID0gTFZEU19EVUFMX0xJTktfT0REX0VWRU5fUElYRUxTOworCQlsdmRzLT5wcmltYXJ5ID0g
Jmx2ZHNfcGh5XzE2ZmZfcHJpbWFyeTsKKwkJbHZkcy0+c2Vjb25kYXJ5ID0gJmx2ZHNfcGh5XzE2
ZmZfc2Vjb25kYXJ5OworCQlicmVhazsKKwljYXNlIERSTV9MVkRTX0RVQUxfTElOS19FVkVOX09E
RF9QSVhFTFM6CisJCWx2ZHMtPmxpbmtfdHlwZSA9IExWRFNfRFVBTF9MSU5LX0VWRU5fT0REX1BJ
WEVMUzsKKwkJbHZkcy0+cHJpbWFyeSA9ICZsdmRzX3BoeV8xNmZmX3ByaW1hcnk7CisJCWx2ZHMt
PnNlY29uZGFyeSA9ICZsdmRzX3BoeV8xNmZmX3NlY29uZGFyeTsKKwkJYnJlYWs7CisJY2FzZSAt
RUlOVkFMOgorCQkvKgorCQkgKiBkcm1fb2ZfbHZkc19nZXRfZHVhbF9waXhlbF9vcmRlciByZXR1
cm5zIDQgcG9zc2libGUgdmFsdWVzLgorCQkgKiBJbiB0aGUgY2FzZSB3aGVyZSB0aGUgcmV0dXJu
ZWQgdmFsdWUgaXMgYW4gZXJyb3IsIGl0IGNhbiBiZQorCQkgKiBlaXRoZXIgRU5PREVWIG9yIEVJ
TlZBTC4gU2VlaW5nIHRoZSBzdHJ1Y3R1cmUgb2YgdGhpcworCQkgKiBmdW5jdGlvbiwgRUlOVkFM
IG1lYW5zIHRoYXQgZWl0aGVyIHBvcnQxIG9yIHBvcnQyIGlzIG5vdAorCQkgKiBwcmVzZW50IGlu
IHRoZSBkZXZpY2UgdHJlZS4KKwkJICogSW4gdGhhdCBjYXNlLCB0aGUgbHZkcyBwYW5lbCBjYW4g
YmUgYSBzaW5nbGUgbGluayBwYW5lbCwgb3IKKwkJICogdGhlcmUgaXMgYSBzZW1hbnRpY2FsIGVy
cm9yIGluIHRoZSBkZXZpY2UgdHJlZSBjb2RlLgorCQkgKi8KKwkJcmVtb3RlID0gb2ZfZ2V0X25l
eHRfYXZhaWxhYmxlX2NoaWxkKHBvcnQxLCBOVUxMKTsKKwkJaWYgKHJlbW90ZSkgeworCQkJaWYg
KG9mX2dyYXBoX2dldF9yZW1vdGVfZW5kcG9pbnQocmVtb3RlKSkgeworCQkJCWx2ZHMtPmxpbmtf
dHlwZSA9IExWRFNfU0lOR0xFX0xJTktfUFJJTUFSWTsKKwkJCQlsdmRzLT5wcmltYXJ5ID0gJmx2
ZHNfcGh5XzE2ZmZfcHJpbWFyeTsKKwkJCQlsdmRzLT5zZWNvbmRhcnkgPSBOVUxMOworCQkJfSBl
bHNlIHsKKwkJCQlyZXQgPSAtRUlOVkFMOworCQkJfQorCisJCQlvZl9ub2RlX3B1dChyZW1vdGUp
OworCQl9CisKKwkJcmVtb3RlID0gb2ZfZ2V0X25leHRfYXZhaWxhYmxlX2NoaWxkKHBvcnQyLCBO
VUxMKTsKKwkJaWYgKHJlbW90ZSkgeworCQkJaWYgKG9mX2dyYXBoX2dldF9yZW1vdGVfZW5kcG9p
bnQocmVtb3RlKSkgeworCQkJCWx2ZHMtPmxpbmtfdHlwZSA9IExWRFNfU0lOR0xFX0xJTktfU0VD
T05EQVJZOworCQkJCWx2ZHMtPnByaW1hcnkgPSBOVUxMOworCQkJCWx2ZHMtPnNlY29uZGFyeSA9
ICZsdmRzX3BoeV8xNmZmX3NlY29uZGFyeTsKKwkJCX0gZWxzZSB7CisJCQkJcmV0ID0gKHJldCA9
PSAtRUlOVkFMKSA/IC1FSU5WQUwgOiAwOworCQkJfQorCisJCQlvZl9ub2RlX3B1dChyZW1vdGUp
OworCQl9CisJCWJyZWFrOworCWRlZmF1bHQ6CisJCXJldCA9IC1FSU5WQUw7CisJCWdvdG8gZXJy
X2x2ZHNfcHJvYmU7CisJfQorCW9mX25vZGVfcHV0KHBvcnQxKTsKKwlvZl9ub2RlX3B1dChwb3J0
Mik7CisKKwlsdmRzLT5wbGxyZWZfY2xrID0gZGV2bV9jbGtfZ2V0KGRldiwgInJlZiIpOworCWlm
IChJU19FUlIobHZkcy0+cGxscmVmX2NsaykpIHsKKwkJcmV0ID0gUFRSX0VSUihsdmRzLT5wbGxy
ZWZfY2xrKTsKKwkJZGV2X2VycihkZXYsICJVbmFibGUgdG8gZ2V0IHJlZmVyZW5jZSBjbG9jazog
JWRcbiIsIHJldCk7CisJCWdvdG8gZXJyX2x2ZHNfcHJvYmU7CisJfQorCisJcmV0ID0gbHZkc19w
aXhlbF9jbGtfcmVnaXN0ZXIobHZkcyk7CisJaWYgKHJldCkgeworCQlkZXZfZXJyKGRldiwgIkZh
aWxlZCB0byByZWdpc3RlciBMVkRTIHBpeGVsIGNsb2NrOiAlZFxuIiwgcmV0KTsKKwkJZ290byBl
cnJfbHZkc19wcm9iZTsKKwl9CisKKwlsdmRzLT5sdmRzX2JyaWRnZS5mdW5jcyA9ICZsdmRzX2Jy
aWRnZV9mdW5jczsKKwlsdmRzLT5sdmRzX2JyaWRnZS5vZl9ub2RlID0gZGV2LT5vZl9ub2RlOwor
CWx2ZHMtPmh3X3ZlcnNpb24gPSBsdmRzX3JlYWQobHZkcywgTFZEU19WRVJSKTsKKworCWRldl9p
bmZvKGRldiwgInZlcnNpb24gMHglMDJ4IGluaXRpYWxpemVkXG4iLCBsdmRzLT5od192ZXJzaW9u
KTsKKworCWRybV9icmlkZ2VfYWRkKCZsdmRzLT5sdmRzX2JyaWRnZSk7CisKKwlwbGF0Zm9ybV9z
ZXRfZHJ2ZGF0YShwZGV2LCBsdmRzKTsKKworCWNsa19kaXNhYmxlX3VucHJlcGFyZShsdmRzLT5w
Y2xrKTsKKworCXJldHVybiAwOworCitlcnJfbHZkc19wcm9iZToKKwljbGtfZGlzYWJsZV91bnBy
ZXBhcmUobHZkcy0+cGNsayk7CisKKwlyZXR1cm4gcmV0OworfQorCitzdGF0aWMgaW50IGx2ZHNf
cmVtb3ZlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCit7CisJc3RydWN0IHN0bV9sdmRz
ICpsdmRzID0gcGxhdGZvcm1fZ2V0X2RydmRhdGEocGRldik7CisKKwlsdmRzX3BpeGVsX2Nsa191
bnJlZ2lzdGVyKGx2ZHMpOworCisJZHJtX2JyaWRnZV9yZW1vdmUoJmx2ZHMtPmx2ZHNfYnJpZGdl
KTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgY29uc3Qgc3RydWN0IG9mX2RldmljZV9pZCBs
dmRzX2R0X2lkc1tdID0geworCXsKKwkJLmNvbXBhdGlibGUgPSAic3Qsc3RtMzItbHZkcyIsCisJ
CS5kYXRhID0gTlVMTAorCX0sCisJeyAvKiBzZW50aW5lbCAqLyB9Cit9OworCitNT0RVTEVfREVW
SUNFX1RBQkxFKG9mLCBsdmRzX2R0X2lkcyk7CisKK3N0YXRpYyBzdHJ1Y3QgcGxhdGZvcm1fZHJp
dmVyIGx2ZHNfcGxhdGZvcm1fZHJpdmVyID0geworCS5wcm9iZSA9IGx2ZHNfcHJvYmUsCisJLnJl
bW92ZSA9IGx2ZHNfcmVtb3ZlLAorCS5kcml2ZXIgPSB7CisJCS5uYW1lID0gInN0bTMyLWRpc3Bs
YXktbHZkcyIsCisJCS5vd25lciA9IFRISVNfTU9EVUxFLAorCQkub2ZfbWF0Y2hfdGFibGUgPSBs
dmRzX2R0X2lkcywKKwl9LAorfTsKKworbW9kdWxlX3BsYXRmb3JtX2RyaXZlcihsdmRzX3BsYXRm
b3JtX2RyaXZlcik7CisKK01PRFVMRV9BVVRIT1IoIlJhcGhhw6tsIEdhbGxhaXMtUG91IDxyYXBo
YWVsLmdhbGxhaXMtcG91QGZvc3Muc3QuY29tPiIpOworTU9EVUxFX0FVVEhPUigiUGhpbGlwcGUg
Q29ybnUgPHBoaWxpcHBlLmNvcm51QGZvc3Muc3QuY29tPiIpOworTU9EVUxFX0FVVEhPUigiWWFu
bmljayBGZXJ0cmUgPHlhbm5pY2suZmVydHJlQGZvc3Muc3QuY29tPiIpOworTU9EVUxFX0RFU0NS
SVBUSU9OKCJTVE1pY3JvZWxlY3Ryb25pY3MgTFZEUyBEaXNwbGF5IEludGVyZmFjZSBUcmFuc21p
dHRlciBEUk0gZHJpdmVyIik7CitNT0RVTEVfTElDRU5TRSgiR1BMIik7Ci0tIAoyLjI1LjEKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkxpbnV4LXN0bTMy
IG1haWxpbmcgbGlzdApMaW51eC1zdG0zMkBzdC1tZC1tYWlsbWFuLnN0b3JtcmVwbHkuY29tCmh0
dHBzOi8vc3QtbWQtbWFpbG1hbi5zdG9ybXJlcGx5LmNvbS9tYWlsbWFuL2xpc3RpbmZvL2xpbnV4
LXN0bTMyCg==
