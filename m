Return-Path: <linux-stm32-bounces@st-md-mailman.stormreply.com>
X-Original-To: lists+linux-stm32@lfdr.de
Delivered-To: lists+linux-stm32@lfdr.de
Received: from stm-ict-prod-mailman-01.stormreply.prv (st-md-mailman.stormreply.com [52.209.6.89])
	by mail.lfdr.de (Postfix) with ESMTPS id CF54785B993
	for <lists+linux-stm32@lfdr.de>; Tue, 20 Feb 2024 11:53:03 +0100 (CET)
Received: from ip-172-31-3-47.eu-west-1.compute.internal (localhost [127.0.0.1])
	by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTP id 91827C6A61D;
	Tue, 20 Feb 2024 10:53:03 +0000 (UTC)
Received: from mail-ej1-f45.google.com (mail-ej1-f45.google.com
 [209.85.218.45])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTPS id 80946C69063
 for <linux-stm32@st-md-mailman.stormreply.com>;
 Tue, 20 Feb 2024 10:53:01 +0000 (UTC)
Received: by mail-ej1-f45.google.com with SMTP id
 a640c23a62f3a-a3e8be8a7ddso253606966b.2
 for <linux-stm32@st-md-mailman.stormreply.com>;
 Tue, 20 Feb 2024 02:53:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20230601; t=1708426381; x=1709031181;
 darn=st-md-mailman.stormreply.com; 
 h=mime-version:user-agent:content-transfer-encoding:references
 :in-reply-to:date:cc:to:from:subject:message-id:from:to:cc:subject
 :date:message-id:reply-to;
 bh=vV96ecaIb+VxMiPiMQTu7LG+p1XZZNBp/ggKsfTmuOs=;
 b=SvgX3j2ZGPIS0Dx4P7WLQDXqDYHWqHx0vFLYyQUPqyV0gy+4OPTGzCKJdyME+E2xNE
 uAWp/5KWpwBmrP5/nC322x/EjjTTkr7WJ0lGTCYsXAhMH2DsUwe5puMANn1VyUXUQRiZ
 b/la+tzAPss8ZmkwXv6hIZO/C+raGAVFSKdfcH4PQUeTkINn4Hv/2AQsly/+kjj+eYxm
 l9OI+753I9hznFGz9ooK6YzzAZI9IzWNpaO7BIdKWtZFnWojpZE0WqczA2ak9YUVi3bl
 JqXAsdYnBawlxbLkTw9APHimQIR80YzeNPQkHcDDoC/r4Y2fM3bY6JwJhhq6W24Ey9Y1
 Mujg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20230601; t=1708426381; x=1709031181;
 h=mime-version:user-agent:content-transfer-encoding:references
 :in-reply-to:date:cc:to:from:subject:message-id:x-gm-message-state
 :from:to:cc:subject:date:message-id:reply-to;
 bh=vV96ecaIb+VxMiPiMQTu7LG+p1XZZNBp/ggKsfTmuOs=;
 b=iBLStjdTt3OnINiamRFxog91aZjVyAI3ZVJFolpTsc2+GveuJY5aM2aA01wQ6gjVcN
 2hJnUshtno28uOxQhHDPl+ndL7dhwW3BnkRPTyd+ogmnGHeOfxAiOWVsuuYSNA3pCQ70
 34spPhFyVfaiqabbNKzn0d0UaRYbtGFe3nOewasyKUc6Y1NDabJJwXKRXndPKm9FPqfa
 FG+bD7RsXGxVMZ5t+jvJlOXHq+AIDMMS30xA56e17CcLAAh0QNmo0ISsMNa2YFAz+0wS
 bVKp+f+wd+GEU6pMmaZAtlGfaNYMPeIumh/u4VSJ9V2FJ9iqLzhx/vGz1V6rrDcTceln
 MzMQ==
X-Forwarded-Encrypted: i=1;
 AJvYcCVYOBNcTNFKnWfzIhYEVDd2VqWETEPFI7qRWy1x11rQ1dSt5KTvnzH+971Ip3Cmcz84fY/OZsygTboKofPaqfGrai5EbLquLMerC4pkGHmthjjqWbEKpaic
X-Gm-Message-State: AOJu0YxZG0tU9o4ZrYiNI85473jaFU2aCU9jHOgG1ZBe88RY7qGtztid
 3XRmagsI5AbW9A5PcJ0dSMRL8CuwWzpr8yenkKlGruWU6cPnBx1r
X-Google-Smtp-Source: AGHT+IGEvRWyyxIILWvy/wBWwDmHe1dBN022mBcIlhJpTbN1fxJDnkvnmdc0vuZ/e2jYeGHgM+Xfsw==
X-Received: by 2002:a17:906:4558:b0:a3f:c90:7240 with SMTP id
 s24-20020a170906455800b00a3f0c907240mr602428ejq.36.1708426380643; 
 Tue, 20 Feb 2024 02:53:00 -0800 (PST)
Received: from ?IPv6:2001:a61:3456:4e01:6ae:b55a:bd1d:57fc?
 ([2001:a61:3456:4e01:6ae:b55a:bd1d:57fc])
 by smtp.gmail.com with ESMTPSA id
 lu16-20020a170906fad000b00a3d5efc65e0sm2524450ejb.91.2024.02.20.02.53.00
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 20 Feb 2024 02:53:00 -0800 (PST)
Message-ID: <f0ec7c23aabc531f609f57b5e7ffb0c00047dfc4.camel@gmail.com>
From: Nuno =?ISO-8859-1?Q?S=E1?= <noname.nuno@gmail.com>
To: David Lechner <dlechner@baylibre.com>, Mark Brown <broonie@kernel.org>
Date: Tue, 20 Feb 2024 11:52:59 +0100
In-Reply-To: <20240219-mainline-spi-precook-message-v2-2-4a762c6701b9@baylibre.com>
References: <20240219-mainline-spi-precook-message-v2-0-4a762c6701b9@baylibre.com>
 <20240219-mainline-spi-precook-message-v2-2-4a762c6701b9@baylibre.com>
User-Agent: Evolution 3.50.3 (3.50.3-1.fc39) 
MIME-Version: 1.0
Cc: Michael Hennerich <michael.hennerich@analog.com>, linux-iio@vger.kernel.org,
 linux-kernel@vger.kernel.org, Julien Stephan <jstephan@baylibre.com>,
 David Jander <david@protonic.nl>,
 Nuno =?ISO-8859-1?Q?S=E1?= <nuno.sa@analog.com>,
 linux-arm-kernel@lists.infradead.org,
 Maxime Coquelin <mcoquelin.stm32@gmail.com>,
 Martin Sperl <kernel@martin.sperl.org>, linux-spi@vger.kernel.org,
 linux-stm32@st-md-mailman.stormreply.com, Jonathan Cameron <jic23@kernel.org>,
 Jonathan Cameron <Jonathan.Cameron@huawei.com>
Subject: Re: [Linux-stm32] [PATCH v2 2/5] spi: move splitting transfers to
 spi_optimize_message()
X-BeenThere: linux-stm32@st-md-mailman.stormreply.com
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: <linux-stm32.st-md-mailman.stormreply.com>
List-Unsubscribe: <https://st-md-mailman.stormreply.com/mailman/options/linux-stm32>, 
 <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=unsubscribe>
List-Archive: <http://st-md-mailman.stormreply.com/pipermail/linux-stm32/>
List-Post: <mailto:linux-stm32@st-md-mailman.stormreply.com>
List-Help: <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=help>
List-Subscribe: <https://st-md-mailman.stormreply.com/mailman/listinfo/linux-stm32>, 
 <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linux-stm32-bounces@st-md-mailman.stormreply.com
Sender: "Linux-stm32" <linux-stm32-bounces@st-md-mailman.stormreply.com>

T24gTW9uLCAyMDI0LTAyLTE5IGF0IDE2OjMzIC0wNjAwLCBEYXZpZCBMZWNobmVyIHdyb3RlOgo+
IFNwbGl0dGluZyB0cmFuc2ZlcnMgaXMgYW4gZXhwZW5zaXZlIG9wZXJhdGlvbiBzbyB3ZSBjYW4g
cG90ZW50aWFsbHkKPiBvcHRpbWl6ZSBpdCBieSBkb2luZyBpdCBvbmx5IG9uY2UgcGVyIG9wdGlt
aXphdGlvbiBvZiB0aGUgbWVzc2FnZQo+IGluc3RlYWQgb2YgcmVwZWF0aW5nIGVhY2ggdGltZSB0
aGUgbWVzc2FnZSBpcyB0cmFuc2ZlcnJlZC4KPiAKPiBUaGUgdHJhbnNmZXIgc3BsaXR0aW5nIGZ1
bmN0aW9ucyBhcmUgY3VycmVudGx5IHRoZSBvbmx5IHVzZXIgb2YKPiBzcGlfcmVzX2FsbG9jKCkg
c28gc3BpX3Jlc19yZWxlYXNlKCkgY2FuIGJlIHNhZmVseSBtb3ZlZCBhdCB0aGlzIHRpbWUKPiBm
cm9tIHNwaV9maW5hbGl6ZV9jdXJyZW50X21lc3NhZ2UoKSB0byBzcGlfdW5vcHRpbWl6ZV9tZXNz
YWdlKCkuCj4gCj4gVGhlIGRvYyBjb21tZW50cyBvZiB0aGUgcHVibGljIGZ1bmN0aW9ucyBmb3Ig
c3BsaXR0aW5nIHRyYW5zZmVycyBhcmUKPiBhbHNvIHVwZGF0ZWQgc28gdGhhdCBjYWxsZXJzIHdp
bGwga25vdyB3aGVuIGl0IGlzIHNhZmUgdG8gY2FsbCB0aGVtCj4gdG8gZW5zdXJlIHByb3BlciBy
ZXNvdXJjZSBtYW5hZ2VtZW50Lgo+IAo+IFJldmlld2VkLWJ5OiBKb25hdGhhbiBDYW1lcm9uIDxK
b25hdGhhbi5DYW1lcm9uQGh1YXdlaS5jb20+Cj4gU2lnbmVkLW9mZi1ieTogRGF2aWQgTGVjaG5l
ciA8ZGxlY2huZXJAYmF5bGlicmUuY29tPgo+IC0tLQoKQWNrZWQtYnk6IE51bm8gU2EgPG51bm8u
c2FAYW5hbG9nLmNvbT4KCj4gCj4gdjIgY2hhbmdlczoKPiAtIENoYW5nZWQgbGluZSBicmVhayBm
b3IgbXVsdGlsaW5lIGlmIGNvbmRpdGlvbgo+IC0gUmVtb3ZlZCBrZXJuZWwgZG9jIGluY2x1c2lv
biAoLyoqIC0+IC8qKSBmcm9tIHN0YXRpYyBtZW1iZXJzCj4gLSBQaWNrZWQgdXAgSm9uYXRoYW4n
cyBSZXZpZXdlZC1ieQo+IAo+IMKgZHJpdmVycy9zcGkvc3BpLmMgfCAxMTAgKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gwqAxIGZpbGUgY2hh
bmdlZCwgNjggaW5zZXJ0aW9ucygrKSwgNDIgZGVsZXRpb25zKC0pCj4gCj4gZGlmZiAtLWdpdCBh
L2RyaXZlcnMvc3BpL3NwaS5jIGIvZHJpdmVycy9zcGkvc3BpLmMKPiBpbmRleCBmNjhkOTJiNTc1
NDMuLmJhNGQzZmRlMjA1NCAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL3NwaS9zcGkuYwo+ICsrKyBi
L2RyaXZlcnMvc3BpL3NwaS5jCj4gQEAgLTE3NDcsMzggKzE3NDcsNiBAQCBzdGF0aWMgaW50IF9f
c3BpX3B1bXBfdHJhbnNmZXJfbWVzc2FnZShzdHJ1Y3Qgc3BpX2NvbnRyb2xsZXIKPiAqY3RsciwK
PiDCoAo+IMKgCXRyYWNlX3NwaV9tZXNzYWdlX3N0YXJ0KG1zZyk7Cj4gwqAKPiAtCS8qCj4gLQkg
KiBJZiBhbiBTUEkgY29udHJvbGxlciBkb2VzIG5vdCBzdXBwb3J0IHRvZ2dsaW5nIHRoZSBDUyBs
aW5lIG9uIGVhY2gKPiAtCSAqIHRyYW5zZmVyIChpbmRpY2F0ZWQgYnkgdGhlIFNQSV9DU19XT1JE
IGZsYWcpIG9yIHdlIGFyZSB1c2luZyBhIEdQSU8KPiAtCSAqIGZvciB0aGUgQ1MgbGluZSwgd2Ug
Y2FuIGVtdWxhdGUgdGhlIENTLXBlci13b3JkIGhhcmR3YXJlIGZ1bmN0aW9uIGJ5Cj4gLQkgKiBz
cGxpdHRpbmcgdHJhbnNmZXJzIGludG8gb25lLXdvcmQgdHJhbnNmZXJzIGFuZCBlbnN1cmluZyB0
aGF0Cj4gLQkgKiBjc19jaGFuZ2UgaXMgc2V0IGZvciBlYWNoIHRyYW5zZmVyLgo+IC0JICovCj4g
LQlpZiAoKG1zZy0+c3BpLT5tb2RlICYgU1BJX0NTX1dPUkQpICYmICghKGN0bHItPm1vZGVfYml0
cyAmIFNQSV9DU19XT1JEKSB8fAo+IC0JCQkJCcKgwqDCoMKgwqDCoCBzcGlfaXNfY3NncGlvZCht
c2ctPnNwaSkpKSB7Cj4gLQkJcmV0ID0gc3BpX3NwbGl0X3RyYW5zZmVyc19tYXh3b3JkcyhjdGxy
LCBtc2csIDEpOwo+IC0JCWlmIChyZXQpIHsKPiAtCQkJbXNnLT5zdGF0dXMgPSByZXQ7Cj4gLQkJ
CXNwaV9maW5hbGl6ZV9jdXJyZW50X21lc3NhZ2UoY3Rscik7Cj4gLQkJCXJldHVybiByZXQ7Cj4g
LQkJfQo+IC0KPiAtCQlsaXN0X2Zvcl9lYWNoX2VudHJ5KHhmZXIsICZtc2ctPnRyYW5zZmVycywg
dHJhbnNmZXJfbGlzdCkgewo+IC0JCQkvKiBEb24ndCBjaGFuZ2UgY3NfY2hhbmdlIG9uIHRoZSBs
YXN0IGVudHJ5IGluIHRoZSBsaXN0ICovCj4gLQkJCWlmIChsaXN0X2lzX2xhc3QoJnhmZXItPnRy
YW5zZmVyX2xpc3QsICZtc2ctPnRyYW5zZmVycykpCj4gLQkJCQlicmVhazsKPiAtCQkJeGZlci0+
Y3NfY2hhbmdlID0gMTsKPiAtCQl9Cj4gLQl9IGVsc2Ugewo+IC0JCXJldCA9IHNwaV9zcGxpdF90
cmFuc2ZlcnNfbWF4c2l6ZShjdGxyLCBtc2csCj4gLQkJCQkJCcKgIHNwaV9tYXhfdHJhbnNmZXJf
c2l6ZShtc2ctCj4gPnNwaSkpOwo+IC0JCWlmIChyZXQpIHsKPiAtCQkJbXNnLT5zdGF0dXMgPSBy
ZXQ7Cj4gLQkJCXNwaV9maW5hbGl6ZV9jdXJyZW50X21lc3NhZ2UoY3Rscik7Cj4gLQkJCXJldHVy
biByZXQ7Cj4gLQkJfQo+IC0JfQo+IC0KPiDCoAlpZiAoY3Rsci0+cHJlcGFyZV9tZXNzYWdlKSB7
Cj4gwqAJCXJldCA9IGN0bHItPnByZXBhcmVfbWVzc2FnZShjdGxyLCBtc2cpOwo+IMKgCQlpZiAo
cmV0KSB7Cj4gQEAgLTIxMjQsNiArMjA5Miw4IEBAIHN0YXRpYyB2b2lkIF9fc3BpX3Vub3B0aW1p
emVfbWVzc2FnZShzdHJ1Y3Qgc3BpX21lc3NhZ2UgKm1zZykKPiDCoAlpZiAoY3Rsci0+dW5vcHRp
bWl6ZV9tZXNzYWdlKQo+IMKgCQljdGxyLT51bm9wdGltaXplX21lc3NhZ2UobXNnKTsKPiDCoAo+
ICsJc3BpX3Jlc19yZWxlYXNlKGN0bHIsIG1zZyk7Cj4gKwo+IMKgCW1zZy0+b3B0aW1pemVkID0g
ZmFsc2U7Cj4gwqAJbXNnLT5vcHRfc3RhdGUgPSBOVUxMOwo+IMKgfQo+IEBAIC0yMTY5LDE1ICsy
MTM5LDYgQEAgdm9pZCBzcGlfZmluYWxpemVfY3VycmVudF9tZXNzYWdlKHN0cnVjdCBzcGlfY29u
dHJvbGxlcgo+ICpjdGxyKQo+IMKgCj4gwqAJc3BpX3VubWFwX21zZyhjdGxyLCBtZXNnKTsKPiDC
oAo+IC0JLyoKPiAtCSAqIEluIHRoZSBwcmVwYXJlX21lc3NhZ2VzIGNhbGxiYWNrIHRoZSBTUEkg
YnVzIGhhcyB0aGUgb3Bwb3J0dW5pdHkKPiAtCSAqIHRvIHNwbGl0IGEgdHJhbnNmZXIgdG8gc21h
bGxlciBjaHVua3MuCj4gLQkgKgo+IC0JICogUmVsZWFzZSB0aGUgc3BsaXQgdHJhbnNmZXJzIGhl
cmUgc2luY2Ugc3BpX21hcF9tc2coKSBpcyBkb25lIG9uCj4gLQkgKiB0aGUgc3BsaXQgdHJhbnNm
ZXJzLgo+IC0JICovCj4gLQlzcGlfcmVzX3JlbGVhc2UoY3RsciwgbWVzZyk7Cj4gLQo+IMKgCWlm
IChtZXNnLT5wcmVwYXJlZCAmJiBjdGxyLT51bnByZXBhcmVfbWVzc2FnZSkgewo+IMKgCQlyZXQg
PSBjdGxyLT51bnByZXBhcmVfbWVzc2FnZShjdGxyLCBtZXNnKTsKPiDCoAkJaWYgKHJldCkgewo+
IEBAIC0zODE5LDYgKzM3ODAsMTAgQEAgc3RhdGljIGludCBfX3NwaV9zcGxpdF90cmFuc2Zlcl9t
YXhzaXplKHN0cnVjdAo+IHNwaV9jb250cm9sbGVyICpjdGxyLAo+IMKgICogQG1zZzrCoMKgIHRo
ZSBAc3BpX21lc3NhZ2UgdG8gdHJhbnNmb3JtCj4gwqAgKiBAbWF4c2l6ZTrCoCB0aGUgbWF4aW11
bSB3aGVuIHRvIGFwcGx5IHRoaXMKPiDCoCAqCj4gKyAqIFRoaXMgZnVuY3Rpb24gYWxsb2NhdGVz
IHJlc291cmNlcyB0aGF0IGFyZSBhdXRvbWF0aWNhbGx5IGZyZWVkIGR1cmluZyB0aGUKPiArICog
c3BpIG1lc3NhZ2UgdW5vcHRpbWl6ZSBwaGFzZSBzbyB0aGlzIGZ1bmN0aW9uIHNob3VsZCBvbmx5
IGJlIGNhbGxlZCBmcm9tCj4gKyAqIG9wdGltaXplX21lc3NhZ2UgY2FsbGJhY2tzLgo+ICsgKgo+
IMKgICogUmV0dXJuOiBzdGF0dXMgb2YgdHJhbnNmb3JtYXRpb24KPiDCoCAqLwo+IMKgaW50IHNw
aV9zcGxpdF90cmFuc2ZlcnNfbWF4c2l6ZShzdHJ1Y3Qgc3BpX2NvbnRyb2xsZXIgKmN0bHIsCj4g
QEAgLTM4NTcsNiArMzgyMiwxMCBAQCBFWFBPUlRfU1lNQk9MX0dQTChzcGlfc3BsaXRfdHJhbnNm
ZXJzX21heHNpemUpOwo+IMKgICogQG1zZzrCoMKgwqDCoMKgIHRoZSBAc3BpX21lc3NhZ2UgdG8g
dHJhbnNmb3JtCj4gwqAgKiBAbWF4d29yZHM6IHRoZSBudW1iZXIgb2Ygd29yZHMgdG8gbGltaXQg
ZWFjaCB0cmFuc2ZlciB0bwo+IMKgICoKPiArICogVGhpcyBmdW5jdGlvbiBhbGxvY2F0ZXMgcmVz
b3VyY2VzIHRoYXQgYXJlIGF1dG9tYXRpY2FsbHkgZnJlZWQgZHVyaW5nIHRoZQo+ICsgKiBzcGkg
bWVzc2FnZSB1bm9wdGltaXplIHBoYXNlIHNvIHRoaXMgZnVuY3Rpb24gc2hvdWxkIG9ubHkgYmUg
Y2FsbGVkIGZyb20KPiArICogb3B0aW1pemVfbWVzc2FnZSBjYWxsYmFja3MuCj4gKyAqCj4gwqAg
KiBSZXR1cm46IHN0YXR1cyBvZiB0cmFuc2Zvcm1hdGlvbgo+IMKgICovCj4gwqBpbnQgc3BpX3Nw
bGl0X3RyYW5zZmVyc19tYXh3b3JkcyhzdHJ1Y3Qgc3BpX2NvbnRyb2xsZXIgKmN0bHIsCj4gQEAg
LTQyMzEsNiArNDIwMCw1NyBAQCBzdGF0aWMgaW50IF9fc3BpX3ZhbGlkYXRlKHN0cnVjdCBzcGlf
ZGV2aWNlICpzcGksIHN0cnVjdAo+IHNwaV9tZXNzYWdlICptZXNzYWdlKQo+IMKgCXJldHVybiAw
Owo+IMKgfQo+IMKgCj4gKy8qCj4gKyAqIHNwaV9zcGxpdF90cmFuc2ZlcnMgLSBnZW5lcmljIGhh
bmRsaW5nIG9mIHRyYW5zZmVyIHNwbGl0dGluZwo+ICsgKiBAbXNnOiB0aGUgbWVzc2FnZSB0byBz
cGxpdAo+ICsgKgo+ICsgKiBVbmRlciBjZXJ0YWluIGNvbmRpdGlvbnMsIGEgU1BJIGNvbnRyb2xs
ZXIgbWF5IG5vdCBzdXBwb3J0IGFyYml0cmFyeQo+ICsgKiB0cmFuc2ZlciBzaXplcyBvciBvdGhl
ciBmZWF0dXJlcyByZXF1aXJlZCBieSBhIHBlcmlwaGVyYWwuIFRoaXMgZnVuY3Rpb24KPiArICog
d2lsbCBzcGxpdCB0aGUgdHJhbnNmZXJzIGluIHRoZSBtZXNzYWdlIGludG8gc21hbGxlciB0cmFu
c2ZlcnMgdGhhdCBhcmUKPiArICogc3VwcG9ydGVkIGJ5IHRoZSBjb250cm9sbGVyLgo+ICsgKgo+
ICsgKiBDb250cm9sbGVycyB3aXRoIHNwZWNpYWwgcmVxdWlyZW1lbnRzIG5vdCBjb3ZlcmVkIGhl
cmUgY2FuIGFsc28gc3BsaXQKPiArICogdHJhbnNmZXJzIGluIHRoZSBvcHRpbWl6ZV9tZXNzYWdl
KCkgY2FsbGJhY2suCj4gKyAqCj4gKyAqIENvbnRleHQ6IGNhbiBzbGVlcAo+ICsgKiBSZXR1cm46
IHplcm8gb24gc3VjY2VzcywgZWxzZSBhIG5lZ2F0aXZlIGVycm9yIGNvZGUKPiArICovCj4gK3N0
YXRpYyBpbnQgc3BpX3NwbGl0X3RyYW5zZmVycyhzdHJ1Y3Qgc3BpX21lc3NhZ2UgKm1zZykKPiAr
ewo+ICsJc3RydWN0IHNwaV9jb250cm9sbGVyICpjdGxyID0gbXNnLT5zcGktPmNvbnRyb2xsZXI7
Cj4gKwlzdHJ1Y3Qgc3BpX3RyYW5zZmVyICp4ZmVyOwo+ICsJaW50IHJldDsKPiArCj4gKwkvKgo+
ICsJICogSWYgYW4gU1BJIGNvbnRyb2xsZXIgZG9lcyBub3Qgc3VwcG9ydCB0b2dnbGluZyB0aGUg
Q1MgbGluZSBvbiBlYWNoCj4gKwkgKiB0cmFuc2ZlciAoaW5kaWNhdGVkIGJ5IHRoZSBTUElfQ1Nf
V09SRCBmbGFnKSBvciB3ZSBhcmUgdXNpbmcgYSBHUElPCj4gKwkgKiBmb3IgdGhlIENTIGxpbmUs
IHdlIGNhbiBlbXVsYXRlIHRoZSBDUy1wZXItd29yZCBoYXJkd2FyZSBmdW5jdGlvbiBieQo+ICsJ
ICogc3BsaXR0aW5nIHRyYW5zZmVycyBpbnRvIG9uZS13b3JkIHRyYW5zZmVycyBhbmQgZW5zdXJp
bmcgdGhhdAo+ICsJICogY3NfY2hhbmdlIGlzIHNldCBmb3IgZWFjaCB0cmFuc2Zlci4KPiArCSAq
Lwo+ICsJaWYgKChtc2ctPnNwaS0+bW9kZSAmIFNQSV9DU19XT1JEKSAmJgo+ICsJwqDCoMKgICgh
KGN0bHItPm1vZGVfYml0cyAmIFNQSV9DU19XT1JEKSB8fCBzcGlfaXNfY3NncGlvZChtc2ctPnNw
aSkpKSB7Cj4gKwkJcmV0ID0gc3BpX3NwbGl0X3RyYW5zZmVyc19tYXh3b3JkcyhjdGxyLCBtc2cs
IDEpOwo+ICsJCWlmIChyZXQpCj4gKwkJCXJldHVybiByZXQ7Cj4gKwo+ICsJCWxpc3RfZm9yX2Vh
Y2hfZW50cnkoeGZlciwgJm1zZy0+dHJhbnNmZXJzLCB0cmFuc2Zlcl9saXN0KSB7Cj4gKwkJCS8q
IERvbid0IGNoYW5nZSBjc19jaGFuZ2Ugb24gdGhlIGxhc3QgZW50cnkgaW4gdGhlIGxpc3QgKi8K
PiArCQkJaWYgKGxpc3RfaXNfbGFzdCgmeGZlci0+dHJhbnNmZXJfbGlzdCwgJm1zZy0+dHJhbnNm
ZXJzKSkKPiArCQkJCWJyZWFrOwo+ICsKPiArCQkJeGZlci0+Y3NfY2hhbmdlID0gMTsKPiArCQl9
Cj4gKwl9IGVsc2Ugewo+ICsJCXJldCA9IHNwaV9zcGxpdF90cmFuc2ZlcnNfbWF4c2l6ZShjdGxy
LCBtc2csCj4gKwkJCQkJCcKgIHNwaV9tYXhfdHJhbnNmZXJfc2l6ZShtc2ctCj4gPnNwaSkpOwo+
ICsJCWlmIChyZXQpCj4gKwkJCXJldHVybiByZXQ7Cj4gKwl9Cj4gKwo+ICsJcmV0dXJuIDA7Cj4g
K30KPiArCj4gwqAvKgo+IMKgICogX19zcGlfb3B0aW1pemVfbWVzc2FnZSAtIHNoYXJlZCBpbXBs
ZW1lbnRhdGlvbiBmb3Igc3BpX29wdGltaXplX21lc3NhZ2UoKQo+IMKgICrCoMKgwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoCBhbmQgc3BpX21heWJlX29wdGlt
aXplX21lc3NhZ2UoKQo+IEBAIC00MjU0LDEwICs0Mjc0LDE2IEBAIHN0YXRpYyBpbnQgX19zcGlf
b3B0aW1pemVfbWVzc2FnZShzdHJ1Y3Qgc3BpX2RldmljZSAqc3BpLAo+IMKgCWlmIChyZXQpCj4g
wqAJCXJldHVybiByZXQ7Cj4gwqAKPiArCXJldCA9IHNwaV9zcGxpdF90cmFuc2ZlcnMobXNnKTsK
PiArCWlmIChyZXQpCj4gKwkJcmV0dXJuIHJldDsKPiArCj4gwqAJaWYgKGN0bHItPm9wdGltaXpl
X21lc3NhZ2UpIHsKPiDCoAkJcmV0ID0gY3Rsci0+b3B0aW1pemVfbWVzc2FnZShtc2cpOwo+IC0J
CWlmIChyZXQpCj4gKwkJaWYgKHJldCkgewo+ICsJCQlzcGlfcmVzX3JlbGVhc2UoY3RsciwgbXNn
KTsKPiDCoAkJCXJldHVybiByZXQ7Cj4gKwkJfQo+IMKgCX0KPiDCoAo+IMKgCW1zZy0+b3B0aW1p
emVkID0gdHJ1ZTsKPiAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fCkxpbnV4LXN0bTMyIG1haWxpbmcgbGlzdApMaW51eC1zdG0zMkBzdC1tZC1tYWlsbWFu
LnN0b3JtcmVwbHkuY29tCmh0dHBzOi8vc3QtbWQtbWFpbG1hbi5zdG9ybXJlcGx5LmNvbS9tYWls
bWFuL2xpc3RpbmZvL2xpbnV4LXN0bTMyCg==
