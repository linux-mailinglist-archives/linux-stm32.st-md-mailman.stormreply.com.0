Return-Path: <linux-stm32-bounces@st-md-mailman.stormreply.com>
X-Original-To: lists+linux-stm32@lfdr.de
Delivered-To: lists+linux-stm32@lfdr.de
Received: from stm-ict-prod-mailman-01.stormreply.prv (st-md-mailman.stormreply.com [52.209.6.89])
	by mail.lfdr.de (Postfix) with ESMTPS id DA452A78AA6
	for <lists+linux-stm32@lfdr.de>; Wed,  2 Apr 2025 11:07:26 +0200 (CEST)
Received: from ip-172-31-3-47.eu-west-1.compute.internal (localhost [127.0.0.1])
	by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTP id 97212C78F9E;
	Wed,  2 Apr 2025 09:07:26 +0000 (UTC)
Received: from mail-wr1-f54.google.com (mail-wr1-f54.google.com
 [209.85.221.54])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTPS id C6ED7C6DD9F
 for <linux-stm32@st-md-mailman.stormreply.com>;
 Wed,  2 Apr 2025 09:07:25 +0000 (UTC)
Received: by mail-wr1-f54.google.com with SMTP id
 ffacd0b85a97d-39141ffa9fcso6289004f8f.0
 for <linux-stm32@st-md-mailman.stormreply.com>;
 Wed, 02 Apr 2025 02:07:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=linaro.org; s=google; t=1743584845; x=1744189645;
 darn=st-md-mailman.stormreply.com; 
 h=content-transfer-encoding:mime-version:references:in-reply-to
 :message-id:date:subject:cc:to:from:from:to:cc:subject:date
 :message-id:reply-to;
 bh=uLgWundaL8QamxaRs+5uVFJ86tOM7kRZUzXC//Q9sps=;
 b=gYsLyOWnYcVBCoIR8tjQf8c3QTp0kecFMSEH9IDMx60G6W3Hp7cKB00zImsWvm6wAk
 9redw232c3Y51pd8nAh5ius7Sqe0z1yXVEu5bTyTM9/67ZXYLT+ZvFo2u5J6EKbaLbhT
 15RRh1OSkF4L9Z2iUPmpb7uCzzQrMP6vpqvhd4ysWuKpZbBvKH+RiohM9Ue5wIG0Wug1
 e2TtkjOh5bAMjHRcgzUjjs+dcN5OFxRN1fwBnyDba7TDyRJlniFeY50p0HUbHT4RLbEA
 gmPKKjXNrq+znY8FpuLnPhYZ77v5919EXBaHK9WgRMRYGDfHnMyixkgpj25/fF/c+EBP
 BlXw==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20230601; t=1743584845; x=1744189645;
 h=content-transfer-encoding:mime-version:references:in-reply-to
 :message-id:date:subject:cc:to:from:x-gm-message-state:from:to:cc
 :subject:date:message-id:reply-to;
 bh=uLgWundaL8QamxaRs+5uVFJ86tOM7kRZUzXC//Q9sps=;
 b=RdxxQtc0H/dWgLNuYOw/Me1+AWVVEFeUQvnIcrAud/ZyaHWVN99sPgQkIEK45YhGZF
 tdAl1k1d7x08hNiqDOc7yPdlGS//yEnFKHR5NdFiuQ6nsUOxlXE69Re6uhXoDWWqH2uE
 HCqJtg4O/uXSU7GxaqIdDrrMvTQpOLa4OL9TkcVYoErpm8PFoDlZuy9hrZrHSL/pBHgU
 E6G/UWgUtmH9B/5Yz20A9FWrLaaEiM98ZajHVQzCOB2UTn+Vufuc6zL3Eqp252c4lqYs
 B9xJOcoyelydMcmIb1BUnk3PM5hyUlxXwYD2zbWfsutzJPbuvcL0MIxZmLGUOG7HdALr
 AkNA==
X-Forwarded-Encrypted: i=1;
 AJvYcCUEjX9PJiSOhmtwYYApMyh6CJTI1eWcPsRgifoHbso8MqDG5LzLNP+VI7bJImTpyuVonKzRVeZOnPoJsw==@st-md-mailman.stormreply.com
X-Gm-Message-State: AOJu0YwS7clcmmPQ5+VvsKtTM181jchquLwKvKu22THllZ6FxupkPeSA
 nfO4DjK7qdnwk1UMllJyQiCWv7ZxBuadUQp90qYYJhR/CwJM6WaP28aw7JDr2EHaLJPeQvDkQul
 e
X-Gm-Gg: ASbGncu3nArdkYLhyHXOoH2LpK5nknSpiObZyIpf2TA+DfzuP+Z0480sVxMiseyABlZ
 U6gL5J4jBmwNt6Ty6nvlRpF04nl4Ut3dtRPuq4aJL0NSshhMlhF1dcU5m+11wlrq+R4/69zJbgV
 RLZfvq7wfjl276AUvUrfODGwa9lFOvI6mUHxb4nsn77JdkGGDvQ1BBqhzflSOF514zRDRttwec5
 vM/bN6mNuoEZdnOdgvPrYrXFNLjG2f0CeBQbc/1sVT8ncmK0rTdHJ1MkNRa7D4htse+mBNvwhxH
 jB/RkLWNOtJnUNMdmCBtW8niGUcCfpeJX4vecA+qMDUc531i2+nPnm3uda6SThVIHtaeazc=
X-Google-Smtp-Source: AGHT+IHahBuvz0VSy0je+Uw9JxlLQ/T/HpeSWQaJdJcQo2Z9V4XSsGVgZGJdW6O9X3wMojJfNYf0hw==
X-Received: by 2002:a5d:47c1:0:b0:391:30b9:556a with SMTP id
 ffacd0b85a97d-39c29737feemr1392089f8f.7.1743584845121; 
 Wed, 02 Apr 2025 02:07:25 -0700 (PDT)
Received: from mai.. (146725694.box.freepro.com. [130.180.211.218])
 by smtp.gmail.com with ESMTPSA id
 ffacd0b85a97d-39c0b65b4fcsm16680724f8f.11.2025.04.02.02.07.24
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Wed, 02 Apr 2025 02:07:24 -0700 (PDT)
From: Daniel Lezcano <daniel.lezcano@linaro.org>
To: daniel.lezcano@linaro.org,
	tglx@linutronix.de
Date: Wed,  2 Apr 2025 11:07:12 +0200
Message-ID: <20250402090714.3548055-3-daniel.lezcano@linaro.org>
X-Mailer: git-send-email 2.43.0
In-Reply-To: <20250402090714.3548055-1-daniel.lezcano@linaro.org>
References: <20250402090714.3548055-1-daniel.lezcano@linaro.org>
MIME-Version: 1.0
Cc: S32@nxp.com, "moderated list:ARM/STM32 ARCHITECTURE"
 <linux-stm32@st-md-mailman.stormreply.com>, Larisa.Grigore@nxp.com,
 linux-kernel@vger.kernel.org, krzysztof.kozlowski@linaro.org,
 Maxime Coquelin <mcoquelin.stm32@gmail.com>, thomas.fossati@linaro.org,
 Ghennadi Procopciuc <ghennadi.procopciuc@oss.nxp.com>,
 ghennadi.procopciuc@nxp.com,
 "moderated list:ARM/STM32 ARCHITECTURE" <linux-arm-kernel@lists.infradead.org>
Subject: [Linux-stm32] [PATCH v4 2/2] clocksource/drivers/nxp-timer: Add the
	System Timer Module for the s32gx platforms
X-BeenThere: linux-stm32@st-md-mailman.stormreply.com
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: <linux-stm32.st-md-mailman.stormreply.com>
List-Unsubscribe: <https://st-md-mailman.stormreply.com/mailman/options/linux-stm32>, 
 <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=unsubscribe>
List-Archive: <http://st-md-mailman.stormreply.com/pipermail/linux-stm32/>
List-Post: <mailto:linux-stm32@st-md-mailman.stormreply.com>
List-Help: <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=help>
List-Subscribe: <https://st-md-mailman.stormreply.com/mailman/listinfo/linux-stm32>, 
 <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linux-stm32-bounces@st-md-mailman.stormreply.com
Sender: "Linux-stm32" <linux-stm32-bounces@st-md-mailman.stormreply.com>

U1RNIHN1cHBvcnRzIGNvbW1vbmx5IHJlcXVpcmVkIHN5c3RlbSBhbmQgYXBwbGljYXRpb24gc29m
dHdhcmUgdGltaW5nCmZ1bmN0aW9ucy4gU1RNIGluY2x1ZGVzIGEgMzItYml0IGNvdW50LXVwIHRp
bWVyIGFuZCBmb3VyIDMyLWJpdApjb21wYXJlIGNoYW5uZWxzIHdpdGggYSBzZXBhcmF0ZSBpbnRl
cnJ1cHQgc291cmNlIGZvciBlYWNoCmNoYW5uZWwuIFRoZSB0aW1lciBpcyBkcml2ZW4gYnkgdGhl
IFNUTSBtb2R1bGUgY2xvY2sgZGl2aWRlZCBieSBhbgo4LWJpdCBwcmVzY2FsZSB2YWx1ZSAoMSB0
byAyNTYpLgoKU1RNIGhhcyB0aGUgZm9sbG93aW5nIGZlYXR1cmVzOgogICAg4oCiIE9uZSAzMi1i
aXQgY291bnQtdXAgdGltZXIgd2l0aCBhbiA4LWJpdCBwcmVzY2FsZXIKICAgIOKAoiBGb3VyIDMy
LWJpdCBjb21wYXJlIGNoYW5uZWxzCiAgICDigKIgQW4gaW5kZXBlbmRlbnQgaW50ZXJydXB0IHNv
dXJjZSBmb3IgZWFjaCBjaGFubmVsCiAgICDigKIgQWJpbGl0eSB0byBzdG9wIHRoZSB0aW1lciBp
biBEZWJ1ZyBtb2RlCgpUaGUgczMyZyBwbGF0Zm9ybSBpcyBkZWNsaW5lZCBpbnRvIHR3byB2ZXJz
aW9ucywgdGhlIHMzMmcyIGFuZCB0aGUKczMyZzMuIFRoZSBmb3JtZXIgaGFzIGEgU1RNIGJsb2Nr
IHdpdGggOCB0aW1lcnMgYW5kIHRoZSBsYXR0ZXIgaGFzIDEyCnRpbWVycy4KClRoZSBwbGF0Zm9y
bSBpcyBkZXNpZ25lZCB0byBoYXZlIG9uZSB1c2FibGUgU1RNIGluc3RhbmNlIHBlciBjb3JlIG9u
CnRoZSBzeXN0ZW0gd2hpY2ggaXMgY29tcG9zZWQgb2YgMyB4IENvcnRleC1NMyArIDQgQ29ydGV4
LUE1MyBmb3IgdGhlCnMzMmcyIGFuZCAzIHggQ29ydGV4LU0zICsgOCBDb3J0ZXgtQTUzIGZvciB0
aGUgczMyZzMuCgpUaGVyZSBpcyBhIHNwZWNpYWwgU1RNIGluc3RhbmNlIGNhbGxlZCBTVE1fVFMg
d2hpY2ggaXMgZGVkaWNhdGVkIHRvCnRoZSB0aW1lc3RhbXAuIFRoZSA3dGggU1RNIGluc3RhbmNl
IFNUTV8wNyBpcyBkaXJlY3RseSB0aWVkIHRvIHRoZQpTVE1fVFMgd2hpY2ggbWVhbnMgaXQgaXMg
bm90IHVzYWJsZSBhcyBhIGNsb2NrZXZlbnQuCgpUaGUgZHJpdmVyIGluc3RhbnRpYXRlIGVhY2gg
U1RNIGRlc2NyaWJlZCBpbiB0aGUgZGV2aWNlIHRyZWUgYXMgYQpjbG9ja3NvdXJjZSBhbmQgYSBj
bG9ja2V2ZW50IGNvbmZvcm1pbmcgdG8gdGhlIHJlZmVyZW5jZSBtYW51YWwgZXZlbgppZiB0aGUg
TGludXggc3lzdGVtIGRvZXMgbm90IHVzZSBhbGwgb2YgdGhlIGNsb2Nrc291cmNlLiBFYWNoCmNs
b2NrZXZlbnQgd2lsbCBoYXZlIGEgY3B1bWFzayBzZXQgZm9yIGEgc3BlY2lmaWMgQ1BVLgoKR2l2
ZW4gdGhlIGNvdW50ZXIgaXMgc2hhcmVkIGJldHdlZW4gdGhlIGNsb2Nrc291cmNlIGFuZCB0aGUK
Y2xvY2tldmVudCwgdGhlIFNUTSBtb2R1bGUgY2FuIG5vdCBiZSBkaXNhYmxlZCBieSBvbmUgb3Ig
YW5vdGhlciBzbwp0aGUgcmVmY291bnRpbmcgbWVjaGFuaXNtIGlzIHVzZWQgdG8gc3RvcCB0aGUg
Y291bnRlciB3aGVuIGl0IHJlYWNoZXMKemVybyBhbmQgdG8gc3RhcnQgaXQgd2hlbiBpdCBpcyBv
bmUuIFRoZSBzdXNwZW5kIGFuZCByZXN1bWUgcmVsaWVzIG9uCnRoZSByZWZjb3VudCB0byBzdG9w
IHRoZSBtb2R1bGUuCgpBcyB0aGUgZGV2aWNlIHRyZWUgd2lsbCBoYXZlIG11bHRpcGxlIFNUTSBl
bnRyaWVzLCB0aGUgZHJpdmVyIGNhbiBiZQpwcm9iZWQgaW4gcGFyYWxsZWwgd2l0aCB0aGUgYXN5
bmMgb3B0aW9uIGJ1dCBpdCBpcyBub3QgZW5hYmxlZAp5ZXQuIEhvd2V2ZXIsIHRoZSBkcml2ZXIg
Y29kZSB0YWtlcyBjYXJlIG9mIHByZXZlbnRpbmcgYSByYWNlIGJ5CnB1dHRpbmcgYSBsb2NrIHRv
IHByb3RlY3QgdGhlIG51bWJlciBvZiBTVE0gaW5zdGFuY2VzIGdsb2JhbCB2YXJpYWJsZQp3aGlj
aCBtZWFucyBpdCBpcyByZWFkeSB0byBzdXBwb3J0IHRoZSBvcHRpb24gd2hlbiBlbm91Z2ggdGVz
dGluZyB3aWxsCmJlIGRvbmUgd2l0aCB0aGUgdW5kZXJseWluZyB0aW1lIGZyYW1ld29yay4KCkNj
OiBHaGVubmFkaSBQcm9jb3BjaXVjIDxnaGVubmFkaS5wcm9jb3BjaXVjQG9zcy5ueHAuY29tPgpD
YzogS3J6eXN6dG9mIEtvemxvd3NraSA8a3J6eXN6dG9mLmtvemxvd3NraUBsaW5hcm8ub3JnPgpD
YzogVGhvbWFzIEZvc3NhdGkgPHRob21hcy5mb3NzYXRpQGxpbmFyby5vcmc+ClN1Z2dlc3RlZC1i
eTogR2hlbm5hZGkgUHJvY29wY2l1YyA8Z2hlbm5hZGkucHJvY29wY2l1Y0BueHAuY29tPgpTaWdu
ZWQtb2ZmLWJ5OiBEYW5pZWwgTGV6Y2FubyA8ZGFuaWVsLmxlemNhbm9AbGluYXJvLm9yZz4KLS0t
CiBkcml2ZXJzL2Nsb2Nrc291cmNlL0tjb25maWcgICAgICAgICB8ICAgOSArCiBkcml2ZXJzL2Ns
b2Nrc291cmNlL01ha2VmaWxlICAgICAgICB8ICAgMiArCiBkcml2ZXJzL2Nsb2Nrc291cmNlL3Rp
bWVyLW54cC1zdG0uYyB8IDQ5NSArKysrKysrKysrKysrKysrKysrKysrKysrKysrCiAzIGZpbGVz
IGNoYW5nZWQsIDUwNiBpbnNlcnRpb25zKCspCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9j
bG9ja3NvdXJjZS90aW1lci1ueHAtc3RtLmMKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2Nsb2Nrc291
cmNlL0tjb25maWcgYi9kcml2ZXJzL2Nsb2Nrc291cmNlL0tjb25maWcKaW5kZXggNDg3Yzg1MjU5
OTY3Li5lODZlMzI3MzkyYWYgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvY2xvY2tzb3VyY2UvS2NvbmZp
ZworKysgYi9kcml2ZXJzL2Nsb2Nrc291cmNlL0tjb25maWcKQEAgLTc2Myw0ICs3NjMsMTMgQEAg
Y29uZmlnIFJBTElOS19USU1FUgogCSAgRW5hYmxlcyBzdXBwb3J0IGZvciBzeXN0ZW0gdGljayBj
b3VudGVyIHByZXNlbnQgb24KIAkgIFJhbGluayBTb0NzIFJUMzM1MiBhbmQgTVQ3NjIwLgogCitj
b25maWcgTlhQX1NUTV9USU1FUgorCWJvb2wgIk5YUCBTeXN0ZW0gVGltZXIgTW9kdWxlIGRyaXZl
ciIKKwlkZXBlbmRzIG9uIEFSQ0hfUzMyIHx8IENPTVBJTEVfVEVTVAorCXNlbGVjdCBDTEtTUkNf
TU1JTworCWhlbHAKKwkgIFN1cHBvcnQgZm9yIE5YUCBTeXN0ZW0gVGltZXIgTW9kdWxlLiBJdCB3
aWxsIGNyZWF0ZSwgaW4gdGhpcworCSAgb3JkZXIsIGEgY2xvY2tzb3VyY2UsIGEgYnJvYWRjYXN0
IGNsb2NrZXZlbnQgYW5kIGEgcGVyIGNwdQorCSAgY2xvY2tldmVudC4KKwogZW5kbWVudQpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9jbG9ja3NvdXJjZS9NYWtlZmlsZSBiL2RyaXZlcnMvY2xvY2tzb3Vy
Y2UvTWFrZWZpbGUKaW5kZXggNDNlZjE2YTRlZmE2Li5jM2E5MmU2YjlmOTQgMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvY2xvY2tzb3VyY2UvTWFrZWZpbGUKKysrIGIvZHJpdmVycy9jbG9ja3NvdXJjZS9N
YWtlZmlsZQpAQCAtOTIsMyArOTIsNSBAQCBvYmotJChDT05GSUdfR1hQX1RJTUVSKQkJCSs9IHRp
bWVyLWd4cC5vCiBvYmotJChDT05GSUdfQ0xLU1JDX0xPT05HU09OMV9QV00pCSs9IHRpbWVyLWxv
b25nc29uMS1wd20ubwogb2JqLSQoQ09ORklHX0VQOTNYWF9USU1FUikJCSs9IHRpbWVyLWVwOTN4
eC5vCiBvYmotJChDT05GSUdfUkFMSU5LX1RJTUVSKQkJKz0gdGltZXItcmFsaW5rLm8KK29iai0k
KENPTkZJR19OWFBfU1RNX1RJTUVSKQkJKz0gdGltZXItbnhwLXN0bS5vCisKZGlmZiAtLWdpdCBh
L2RyaXZlcnMvY2xvY2tzb3VyY2UvdGltZXItbnhwLXN0bS5jIGIvZHJpdmVycy9jbG9ja3NvdXJj
ZS90aW1lci1ueHAtc3RtLmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAw
Li44YzU0MjEzOTAzM2MKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL2Nsb2Nrc291cmNlL3Rp
bWVyLW54cC1zdG0uYwpAQCAtMCwwICsxLDQ5NSBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZp
ZXI6IEdQTC0yLjAtb3ItbGF0ZXIKKy8qCisgKiBDb3B5cmlnaHQgMjAxNiBGcmVlc2NhbGUgU2Vt
aWNvbmR1Y3RvciwgSW5jLgorICogQ29weXJpZ2h0IDIwMTgsMjAyMS0yMDI1IE5YUAorICoKKyAq
IE5YUCBTeXN0ZW0gVGltZXIgTW9kdWxlOgorICoKKyAqICBTVE0gc3VwcG9ydHMgY29tbW9ubHkg
cmVxdWlyZWQgc3lzdGVtIGFuZCBhcHBsaWNhdGlvbiBzb2Z0d2FyZQorICogIHRpbWluZyBmdW5j
dGlvbnMuIFNUTSBpbmNsdWRlcyBhIDMyLWJpdCBjb3VudC11cCB0aW1lciBhbmQgZm91cgorICog
IDMyLWJpdCBjb21wYXJlIGNoYW5uZWxzIHdpdGggYSBzZXBhcmF0ZSBpbnRlcnJ1cHQgc291cmNl
IGZvciBlYWNoCisgKiAgY2hhbm5lbC4gVGhlIHRpbWVyIGlzIGRyaXZlbiBieSB0aGUgU1RNIG1v
ZHVsZSBjbG9jayBkaXZpZGVkIGJ5IGFuCisgKiAgOC1iaXQgcHJlc2NhbGUgdmFsdWUgKDEgdG8g
MjU2KS4gSXQgaGFzIGFiaWxpdHkgdG8gc3RvcCB0aGUgdGltZXIKKyAqICBpbiBEZWJ1ZyBtb2Rl
CisgKi8KKyNpbmNsdWRlIDxsaW51eC9jbGsuaD4KKyNpbmNsdWRlIDxsaW51eC9jbG9ja2NoaXBz
Lmg+CisjaW5jbHVkZSA8bGludXgvY3B1aG90cGx1Zy5oPgorI2luY2x1ZGUgPGxpbnV4L2ludGVy
cnVwdC5oPgorI2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPgorI2luY2x1ZGUgPGxpbnV4L29mX2ly
cS5oPgorI2luY2x1ZGUgPGxpbnV4L3BsYXRmb3JtX2RldmljZS5oPgorI2luY2x1ZGUgPGxpbnV4
L3NjaGVkX2Nsb2NrLmg+CisjaW5jbHVkZSA8bGludXgvdW5pdHMuaD4KKworI2RlZmluZSBTVE1f
Q1IoX19iYXNlKQkJKF9fYmFzZSkKKworI2RlZmluZSBTVE1fQ1JfVEVOCQlCSVQoMCkKKyNkZWZp
bmUgU1RNX0NSX0ZSWgkJQklUKDEpCisjZGVmaW5lIFNUTV9DUl9DUFNfT0ZGU0VUCTh1CisjZGVm
aW5lIFNUTV9DUl9DUFNfTUFTSwkJR0VOTUFTSygxNSwgU1RNX0NSX0NQU19PRkZTRVQpCisKKyNk
ZWZpbmUgU1RNX0NOVChfX2Jhc2UpCQkoKF9fYmFzZSkgKyAweDA0KQorCisjZGVmaW5lIFNUTV9D
Q1IwKF9fYmFzZSkJKChfX2Jhc2UpICsgMHgxMCkKKyNkZWZpbmUgU1RNX0NDUjEoX19iYXNlKQko
KF9fYmFzZSkgKyAweDIwKQorI2RlZmluZSBTVE1fQ0NSMihfX2Jhc2UpCSgoX19iYXNlKSArIDB4
MzApCisjZGVmaW5lIFNUTV9DQ1IzKF9fYmFzZSkJKChfX2Jhc2UpICsgMHg0MCkKKworI2RlZmlu
ZSBTVE1fQ0NSX0NFTgkJQklUKDApCisKKyNkZWZpbmUgU1RNX0NJUjAoX19iYXNlKQkoKF9fYmFz
ZSkgKyAweDE0KQorI2RlZmluZSBTVE1fQ0lSMShfX2Jhc2UpCSgoX19iYXNlKSArIDB4MjQpCisj
ZGVmaW5lIFNUTV9DSVIyKF9fYmFzZSkJKChfX2Jhc2UpICsgMHgzNCkKKyNkZWZpbmUgU1RNX0NJ
UjMoX19iYXNlKQkoKF9fYmFzZSkgKyAweDQ0KQorCisjZGVmaW5lIFNUTV9DSVJfQ0lGCQlCSVQo
MCkKKworI2RlZmluZSBTVE1fQ01QMChfX2Jhc2UpCSgoX19iYXNlKSArIDB4MTgpCisjZGVmaW5l
IFNUTV9DTVAxKF9fYmFzZSkJKChfX2Jhc2UpICsgMHgyOCkKKyNkZWZpbmUgU1RNX0NNUDIoX19i
YXNlKQkoKF9fYmFzZSkgKyAweDM4KQorI2RlZmluZSBTVE1fQ01QMyhfX2Jhc2UpCSgoX19iYXNl
KSArIDB4NDgpCisKKyNkZWZpbmUgU1RNX0VOQUJMRV9NQVNLCShTVE1fQ1JfRlJaIHwgU1RNX0NS
X1RFTikKKworc3RydWN0IHN0bV90aW1lciB7CisJdm9pZCBfX2lvbWVtICpiYXNlOworCXVuc2ln
bmVkIGxvbmcgcmF0ZTsKKwl1bnNpZ25lZCBsb25nIGRlbHRhOworCXVuc2lnbmVkIGxvbmcgY291
bnRlcjsKKwlzdHJ1Y3QgY2xvY2tfZXZlbnRfZGV2aWNlIGNlZDsKKwlzdHJ1Y3QgY2xvY2tzb3Vy
Y2UgY3M7CisJYXRvbWljX3QgcmVmY250OworfTsKKworc3RhdGljIERFRklORV9QRVJfQ1BVKHN0
cnVjdCBzdG1fdGltZXIgKiwgc3RtX3RpbWVycyk7CisKK3N0YXRpYyBzdHJ1Y3Qgc3RtX3RpbWVy
ICpzdG1fc2NoZWRfY2xvY2s7CisKKy8qCisgKiBHbG9iYWwgc3RydWN0dXJlIGZvciBtdWx0aXBs
ZSBTVE1zIGluaXRpYWxpemF0aW9uCisgKi8KK3N0YXRpYyBpbnQgc3RtX2luc3RhbmNlczsKKwor
LyoKKyAqIFRoaXMgZ2xvYmFsIGxvY2sgaXMgdXNlZCB0byBwcmV2ZW50IHJhY2UgY29uZGl0aW9u
cyB3aXRoIHRoZQorICogc3RtX2luc3RhbmNlcyBpbiBjYXNlIHRoZSBkcml2ZXIgaXMgdXNpbmcg
dGhlIEFTWU5DIG9wdGlvbgorICovCitzdGF0aWMgREVGSU5FX01VVEVYKHN0bV9pbnN0YW5jZXNf
bG9jayk7CisKK0RFRklORV9HVUFSRChzdG1faW5zdGFuY2VzLCBzdHJ1Y3QgbXV0ZXggKiwgbXV0
ZXhfbG9jayhfVCksIG11dGV4X3VubG9jayhfVCkpCisKK3N0YXRpYyBzdHJ1Y3Qgc3RtX3RpbWVy
ICpjc190b19zdG0oc3RydWN0IGNsb2Nrc291cmNlICpjcykKK3sKKwlyZXR1cm4gY29udGFpbmVy
X29mKGNzLCBzdHJ1Y3Qgc3RtX3RpbWVyLCBjcyk7Cit9CisKK3N0YXRpYyBzdHJ1Y3Qgc3RtX3Rp
bWVyICpjZWRfdG9fc3RtKHN0cnVjdCBjbG9ja19ldmVudF9kZXZpY2UgKmNlZCkKK3sKKwlyZXR1
cm4gY29udGFpbmVyX29mKGNlZCwgc3RydWN0IHN0bV90aW1lciwgY2VkKTsKK30KKworc3RhdGlj
IHU2NCBub3RyYWNlIG54cF9zdG1fcmVhZF9zY2hlZF9jbG9jayh2b2lkKQoreworCXJldHVybiBy
ZWFkbChTVE1fQ05UKHN0bV9zY2hlZF9jbG9jay0+YmFzZSkpOworfQorCitzdGF0aWMgdTMyIG54
cF9zdG1fY2xvY2tzb3VyY2VfZ2V0Y250KHN0cnVjdCBzdG1fdGltZXIgKnN0bV90aW1lcikKK3sK
KwlyZXR1cm4gcmVhZGwoU1RNX0NOVChzdG1fdGltZXItPmJhc2UpKTsKK30KKworc3RhdGljIHZv
aWQgbnhwX3N0bV9jbG9ja3NvdXJjZV9zZXRjbnQoc3RydWN0IHN0bV90aW1lciAqc3RtX3RpbWVy
LCB1MzIgY250KQoreworCXdyaXRlbChjbnQsIFNUTV9DTlQoc3RtX3RpbWVyLT5iYXNlKSk7Cit9
CisKK3N0YXRpYyB1NjQgbnhwX3N0bV9jbG9ja3NvdXJjZV9yZWFkKHN0cnVjdCBjbG9ja3NvdXJj
ZSAqY3MpCit7CisJc3RydWN0IHN0bV90aW1lciAqc3RtX3RpbWVyID0gY3NfdG9fc3RtKGNzKTsK
KworCXJldHVybiAodTY0KW54cF9zdG1fY2xvY2tzb3VyY2VfZ2V0Y250KHN0bV90aW1lcik7Cit9
CisKK3N0YXRpYyB2b2lkIG54cF9zdG1fbW9kdWxlX2VuYWJsZShzdHJ1Y3Qgc3RtX3RpbWVyICpz
dG1fdGltZXIpCit7CisJdTMyIHJlZzsKKworCXJlZyA9IHJlYWRsKFNUTV9DUihzdG1fdGltZXIt
PmJhc2UpKTsKKworCXJlZyB8PSBTVE1fRU5BQkxFX01BU0s7CisKKwl3cml0ZWwocmVnLCBTVE1f
Q1Ioc3RtX3RpbWVyLT5iYXNlKSk7Cit9CisKK3N0YXRpYyB2b2lkIG54cF9zdG1fbW9kdWxlX2Rp
c2FibGUoc3RydWN0IHN0bV90aW1lciAqc3RtX3RpbWVyKQoreworCXUzMiByZWc7CisKKwlyZWcg
PSByZWFkbChTVE1fQ1Ioc3RtX3RpbWVyLT5iYXNlKSk7CisKKwlyZWcgJj0gflNUTV9FTkFCTEVf
TUFTSzsKKworCXdyaXRlbChyZWcsIFNUTV9DUihzdG1fdGltZXItPmJhc2UpKTsKK30KKworc3Rh
dGljIHZvaWQgbnhwX3N0bV9tb2R1bGVfcHV0KHN0cnVjdCBzdG1fdGltZXIgKnN0bV90aW1lcikK
K3sKKwlpZiAoYXRvbWljX2RlY19hbmRfdGVzdCgmc3RtX3RpbWVyLT5yZWZjbnQpKQorCQlueHBf
c3RtX21vZHVsZV9kaXNhYmxlKHN0bV90aW1lcik7Cit9CisKK3N0YXRpYyB2b2lkIG54cF9zdG1f
bW9kdWxlX2dldChzdHJ1Y3Qgc3RtX3RpbWVyICpzdG1fdGltZXIpCit7CisJaWYgKGF0b21pY19p
bmNfcmV0dXJuKCZzdG1fdGltZXItPnJlZmNudCkgPT0gMSkKKwkJbnhwX3N0bV9tb2R1bGVfZW5h
YmxlKHN0bV90aW1lcik7Cit9CisKK3N0YXRpYyBpbnQgbnhwX3N0bV9jbG9ja3NvdXJjZV9lbmFi
bGUoc3RydWN0IGNsb2Nrc291cmNlICpjcykKK3sKKwlzdHJ1Y3Qgc3RtX3RpbWVyICpzdG1fdGlt
ZXIgPSBjc190b19zdG0oY3MpOworCisJbnhwX3N0bV9tb2R1bGVfZ2V0KHN0bV90aW1lcik7CisK
KwlyZXR1cm4gMDsKK30KKworc3RhdGljIHZvaWQgbnhwX3N0bV9jbG9ja3NvdXJjZV9kaXNhYmxl
KHN0cnVjdCBjbG9ja3NvdXJjZSAqY3MpCit7CisJc3RydWN0IHN0bV90aW1lciAqc3RtX3RpbWVy
ID0gY3NfdG9fc3RtKGNzKTsKKworCW54cF9zdG1fbW9kdWxlX3B1dChzdG1fdGltZXIpOworfQor
CitzdGF0aWMgdm9pZCBueHBfc3RtX2Nsb2Nrc291cmNlX3N1c3BlbmQoc3RydWN0IGNsb2Nrc291
cmNlICpjcykKK3sKKwlzdHJ1Y3Qgc3RtX3RpbWVyICpzdG1fdGltZXIgPSBjc190b19zdG0oY3Mp
OworCisJbnhwX3N0bV9jbG9ja3NvdXJjZV9kaXNhYmxlKGNzKTsKKwlzdG1fdGltZXItPmNvdW50
ZXIgPSBueHBfc3RtX2Nsb2Nrc291cmNlX2dldGNudChzdG1fdGltZXIpOworfQorCitzdGF0aWMg
dm9pZCBueHBfc3RtX2Nsb2Nrc291cmNlX3Jlc3VtZShzdHJ1Y3QgY2xvY2tzb3VyY2UgKmNzKQor
eworCXN0cnVjdCBzdG1fdGltZXIgKnN0bV90aW1lciA9IGNzX3RvX3N0bShjcyk7CisKKwlueHBf
c3RtX2Nsb2Nrc291cmNlX3NldGNudChzdG1fdGltZXIsIHN0bV90aW1lci0+Y291bnRlcik7CisJ
bnhwX3N0bV9jbG9ja3NvdXJjZV9lbmFibGUoY3MpOworfQorCitzdGF0aWMgdm9pZCBfX2luaXQg
ZGV2bV9jbG9ja3NvdXJjZV91bnJlZ2lzdGVyKHZvaWQgKmRhdGEpCit7CisJc3RydWN0IHN0bV90
aW1lciAqc3RtX3RpbWVyID0gZGF0YTsKKworCWNsb2Nrc291cmNlX3VucmVnaXN0ZXIoJnN0bV90
aW1lci0+Y3MpOworfQorCitzdGF0aWMgaW50IF9faW5pdCBueHBfc3RtX2Nsb2Nrc291cmNlX2lu
aXQoc3RydWN0IGRldmljZSAqZGV2LCBzdHJ1Y3Qgc3RtX3RpbWVyICpzdG1fdGltZXIsCisJCQkJ
CSAgIGNvbnN0IGNoYXIgKm5hbWUsIHZvaWQgX19pb21lbSAqYmFzZSwgc3RydWN0IGNsayAqY2xr
KQoreworCWludCByZXQ7CisKKwlzdG1fdGltZXItPmJhc2UgPSBiYXNlOworCXN0bV90aW1lci0+
cmF0ZSA9IGNsa19nZXRfcmF0ZShjbGspOworCisJc3RtX3RpbWVyLT5jcy5uYW1lID0gbmFtZTsK
KwlzdG1fdGltZXItPmNzLnJhdGluZyA9IDQ2MDsKKwlzdG1fdGltZXItPmNzLnJlYWQgPSBueHBf
c3RtX2Nsb2Nrc291cmNlX3JlYWQ7CisJc3RtX3RpbWVyLT5jcy5lbmFibGUgPSBueHBfc3RtX2Ns
b2Nrc291cmNlX2VuYWJsZTsKKwlzdG1fdGltZXItPmNzLmRpc2FibGUgPSBueHBfc3RtX2Nsb2Nr
c291cmNlX2Rpc2FibGU7CisJc3RtX3RpbWVyLT5jcy5zdXNwZW5kID0gbnhwX3N0bV9jbG9ja3Nv
dXJjZV9zdXNwZW5kOworCXN0bV90aW1lci0+Y3MucmVzdW1lID0gbnhwX3N0bV9jbG9ja3NvdXJj
ZV9yZXN1bWU7CisJc3RtX3RpbWVyLT5jcy5tYXNrID0gQ0xPQ0tTT1VSQ0VfTUFTSygzMik7CisJ
c3RtX3RpbWVyLT5jcy5mbGFncyA9IENMT0NLX1NPVVJDRV9JU19DT05USU5VT1VTOworCisJcmV0
ID0gY2xvY2tzb3VyY2VfcmVnaXN0ZXJfaHooJnN0bV90aW1lci0+Y3MsIHN0bV90aW1lci0+cmF0
ZSk7CisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsKKworCXJldCA9IGRldm1fYWRkX2FjdGlvbl9v
cl9yZXNldChkZXYsIGRldm1fY2xvY2tzb3VyY2VfdW5yZWdpc3Rlciwgc3RtX3RpbWVyKTsKKwlp
ZiAocmV0KSB7CisJCWNsb2Nrc291cmNlX3VucmVnaXN0ZXIoJnN0bV90aW1lci0+Y3MpOworCQly
ZXR1cm4gcmV0OworCX0KKworCXN0bV9zY2hlZF9jbG9jayA9IHN0bV90aW1lcjsKKworCXNjaGVk
X2Nsb2NrX3JlZ2lzdGVyKG54cF9zdG1fcmVhZF9zY2hlZF9jbG9jaywgMzIsIHN0bV90aW1lci0+
cmF0ZSk7CisKKwlkZXZfZGJnKGRldiwgIlJlZ2lzdGVyZWQgY2xvY2tzb3VyY2UgJXNcbiIsIG5h
bWUpOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQgbnhwX3N0bV9jbG9ja2V2ZW50X3Jl
YWRfY291bnRlcihzdHJ1Y3Qgc3RtX3RpbWVyICpzdG1fdGltZXIpCit7CisJcmV0dXJuIHJlYWRs
KFNUTV9DTlQoc3RtX3RpbWVyLT5iYXNlKSk7Cit9CisKK3N0YXRpYyB2b2lkIG54cF9zdG1fY2xv
Y2tldmVudF9kaXNhYmxlKHN0cnVjdCBzdG1fdGltZXIgKnN0bV90aW1lcikKK3sKKwl3cml0ZWwo
MCwgU1RNX0NDUjAoc3RtX3RpbWVyLT5iYXNlKSk7Cit9CisKK3N0YXRpYyB2b2lkIG54cF9zdG1f
Y2xvY2tldmVudF9lbmFibGUoc3RydWN0IHN0bV90aW1lciAqc3RtX3RpbWVyKQoreworCXdyaXRl
bChTVE1fQ0NSX0NFTiwgU1RNX0NDUjAoc3RtX3RpbWVyLT5iYXNlKSk7Cit9CisKK3N0YXRpYyBp
bnQgbnhwX3N0bV9jbG9ja2V2ZW50X3NodXRkb3duKHN0cnVjdCBjbG9ja19ldmVudF9kZXZpY2Ug
KmNlZCkKK3sKKwlzdHJ1Y3Qgc3RtX3RpbWVyICpzdG1fdGltZXIgPSBjZWRfdG9fc3RtKGNlZCk7
CisKKwlueHBfc3RtX2Nsb2NrZXZlbnRfZGlzYWJsZShzdG1fdGltZXIpOworCisJcmV0dXJuIDA7
Cit9CisKK3N0YXRpYyBpbnQgbnhwX3N0bV9jbG9ja2V2ZW50X3NldF9uZXh0X2V2ZW50KHVuc2ln
bmVkIGxvbmcgZGVsdGEsIHN0cnVjdCBjbG9ja19ldmVudF9kZXZpY2UgKmNlZCkKK3sKKwlzdHJ1
Y3Qgc3RtX3RpbWVyICpzdG1fdGltZXIgPSBjZWRfdG9fc3RtKGNlZCk7CisJdTMyIHZhbDsKKwor
CW54cF9zdG1fY2xvY2tldmVudF9kaXNhYmxlKHN0bV90aW1lcik7CisKKwlzdG1fdGltZXItPmRl
bHRhID0gZGVsdGE7CisKKwl2YWwgPSBueHBfc3RtX2Nsb2NrZXZlbnRfcmVhZF9jb3VudGVyKHN0
bV90aW1lcikgKyBkZWx0YTsKKworCXdyaXRlbCh2YWwsIFNUTV9DTVAwKHN0bV90aW1lci0+YmFz
ZSkpOworCisJLyoKKwkgKiBUaGUgY291bnRlciBpcyBzaGFyZWQgYWNyb3NzIHRoZSBjaGFubmVs
cyBhbmQgY2FuIG5vdCBiZQorCSAqIHN0b3BwZWQgd2hpbGUgd2UgYXJlIHNldHRpbmcgdGhlIG5l
eHQgZXZlbnQuIElmIHRoZSBkZWx0YQorCSAqIGlzIHZlcnkgc21hbGwgaXQgaXMgcG9zc2libGUg
dGhlIGNvdW50ZXIgaW5jcmVhc2VzIGFib3ZlCisJICogdGhlIGNvbXB1dGVkICd2YWwnLiBUaGUg
bWluX2RlbHRhIHZhbHVlIHNwZWNpZmllZCB3aGVuCisJICogcmVnaXN0ZXJpbmcgdGhlIGNsb2Nr
ZXZlbnQgd2lsbCBwcmV2ZW50IHRoYXQuIFRoZSBzZWNvbmQKKwkgKiBjYXNlIGlzIGlmIHRoZSBj
b3VudGVyIHdyYXBzIHdoaWxlIHdlIGNvbXB1dGUgdGhlICd2YWwnIGFuZAorCSAqIGJlZm9yZSB3
cml0aW5nIHRoZSBjb21wYXJhdG9yIHJlZ2lzdGVyLiBXZSByZWFkIHRoZSBjb3VudGVyLAorCSAq
IGNoZWNrIGlmIHdlIGFyZSBiYWNrIGluIHRpbWUgYW5kIGFib3J0IHRoZSB0aW1lciB3aXRoIC1F
VElNRS4KKwkgKi8KKwlpZiAodmFsID4gbnhwX3N0bV9jbG9ja2V2ZW50X3JlYWRfY291bnRlcihz
dG1fdGltZXIpICsgZGVsdGEpCisJCXJldHVybiAtRVRJTUU7CisKKwlueHBfc3RtX2Nsb2NrZXZl
bnRfZW5hYmxlKHN0bV90aW1lcik7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGludCBueHBf
c3RtX2Nsb2NrZXZlbnRfc2V0X3BlcmlvZGljKHN0cnVjdCBjbG9ja19ldmVudF9kZXZpY2UgKmNl
ZCkKK3sKKwlzdHJ1Y3Qgc3RtX3RpbWVyICpzdG1fdGltZXIgPSBjZWRfdG9fc3RtKGNlZCk7CisK
KwlyZXR1cm4gbnhwX3N0bV9jbG9ja2V2ZW50X3NldF9uZXh0X2V2ZW50KHN0bV90aW1lci0+cmF0
ZSwgY2VkKTsKK30KKworc3RhdGljIHZvaWQgbnhwX3N0bV9jbG9ja2V2ZW50X3N1c3BlbmQoc3Ry
dWN0IGNsb2NrX2V2ZW50X2RldmljZSAqY2VkKQoreworCXN0cnVjdCBzdG1fdGltZXIgKnN0bV90
aW1lciA9IGNlZF90b19zdG0oY2VkKTsKKworCW54cF9zdG1fbW9kdWxlX3B1dChzdG1fdGltZXIp
OworfQorCitzdGF0aWMgdm9pZCBueHBfc3RtX2Nsb2NrZXZlbnRfcmVzdW1lKHN0cnVjdCBjbG9j
a19ldmVudF9kZXZpY2UgKmNlZCkKK3sKKwlzdHJ1Y3Qgc3RtX3RpbWVyICpzdG1fdGltZXIgPSBj
ZWRfdG9fc3RtKGNlZCk7CisKKwlueHBfc3RtX21vZHVsZV9nZXQoc3RtX3RpbWVyKTsKK30KKwor
c3RhdGljIGludCBfX2luaXQgbnhwX3N0bV9jbG9ja2V2ZW50X3Blcl9jcHVfaW5pdChzdHJ1Y3Qg
ZGV2aWNlICpkZXYsIHN0cnVjdCBzdG1fdGltZXIgKnN0bV90aW1lciwKKwkJCQkJCSAgY29uc3Qg
Y2hhciAqbmFtZSwgdm9pZCBfX2lvbWVtICpiYXNlLCBpbnQgaXJxLAorCQkJCQkJICBzdHJ1Y3Qg
Y2xrICpjbGssIGludCBjcHUpCit7CisJc3RtX3RpbWVyLT5iYXNlID0gYmFzZTsKKwlzdG1fdGlt
ZXItPnJhdGUgPSBjbGtfZ2V0X3JhdGUoY2xrKTsKKworCXN0bV90aW1lci0+Y2VkLm5hbWUgPSBu
YW1lOworCXN0bV90aW1lci0+Y2VkLmZlYXR1cmVzID0gQ0xPQ0tfRVZUX0ZFQVRfUEVSSU9ESUMg
fCBDTE9DS19FVlRfRkVBVF9PTkVTSE9UOworCXN0bV90aW1lci0+Y2VkLnNldF9zdGF0ZV9zaHV0
ZG93biA9IG54cF9zdG1fY2xvY2tldmVudF9zaHV0ZG93bjsKKwlzdG1fdGltZXItPmNlZC5zZXRf
c3RhdGVfcGVyaW9kaWMgPSBueHBfc3RtX2Nsb2NrZXZlbnRfc2V0X3BlcmlvZGljOworCXN0bV90
aW1lci0+Y2VkLnNldF9uZXh0X2V2ZW50ID0gbnhwX3N0bV9jbG9ja2V2ZW50X3NldF9uZXh0X2V2
ZW50OworCXN0bV90aW1lci0+Y2VkLnN1c3BlbmQgPSBueHBfc3RtX2Nsb2NrZXZlbnRfc3VzcGVu
ZDsKKwlzdG1fdGltZXItPmNlZC5yZXN1bWUgPSBueHBfc3RtX2Nsb2NrZXZlbnRfcmVzdW1lOwor
CXN0bV90aW1lci0+Y2VkLmNwdW1hc2sgPSBjcHVtYXNrX29mKGNwdSk7CisJc3RtX3RpbWVyLT5j
ZWQucmF0aW5nID0gNDYwOworCXN0bV90aW1lci0+Y2VkLmlycSA9IGlycTsKKworCXBlcl9jcHUo
c3RtX3RpbWVycywgY3B1KSA9IHN0bV90aW1lcjsKKworCW54cF9zdG1fbW9kdWxlX2dldChzdG1f
dGltZXIpOworCisJZGV2X2RiZyhkZXYsICJJbml0aWFsaXplZCBwZXIgY3B1IGNsb2NrZXZlbnQg
bmFtZT0lcywgaXJxPSVkLCBjcHU9JWRcbiIsIG5hbWUsIGlycSwgY3B1KTsKKworCXJldHVybiAw
OworfQorCitzdGF0aWMgaW50IG54cF9zdG1fY2xvY2tldmVudF9zdGFydGluZ19jcHUodW5zaWdu
ZWQgaW50IGNwdSkKK3sKKwlzdHJ1Y3Qgc3RtX3RpbWVyICpzdG1fdGltZXIgPSBwZXJfY3B1KHN0
bV90aW1lcnMsIGNwdSk7CisJaW50IHJldDsKKworCWlmIChXQVJOX09OKCFzdG1fdGltZXIpKQor
CQlyZXR1cm4gLUVGQVVMVDsKKworCXJldCA9IGlycV9mb3JjZV9hZmZpbml0eShzdG1fdGltZXIt
PmNlZC5pcnEsIGNwdW1hc2tfb2YoY3B1KSk7CisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsKKwor
CS8qCisJICogVGhlIHRpbWluZ3MgbWVhc3VyZW1lbnQgc2hvdyByZWFkaW5nIHRoZSBjb3VudGVy
IHJlZ2lzdGVyCisJICogYW5kIHdyaXRpbmcgdG8gdGhlIGNvbXBhcmF0b3IgcmVnaXN0ZXIgdGFr
ZXMgYXMgYSBtYXhpbXVtCisJICogdmFsdWUgMTEwMCBucyBhdCAxMzNNSHogcmF0ZSBmcmVxdWVu
Y3kuIFRoZSB0aW1lciBtdXN0IGJlCisJICogc2V0IGFib3ZlIHRoaXMgdmFsdWUgYW5kIHRvIGJl
IHNlY3VyZSB3ZSBzZXQgdGhlIG1pbmltdW0KKwkgKiB2YWx1ZSBlcXVhbCB0byAyMDAwbnMsIHNv
IDJ1cy4KKwkgKgorCSAqIG1pbmltdW0gdGlja3MgPSAocmF0ZSAvIE1JQ1JPKSAqIDIKKwkgKi8K
KwljbG9ja2V2ZW50c19jb25maWdfYW5kX3JlZ2lzdGVyKCZzdG1fdGltZXItPmNlZCwgc3RtX3Rp
bWVyLT5yYXRlLAorCQkJCQkoc3RtX3RpbWVyLT5yYXRlIC8gTUlDUk8pICogMiwgMHhmZmZmZmZm
Zik7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGlycXJldHVybl90IG54cF9zdG1fbW9kdWxl
X2ludGVycnVwdChpbnQgaXJxLCB2b2lkICpkZXZfaWQpCit7CisJc3RydWN0IHN0bV90aW1lciAq
c3RtX3RpbWVyID0gZGV2X2lkOworCXN0cnVjdCBjbG9ja19ldmVudF9kZXZpY2UgKmNlZCA9ICZz
dG1fdGltZXItPmNlZDsKKwl1MzIgdmFsOworCisJLyoKKwkgKiBUaGUgaW50ZXJydXB0IGlzIHNo
YXJlZCBhY3Jvc3MgdGhlIGNoYW5uZWxzIGluIHRoZQorCSAqIG1vZHVsZS4gQnV0IHRoaXMgb25l
IGlzIGNvbmZpZ3VyZWQgdG8gcnVuIG9ubHkgb25lIGNoYW5uZWwsCisJICogY29uc2VxdWVudGx5
IGl0IGlzIHBvaW50bGVzcyB0byB0ZXN0IHRoZSBpbnRlcnJ1cHQgZmxhZ3MKKwkgKiBiZWZvcmUg
YW5kIHdlIGNhbiBkaXJlY3RseSByZXNldCB0aGUgY2hhbm5lbCAwIGlycSBmbGFnCisJICogcmVn
aXN0ZXIuCisJICovCisJd3JpdGVsKFNUTV9DSVJfQ0lGLCBTVE1fQ0lSMChzdG1fdGltZXItPmJh
c2UpKTsKKworCS8qCisJICogVXBkYXRlIFNUTV9DTVAgdmFsdWUgdXNpbmcgdGhlIGNvdW50ZXIg
dmFsdWUKKwkgKi8KKwl2YWwgPSBueHBfc3RtX2Nsb2NrZXZlbnRfcmVhZF9jb3VudGVyKHN0bV90
aW1lcikgKyBzdG1fdGltZXItPmRlbHRhOworCisJd3JpdGVsKHZhbCwgU1RNX0NNUDAoc3RtX3Rp
bWVyLT5iYXNlKSk7CisKKwkvKgorCSAqIHN0bSBoYXJkd2FyZSBkb2Vzbid0IHN1cHBvcnQgb25l
c2hvdCwgaXQgd2lsbCBnZW5lcmF0ZSBhbgorCSAqIGludGVycnVwdCBhbmQgc3RhcnQgdGhlIGNv
dW50ZXIgYWdhaW4gc28gc29mdHdhcmUgbmVlZCB0bworCSAqIGRpc2FibGUgdGhlIHRpbWVyIHRv
IHN0b3AgdGhlIGNvdW50ZXIgbG9vcCBpbiBPTkVTSE9UIG1vZGUuCisJICovCisJaWYgKGxpa2Vs
eShjbG9ja2V2ZW50X3N0YXRlX29uZXNob3QoY2VkKSkpCisJCW54cF9zdG1fY2xvY2tldmVudF9k
aXNhYmxlKHN0bV90aW1lcik7CisKKwljZWQtPmV2ZW50X2hhbmRsZXIoY2VkKTsKKworCXJldHVy
biBJUlFfSEFORExFRDsKK30KKworc3RhdGljIGludCBfX2luaXQgbnhwX3N0bV90aW1lcl9wcm9i
ZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQoreworCXN0cnVjdCBzdG1fdGltZXIgKnN0
bV90aW1lcjsKKwlzdHJ1Y3QgZGV2aWNlICpkZXYgPSAmcGRldi0+ZGV2OworCXN0cnVjdCBkZXZp
Y2Vfbm9kZSAqbnAgPSBkZXYtPm9mX25vZGU7CisJY29uc3QgY2hhciAqbmFtZSA9IG9mX25vZGVf
ZnVsbF9uYW1lKG5wKTsKKwlzdHJ1Y3QgY2xrICpjbGs7CisJdm9pZCBfX2lvbWVtICpiYXNlOwor
CWludCBpcnEsIHJldDsKKworCS8qCisJICogVGhlIGRldmljZSB0cmVlIGNhbiBoYXZlIG11bHRp
cGxlIFNUTSBub2RlcyBkZXNjcmliZWQsIHNvCisJICogaXQgbWFrZXMgdGhpcyBkcml2ZXIgYSBn
b29kIGNhbmRpZGF0ZSBmb3IgdGhlIGFzeW5jIHByb2JlLgorCSAqIEl0IGlzIHN0aWxsIHVuY2xl
YXIgaWYgdGhlIHRpbWUgZnJhbWV3b3JrIGRvZXMgY29ycmVjdGx5CisJICogaGFuZGxlIGEgcGFy
YWxsZWwgbG9hZGluZyBvZiB0aGUgdGltZXJzIGJ1dCBhdCBsZWFzdCB0aGlzCisJICogZHJpdmVy
IGlzIHJlYWR5IHRvIHN1cHBvcnQgdGhlIG9wdGlvbi4KKwkgKi8KKwlndWFyZChzdG1faW5zdGFu
Y2VzKSgmc3RtX2luc3RhbmNlc19sb2NrKTsKKworCS8qCisJICogVGhlIFMzMkd4IGFyZSBTb0Nz
IGZlYXR1cmluZyBhIGRpdmVyc2Ugc2V0IG9mIGNvcmVzLiBMaW51eAorCSAqIGlzIGV4cGVjdGVk
IHRvIHJ1biBvbiBDb3J0ZXgtQTUzIGNvcmVzLCB3aGlsZSBvdGhlcgorCSAqIHNvZnR3YXJlIHN0
YWNrcyB3aWxsIG9wZXJhdGUgb24gQ29ydGV4LU0gY29yZXMuIFRoZSBudW1iZXIKKwkgKiBvZiBT
VE0gaW5zdGFuY2VzIGhhcyBiZWVuIHNpemVkIHRvIGluY2x1ZGUgYXQgbW9zdCBvbmUKKwkgKiBp
bnN0YW5jZSBwZXIgY29yZS4KKwkgKgorCSAqIEFzIHdlIG5lZWQgYSBjbG9ja3NvdXJjZSBhbmQg
YSBjbG9ja2V2ZW50IHBlciBjcHUsIHdlCisJICogc2ltcGx5IGluaXRpYWxpemUgYSBjbG9ja3Nv
dXJjZSBwZXIgY3B1IGFsb25nIHdpdGggdGhlCisJICogY2xvY2tldmVudCB3aGljaCBtYWtlcyB0
aGUgcmVzdWx0aW5nIGNvZGUgc2ltcGxlci4KKwkgKgorCSAqIEhvd2V2ZXIgaWYgdGhlIGRldmlj
ZSB0cmVlIGlzIGRlc2NyaWJpbmcgbW9yZSBTVE0gaW5zdGFuY2VzCisJICogdGhhbiB0aGUgbnVt
YmVyIG9mIGNvcmVzLCB0aGVuIHdlIGlnbm9yZSB0aGVtLgorCSAqLworCWlmIChzdG1faW5zdGFu
Y2VzID49IG51bV9wb3NzaWJsZV9jcHVzKCkpCisJCXJldHVybiAwOworCisJYmFzZSA9IGRldm1f
b2ZfaW9tYXAoZGV2LCBucCwgMCwgTlVMTCk7CisJaWYgKElTX0VSUihiYXNlKSkKKwkJcmV0dXJu
IGRldl9lcnJfcHJvYmUoZGV2LCBQVFJfRVJSKGJhc2UpLCAiRmFpbGVkIHRvIGlvbWFwICVwT0Zu
XG4iLCBucCk7CisKKwlpcnEgPSBwbGF0Zm9ybV9nZXRfaXJxKHBkZXYsIDApOworCWlmIChpcnEg
PCAwKQorCQlyZXR1cm4gZGV2X2Vycl9wcm9iZShkZXYsIGlycSwgIkZhaWxlZCB0byBnZXQgSVJR
XG4iKTsKKworCWNsayA9IGRldm1fY2xrX2dldF9lbmFibGVkKGRldiwgTlVMTCk7CisJaWYgKElT
X0VSUihjbGspKQorCQlyZXR1cm4gZGV2X2Vycl9wcm9iZShkZXYsIFBUUl9FUlIoY2xrKSwgIkNs
b2NrIG5vdCBmb3VuZFxuIik7CisKKwlzdG1fdGltZXIgPSBkZXZtX2t6YWxsb2MoZGV2LCBzaXpl
b2YoKnN0bV90aW1lciksIEdGUF9LRVJORUwpOworCWlmICghc3RtX3RpbWVyKQorCQlyZXR1cm4g
LUVOT01FTTsKKworCXJldCA9IGRldm1fcmVxdWVzdF9pcnEoZGV2LCBpcnEsIG54cF9zdG1fbW9k
dWxlX2ludGVycnVwdCwKKwkJCSAgICAgICBJUlFGX1RJTUVSIHwgSVJRRl9OT0JBTEFOQ0lORywg
bmFtZSwgc3RtX3RpbWVyKTsKKwlpZiAocmV0KQorCQlyZXR1cm4gZGV2X2Vycl9wcm9iZShkZXYs
IHJldCwgIlVuYWJsZSB0byBhbGxvY2F0ZSBpbnRlcnJ1cHQgbGluZVxuIik7CisKKwlyZXQgPSBu
eHBfc3RtX2Nsb2Nrc291cmNlX2luaXQoZGV2LCBzdG1fdGltZXIsIG5hbWUsIGJhc2UsIGNsayk7
CisJaWYgKHJldCkKKwkJcmV0dXJuIHJldDsKKworCS8qCisJICogTmV4dCBwcm9iZWQgU1RNIHdp
bGwgYmUgYSBwZXIgQ1BVIGNsb2NrZXZlbnQsIHVudGlsCisJICogd2UgcHJvYmUgYXMgbXVjaCBh
cyB3ZSBoYXZlIENQVXMgYXZhaWxhYmxlIG9uIHRoZQorCSAqIHN5c3RlbSwgd2UgZG8gYSBwYXJ0
aWFsIGluaXRpYWxpemF0aW9uCisJICovCisJcmV0ID0gbnhwX3N0bV9jbG9ja2V2ZW50X3Blcl9j
cHVfaW5pdChkZXYsIHN0bV90aW1lciwgbmFtZSwKKwkJCQkJICAgICAgYmFzZSwgaXJxLCBjbGss
CisJCQkJCSAgICAgIHN0bV9pbnN0YW5jZXMpOworCWlmIChyZXQpCisJCXJldHVybiByZXQ7CisK
KwlzdG1faW5zdGFuY2VzKys7CisKKwkvKgorCSAqIFRoZSBudW1iZXIgb2YgcHJvYmVkIFNUTSBm
b3IgcGVyIENQVSBjbG9ja2V2ZW50IGlzCisJICogZXF1YWwgdG8gdGhlIG51bWJlciBvZiBhdmFp
bGFibGUgQ1BVcyBvbiB0aGUKKwkgKiBzeXN0ZW0uIFdlIGluc3RhbGwgdGhlIGNwdSBob3RwbHVn
IHRvIGZpbmlzaCB0aGUKKwkgKiBpbml0aWFsaXphdGlvbiBieSByZWdpc3RlcmluZyB0aGUgY2xv
Y2tldmVudHMKKwkgKi8KKwlpZiAoc3RtX2luc3RhbmNlcyA9PSBudW1fcG9zc2libGVfY3B1cygp
KSB7CisJCXJldCA9IGNwdWhwX3NldHVwX3N0YXRlKENQVUhQX0FQX09OTElORV9EWU4sICJTVE0g
dGltZXI6c3RhcnRpbmciLAorCQkJCQlueHBfc3RtX2Nsb2NrZXZlbnRfc3RhcnRpbmdfY3B1LCBO
VUxMKTsKKwkJaWYgKHJldCA8IDApCisJCQlyZXR1cm4gcmV0OworCX0KKworCXJldHVybiAwOwor
fQorCitzdGF0aWMgY29uc3Qgc3RydWN0IG9mX2RldmljZV9pZCBueHBfc3RtX29mX21hdGNoW10g
PSB7CisJeyAuY29tcGF0aWJsZSA9ICJueHAsczMyZzItc3RtIiB9LAorCXsgfQorfTsKK01PRFVM
RV9ERVZJQ0VfVEFCTEUob2YsIG54cF9zdG1fb2ZfbWF0Y2gpOworCitzdGF0aWMgc3RydWN0IHBs
YXRmb3JtX2RyaXZlciBueHBfc3RtX3Byb2JlID0geworCS5wcm9iZQk9IG54cF9zdG1fdGltZXJf
cHJvYmUsCisJLmRyaXZlcgk9IHsKKwkJLm5hbWUJCT0gIm54cC1zdG0iLAorCQkub2ZfbWF0Y2hf
dGFibGUJPSBueHBfc3RtX29mX21hdGNoLAorCX0sCit9OworbW9kdWxlX3BsYXRmb3JtX2RyaXZl
cihueHBfc3RtX3Byb2JlKTsKKworTU9EVUxFX0RFU0NSSVBUSU9OKCJOWFAgU3lzdGVtIFRpbWVy
IE1vZHVsZSBkcml2ZXIiKTsKK01PRFVMRV9MSUNFTlNFKCJHUEwiKTsKLS0gCjIuNDMuMAoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KTGludXgtc3RtMzIg
bWFpbGluZyBsaXN0CkxpbnV4LXN0bTMyQHN0LW1kLW1haWxtYW4uc3Rvcm1yZXBseS5jb20KaHR0
cHM6Ly9zdC1tZC1tYWlsbWFuLnN0b3JtcmVwbHkuY29tL21haWxtYW4vbGlzdGluZm8vbGludXgt
c3RtMzIK
