Return-Path: <linux-stm32-bounces@st-md-mailman.stormreply.com>
X-Original-To: lists+linux-stm32@lfdr.de
Delivered-To: lists+linux-stm32@lfdr.de
Received: from stm-ict-prod-mailman-01.stormreply.prv (st-md-mailman.stormreply.com [52.209.6.89])
	by mail.lfdr.de (Postfix) with ESMTPS id DE99DA43824
	for <lists+linux-stm32@lfdr.de>; Tue, 25 Feb 2025 09:52:17 +0100 (CET)
Received: from ip-172-31-3-47.eu-west-1.compute.internal (localhost [127.0.0.1])
	by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTP id 99A05C7A850;
	Tue, 25 Feb 2025 08:52:17 +0000 (UTC)
Received: from mx07-00178001.pphosted.com (mx07-00178001.pphosted.com
 [185.132.182.106])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested)
 by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTPS id 2E34BC7A83C
 for <linux-stm32@st-md-mailman.stormreply.com>;
 Tue, 25 Feb 2025 08:52:15 +0000 (UTC)
Received: from pps.filterd (m0369458.ppops.net [127.0.0.1])
 by mx07-00178001.pphosted.com (8.18.1.2/8.18.1.2) with ESMTP id 51P7lqXC000766;
 Tue, 25 Feb 2025 09:52:01 +0100
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=foss.st.com; h=
 cc:content-transfer-encoding:content-type:date:from:in-reply-to
 :message-id:mime-version:references:subject:to; s=selector1; bh=
 cVklkX4ls4DmGaHeHtD1Mqmy/EB9lIthesFAI0y01ZA=; b=acZoLLaf3zttcjr0
 qrbM4xCG8yDoqlOAsqNWCOlRHtcfHrQbt+1iTbkZ+gkMjyszYCw5kjQa3b7Mq7Hx
 XJ6QPp7ZEncO9iSFiucnbl+8oH1pZkxkUgyb1DLLhjY5l0SL3yvG0dlX0XtjYMpP
 P6Xwap0C0oC7Z3cxL72Lnp+Gs4OICJ0ZhPL7U8phx1OMm4wReUQUb1jcKcIy1M6+
 4NdONW+GSTKHEKdLC+iSvOeAOFA7TcSQEruRgoKQybUDWO5BOb/CxcaPw5K1PGxB
 x5Ji++mQ3z1LxREJf14dLBYwRRT6tASqqaGPmQJIw84xg1OKi/SIhzKUfhFfK8+h
 yZUF+Q==
Received: from beta.dmz-ap.st.com (beta.dmz-ap.st.com [138.198.100.35])
 by mx07-00178001.pphosted.com (PPS) with ESMTPS id 4512sp1t4d-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Tue, 25 Feb 2025 09:52:01 +0100 (CET)
Received: from euls16034.sgp.st.com (euls16034.sgp.st.com [10.75.44.20])
 by beta.dmz-ap.st.com (STMicroelectronics) with ESMTP id 1B9CA40055;
 Tue, 25 Feb 2025 09:50:51 +0100 (CET)
Received: from Webmail-eu.st.com (shfdag1node2.st.com [10.75.129.70])
 by euls16034.sgp.st.com (STMicroelectronics) with ESMTP id 386AF47A7A8;
 Tue, 25 Feb 2025 09:48:08 +0100 (CET)
Received: from localhost (10.48.86.185) by SHFDAG1NODE2.st.com (10.75.129.70)
 with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256) id 15.1.2507.39; Tue, 25 Feb
 2025 09:48:07 +0100
From: =?utf-8?q?Cl=C3=A9ment_Le_Goffic?= <clement.legoffic@foss.st.com>
Date: Tue, 25 Feb 2025 09:48:02 +0100
MIME-Version: 1.0
Message-ID: <20250225-hdp-upstream-v1-3-9d049c65330a@foss.st.com>
References: <20250225-hdp-upstream-v1-0-9d049c65330a@foss.st.com>
In-Reply-To: <20250225-hdp-upstream-v1-0-9d049c65330a@foss.st.com>
To: Linus Walleij <linus.walleij@linaro.org>, Rob Herring <robh@kernel.org>,
 Krzysztof Kozlowski <krzk+dt@kernel.org>,
 Conor Dooley <conor+dt@kernel.org>,
 Maxime Coquelin <mcoquelin.stm32@gmail.com>, Alexandre Torgue
 <alexandre.torgue@foss.st.com>, Bartosz Golaszewski <brgl@bgdev.pl>
X-Mailer: b4 0.15-dev-42535
X-Originating-IP: [10.48.86.185]
X-ClientProxiedBy: SHFCAS1NODE2.st.com (10.75.129.73) To SHFDAG1NODE2.st.com
 (10.75.129.70)
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.293,Aquarius:18.0.1057,Hydra:6.0.680,FMLib:17.12.68.34
 definitions=2025-02-25_03,2025-02-24_02,2024-11-22_01
Cc: devicetree@vger.kernel.org, linux-kernel@vger.kernel.org,
 linux-gpio@vger.kernel.org, linux-stm32@st-md-mailman.stormreply.com,
 linux-arm-kernel@lists.infradead.org
Subject: [Linux-stm32] [PATCH 3/9] pinctrl: stm32: Introduce HDP driver
X-BeenThere: linux-stm32@st-md-mailman.stormreply.com
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: <linux-stm32.st-md-mailman.stormreply.com>
List-Unsubscribe: <https://st-md-mailman.stormreply.com/mailman/options/linux-stm32>, 
 <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=unsubscribe>
List-Archive: <http://st-md-mailman.stormreply.com/pipermail/linux-stm32/>
List-Post: <mailto:linux-stm32@st-md-mailman.stormreply.com>
List-Help: <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=help>
List-Subscribe: <https://st-md-mailman.stormreply.com/mailman/listinfo/linux-stm32>, 
 <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linux-stm32-bounces@st-md-mailman.stormreply.com
Sender: "Linux-stm32" <linux-stm32-bounces@st-md-mailman.stormreply.com>

VGhpcyBwYXRjaCBpbnRyb2R1Y2UgdGhlIGRyaXZlciBmb3IgdGhlIEhhcmR3YXJlIERlYnVnIFBv
cnQgYXZhaWxhYmxlIG9uClNUTTMyTVAgcGxhdGZvcm1zLiBUaGUgSERQIGFsbG93cyB0aGUgb2Jz
ZXJ2YXRpb24gb2YgaW50ZXJuYWwgU29DCnNpZ25hbHMgYnkgdXNpbmcgbXVsdGlwbGV4ZXJzLiBF
YWNoIEhEUCBwb3J0IGNhbiBwcm92aWRlIHVwIHRvIDE2CmludGVybmFsIHNpZ25hbHMgKG9uZSBv
ZiB0aGVtIGNhbiBiZSBzb2Z0d2FyZSBjb250cm9sbGVkIGFzIGEgR1BPKQoKU2lnbmVkLW9mZi1i
eTogQ2zDqW1lbnQgTGUgR29mZmljIDxjbGVtZW50LmxlZ29mZmljQGZvc3Muc3QuY29tPgotLS0K
IGRyaXZlcnMvcGluY3RybC9zdG0zMi9LY29uZmlnICAgICAgICAgICAgIHwgIDE0ICsrCiBkcml2
ZXJzL3BpbmN0cmwvc3RtMzIvTWFrZWZpbGUgICAgICAgICAgICB8ICAgMSArCiBkcml2ZXJzL3Bp
bmN0cmwvc3RtMzIvcGluY3RybC1zdG0zMi1oZHAuYyB8IDMwMSArKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysKIDMgZmlsZXMgY2hhbmdlZCwgMzE2IGluc2VydGlvbnMoKykKCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL3BpbmN0cmwvc3RtMzIvS2NvbmZpZyBiL2RyaXZlcnMvcGluY3RybC9zdG0z
Mi9LY29uZmlnCmluZGV4IDI2NTZkM2QzYWU0MC4uNGI0NzRjZmQxZjJjIDEwMDY0NAotLS0gYS9k
cml2ZXJzL3BpbmN0cmwvc3RtMzIvS2NvbmZpZworKysgYi9kcml2ZXJzL3BpbmN0cmwvc3RtMzIv
S2NvbmZpZwpAQCAtNTcsNCArNTcsMTggQEAgY29uZmlnIFBJTkNUUkxfU1RNMzJNUDI1NwogCWRl
cGVuZHMgb24gT0YgJiYgSEFTX0lPTUVNCiAJZGVmYXVsdCBNQUNIX1NUTTMyTVAyNQogCXNlbGVj
dCBQSU5DVFJMX1NUTTMyCisKK2NvbmZpZyBQSU5DVFJMX1NUTTMyX0hEUAorCXRyaXN0YXRlICJT
VE1pY3JvZWxlY3Ryb25pY3MgU1RNMzIgSGFyZHdhcmUgRGVidWcgUG9ydCAoSERQKSBwaW4gY29u
dHJvbCIKKwlkZXBlbmRzIG9uIE9GICYmIEhBU19JT01FTQorCWRlZmF1bHQgQVJNNjQgfHwgKEFS
TSAmJiBDUFVfVjcpCisJc2VsZWN0IFBJTk1VWAorCXNlbGVjdCBHRU5FUklDX1BJTkNPTkYKKwlz
ZWxlY3QgR1BJT0xJQgorCWhlbHAKKwkgIFRoZSBIYXJkd2FyZSBEZWJ1ZyBQb3J0IGFsbG93cyB0
aGUgb2JzZXJ2YXRpb24gb2YgaW50ZXJuYWwgc2lnbmFscy4KKwkgIEl0IHVzZXMgY29uZmlndXJh
YmxlIG11bHRpcGxleGVyIHRvIHJvdXRlIHNpZ25hbHMgaW4gYSBkZWRpY2F0ZWQgb2JzZXJ2YXRp
b24gcmVnaXN0ZXIuCisJICBUaGlzIGRyaXZlciBhbHNvIHBlcm1pdHMgdGhlIG9ic2VydmF0aW9u
IG9mIHNpZ25hbHMgb24gZXh0ZXJuYWwgU29DIHBpbnMuCisJICBJdCBwZXJtaXRzIHRoZSBvYnNl
cnZhdGlvbiBvZiB1cCB0byAxNiBzaWduYWxzIHBlciBIRFAgbGluZS4KKwogZW5kaWYKZGlmZiAt
LWdpdCBhL2RyaXZlcnMvcGluY3RybC9zdG0zMi9NYWtlZmlsZSBiL2RyaXZlcnMvcGluY3RybC9z
dG0zMi9NYWtlZmlsZQppbmRleCA3YjE3NDY0ZDhkZTEuLjk4YTFiYmM3ZTE2YyAxMDA2NDQKLS0t
IGEvZHJpdmVycy9waW5jdHJsL3N0bTMyL01ha2VmaWxlCisrKyBiL2RyaXZlcnMvcGluY3RybC9z
dG0zMi9NYWtlZmlsZQpAQCAtMTEsMyArMTEsNCBAQCBvYmotJChDT05GSUdfUElOQ1RSTF9TVE0z
Mkg3NDMpCSs9IHBpbmN0cmwtc3RtMzJoNzQzLm8KIG9iai0kKENPTkZJR19QSU5DVFJMX1NUTTMy
TVAxMzUpICs9IHBpbmN0cmwtc3RtMzJtcDEzNS5vCiBvYmotJChDT05GSUdfUElOQ1RSTF9TVE0z
Mk1QMTU3KSArPSBwaW5jdHJsLXN0bTMybXAxNTcubwogb2JqLSQoQ09ORklHX1BJTkNUUkxfU1RN
MzJNUDI1NykgKz0gcGluY3RybC1zdG0zMm1wMjU3Lm8KK29iai0kKENPTkZJR19QSU5DVFJMX1NU
TTMyX0hEUCkgKz0gcGluY3RybC1zdG0zMi1oZHAubwpkaWZmIC0tZ2l0IGEvZHJpdmVycy9waW5j
dHJsL3N0bTMyL3BpbmN0cmwtc3RtMzItaGRwLmMgYi9kcml2ZXJzL3BpbmN0cmwvc3RtMzIvcGlu
Y3RybC1zdG0zMi1oZHAuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMDAu
LmU5MzdkOWI5Zjc3YQotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMvcGluY3RybC9zdG0zMi9w
aW5jdHJsLXN0bTMyLWhkcC5jCkBAIC0wLDAgKzEsMzAxIEBACisvLyBTUERYLUxpY2Vuc2UtSWRl
bnRpZmllcjogR1BMLTIuMC1vbmx5CisvKgorICogQ29weXJpZ2h0IChDKSBTVE1pY3JvZWxlY3Ry
b25pY3MgMjAyNSAtIEFsbCBSaWdodHMgUmVzZXJ2ZWQKKyAqIEF1dGhvcjogQ2zDqW1lbnQgTGUg
R29mZmljIDxjbGVtZW50LmxlZ29mZmljQGZvc3Muc3QuY29tPiBmb3IgU1RNaWNyb2VsZWN0cm9u
aWNzLgorICovCisjaW5jbHVkZSA8bGludXgvYml0cy5oPgorI2luY2x1ZGUgPGxpbnV4L2Nsay5o
PgorI2luY2x1ZGUgPGxpbnV4L2dwaW8vZHJpdmVyLmg+CisjaW5jbHVkZSA8bGludXgvaW8uaD4K
KyNpbmNsdWRlIDxsaW51eC9vZi5oPgorI2luY2x1ZGUgPGxpbnV4L29mX2RldmljZS5oPgorI2lu
Y2x1ZGUgPGxpbnV4L3BpbmN0cmwvY29uc3VtZXIuaD4KKyNpbmNsdWRlIDxsaW51eC9waW5jdHJs
L3BpbmNvbmYtZ2VuZXJpYy5oPgorI2luY2x1ZGUgPGxpbnV4L3BpbmN0cmwvcGluY3RybC5oPgor
I2luY2x1ZGUgPGxpbnV4L3BpbmN0cmwvcGlubXV4Lmg+CisjaW5jbHVkZSA8bGludXgvcGxhdGZv
cm1fZGV2aWNlLmg+CisjaW5jbHVkZSA8bGludXgvcG0uaD4KKworI2luY2x1ZGUgIi4uL2NvcmUu
aCIKKworI2RlZmluZSBEUklWRVJfTkFNRQkJInN0bTMyX2hkcCIKKyNkZWZpbmUgSERQX0NUUkxf
RU5BQkxFCQkxCisjZGVmaW5lIEhEUF9DVFJMX0RJU0FCTEUJMAorI2RlZmluZSBOQl9GVU5DVElP
TlMJCTE2CisKKyNkZWZpbmUgSERQX0NUUkwJCTB4MDAwCisjZGVmaW5lIEhEUF9NVVgJCQkweDAw
NAorI2RlZmluZSBIRFBfVkFMCQkJMHgwMTAKKyNkZWZpbmUgSERQX0dQT1NFVAkJMHgwMTQKKyNk
ZWZpbmUgSERQX0dQT0NMUgkJMHgwMTgKKyNkZWZpbmUgSERQX0dQT1ZBTAkJMHgwMWMKKyNkZWZp
bmUgSERQX1ZFUlIJCTB4M2Y0CisjZGVmaW5lIEhEUF9JUElEUgkJMHgzZjgKKyNkZWZpbmUgSERQ
X1NJRFIJCTB4M2ZjCisKKyNkZWZpbmUgSERQX01VWF9TSElGVChuKQkoKG4pICogNCkKKyNkZWZp
bmUgSERQX01VWF9NQVNLKG4pCQkoR0VOTUFTSygzLCAwKSA8PCBIRFBfTVVYX1NISUZUKG4pKQor
I2RlZmluZSBIRFBfTVVYX0dQT1ZBTChuKQkoMHhmIDw8IEhEUF9NVVhfU0hJRlQobikpCisKK3N0
cnVjdCBzdG0zMl9oZHAgeworCXN0cnVjdCBkZXZpY2UgKmRldjsKKwl2b2lkIF9faW9tZW0gKmJh
c2U7CisJc3RydWN0IGNsayAqY2xrOworCXN0cnVjdCBwaW5jdHJsX2RldiAqcGN0bF9kZXY7CisJ
c3RydWN0IGdwaW9fY2hpcCBncGlvX2NoaXA7CisJdTMyIG11eF9jb25mOworCXUzMiBncG9zZXRf
Y29uZjsKK307CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgcGluY3RybF9waW5fZGVzYyBzdG0zMl9o
ZHBfcGluc1tdID0geworCVBJTkNUUkxfUElOKDAsICJoZHAwIiksCisJUElOQ1RSTF9QSU4oMSwg
ImhkcDEiKSwKKwlQSU5DVFJMX1BJTigyLCAiaGRwMiIpLAorCVBJTkNUUkxfUElOKDMsICJoZHAz
IiksCisJUElOQ1RSTF9QSU4oNCwgImhkcDQiKSwKKwlQSU5DVFJMX1BJTig1LCAiaGRwNSIpLAor
CVBJTkNUUkxfUElOKDYsICJoZHA2IiksCisJUElOQ1RSTF9QSU4oNywgImhkcDciKSwKK307CisK
K3N0YXRpYyBjb25zdCBjaGFyICogY29uc3QgZnVuY19uYW1lW10gPSB7CisJIjAiLCAiMSIsICIy
IiwgIjMiLAorCSI0IiwgIjUiLCAiNiIsICI3IiwKKwkiOCIsICI5IiwgIjEwIiwgIjExIiwKKwki
MTIiLCAiMTMiLCAiMTQiLCAiMTUiLAorfTsKKworc3RhdGljIGNvbnN0IGNoYXIgKiBjb25zdCBz
dG0zMl9oZHBfcGluc19ncm91cFtdID0geworCSJoZHAwIiwKKwkiaGRwMSIsCisJImhkcDIiLAor
CSJoZHAzIiwKKwkiaGRwNCIsCisJImhkcDUiLAorCSJoZHA2IiwKKwkiaGRwNyIKK307CisKK3N0
YXRpYyBpbnQgc3RtMzJfaGRwX2dwaW9fZ2V0X2RpcmVjdGlvbihzdHJ1Y3QgZ3Bpb19jaGlwICpn
YywgdW5zaWduZWQgaW50IG9mZnNldCkKK3sKKwlyZXR1cm4gR1BJT19MSU5FX0RJUkVDVElPTl9P
VVQ7Cit9CisKK3N0YXRpYyBpbnQgc3RtMzJfaGRwX2dwaW9fZ2V0KHN0cnVjdCBncGlvX2NoaXAg
KmdjLCB1bnNpZ25lZCBpbnQgb2Zmc2V0KQoreworCXN0cnVjdCBzdG0zMl9oZHAgKmhkcCA9IGdw
aW9jaGlwX2dldF9kYXRhKGdjKTsKKworCWlmICgoKGhkcC0+bXV4X2NvbmYgJiBIRFBfTVVYX01B
U0sob2Zmc2V0KSkpID09IEhEUF9NVVhfR1BPVkFMKG9mZnNldCkpCisJCXJldHVybiAhIShyZWFk
bF9yZWxheGVkKGhkcC0+YmFzZSArIEhEUF9HUE9WQUwpICYgQklUKG9mZnNldCkpOworCWVsc2UK
KwkJcmV0dXJuICEhKHJlYWRsX3JlbGF4ZWQoaGRwLT5iYXNlICsgSERQX1ZBTCkgJiBCSVQob2Zm
c2V0KSk7Cit9CisKK3N0YXRpYyB2b2lkIHN0bTMyX2hkcF9ncGlvX3NldChzdHJ1Y3QgZ3Bpb19j
aGlwICpnYywgdW5zaWduZWQgaW50IG9mZnNldCwgaW50IHZhbHVlKQoreworCXN0cnVjdCBzdG0z
Ml9oZHAgKmhkcCA9IGdwaW9jaGlwX2dldF9kYXRhKGdjKTsKKworCWlmICh2YWx1ZSkKKwkJd3Jp
dGVsX3JlbGF4ZWQoQklUKG9mZnNldCksIGhkcC0+YmFzZSArIEhEUF9HUE9TRVQpOworCWVsc2UK
KwkJd3JpdGVsX3JlbGF4ZWQoQklUKG9mZnNldCksIGhkcC0+YmFzZSArIEhEUF9HUE9DTFIpOwor
fQorCitzdGF0aWMgaW50IHN0bTMyX2hkcF9waW5jdHJsX2dldF9ncm91cHNfY291bnQoc3RydWN0
IHBpbmN0cmxfZGV2ICpwY3RsZGV2KQoreworCXJldHVybiBBUlJBWV9TSVpFKHN0bTMyX2hkcF9w
aW5zKTsKK30KKworc3RhdGljIGNvbnN0IGNoYXIgKnN0bTMyX2hkcF9waW5jdHJsX2dldF9ncm91
cF9uYW1lKHN0cnVjdCBwaW5jdHJsX2RldiAqcGN0bGRldiwKKwkJCQkJCSAgICB1bnNpZ25lZCBp
bnQgc2VsZWN0b3IpCit7CisJcmV0dXJuIHN0bTMyX2hkcF9waW5zW3NlbGVjdG9yXS5uYW1lOwor
fQorCitzdGF0aWMgaW50IHN0bTMyX2hkcF9waW5jdHJsX2dldF9ncm91cF9waW5zKHN0cnVjdCBw
aW5jdHJsX2RldiAqcGN0bGRldiwgdW5zaWduZWQgaW50IHNlbGVjdG9yLAorCQkJCQkgICAgY29u
c3QgdW5zaWduZWQgaW50ICoqcGlucywgdW5zaWduZWQgaW50ICpudW1fcGlucykKK3sKKwkqcGlu
cyA9ICZzdG0zMl9oZHBfcGluc1tzZWxlY3Rvcl0ubnVtYmVyOworCSpudW1fcGlucyA9IDE7CisK
KwlyZXR1cm4gMDsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBwaW5jdHJsX29wcyBzdG0zMl9o
ZHBfcGluY3RybF9vcHMgPSB7CisJLmdldF9ncm91cHNfY291bnQgPSBzdG0zMl9oZHBfcGluY3Ry
bF9nZXRfZ3JvdXBzX2NvdW50LAorCS5nZXRfZ3JvdXBfbmFtZQkgID0gc3RtMzJfaGRwX3BpbmN0
cmxfZ2V0X2dyb3VwX25hbWUsCisJLmdldF9ncm91cF9waW5zCSAgPSBzdG0zMl9oZHBfcGluY3Ry
bF9nZXRfZ3JvdXBfcGlucywKKwkuZHRfbm9kZV90b19tYXAJICA9IHBpbmNvbmZfZ2VuZXJpY19k
dF9ub2RlX3RvX21hcF9hbGwsCisJLmR0X2ZyZWVfbWFwCSAgPSBwaW5jb25mX2dlbmVyaWNfZHRf
ZnJlZV9tYXAsCit9OworCitzdGF0aWMgaW50IHN0bTMyX2hkcF9waW5tdXhfZ2V0X2Z1bmN0aW9u
c19jb3VudChzdHJ1Y3QgcGluY3RybF9kZXYgKnBjdGxkZXYpCit7CisJcmV0dXJuIE5CX0ZVTkNU
SU9OUzsKK30KKworc3RhdGljIGNvbnN0IGNoYXIgKnN0bTMyX2hkcF9waW5tdXhfZ2V0X2Z1bmN0
aW9uX25hbWUoc3RydWN0IHBpbmN0cmxfZGV2ICpwY3RsZGV2LAorCQkJCQkJICAgICAgdW5zaWdu
ZWQgaW50IHNlbGVjdG9yKQoreworCXJldHVybiBmdW5jX25hbWVbc2VsZWN0b3JdOworfQorCitz
dGF0aWMgaW50IHN0bTMyX2hkcF9waW5tdXhfZ2V0X2Z1bmN0aW9uX2dyb3VwcyhzdHJ1Y3QgcGlu
Y3RybF9kZXYgKnBjdGxkZXYsIHVuc2lnbmVkIGludCBzZWxlY3RvciwKKwkJCQkJCWNvbnN0IGNo
YXIgKmNvbnN0ICoqZ3JvdXBzLAorCQkJCQkJdW5zaWduZWQgaW50ICpudW1fZ3JvdXBzKQorewor
CSpncm91cHMgPSBzdG0zMl9oZHBfcGluc19ncm91cDsKKwkqbnVtX2dyb3VwcyA9IEFSUkFZX1NJ
WkUoc3RtMzJfaGRwX3BpbnNfZ3JvdXApOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBpbnQg
c3RtMzJfaGRwX3Bpbm11eF9zZXRfbXV4KHN0cnVjdCBwaW5jdHJsX2RldiAqcGN0bGRldiwgdW5z
aWduZWQgaW50IGZ1bmNfc2VsZWN0b3IsCisJCQkJICAgIHVuc2lnbmVkIGludCBncm91cF9zZWxl
Y3RvcikKK3sKKwlzdHJ1Y3Qgc3RtMzJfaGRwICpoZHAgPSBwaW5jdHJsX2Rldl9nZXRfZHJ2ZGF0
YShwY3RsZGV2KTsKKwl1bnNpZ25lZCBpbnQgcGluID0gc3RtMzJfaGRwX3BpbnNbZ3JvdXBfc2Vs
ZWN0b3JdLm51bWJlcjsKKwl1MzIgbXV4OworCisJbXV4ID0gcmVhZGxfcmVsYXhlZChoZHAtPmJh
c2UgKyBIRFBfTVVYKTsKKwltdXggJj0gfkhEUF9NVVhfTUFTSyhwaW4pOworCW11eCB8PSBmdW5j
X3NlbGVjdG9yIDw8IEhEUF9NVVhfU0hJRlQocGluKTsKKworCXdyaXRlbF9yZWxheGVkKG11eCwg
aGRwLT5iYXNlICsgSERQX01VWCk7CisJaGRwLT5tdXhfY29uZiA9IG11eDsKKworCXJldHVybiAw
OworfQorCitzdGF0aWMgY29uc3Qgc3RydWN0IHBpbm11eF9vcHMgc3RtMzJfaGRwX3Bpbm11eF9v
cHMgPSB7CisJLmdldF9mdW5jdGlvbnNfY291bnQgPSBzdG0zMl9oZHBfcGlubXV4X2dldF9mdW5j
dGlvbnNfY291bnQsCisJLmdldF9mdW5jdGlvbl9uYW1lICAgPSBzdG0zMl9oZHBfcGlubXV4X2dl
dF9mdW5jdGlvbl9uYW1lLAorCS5nZXRfZnVuY3Rpb25fZ3JvdXBzID0gc3RtMzJfaGRwX3Bpbm11
eF9nZXRfZnVuY3Rpb25fZ3JvdXBzLAorCS5zZXRfbXV4CSAgICAgPSBzdG0zMl9oZHBfcGlubXV4
X3NldF9tdXgsCisJLmdwaW9fc2V0X2RpcmVjdGlvbiAgPSBOVUxMLAorfTsKKworc3RhdGljIHN0
cnVjdCBwaW5jdHJsX2Rlc2Mgc3RtMzJfaGRwX3BkZXNjID0geworCS5uYW1lCSA9IERSSVZFUl9O
QU1FLAorCS5waW5zCSA9IHN0bTMyX2hkcF9waW5zLAorCS5ucGlucwkgPSBBUlJBWV9TSVpFKHN0
bTMyX2hkcF9waW5zKSwKKwkucGN0bG9wcyA9ICZzdG0zMl9oZHBfcGluY3RybF9vcHMsCisJLnBt
eG9wcwkgPSAmc3RtMzJfaGRwX3Bpbm11eF9vcHMsCisJLm93bmVyCSA9IFRISVNfTU9EVUxFLAor
fTsKKworc3RhdGljIGNvbnN0IHN0cnVjdCBvZl9kZXZpY2VfaWQgc3RtMzJfaGRwX29mX21hdGNo
W10gPSB7CisJeworCQkuY29tcGF0aWJsZSA9ICJzdCxzdG0zMm1wLWhkcCIKKwl9LAorCXt9Cit9
OworCitzdGF0aWMgaW50IHN0bTMyX2hkcF9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpw
ZGV2KQoreworCXN0cnVjdCBkZXZpY2UgKmRldiA9ICZwZGV2LT5kZXY7CisJc3RydWN0IHN0bTMy
X2hkcCAqaGRwOworCXU4IHZlcnNpb247CisJaW50IGVycjsKKworCWhkcCA9IGRldm1fa3phbGxv
YyhkZXYsIHNpemVvZigqaGRwKSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFoZHApCisJCXJldHVybiAt
RU5PTUVNOworCWhkcC0+ZGV2ID0gZGV2OworCisJcGxhdGZvcm1fc2V0X2RydmRhdGEocGRldiwg
aGRwKTsKKworCWhkcC0+YmFzZSA9IGRldm1fcGxhdGZvcm1faW9yZW1hcF9yZXNvdXJjZShwZGV2
LCAwKTsKKwlpZiAoSVNfRVJSKGhkcC0+YmFzZSkpCisJCXJldHVybiBQVFJfRVJSKGhkcC0+YmFz
ZSk7CisKKwloZHAtPmNsayA9IGRldm1fY2xrX2dldF9lbmFibGVkKGRldiwgTlVMTCk7CisJaWYg
KElTX0VSUihoZHAtPmNsaykpCisJCXJldHVybiBkZXZfZXJyX3Byb2JlKGRldiwgUFRSX0VSUiho
ZHAtPmNsayksICJObyBIRFAgY2xvY2sgcHJvdmlkZWRcbiIpOworCisJZXJyID0gZGV2bV9waW5j
dHJsX3JlZ2lzdGVyX2FuZF9pbml0KGRldiwgJnN0bTMyX2hkcF9wZGVzYywgaGRwLCAmaGRwLT5w
Y3RsX2Rldik7CisJaWYgKGVycikKKwkJcmV0dXJuIGRldl9lcnJfcHJvYmUoZGV2LCBlcnIsICJG
YWlsZWQgdG8gcmVnaXN0ZXIgcGluY3RybFxuIik7CisKKwllcnIgPSBwaW5jdHJsX2VuYWJsZSho
ZHAtPnBjdGxfZGV2KTsKKwlpZiAoZXJyKQorCQlyZXR1cm4gZGV2X2Vycl9wcm9iZShkZXYsIGVy
ciwgIkZhaWxlZCB0byBlbmFibGUgcGluY3RybFxuIik7CisKKwloZHAtPmdwaW9fY2hpcC5sYWJl
bAkgICAgID0gInN0bTMyLWhkcCI7CisJaGRwLT5ncGlvX2NoaXAucGFyZW50CSAgICAgPSBkZXY7
CisJaGRwLT5ncGlvX2NoaXAuZ2V0X2RpcmVjdGlvbiA9IHN0bTMyX2hkcF9ncGlvX2dldF9kaXJl
Y3Rpb247CisJaGRwLT5ncGlvX2NoaXAuZ2V0CSAgICAgPSBzdG0zMl9oZHBfZ3Bpb19nZXQ7CisJ
aGRwLT5ncGlvX2NoaXAuc2V0CSAgICAgPSBzdG0zMl9oZHBfZ3Bpb19zZXQ7CisJaGRwLT5ncGlv
X2NoaXAuYmFzZQkgICAgID0gLTE7CisJaGRwLT5ncGlvX2NoaXAubmdwaW8JICAgICA9IEFSUkFZ
X1NJWkUoc3RtMzJfaGRwX3BpbnMpOworCWhkcC0+Z3Bpb19jaGlwLmNhbl9zbGVlcCAgICAgPSB0
cnVlOworCWhkcC0+Z3Bpb19jaGlwLm5hbWVzCSAgICAgPSBzdG0zMl9oZHBfcGluc19ncm91cDsK
KworCWVyciA9IGRldm1fZ3Bpb2NoaXBfYWRkX2RhdGEoZGV2LCAmaGRwLT5ncGlvX2NoaXAsIGhk
cCk7CisJaWYgKGVycikKKwkJcmV0dXJuIGRldl9lcnJfcHJvYmUoZGV2LCBlcnIsICJGYWlsZWQg
dG8gYWRkIGdwaW9jaGlwXG4iKTsKKworCXdyaXRlbF9yZWxheGVkKEhEUF9DVFJMX0VOQUJMRSwg
aGRwLT5iYXNlICsgSERQX0NUUkwpOworCisJdmVyc2lvbiA9IHJlYWRsX3JlbGF4ZWQoaGRwLT5i
YXNlICsgSERQX1ZFUlIpOworCWRldl9kYmcoZGV2LCAiU1RNMzIgSERQIHZlcnNpb24gJXUuJXUg
aW5pdGlhbGl6ZWRcbiIsIHZlcnNpb24gPj4gNCwgdmVyc2lvbiAmIDB4MGYpOworCisJcmV0dXJu
IDA7Cit9CisKK3N0YXRpYyB2b2lkIHN0bTMyX2hkcF9yZW1vdmUoc3RydWN0IHBsYXRmb3JtX2Rl
dmljZSAqcGRldikKK3sKKwlzdHJ1Y3Qgc3RtMzJfaGRwICpoZHAgPSBwbGF0Zm9ybV9nZXRfZHJ2
ZGF0YShwZGV2KTsKKworCXdyaXRlbF9yZWxheGVkKEhEUF9DVFJMX0RJU0FCTEUsIGhkcC0+YmFz
ZSArIEhEUF9DVFJMKTsKK30KKworc3RhdGljIGludCBzdG0zMl9oZHBfc3VzcGVuZChzdHJ1Y3Qg
ZGV2aWNlICpkZXYpCit7CisJc3RydWN0IHN0bTMyX2hkcCAqaGRwID0gZGV2X2dldF9kcnZkYXRh
KGRldik7CisKKwloZHAtPmdwb3NldF9jb25mID0gcmVhZGxfcmVsYXhlZChoZHAtPmJhc2UgKyBI
RFBfR1BPU0VUKTsKKworCXBpbmN0cmxfcG1fc2VsZWN0X3NsZWVwX3N0YXRlKGRldik7CisKKwlj
bGtfZGlzYWJsZV91bnByZXBhcmUoaGRwLT5jbGspOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRp
YyBpbnQgc3RtMzJfaGRwX3Jlc3VtZShzdHJ1Y3QgZGV2aWNlICpkZXYpCit7CisJc3RydWN0IHN0
bTMyX2hkcCAqaGRwID0gZGV2X2dldF9kcnZkYXRhKGRldik7CisJaW50IGVycjsKKworCWVyciA9
IGNsa19wcmVwYXJlX2VuYWJsZShoZHAtPmNsayk7CisJaWYgKGVycikKKwkJcmV0dXJuIGRldl9l
cnJfcHJvYmUoaGRwLT5kZXYsIGVyciwgIkZhaWxlZCB0byBwcmVwYXJlX2VuYWJsZSBjbGsiKTsK
KworCXdyaXRlbF9yZWxheGVkKEhEUF9DVFJMX0VOQUJMRSwgaGRwLT5iYXNlICsgSERQX0NUUkwp
OworCXdyaXRlbF9yZWxheGVkKGhkcC0+Z3Bvc2V0X2NvbmYsIGhkcC0+YmFzZSArIEhEUF9HUE9T
RVQpOworCXdyaXRlbF9yZWxheGVkKGhkcC0+bXV4X2NvbmYsIGhkcC0+YmFzZSArIEhEUF9NVVgp
OworCisJcGluY3RybF9wbV9zZWxlY3RfZGVmYXVsdF9zdGF0ZShkZXYpOworCisJcmV0dXJuIDA7
Cit9CisKK0RFRklORV9TSU1QTEVfREVWX1BNX09QUyhzdG0zMl9oZHBfcG1fb3BzLCBzdG0zMl9o
ZHBfc3VzcGVuZCwgc3RtMzJfaGRwX3Jlc3VtZSk7CisKK3N0YXRpYyBzdHJ1Y3QgcGxhdGZvcm1f
ZHJpdmVyIHN0bTMyX2hkcF9kcml2ZXIgPSB7CisJLnByb2JlID0gc3RtMzJfaGRwX3Byb2JlLAor
CS5yZW1vdmUgPSBzdG0zMl9oZHBfcmVtb3ZlLAorCS5kcml2ZXIgPSB7CisJCS5uYW1lID0gRFJJ
VkVSX05BTUUsCisJCS5wbSA9IHBtX3NsZWVwX3B0cigmc3RtMzJfaGRwX3BtX29wcyksCisJCS5v
Zl9tYXRjaF90YWJsZSA9IHN0bTMyX2hkcF9vZl9tYXRjaCwKKwl9Cit9OworCittb2R1bGVfcGxh
dGZvcm1fZHJpdmVyKHN0bTMyX2hkcF9kcml2ZXIpOworCitNT0RVTEVfQUxJQVMoInBsYXRmb3Jt
OiIgRFJJVkVSX05BTUUpOworTU9EVUxFX0FVVEhPUigiQ2zDqW1lbnQgTGUgR29mZmljIik7CitN
T0RVTEVfREVTQ1JJUFRJT04oIlNUTWljcm9lbGVjdHJvbmljcyBTVE0zMiBIYXJkd2FyZSBEZWJ1
ZyBQb3J0IGRyaXZlciIpOworTU9EVUxFX0xJQ0VOU0UoIkdQTCIpOwoKLS0gCjIuNDMuMAoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KTGludXgtc3RtMzIg
bWFpbGluZyBsaXN0CkxpbnV4LXN0bTMyQHN0LW1kLW1haWxtYW4uc3Rvcm1yZXBseS5jb20KaHR0
cHM6Ly9zdC1tZC1tYWlsbWFuLnN0b3JtcmVwbHkuY29tL21haWxtYW4vbGlzdGluZm8vbGludXgt
c3RtMzIK
