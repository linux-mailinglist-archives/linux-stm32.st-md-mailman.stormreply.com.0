Return-Path: <linux-stm32-bounces@st-md-mailman.stormreply.com>
X-Original-To: lists+linux-stm32@lfdr.de
Delivered-To: lists+linux-stm32@lfdr.de
Received: from stm-ict-prod-mailman-01.stormreply.prv (st-md-mailman.stormreply.com [52.209.6.89])
	by mail.lfdr.de (Postfix) with ESMTPS id 9413CB4A9C9
	for <lists+linux-stm32@lfdr.de>; Tue,  9 Sep 2025 12:12:43 +0200 (CEST)
Received: from ip-172-31-3-47.eu-west-1.compute.internal (localhost [127.0.0.1])
	by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTP id 52174C3F939;
	Tue,  9 Sep 2025 10:12:43 +0000 (UTC)
Received: from mail-wm1-f45.google.com (mail-wm1-f45.google.com
 [209.85.128.45])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTPS id 7A149C3F93A
 for <linux-stm32@st-md-mailman.stormreply.com>;
 Tue,  9 Sep 2025 10:12:41 +0000 (UTC)
Received: by mail-wm1-f45.google.com with SMTP id
 5b1f17b1804b1-45dec026c78so10687505e9.0
 for <linux-stm32@st-md-mailman.stormreply.com>;
 Tue, 09 Sep 2025 03:12:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20230601; t=1757412761; x=1758017561;
 darn=st-md-mailman.stormreply.com; 
 h=cc:to:in-reply-to:references:message-id:content-transfer-encoding
 :mime-version:subject:date:from:from:to:cc:subject:date:message-id
 :reply-to; bh=T0b0tJ5j6lHoNdQZNeQzEA9mTglwqV+Ah7SsyYTJ97E=;
 b=h07RjN5ssZt4unXj78i+dRNXX1lTBdtbPQJ+rUjrcv6Tfpvj0m0K/eN36CnZAxJn3V
 8Lc7rXHHeyOd8h78pSPpyvu4y6RBERajLO19kF66uqmQJaUkqz5zHpd2iMeQX4cIEWUz
 jIRViARMv4gYDZ08PeXaR1jEyS065bZXRcwXiJGtCqoItNTQ4JNkJtgq2SjfrZPp869J
 l6Cg0yXFBL8sULziJIKyqpTM/EuAqe9kpKSZWHWqXtEySomJkx8H8F3pO7hu9NLEFFfp
 hRO5K1uvKDeXerKb3SM6S58dxj77WnSlE0ZLX93oNIageKKd1PUg9TBZY3Oid1Iow0V+
 NsPA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20230601; t=1757412761; x=1758017561;
 h=cc:to:in-reply-to:references:message-id:content-transfer-encoding
 :mime-version:subject:date:from:x-gm-message-state:from:to:cc
 :subject:date:message-id:reply-to;
 bh=T0b0tJ5j6lHoNdQZNeQzEA9mTglwqV+Ah7SsyYTJ97E=;
 b=cNq1zaAZOXZpYw/VxFw/V09vZOy3Vv0q6B49pAheuOxAdFFRCuW/LO7sq4khycLbaP
 Qb7ke9DuE4bIj0wolSNhiib5hCyDG0mbn3sm8f0J2N0sMghg9WnMLUs2teqgchIshBCL
 Lv03RrNq7yXGBw39HTackaLzm9fjbIxBtRvzTG6j0u1HHSMQpwYJrhSUFTWL7FsBrE3t
 /3Z1RRxDTOcerBwCbIvKNRdSsaATgB9a3wDylnFStPLX+JjDYa8pp7W1p3yZcPShn4jz
 C0P/mP1wDbUB8FWdqddM13RhEaVBY+wsKVFRPFO+J8kPJrgOHVKVhpB8xQdA1Mp/4sqN
 7tdQ==
X-Gm-Message-State: AOJu0YzplzRbKn/QnjqaZYt5JS7vRqsUYxmdM7sbfFlj27SmhrZ0ofrI
 GrMgAHKWKEd7daQMNyXaEQm19Za8Ko74pdGtyC+zqy7FzgK74EpKLis6
X-Gm-Gg: ASbGncvo7yhkfRbppEOm16beeaqXnIq7bSvf9g3MEs1Wa/AXNLqhaXFJo4IOzaiRLBn
 TpC7ojxnBFd/QJ9I0nYRJ9BGx8H6db86RqS9oEG2xQuoFeHEA54j5ivSiqMFh/HuMN3tJdmaQsh
 zeCie8Ob0RsZ6BsNsgcXv3e67zf5rtTCFi2awMTIh3+hTqCtiRwTD8yEgBOLjTqLVhMk6LmhhSF
 4QpMB7zleofCjBnQtAzWKdWd6EN4DwtIH4HcbnmuDtlafxAepTC8iYCCM4EeBilECN08MPRi2UX
 0HN39utvSItf0XvTL44LKpX9ri1h90k7nuqPND7maYKmD+G3h/snwMckpCz3Js1bTXqPtggidaL
 SCYq7E4HN6xFKbnEVQTbQdtv0xiSdTuR55gbnffVr2Y1R6HBuMxxMtmuJuWS93W1d9R5MvPUc8U
 gRkTh04y3fDOnokvCWMhQNuVj3nA==
X-Google-Smtp-Source: AGHT+IEtHdlK17yXml6ssRK4JmNeFgmjvgYQlRlPzA/ChB+W0bWWJGkHmkG5hfzSSVVc+PMQ4RA1Vw==
X-Received: by 2002:a05:600c:358b:b0:45c:b66d:352c with SMTP id
 5b1f17b1804b1-45de579c210mr74969325e9.5.1757412760524; 
 Tue, 09 Sep 2025 03:12:40 -0700 (PDT)
Received: from localhost (2a02-8440-7136-74e7-5ebf-4282-0e1a-b885.rev.sfr.net.
 [2a02:8440:7136:74e7:5ebf:4282:e1a:b885])
 by smtp.gmail.com with ESMTPSA id
 ffacd0b85a97d-3e7521bfd97sm2003292f8f.7.2025.09.09.03.12.39
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 09 Sep 2025 03:12:40 -0700 (PDT)
From: =?utf-8?q?Cl=C3=A9ment_Le_Goffic?= <legoffic.clement@gmail.com>
Date: Tue, 09 Sep 2025 12:12:20 +0200
MIME-Version: 1.0
Message-Id: <20250909-b4-ddrperfm-upstream-v6-13-ce082cc801b5@gmail.com>
References: <20250909-b4-ddrperfm-upstream-v6-0-ce082cc801b5@gmail.com>
In-Reply-To: <20250909-b4-ddrperfm-upstream-v6-0-ce082cc801b5@gmail.com>
To: Gatien Chevallier <gatien.chevallier@foss.st.com>, 
 Maxime Coquelin <mcoquelin.stm32@gmail.com>, 
 Alexandre Torgue <alexandre.torgue@foss.st.com>, 
 Michael Turquette <mturquette@baylibre.com>, 
 Stephen Boyd <sboyd@kernel.org>, Rob Herring <robh@kernel.org>, 
 Krzysztof Kozlowski <krzk+dt@kernel.org>, 
 Conor Dooley <conor+dt@kernel.org>, 
 Gabriel Fernandez <gabriel.fernandez@foss.st.com>, 
 Krzysztof Kozlowski <krzk@kernel.org>, Julius Werner <jwerner@chromium.org>, 
 Will Deacon <will@kernel.org>, Mark Rutland <mark.rutland@arm.com>, 
 Philipp Zabel <p.zabel@pengutronix.de>, Jonathan Corbet <corbet@lwn.net>
X-Mailer: b4 0.15-dev-dfb17
Cc: devicetree@vger.kernel.org,
 =?utf-8?q?Cl=C3=A9ment_Le_Goffic?= <clement.legoffic@foss.st.com>,
 linux-doc@vger.kernel.org, linux-kernel@vger.kernel.org,
 linux-stm32@st-md-mailman.stormreply.com, linux-perf-users@vger.kernel.org,
 linux-clk@vger.kernel.org, linux-arm-kernel@lists.infradead.org
Subject: [Linux-stm32] [PATCH v6 13/20] perf: stm32: introduce DDRPERFM
	driver
X-BeenThere: linux-stm32@st-md-mailman.stormreply.com
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: <linux-stm32.st-md-mailman.stormreply.com>
List-Unsubscribe: <https://st-md-mailman.stormreply.com/mailman/options/linux-stm32>, 
 <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=unsubscribe>
List-Archive: <http://st-md-mailman.stormreply.com/pipermail/linux-stm32/>
List-Post: <mailto:linux-stm32@st-md-mailman.stormreply.com>
List-Help: <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=help>
List-Subscribe: <https://st-md-mailman.stormreply.com/mailman/listinfo/linux-stm32>, 
 <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linux-stm32-bounces@st-md-mailman.stormreply.com
Sender: "Linux-stm32" <linux-stm32-bounces@st-md-mailman.stormreply.com>

RnJvbTogQ2zDqW1lbnQgTGUgR29mZmljIDxjbGVtZW50LmxlZ29mZmljQGZvc3Muc3QuY29tPgoK
SW50cm9kdWNlIHRoZSBkcml2ZXIgZm9yIHRoZSBERFIgUGVyZm9ybWFuY2UgTW9uaXRvciBhdmFp
bGFibGUgb24KU1RNMzJNUFUgU29DLgoKT24gU1RNMzJNUDIgcGxhdGZvcm1zLCB0aGUgRERSUEVS
Rk0gYWxsb3dzIHRvIG1vbml0b3IgdXAgdG8gOCBERFIgZXZlbnRzCnRoYXQgY29tZSBmcm9tIHRo
ZSBERFIgQ29udHJvbGxlciBzdWNoIGFzIHJlYWQgb3Igd3JpdGUgZXZlbnRzLgoKT24gU1RNMzJN
UDEgcGxhdGZvcm1zLCB0aGUgRERSUEVSRk0gY2Fubm90IG1vbml0b3IgYW55IGV2ZW50IG9uIGFu
eQpjb3VudGVyLCB0aGVyZSBpcyBhIG5vdGlvbiBvZiBzZXQgb2YgZXZlbnRzLgpFdmVudHMgZnJv
bSBkaWZmZXJlbnQgc2V0cyBjYW5ub3QgYmUgbW9uaXRvcmVkIGF0IHRoZSBzYW1lIHRpbWUuClRo
ZSBmaXJzdCBjaG9zZW4gZXZlbnQgc2VsZWN0cyB0aGUgc2V0LgpUaGUgc2V0IGlzIGNvZGVkIGlu
IHRoZSBmaXJzdCB0d28gYnl0ZXMgb2YgdGhlIGNvbmZpZyB2YWx1ZSB3aGljaCBpcyBvbiA0CmJ5
dGVzLgoKT24gU1RNMzJNUDI1eCBzZXJpZXMsIHRoZSBERFJQRVJGTSBjbG9jayBpcyBzaGFyZWQg
d2l0aCB0aGUgRERSIGNvbnRyb2xsZXIKYW5kIG1heSBiZSBzZWN1cmVkIGJ5IGJvb3Rsb2FkZXJz
LgpBY2Nlc3MgY29udHJvbGxlcnMgYWxsb3cgdG8gY2hlY2sgYWNjZXNzIHRvIGEgcmVzb3VyY2Uu
IFVzZSB0aGUgYWNjZXNzCmNvbnRyb2xsZXIgZGVmaW5lZCBpbiB0aGUgZGV2aWNldHJlZSB0byBr
bm93IGFib3V0IHRoZSBhY2Nlc3MgdG8gdGhlCkREUlBFUkZNIGNsb2NrLgoKU2lnbmVkLW9mZi1i
eTogQ2zDqW1lbnQgTGUgR29mZmljIDxjbGVtZW50LmxlZ29mZmljQGZvc3Muc3QuY29tPgpTaWdu
ZWQtb2ZmLWJ5OiBDbMOpbWVudCBMZSBHb2ZmaWMgPGxlZ29mZmljLmNsZW1lbnRAZ21haWwuY29t
PgotLS0KIGRyaXZlcnMvcGVyZi9LY29uZmlnICAgICAgICAgfCAgMTEgKwogZHJpdmVycy9wZXJm
L01ha2VmaWxlICAgICAgICB8ICAgMSArCiBkcml2ZXJzL3BlcmYvc3RtMzJfZGRyX3BtdS5jIHwg
ODk3ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysKIDMgZmlsZXMg
Y2hhbmdlZCwgOTA5IGluc2VydGlvbnMoKykKCmRpZmYgLS1naXQgYS9kcml2ZXJzL3BlcmYvS2Nv
bmZpZyBiL2RyaXZlcnMvcGVyZi9LY29uZmlnCmluZGV4IGE5MTg4ZGVjMzZmZS4uYTQ1YTU3NGMy
MTI1IDEwMDY0NAotLS0gYS9kcml2ZXJzL3BlcmYvS2NvbmZpZworKysgYi9kcml2ZXJzL3BlcmYv
S2NvbmZpZwpAQCAtMTk4LDYgKzE5OCwxNyBAQCBjb25maWcgUUNPTV9MM19QTVUKIAkgICBBZGRz
IHRoZSBMMyBjYWNoZSBQTVUgaW50byB0aGUgcGVyZiBldmVudHMgc3Vic3lzdGVtIGZvcgogCSAg
IG1vbml0b3JpbmcgTDMgY2FjaGUgZXZlbnRzLgogCitjb25maWcgU1RNMzJfRERSX1BNVQorCXRy
aXN0YXRlICJTVE0zMiBERFIgUE1VIgorCWRlcGVuZHMgb24gQVJDSF9TVE0zMiB8fCBDT01QSUxF
X1RFU1QKKwlkZWZhdWx0IG0KKwloZWxwCisJICBQcm92aWRlcyBzdXBwb3J0IGZvciB0aGUgRERS
IHBlcmZvcm1hbmNlIG1vbml0b3Igb24gU1RNMzJNUFUgcGxhdGZvcm1zLgorCSAgVGhlIG1vbml0
b3IgcHJvdmlkZXMgY291bnRlcnMgZm9yIG1lbW9yeSByZWxhdGVkIGV2ZW50cy4KKwkgIEl0IGFs
bG93cyBkZXZlbG9wZXJzIHRvIGFuYWx5emUgYW5kIG9wdGltaXplIEREUiBwZXJmb3JtYW5jZS4K
KwkgIEVuYWJsaW5nIHRoaXMgZmVhdHVyZSBpcyB1c2VmdWwgZm9yIHBlcmZvcm1hbmNlIHR1bmlu
ZyBhbmQgZGVidWdnaW5nIG1lbW9yeQorCSAgc3Vic3lzdGVtIGlzc3VlcyBvbiBzdXBwb3J0ZWQg
aGFyZHdhcmUuCisKIGNvbmZpZyBUSFVOREVSWDJfUE1VCiAJdHJpc3RhdGUgIkNhdml1bSBUaHVu
ZGVyWDIgU29DIFBNVSBVTkNPUkUiCiAJZGVwZW5kcyBvbiBBUkNIX1RIVU5ERVIyIHx8IENPTVBJ
TEVfVEVTVApkaWZmIC0tZ2l0IGEvZHJpdmVycy9wZXJmL01ha2VmaWxlIGIvZHJpdmVycy9wZXJm
L01ha2VmaWxlCmluZGV4IDE5MmZjOGIxNjIwNC4uMmZhNTg0NGEyNjcyIDEwMDY0NAotLS0gYS9k
cml2ZXJzL3BlcmYvTWFrZWZpbGUKKysrIGIvZHJpdmVycy9wZXJmL01ha2VmaWxlCkBAIC0yMCw2
ICsyMCw3IEBAIG9iai0kKENPTkZJR19SSVNDVl9QTVUpICs9IHJpc2N2X3BtdS5vCiBvYmotJChD
T05GSUdfUklTQ1ZfUE1VX0xFR0FDWSkgKz0gcmlzY3ZfcG11X2xlZ2FjeS5vCiBvYmotJChDT05G
SUdfUklTQ1ZfUE1VX1NCSSkgKz0gcmlzY3ZfcG11X3NiaS5vCiBvYmotJChDT05GSUdfU1RBUkZJ
VkVfU1RBUkxJTktfUE1VKSArPSBzdGFyZml2ZV9zdGFybGlua19wbXUubworb2JqLSQoQ09ORklH
X1NUTTMyX0REUl9QTVUpICs9IHN0bTMyX2Rkcl9wbXUubwogb2JqLSQoQ09ORklHX1RIVU5ERVJY
Ml9QTVUpICs9IHRodW5kZXJ4Ml9wbXUubwogb2JqLSQoQ09ORklHX1hHRU5FX1BNVSkgKz0geGdl
bmVfcG11Lm8KIG9iai0kKENPTkZJR19BUk1fU1BFX1BNVSkgKz0gYXJtX3NwZV9wbXUubwpkaWZm
IC0tZ2l0IGEvZHJpdmVycy9wZXJmL3N0bTMyX2Rkcl9wbXUuYyBiL2RyaXZlcnMvcGVyZi9zdG0z
Ml9kZHJfcG11LmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi4zODMy
ODY2M2QyYzUKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL3BlcmYvc3RtMzJfZGRyX3BtdS5j
CkBAIC0wLDAgKzEsODk3IEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1v
bmx5CisvKgorICogQ29weXJpZ2h0IChDKSAyMDI1LCBTVE1pY3JvZWxlY3Ryb25pY3MgLSBBbGwg
UmlnaHRzIFJlc2VydmVkCisgKiBBdXRob3I6IENsw6ltZW50IExlIEdvZmZpYyA8Y2xlbWVudC5s
ZWdvZmZpY0Bmb3NzLnN0LmNvbT4gZm9yIFNUTWljcm9lbGVjdHJvbmljcy4KKyAqLworCisjaW5j
bHVkZSA8bGludXgvYnVzL3N0bTMyX2ZpcmV3YWxsX2RldmljZS5oPgorI2luY2x1ZGUgPGxpbnV4
L2Nsay5oPgorI2luY2x1ZGUgPGxpbnV4L2hydGltZXIuaD4KKyNpbmNsdWRlIDxsaW51eC9pby5o
PgorI2luY2x1ZGUgPGxpbnV4L21vZF9kZXZpY2V0YWJsZS5oPgorI2luY2x1ZGUgPGxpbnV4L29m
Lmg+CisjaW5jbHVkZSA8bGludXgvcGVyZl9ldmVudC5oPgorI2luY2x1ZGUgPGxpbnV4L3BsYXRm
b3JtX2RldmljZS5oPgorI2luY2x1ZGUgPGxpbnV4L3Jlc2V0Lmg+CisKKyNkZWZpbmUgRFJJVkVS
X05BTUUJCSJzdG0zMl9kZHJfcG11IgorCisvKgorICogVGhlIFBNVSBpcyBhYmxlIHRvIGZyZWV6
ZSBhbGwgY291bnRlcnMgYW5kIGdlbmVyYXRlIGFuIGludGVycnVwdCB3aGVuIHRoZXJlCisgKiBp
cyBhIGNvdW50ZXIgb3ZlcmZsb3cuIEJ1dCwgcmVseWluZyBvbiB0aGlzIG1lYW5zIHRoYXQgd2Ug
bG9zZSBhbGwgdGhlCisgKiBldmVudHMgdGhhdCBvY2N1ciBiZXR3ZWVuIHRoZSBmcmVlemUgYW5k
IHRoZSBpbnRlcnJ1cHQgaGFuZGxlciBleGVjdXRpb24uCisgKiBTbyB3ZSB1c2UgYSBwb2xsaW5n
IG1lY2hhbmlzbSB0byBhdm9pZCB0aGlzIGxvc3Qgb2YgaW5mb3JtYXRpb24uCisgKiBUaGUgZmFz
dGVzdCBjb3VudGVyIGNhbiBvdmVyZmxvdyBpbiB+N3MgQDYwME1IeiAodGhhdCBpcyB0aGUgbWF4
aW11bSBERFIKKyAqIGZyZXF1ZW5jeSBzdXBwb3J0ZWQgb24gU1RNMzJNUDI1NyksIHNvIHdlIHBv
bGwgaW4gMy41cyBpbnRlcnZhbHMgdG8gZW5zdXJlCisgKiB3ZSBkb24ndCByZWFjaCB0aGlzIGxp
bWl0LgorICovCisjZGVmaW5lIFBPTExfTVMJCQkzNTAwCisKKyNkZWZpbmUgRERSUEVSRk1fQ1RS
TAkJMHgwMDAKKyNkZWZpbmUgRERSUEVSRk1fQ0ZHCQkweDAwNAorI2RlZmluZSBERFJQRVJGTV9T
VEFUVVMJCTB4MDA4CisjZGVmaW5lIEREUlBFUkZNX0NMUgkJMHgwMEMKKyNkZWZpbmUgRERSUEVS
Rk1fVENOVAkJMHgwMjAKKyNkZWZpbmUgRERSUEVSRk1fRVZDTlQoWCkJKDB4MDMwICsgOCAqIChY
KSkKKworI2RlZmluZSBERFJQRVJGTV9NUDJfQ0ZHMAkweDAxMAorI2RlZmluZSBERFJQRVJGTV9N
UDJfQ0ZHMQkweDAxNAorI2RlZmluZSBERFJQRVJGTV9NUDJfQ0ZHNQkweDAyNAorI2RlZmluZSBE
RFJQRVJGTV9NUDJfRFJBTUlORgkweDAyOAorI2RlZmluZSBERFJQRVJGTV9NUDJfRVZDTlQoWCkJ
KDB4MDQwICsgNCAqIChYKSkKKyNkZWZpbmUgRERSUEVSRk1fTVAyX1RDTlQJMHgwNjAKKyNkZWZp
bmUgRERSUEVSRk1fTVAyX1NUQVRVUwkweDA4MAorCisjZGVmaW5lIE1QMV9TVEFUVVNfQlVTWQkJ
QklUKDE2KQorI2RlZmluZSBNUDJfU1RBVFVTX0JVU1kJCUJJVCgzMSkKKworI2RlZmluZSBDVFJM
X1NUQVJUCQlCSVQoMCkKKyNkZWZpbmUgQ1RSTF9TVE9QCQlCSVQoMSkKKworI2RlZmluZSBDRkdf
U0VMX01TSwkJR0VOTUFTSygxNywgMTYpCisjZGVmaW5lIENGR19TRUxfU0hJRlQJCTE2CisjZGVm
aW5lIENGR19FTl9NU0sJCUdFTk1BU0soMywgMCkKKworI2RlZmluZSBNUDFfQ0xSX0NOVAkJR0VO
TUFTSygzLCAwKQorI2RlZmluZSBNUDFfQ0xSX1RJTUUJCUJJVCgzMSkKKyNkZWZpbmUgTVAyX0NM
Ul9DTlQJCUdFTk1BU0soNywgMCkKKyNkZWZpbmUgTVAyX0NMUl9USU1FCQlCSVQoOCkKKworLyog
NCBldmVudCBjb3VudGVycyBwbHVzIDEgZGVkaWNhdGVkIHRvIHRpbWUgKi8KKyNkZWZpbmUgTVAx
X0NOVF9OQgkJKDQgKyAxKQorLyogSW5kZXggb2YgdGhlIHRpbWUgZGVkaWNhdGVkIGNvdW50ZXIg
Ki8KKyNkZWZpbmUgTVAxX1RJTUVfQ05UX0lEWAk0CisKKy8qIDggZXZlbnQgY291bnRlcnMgcGx1
cyAxIGRlZGljYXRlZCB0byB0aW1lICovCisjZGVmaW5lIE1QMl9DTlRfTkIJCSg4ICsgMSkKKy8q
IEluZGV4IG9mIHRoZSB0aW1lIGRlZGljYXRlZCBjb3VudGVyICovCisjZGVmaW5lIE1QMl9USU1F
X0NOVF9JRFgJOAorLyogNCBldmVudCBjb3VudGVycyBwZXIgcmVnaXN0ZXIgKi8KKyNkZWZpbmUg
TVAyX0NOVF9TRUxfUEVSX1JFRwk0CisKKy8qIEFyYml0cmFyeSB2YWx1ZSB1c2VkIHRvIGlkZW50
aWZ5IGEgdGltZSBldmVudCAqLworI2RlZmluZSBUSU1FX0NOVAkJNjQKKworc3RydWN0IHN0bTMy
X2Rkcl9wbXVfcmVnIHsKKwl1bnNpZ25lZCBpbnQgcmVnOworCXUzMiBtYXNrOworfTsKKworc3Ry
dWN0IHN0bTMyX2Rkcl9jbnQgeworCWludCBpZHg7CisJc3RydWN0IHBlcmZfZXZlbnQgKmV2dDsK
KwlzdHJ1Y3QgbGlzdF9oZWFkIGNudF9saXN0OworfTsKKworc3RydWN0IHN0bTMyX2Rkcl9wbXVf
cmVnc3BlYyB7CisJY29uc3Qgc3RydWN0IHN0bTMyX2Rkcl9wbXVfcmVnIHN0b3A7CisJY29uc3Qg
c3RydWN0IHN0bTMyX2Rkcl9wbXVfcmVnIHN0YXJ0OworCWNvbnN0IHN0cnVjdCBzdG0zMl9kZHJf
cG11X3JlZyBlbmFibGU7CisJY29uc3Qgc3RydWN0IHN0bTMyX2Rkcl9wbXVfcmVnIHN0YXR1czsK
Kwljb25zdCBzdHJ1Y3Qgc3RtMzJfZGRyX3BtdV9yZWcgY2xlYXJfY250OworCWNvbnN0IHN0cnVj
dCBzdG0zMl9kZHJfcG11X3JlZyBjbGVhcl90aW1lOworCWNvbnN0IHN0cnVjdCBzdG0zMl9kZHJf
cG11X3JlZyBjZmc7CisJY29uc3Qgc3RydWN0IHN0bTMyX2Rkcl9wbXVfcmVnIGNmZzA7CisJY29u
c3Qgc3RydWN0IHN0bTMyX2Rkcl9wbXVfcmVnIGNmZzE7CisJY29uc3Qgc3RydWN0IHN0bTMyX2Rk
cl9wbXVfcmVnIGRyYW1faW5mOworCWNvbnN0IHN0cnVjdCBzdG0zMl9kZHJfcG11X3JlZyBjb3Vu
dGVyX3RpbWU7CisJY29uc3Qgc3RydWN0IHN0bTMyX2Rkcl9wbXVfcmVnIGNvdW50ZXJfZXZ0W107
Cit9OworCitzdHJ1Y3Qgc3RtMzJfZGRyX3BtdSB7CisJc3RydWN0IHBtdSBwbXU7CisJdm9pZCBf
X2lvbWVtICptZW1iYXNlOworCXN0cnVjdCBkZXZpY2UgKmRldjsKKwlzdHJ1Y3QgY2xrICpjbGs7
CisJY29uc3Qgc3RydWN0IHN0bTMyX2Rkcl9wbXVfY2ZnICpjZmc7CisJc3RydWN0IGhydGltZXIg
aHJ0aW1lcjsKKwlrdGltZV90IHBvbGxfcGVyaW9kOworCWludCBzZWxlY3RlZF9zZXQ7CisJdTMy
IGRyYW1fdHlwZTsKKwlzdHJ1Y3QgbGlzdF9oZWFkIGNvdW50ZXJzW107Cit9OworCitzdHJ1Y3Qg
c3RtMzJfZGRyX3BtdV9jZmcgeworCWNvbnN0IHN0cnVjdCBzdG0zMl9kZHJfcG11X3JlZ3NwZWMg
KnJlZ3M7CisJY29uc3Qgc3RydWN0IGF0dHJpYnV0ZV9ncm91cCAqKmF0dHJpYnV0ZTsKKwl1MzIg
Y291bnRlcnNfbmI7CisJdTMyIGV2dF9jb3VudGVyc19uYjsKKwl1MzIgdGltZV9jbnRfaWR4Owor
CXN0cnVjdCBzdG0zMl9kZHJfY250ICogKCpnZXRfY291bnRlcikoc3RydWN0IHN0bTMyX2Rkcl9w
bXUgKnAsIHN0cnVjdCBwZXJmX2V2ZW50ICplKTsKK307CisKKyNkZWZpbmUgU1RNMzJfRERSX1BN
VV9FVkVOVF9OVU1CRVIoZ3JvdXAsIGluZGV4KQkoKChncm91cCkgPDwgOCkgfCAoaW5kZXgpKQor
I2RlZmluZSBTVE0zMl9ERFJfUE1VX0dST1VQX1ZBTFVFKGV2ZW50X251bWJlcikJCSgoZXZlbnRf
bnVtYmVyKSA+PiA4KQorI2RlZmluZSBTVE0zMl9ERFJfUE1VX0VWRU5UX0lOREVYKGV2ZW50X251
bWJlcikJCSgoZXZlbnRfbnVtYmVyKSAmIDB4RkYpCisKKy8qIE1QMSBkZHJwZXJmbSBldmVudHMg
Ki8KK2VudW0gc3RtMzJfZGRyX3BtdV9ldmVudHNfbXAxIHsKKwlQRVJGX09QX0lTX1JECQkJPSBT
VE0zMl9ERFJfUE1VX0VWRU5UX05VTUJFUigwLCAwKSwKKwlQRVJGX09QX0lTX1dSCQkJPSBTVE0z
Ml9ERFJfUE1VX0VWRU5UX05VTUJFUigwLCAxKSwKKwlQRVJGX09QX0lTX0FDVElWQVRFCQk9IFNU
TTMyX0REUl9QTVVfRVZFTlRfTlVNQkVSKDAsIDIpLAorCUNUTF9JRExFCQkJPSBTVE0zMl9ERFJf
UE1VX0VWRU5UX05VTUJFUigwLCAzKSwKKwlQRVJGX0hQUl9SRVFfV0lUSF9OT19DUkVESVQJPSBT
VE0zMl9ERFJfUE1VX0VWRU5UX05VTUJFUigxLCAwKSwKKwlQRVJGX0xQUl9SRVFfV0lUSF9OT19D
UkVESVQJPSBTVE0zMl9ERFJfUE1VX0VWRU5UX05VTUJFUigxLCAxKSwKKwlDQUNUSVZFX0REUkMJ
CQk9IFNUTTMyX0REUl9QTVVfRVZFTlRfTlVNQkVSKDEsIDMpLAorCVBFUkZfT1BfSVNfRU5URVJf
UE9XRVJET1dOCT0gU1RNMzJfRERSX1BNVV9FVkVOVF9OVU1CRVIoMiwgMCksCisJUEVSRl9PUF9J
U19SRUZSRVNICQk9IFNUTTMyX0REUl9QTVVfRVZFTlRfTlVNQkVSKDIsIDEpLAorCVBFUkZfU0VM
RlJFU0hfTU9ERQkJPSBTVE0zMl9ERFJfUE1VX0VWRU5UX05VTUJFUigyLCAyKSwKKwlERklfTFBf
UkVRCQkJPSBTVE0zMl9ERFJfUE1VX0VWRU5UX05VTUJFUigyLCAzKSwKKwlQRVJGX0hQUl9YQUNU
X1dIRU5fQ1JJVElDQUwJPSBTVE0zMl9ERFJfUE1VX0VWRU5UX05VTUJFUigzLCAwKSwKKwlQRVJG
X0xQUl9YQUNUX1dIRU5fQ1JJVElDQUwJPSBTVE0zMl9ERFJfUE1VX0VWRU5UX05VTUJFUigzLCAx
KSwKKwlQRVJGX1dSX1hBQ1RfV0hFTl9DUklUSUNBTAk9IFNUTTMyX0REUl9QTVVfRVZFTlRfTlVN
QkVSKDMsIDIpLAorCURGSV9MUF9SRVFfU0NORAkJCT0gU1RNMzJfRERSX1BNVV9FVkVOVF9OVU1C
RVIoMywgMyksCit9OworCisvKiBNUDIgZGRycGVyZm0gZXZlbnRzICovCitlbnVtIHN0bTMyX2Rk
cl9wbXVfZXZlbnRzX21wMiB7CisJREZJX0lTX0FDVAkJCT0gU1RNMzJfRERSX1BNVV9FVkVOVF9O
VU1CRVIoMCwgMCksCisJREZJX0lTX1BSRVBCCQkJPSBTVE0zMl9ERFJfUE1VX0VWRU5UX05VTUJF
UigwLCAxKSwKKwlERklfSVNfUFJFQUIJCQk9IFNUTTMyX0REUl9QTVVfRVZFTlRfTlVNQkVSKDAs
IDIpLAorCURGSV9JU19SRAkJCT0gU1RNMzJfRERSX1BNVV9FVkVOVF9OVU1CRVIoMCwgMyksCisJ
REZJX0lTX1JEQQkJCT0gU1RNMzJfRERSX1BNVV9FVkVOVF9OVU1CRVIoMCwgNCksCisJREZJX0lT
X1dSCQkJPSBTVE0zMl9ERFJfUE1VX0VWRU5UX05VTUJFUigwLCA2KSwKKwlERklfSVNfV1JBCQkJ
PSBTVE0zMl9ERFJfUE1VX0VWRU5UX05VTUJFUigwLCA3KSwKKwlERklfSVNfTVdSCQkJPSBTVE0z
Ml9ERFJfUE1VX0VWRU5UX05VTUJFUigwLCA5KSwKKwlERklfSVNfTVdSQQkJCT0gU1RNMzJfRERS
X1BNVV9FVkVOVF9OVU1CRVIoMCwgMTApLAorCURGSV9JU19NUlcJCQk9IFNUTTMyX0REUl9QTVVf
RVZFTlRfTlVNQkVSKDAsIDEyKSwKKwlERklfSVNfTVJSCQkJPSBTVE0zMl9ERFJfUE1VX0VWRU5U
X05VTUJFUigwLCAxMyksCisJREZJX0lTX1JFRlBCCQkJPSBTVE0zMl9ERFJfUE1VX0VWRU5UX05V
TUJFUigwLCAxNCksCisJREZJX0lTX1JFRkFCCQkJPSBTVE0zMl9ERFJfUE1VX0VWRU5UX05VTUJF
UigwLCAxNSksCisJREZJX0lTX01QQwkJCT0gU1RNMzJfRERSX1BNVV9FVkVOVF9OVU1CRVIoMCwg
MTYpLAorCVBFUkZfT1BfSVNfQUNUCQkJPSBTVE0zMl9ERFJfUE1VX0VWRU5UX05VTUJFUigwLCAz
MiksCisJUEVSRl9PUF9JU19SRF9NUDIJCT0gU1RNMzJfRERSX1BNVV9FVkVOVF9OVU1CRVIoMCwg
MzMpLAorCVBFUkZfT1BfSVNfV1JfTVAyCQk9IFNUTTMyX0REUl9QTVVfRVZFTlRfTlVNQkVSKDAs
IDM0KSwKKwlQRVJGX09QX0lTX01XUgkJCT0gU1RNMzJfRERSX1BNVV9FVkVOVF9OVU1CRVIoMCwg
MzUpLAorCVBFUkZfT1BfSVNfUkVGCQkJPSBTVE0zMl9ERFJfUE1VX0VWRU5UX05VTUJFUigwLCAz
NiksCisJUEVSRl9PUF9JU19DUklUX1JFRgkJPSBTVE0zMl9ERFJfUE1VX0VWRU5UX05VTUJFUigw
LCAzNyksCisJUEVSRl9PUF9JU19TUEVDX1JFRgkJPSBTVE0zMl9ERFJfUE1VX0VWRU5UX05VTUJF
UigwLCAzOCksCisJUEVSRl9PUF9JU19aUUNBTAkJPSBTVE0zMl9ERFJfUE1VX0VWRU5UX05VTUJF
UigwLCAzOSksCisJUEVSRl9PUF9JU19FTlRFUl9QT1dETgkJPSBTVE0zMl9ERFJfUE1VX0VWRU5U
X05VTUJFUigwLCA0MCksCisJUEVSRl9PUF9JU19FTlRFUl9TRUxGUkVGCT0gU1RNMzJfRERSX1BN
VV9FVkVOVF9OVU1CRVIoMCwgNDEpLAorCVBFUkZfT1BfSVNfUFJFCQkJPSBTVE0zMl9ERFJfUE1V
X0VWRU5UX05VTUJFUigwLCA0MiksCisJUEVSRl9PUF9JU19QUkVfRk9SX1JEV1IJCT0gU1RNMzJf
RERSX1BNVV9FVkVOVF9OVU1CRVIoMCwgNDMpLAorCVBFUkZfT1BfSVNfUFJFX0ZPUl9PVEhFUlMJ
PSBTVE0zMl9ERFJfUE1VX0VWRU5UX05VTUJFUigwLCA0NCksCisJUEVSRl9PUF9JU19SRF9BQ1RJ
VkFURQkJPSBTVE0zMl9ERFJfUE1VX0VWRU5UX05VTUJFUigwLCA0NSksCisJUEVSRl9IUFJfUkVR
X1dJVEhfTk9DUkVESVQJPSBTVE0zMl9ERFJfUE1VX0VWRU5UX05VTUJFUigwLCA0OCksCisJUEVS
Rl9MUFJfUkVRX1dJVEhfTk9DUkVESVQJPSBTVE0zMl9ERFJfUE1VX0VWRU5UX05VTUJFUigwLCA0
OSksCisJUEVSRl9IUFJfWEFDVF9XSEVOX0NSSVRJQ0FMX01QMgk9IFNUTTMyX0REUl9QTVVfRVZF
TlRfTlVNQkVSKDAsIDUwKSwKKwlQRVJGX0xQUl9YQUNUX1dIRU5fQ1JJVElDQUxfTVAyCT0gU1RN
MzJfRERSX1BNVV9FVkVOVF9OVU1CRVIoMCwgNTEpLAorCVBFUkZfV1JfWEFDVF9XSEVOX0NSSVRJ
Q0FMX01QMgk9IFNUTTMyX0REUl9QTVVfRVZFTlRfTlVNQkVSKDAsIDUyKSwKKwlQRVJGX1JEV1Jf
VFJBTlNJVElPTlMJCT0gU1RNMzJfRERSX1BNVV9FVkVOVF9OVU1CRVIoMCwgNTMpLAorCVBFUkZf
V0FSX0hBWkFSRAkJCT0gU1RNMzJfRERSX1BNVV9FVkVOVF9OVU1CRVIoMCwgNTQpLAorCVBFUkZf
UkFXX0hBWkFSRAkJCT0gU1RNMzJfRERSX1BNVV9FVkVOVF9OVU1CRVIoMCwgNTUpLAorCVBFUkZf
V0FXX0hBWkFSRAkJCT0gU1RNMzJfRERSX1BNVV9FVkVOVF9OVU1CRVIoMCwgNTYpLAorCVBFUkZf
UkFOSwkJCT0gU1RNMzJfRERSX1BNVV9FVkVOVF9OVU1CRVIoMCwgNTgpLAorCVBFUkZfUkVBRF9C
WVBBU1MJCT0gU1RNMzJfRERSX1BNVV9FVkVOVF9OVU1CRVIoMCwgNTkpLAorCVBFUkZfQUNUX0JZ
UEFTUwkJCT0gU1RNMzJfRERSX1BNVV9FVkVOVF9OVU1CRVIoMCwgNjApLAorCVBFUkZfV0lORE9X
X0xJTUlUX1JFQUNIRURfUkQJPSBTVE0zMl9ERFJfUE1VX0VWRU5UX05VTUJFUigwLCA2MSksCisJ
UEVSRl9XSU5ET1dfTElNSVRfUkVBQ0hFRF9XUgk9IFNUTTMyX0REUl9QTVVfRVZFTlRfTlVNQkVS
KDAsIDYyKSwKKwlOT19FVkVOVAkJCT0gU1RNMzJfRERSX1BNVV9FVkVOVF9OVU1CRVIoMCwgNjMp
LAorfTsKKworZW51bSBzdG0zMl9kZHJfcG11X21lbW9yeV90eXBlIHsKKwlTVE0zMl9ERFJfUE1V
X0xQRERSNCwKKwlTVE0zMl9ERFJfUE1VX0xQRERSMywKKwlTVE0zMl9ERFJfUE1VX0REUjQsCisJ
U1RNMzJfRERSX1BNVV9ERFIzLAorfTsKKworc3RhdGljIHN0cnVjdCBzdG0zMl9kZHJfcG11ICp0
b19zdG0zMl9kZHJfcG11KHN0cnVjdCBwbXUgKnApCit7CisJcmV0dXJuIGNvbnRhaW5lcl9vZihw
LCBzdHJ1Y3Qgc3RtMzJfZGRyX3BtdSwgcG11KTsKK30KKworc3RhdGljIHN0cnVjdCBzdG0zMl9k
ZHJfcG11ICpocnRpbWVyX3RvX3N0bTMyX2Rkcl9wbXUoc3RydWN0IGhydGltZXIgKmgpCit7CisJ
cmV0dXJuIGNvbnRhaW5lcl9vZihoLCBzdHJ1Y3Qgc3RtMzJfZGRyX3BtdSwgaHJ0aW1lcik7Cit9
CisKK3N0YXRpYyB2b2lkIHN0bTMyX2Rkcl9zdGFydF9jb3VudGVycyhzdHJ1Y3Qgc3RtMzJfZGRy
X3BtdSAqcG11KQoreworCWNvbnN0IHN0cnVjdCBzdG0zMl9kZHJfcG11X3JlZ3NwZWMgKnIgPSBw
bXUtPmNmZy0+cmVnczsKKworCXdyaXRlbF9yZWxheGVkKHItPnN0YXJ0Lm1hc2ssIHBtdS0+bWVt
YmFzZSArIHItPnN0YXJ0LnJlZyk7Cit9CisKK3N0YXRpYyB2b2lkIHN0bTMyX2Rkcl9zdG9wX2Nv
dW50ZXJzKHN0cnVjdCBzdG0zMl9kZHJfcG11ICpwbXUpCit7CisJY29uc3Qgc3RydWN0IHN0bTMy
X2Rkcl9wbXVfcmVnc3BlYyAqciA9IHBtdS0+Y2ZnLT5yZWdzOworCisJd3JpdGVsX3JlbGF4ZWQo
ci0+c3RvcC5tYXNrLCBwbXUtPm1lbWJhc2UgKyByLT5zdG9wLnJlZyk7Cit9CisKK3N0YXRpYyB2
b2lkIHN0bTMyX2Rkcl9jbGVhcl90aW1lX2NvdW50ZXIoc3RydWN0IHN0bTMyX2Rkcl9wbXUgKnBt
dSkKK3sKKwljb25zdCBzdHJ1Y3Qgc3RtMzJfZGRyX3BtdV9yZWdzcGVjICpyID0gcG11LT5jZmct
PnJlZ3M7CisKKwl3cml0ZWxfcmVsYXhlZChyLT5jbGVhcl90aW1lLm1hc2ssIHBtdS0+bWVtYmFz
ZSArIHItPmNsZWFyX3RpbWUucmVnKTsKK30KKworc3RhdGljIHZvaWQgc3RtMzJfZGRyX2NsZWFy
X2V2ZW50X2NvdW50ZXIoc3RydWN0IHN0bTMyX2Rkcl9wbXUgKnBtdSwgc3RydWN0IHN0bTMyX2Rk
cl9jbnQgKmNvdW50ZXIpCit7CisJY29uc3Qgc3RydWN0IHN0bTMyX2Rkcl9wbXVfcmVnc3BlYyAq
ciA9IHBtdS0+Y2ZnLT5yZWdzOworCisJd3JpdGVsX3JlbGF4ZWQoci0+Y2xlYXJfY250Lm1hc2sg
JiBCSVQoY291bnRlci0+aWR4KSwgcG11LT5tZW1iYXNlICsgci0+Y2xlYXJfY250LnJlZyk7Cit9
CisKK3N0YXRpYyB2b2lkIHN0bTMyX2Rkcl9jbGVhcl9jb3VudGVyKHN0cnVjdCBzdG0zMl9kZHJf
cG11ICpwbXUsIHN0cnVjdCBzdG0zMl9kZHJfY250ICpjb3VudGVyKQoreworCWNvbnN0IHN0cnVj
dCBzdG0zMl9kZHJfcG11X3JlZ3NwZWMgKnIgPSBwbXUtPmNmZy0+cmVnczsKKwl1MzIgc3RhdHVz
ID0gcmVhZGxfcmVsYXhlZChwbXUtPm1lbWJhc2UgKyByLT5zdGF0dXMucmVnKTsKKworCWlmIChj
b3VudGVyLT5pZHggPT0gcG11LT5jZmctPnRpbWVfY250X2lkeCkKKwkJc3RtMzJfZGRyX2NsZWFy
X3RpbWVfY291bnRlcihwbXUpOworCWVsc2UKKwkJc3RtMzJfZGRyX2NsZWFyX2V2ZW50X2NvdW50
ZXIocG11LCBjb3VudGVyKTsKKworCWlmIChzdGF0dXMgJiByLT5zdGF0dXMubWFzaykKKwkJZGV2
X2VycihwbXUtPmRldiwgIkZhaWxlZCB0byBjbGVhciBjb3VudGVyICVpIGJlY2F1c2UgdGhlIFBN
VSBpcyBidXN5XG4iLAorCQkJY291bnRlci0+aWR4KTsKK30KKworc3RhdGljIHZvaWQgc3RtMzJf
ZGRyX2NvdW50ZXJfZW5hYmxlKHN0cnVjdCBzdG0zMl9kZHJfcG11ICpwbXUsIHN0cnVjdCBzdG0z
Ml9kZHJfY250ICpjb3VudGVyKQoreworCWNvbnN0IHN0cnVjdCBzdG0zMl9kZHJfcG11X3JlZ3Nw
ZWMgKnIgPSBwbXUtPmNmZy0+cmVnczsKKwl1MzIgdmFsID0gcmVhZGxfcmVsYXhlZChwbXUtPm1l
bWJhc2UgKyByLT5lbmFibGUucmVnKTsKKworCXZhbCB8PSBCSVQoY291bnRlci0+aWR4KTsKKwl3
cml0ZWxfcmVsYXhlZCh2YWwsIHBtdS0+bWVtYmFzZSArIHItPmVuYWJsZS5yZWcpOworfQorCitz
dGF0aWMgdm9pZCBzdG0zMl9kZHJfY291bnRlcl9kaXNhYmxlKHN0cnVjdCBzdG0zMl9kZHJfcG11
ICpwbXUsIHN0cnVjdCBzdG0zMl9kZHJfY250ICpjb3VudGVyKQoreworCWNvbnN0IHN0cnVjdCBz
dG0zMl9kZHJfcG11X3JlZ3NwZWMgKnIgPSBwbXUtPmNmZy0+cmVnczsKKwl1MzIgdmFsID0gcmVh
ZGxfcmVsYXhlZChwbXUtPm1lbWJhc2UgKyByLT5lbmFibGUucmVnKTsKKworCXZhbCAmPSB+QklU
KGNvdW50ZXItPmlkeCk7CisJd3JpdGVsX3JlbGF4ZWQodmFsLCBwbXUtPm1lbWJhc2UgKyByLT5l
bmFibGUucmVnKTsKK30KKworc3RhdGljIGludCBzdG0zMl9kZHJfc2VsX2V2bnQoc3RydWN0IHN0
bTMyX2Rkcl9wbXUgKnBtdSwgc3RydWN0IHN0bTMyX2Rkcl9jbnQgKmNvdW50ZXIpCit7CisJY29u
c3Qgc3RydWN0IHN0bTMyX2Rkcl9wbXVfcmVnc3BlYyAqciA9IHBtdS0+Y2ZnLT5yZWdzOworCXUz
MiBjbnRfc2VsX3ZhbDsKKworCXUzMiBncm91cF92YWwgPSBTVE0zMl9ERFJfUE1VX0dST1VQX1ZB
TFVFKGNvdW50ZXItPmV2dC0+YXR0ci5jb25maWcpOworCXUzMiBldnRfdmFsID0gU1RNMzJfRERS
X1BNVV9FVkVOVF9JTkRFWChjb3VudGVyLT5ldnQtPmF0dHIuY29uZmlnKTsKKworCWlmIChwbXUt
PnNlbGVjdGVkX3NldCAhPSAtMSAmJiBwbXUtPnNlbGVjdGVkX3NldCAhPSBncm91cF92YWwpIHsK
KwkJZGV2X2VycihwbXUtPmRldiwgIlNlbGVjdGVkIGV2ZW50cyBhcmUgZnJvbSBkaWZmZXJlbnQg
c2V0XG4iKTsKKwkJcmV0dXJuIC1FSU5WQUw7CisJfQorCXBtdS0+c2VsZWN0ZWRfc2V0ID0gZ3Jv
dXBfdmFsOworCisJaWYgKHBtdS0+Y2ZnLT5yZWdzLT5jZmcucmVnKSB7CisJCWNudF9zZWxfdmFs
ID0gcmVhZGxfcmVsYXhlZChwbXUtPm1lbWJhc2UgKyByLT5jZmcucmVnKTsKKwkJY250X3NlbF92
YWwgJj0gfkNGR19TRUxfTVNLOworCQljbnRfc2VsX3ZhbCB8PSAoQ0ZHX1NFTF9NU0sgJiAoZ3Jv
dXBfdmFsIDw8IENGR19TRUxfU0hJRlQpKTsKKwkJd3JpdGVsX3JlbGF4ZWQoY250X3NlbF92YWws
IHBtdS0+bWVtYmFzZSArIHItPmNmZy5yZWcpOworCisJCXJldHVybiAwOworCX0KKworCS8qIFdl
IGFzc3VtZSBjZmcwIGFuZCBjZmcxIGFyZSBmaWxsZWQgaW4gdGhlIG1hdGNoIGRhdGEgKi8KKwl1
MzIgY250X2lkeCA9IGNvdW50ZXItPmlkeDsKKwl1MzIgY250X3NlbF9ldnRfcmVnID0gci0+Y2Zn
MC5yZWc7CisKKwlpZiAoIShjbnRfaWR4IDwgTVAyX0NOVF9TRUxfUEVSX1JFRykpIHsKKwkJY250
X3NlbF9ldnRfcmVnID0gci0+Y2ZnMS5yZWc7CisJCWNudF9pZHggLT0gTVAyX0NOVF9TRUxfUEVS
X1JFRzsKKwl9CisKKwljbnRfc2VsX3ZhbCA9IHJlYWRsX3JlbGF4ZWQocG11LT5tZW1iYXNlICsg
Y250X3NlbF9ldnRfcmVnKTsKKwljbnRfc2VsX3ZhbCAmPSB+R0VOTUFTSyg4ICogY250X2lkeCAr
IDcsIDggKiBjbnRfaWR4KTsKKwljbnRfc2VsX3ZhbCB8PSBldnRfdmFsIDw8ICg4ICogY250X2lk
eCk7CisKKwl3cml0ZWxfcmVsYXhlZChjbnRfc2VsX3ZhbCwgcG11LT5tZW1iYXNlICsgY250X3Nl
bF9ldnRfcmVnKTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgc3RydWN0IHN0bTMyX2Rkcl9j
bnQgKnN0bTMyX2Rkcl9wbXVfZ2V0X2V2ZW50X2NvdW50ZXJfbXAxKHN0cnVjdCBzdG0zMl9kZHJf
cG11ICpwbXUsCisJCQkJCQkJCSBzdHJ1Y3QgcGVyZl9ldmVudCAqZXZlbnQpCit7CisJdTMyIGNv
bmZpZyA9IGV2ZW50LT5hdHRyLmNvbmZpZzsKKwl1MzIgZXZlbnRfaWR4ID0gU1RNMzJfRERSX1BN
VV9FVkVOVF9JTkRFWChjb25maWcpOworCXN0cnVjdCBzdG0zMl9kZHJfY250ICpjbnQ7CisKKwlj
bnQgPSBremFsbG9jKHNpemVvZigqY250KSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFjbnQpCisJCXJl
dHVybiBFUlJfUFRSKC1FTk9NRU0pOworCisJY250LT5ldnQgPSBldmVudDsKKwljbnQtPmlkeCA9
IGV2ZW50X2lkeDsKKwlldmVudC0+cG11X3ByaXZhdGUgPSBjbnQ7CisJbGlzdF9hZGQoJmNudC0+
Y250X2xpc3QsICZwbXUtPmNvdW50ZXJzW2V2ZW50X2lkeF0pOworCisJcmV0dXJuIGNudDsKK30K
Kworc3RhdGljIHN0cnVjdCBzdG0zMl9kZHJfY250ICpzdG0zMl9kZHJfcG11X2dldF9ldmVudF9j
b3VudGVyX21wMihzdHJ1Y3Qgc3RtMzJfZGRyX3BtdSAqcG11LAorCQkJCQkJCQkgc3RydWN0IHBl
cmZfZXZlbnQgKmV2ZW50KQoreworCXN0cnVjdCBzdG0zMl9kZHJfY250ICpjbnQ7CisJaW50IGlk
eCA9IC0xOworCisJLyogTG9vcCBvbiBhbGwgdGhlIGNvdW50ZXJzIGV4Y2VwdCBUSU1FX0NOVF9J
RFggKi8KKwlmb3IgKGludCBpID0gMDsgaSA8IHBtdS0+Y2ZnLT5ldnRfY291bnRlcnNfbmI7IGkr
KykgeworCQl1NjQgY29uZmlnOworCisJCWlmIChsaXN0X2VtcHR5KCZwbXUtPmNvdW50ZXJzW2ld
KSkgeworCQkJaWR4ID0gaTsKKwkJCWNvbnRpbnVlOworCQl9CisJCWNvbmZpZyA9IGxpc3RfZmly
c3RfZW50cnkoJnBtdS0+Y291bnRlcnNbaV0sIHN0cnVjdCBzdG0zMl9kZHJfY250LAorCQkJCQkg
IGNudF9saXN0KS0+ZXZ0LT5hdHRyLmNvbmZpZzsKKwkJaWYgKGNvbmZpZyA9PSBldmVudC0+YXR0
ci5jb25maWcpIHsKKwkJCWlkeCA9IGk7CisJCQlicmVhazsKKwkJfQorCX0KKworCWlmIChpZHgg
PT0gLTEpCisJCXJldHVybiBFUlJfUFRSKC1FTk9FTlQpOworCisJY250ID0ga3phbGxvYyhzaXpl
b2YoKmNudCksIEdGUF9LRVJORUwpOworCWlmICghY250KQorCQlyZXR1cm4gRVJSX1BUUigtRU5P
TUVNKTsKKworCWNudC0+ZXZ0ID0gZXZlbnQ7CisJY250LT5pZHggPSBpZHg7CisJZXZlbnQtPnBt
dV9wcml2YXRlID0gY250OworCisJbGlzdF9hZGQoJmNudC0+Y250X2xpc3QsICZwbXUtPmNvdW50
ZXJzW2lkeF0pOworCisJcmV0dXJuIGNudDsKK30KKworc3RhdGljIGlubGluZSBzdHJ1Y3Qgc3Rt
MzJfZGRyX2NudCAqc3RtMzJfZ2V0X2V2ZW50X2NvdW50ZXIoc3RydWN0IHN0bTMyX2Rkcl9wbXUg
KnBtdSwKKwkJCQkJCQkgICAgc3RydWN0IHBlcmZfZXZlbnQgKmV2ZW50KQoreworCXJldHVybiBw
bXUtPmNmZy0+Z2V0X2NvdW50ZXIocG11LCBldmVudCk7Cit9CisKK3N0YXRpYyBpbnQgc3RtMzJf
ZGRyX3BtdV9nZXRfY291bnRlcihzdHJ1Y3Qgc3RtMzJfZGRyX3BtdSAqcG11LCBzdHJ1Y3QgcGVy
Zl9ldmVudCAqZXZlbnQpCit7CisJdTMyIHRpbWVfY250X2lkeCA9IHBtdS0+Y2ZnLT50aW1lX2Nu
dF9pZHg7CisJdTMyIGNvbmZpZyA9IGV2ZW50LT5hdHRyLmNvbmZpZzsKKwlzdHJ1Y3Qgc3RtMzJf
ZGRyX2NudCAqY250OworCisJcG11LT5zZWxlY3RlZF9zZXQgPSBTVE0zMl9ERFJfUE1VX0dST1VQ
X1ZBTFVFKGNvbmZpZyk7CisKKwlpZiAoY29uZmlnID09IFRJTUVfQ05UKSB7CisJCWNudCA9IGt6
YWxsb2Moc2l6ZW9mKCpjbnQpLCBHRlBfS0VSTkVMKTsKKwkJaWYgKCFjbnQpCisJCQlyZXR1cm4g
LUVOT01FTTsKKworCQljbnQtPmV2dCA9IGV2ZW50OworCQljbnQtPmlkeCA9IHRpbWVfY250X2lk
eDsKKwkJZXZlbnQtPnBtdV9wcml2YXRlID0gY250OworCQlsaXN0X2FkZCgmY250LT5jbnRfbGlz
dCwgJnBtdS0+Y291bnRlcnNbdGltZV9jbnRfaWR4XSk7CisKKwkJcmV0dXJuIDA7CisJfQorCisJ
Y250ID0gc3RtMzJfZ2V0X2V2ZW50X2NvdW50ZXIocG11LCBldmVudCk7CisJaWYgKElTX0VSUihj
bnQpKQorCQlyZXR1cm4gUFRSX0VSUihjbnQpOworCisJaWYgKGxpc3RfY291bnRfbm9kZXMoJmNu
dC0+Y250X2xpc3QpID09IDEpIHsKKwkJc3RtMzJfZGRyX3N0b3BfY291bnRlcnMocG11KTsKKwkJ
c3RtMzJfZGRyX3NlbF9ldm50KHBtdSwgY250KTsKKwkJc3RtMzJfZGRyX2NvdW50ZXJfZW5hYmxl
KHBtdSwgY250KTsKKwkJc3RtMzJfZGRyX3N0YXJ0X2NvdW50ZXJzKHBtdSk7CisJfQorCisJcmV0
dXJuIDA7Cit9CisKK3N0YXRpYyB2b2lkIHN0bTMyX2Rkcl9wbXVfZnJlZV9jb3VudGVyKHN0cnVj
dCBzdG0zMl9kZHJfcG11ICpwbXUsCisJCQkJICAgICAgIHN0cnVjdCBzdG0zMl9kZHJfY250ICpj
b3VudGVyKQoreworCXNpemVfdCBjb3VudCA9IGxpc3RfY291bnRfbm9kZXMoJmNvdW50ZXItPmNu
dF9saXN0KTsKKworCWlmIChjb3VudGVyLT5ldnQtPmF0dHIuY29uZmlnICE9IFRJTUVfQ05UICYm
IGNvdW50ID09IDEpCisJCXN0bTMyX2Rkcl9jb3VudGVyX2Rpc2FibGUocG11LCBjb3VudGVyKTsK
KworCWxpc3RfZGVsKCZjb3VudGVyLT5jbnRfbGlzdCk7CisJa2ZyZWUoY291bnRlcik7Cit9CisK
K3N0YXRpYyB2b2lkIHN0bTMyX2Rkcl9wbXVfZXZlbnRfdXBkYXRlX2xpc3Qoc3RydWN0IHN0bTMy
X2Rkcl9wbXUgKnBtdSwgc3RydWN0IGxpc3RfaGVhZCAqbGlzdCkKK3sKKwlzdHJ1Y3Qgc3RtMzJf
ZGRyX2NudCAqY291bnRlciA9IGxpc3RfZmlyc3RfZW50cnkobGlzdCwgc3RydWN0IHN0bTMyX2Rk
cl9jbnQsIGNudF9saXN0KTsKKwljb25zdCBzdHJ1Y3Qgc3RtMzJfZGRyX3BtdV9yZWdzcGVjICpy
ID0gcG11LT5jZmctPnJlZ3M7CisJdTMyIHZhbDsKKworCWlmIChjb3VudGVyLT5ldnQtPmF0dHIu
Y29uZmlnICE9IFRJTUVfQ05UKQorCQl2YWwgPSByZWFkbF9yZWxheGVkKHBtdS0+bWVtYmFzZSAr
IHItPmNvdW50ZXJfZXZ0W2NvdW50ZXItPmlkeF0ucmVnKTsKKwllbHNlCisJCXZhbCA9IHJlYWRs
X3JlbGF4ZWQocG11LT5tZW1iYXNlICsgci0+Y291bnRlcl90aW1lLnJlZyk7CisKKwlzdG0zMl9k
ZHJfY2xlYXJfY291bnRlcihwbXUsIGNvdW50ZXIpOworCisJbGlzdF9mb3JfZWFjaF9lbnRyeShj
b3VudGVyLCBsaXN0LCBjbnRfbGlzdCkKKwkJbG9jYWw2NF9hZGQodmFsLCAmY291bnRlci0+ZXZ0
LT5jb3VudCk7Cit9CisKK3N0YXRpYyB2b2lkIHN0bTMyX2Rkcl9wbXVfZXZlbnRfcmVhZChzdHJ1
Y3QgcGVyZl9ldmVudCAqZXZlbnQpCit7CisJc3RydWN0IHN0bTMyX2Rkcl9wbXUgKnBtdSA9IHRv
X3N0bTMyX2Rkcl9wbXUoZXZlbnQtPnBtdSk7CisJc3RydWN0IHN0bTMyX2Rkcl9jbnQgKmNudCA9
IGV2ZW50LT5wbXVfcHJpdmF0ZTsKKworCWhydGltZXJfc3RhcnQoJnBtdS0+aHJ0aW1lciwgcG11
LT5wb2xsX3BlcmlvZCwgSFJUSU1FUl9NT0RFX1JFTF9QSU5ORUQpOworCisJc3RtMzJfZGRyX3N0
b3BfY291bnRlcnMocG11KTsKKworCXN0bTMyX2Rkcl9wbXVfZXZlbnRfdXBkYXRlX2xpc3QocG11
LCAmcG11LT5jb3VudGVyc1tjbnQtPmlkeF0pOworCisJc3RtMzJfZGRyX3N0YXJ0X2NvdW50ZXJz
KHBtdSk7Cit9CisKK3N0YXRpYyB2b2lkIHN0bTMyX2Rkcl9wbXVfZXZlbnRfc3RhcnQoc3RydWN0
IHBlcmZfZXZlbnQgKmV2ZW50LCBpbnQgZmxhZ3MpCit7CisJc3RydWN0IHN0bTMyX2Rkcl9wbXUg
KnBtdSA9IHRvX3N0bTMyX2Rkcl9wbXUoZXZlbnQtPnBtdSk7CisJc3RydWN0IHN0bTMyX2Rkcl9j
bnQgKmNvdW50ZXIgPSBldmVudC0+cG11X3ByaXZhdGU7CisJc3RydWN0IGh3X3BlcmZfZXZlbnQg
Kmh3ID0gJmV2ZW50LT5odzsKKworCWlmIChXQVJOX09OX09OQ0UoIShody0+c3RhdGUgJiBQRVJG
X0hFU19TVE9QUEVEKSkpCisJCXJldHVybjsKKworCWlmIChmbGFncyAmIFBFUkZfRUZfUkVMT0FE
KQorCQlXQVJOX09OX09OQ0UoIShody0+c3RhdGUgJiBQRVJGX0hFU19VUFRPREFURSkpOworCisJ
c3RtMzJfZGRyX3N0b3BfY291bnRlcnMocG11KTsKKworCWlmIChsaXN0X2NvdW50X25vZGVzKCZj
b3VudGVyLT5jbnRfbGlzdCkgPT0gMSkKKwkJc3RtMzJfZGRyX2NsZWFyX2NvdW50ZXIocG11LCBj
b3VudGVyKTsKKwllbHNlCisJCXN0bTMyX2Rkcl9wbXVfZXZlbnRfdXBkYXRlX2xpc3QocG11LCAm
cG11LT5jb3VudGVyc1tjb3VudGVyLT5pZHhdKTsKKworCXN0bTMyX2Rkcl9zdGFydF9jb3VudGVy
cyhwbXUpOworCWxvY2FsNjRfc2V0KCZody0+cHJldl9jb3VudCwgMCk7CisJaHctPnN0YXRlID0g
MDsKK30KKworc3RhdGljIHZvaWQgc3RtMzJfZGRyX3BtdV9ldmVudF9zdG9wKHN0cnVjdCBwZXJm
X2V2ZW50ICpldmVudCwgaW50IGZsYWdzKQoreworCXN0cnVjdCBod19wZXJmX2V2ZW50ICpodyA9
ICZldmVudC0+aHc7CisKKwlpZiAoV0FSTl9PTl9PTkNFKGh3LT5zdGF0ZSAmIFBFUkZfSEVTX1NU
T1BQRUQpKQorCQlyZXR1cm47CisKKwlody0+c3RhdGUgfD0gUEVSRl9IRVNfU1RPUFBFRDsKKwor
CWlmIChmbGFncyAmIFBFUkZfRUZfVVBEQVRFKSB7CisJCXN0bTMyX2Rkcl9wbXVfZXZlbnRfcmVh
ZChldmVudCk7CisJCWh3LT5zdGF0ZSB8PSBQRVJGX0hFU19VUFRPREFURTsKKwl9Cit9CisKK3N0
YXRpYyBpbnQgc3RtMzJfZGRyX3BtdV9ldmVudF9hZGQoc3RydWN0IHBlcmZfZXZlbnQgKmV2ZW50
LCBpbnQgZmxhZ3MpCit7CisJc3RydWN0IHN0bTMyX2Rkcl9wbXUgKnBtdSA9IHRvX3N0bTMyX2Rk
cl9wbXUoZXZlbnQtPnBtdSk7CisJaW50IHJldDsKKworCWNsa19lbmFibGUocG11LT5jbGspOwor
CisJaHJ0aW1lcl9zdGFydCgmcG11LT5ocnRpbWVyLCBwbXUtPnBvbGxfcGVyaW9kLCBIUlRJTUVS
X01PREVfUkVMX1BJTk5FRCk7CisKKwlyZXQgPSBzdG0zMl9kZHJfcG11X2dldF9jb3VudGVyKHBt
dSwgZXZlbnQpOworCWlmIChyZXQpCisJCXJldHVybiByZXQ7CisKKwlldmVudC0+aHcuc3RhdGUg
PSBQRVJGX0hFU19TVE9QUEVEIHwgUEVSRl9IRVNfVVBUT0RBVEU7CisKKwlpZiAoZmxhZ3MgJiBQ
RVJGX0VGX1NUQVJUKQorCQlzdG0zMl9kZHJfcG11X2V2ZW50X3N0YXJ0KGV2ZW50LCBmbGFncyk7
CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIHZvaWQgc3RtMzJfZGRyX3BtdV9ldmVudF9kZWwo
c3RydWN0IHBlcmZfZXZlbnQgKmV2ZW50LCBpbnQgZmxhZ3MpCit7CisJc3RydWN0IHN0bTMyX2Rk
cl9wbXUgKnBtdSA9IHRvX3N0bTMyX2Rkcl9wbXUoZXZlbnQtPnBtdSk7CisJc3RydWN0IHN0bTMy
X2Rkcl9jbnQgKmNvdW50ZXIgPSBldmVudC0+cG11X3ByaXZhdGU7CisJYm9vbCBldmVudHMgPSB0
cnVlOworCisJc3RtMzJfZGRyX3BtdV9ldmVudF9zdG9wKGV2ZW50LCBQRVJGX0VGX1VQREFURSk7
CisKKwlzdG0zMl9kZHJfcG11X2ZyZWVfY291bnRlcihwbXUsIGNvdW50ZXIpOworCisJZm9yIChp
bnQgaSA9IDA7IGkgPCBwbXUtPmNmZy0+Y291bnRlcnNfbmI7IGkrKykgeworCQlldmVudHMgPSAh
bGlzdF9lbXB0eSgmcG11LT5jb3VudGVyc1tpXSk7CisJCWlmIChldmVudHMpIC8qIElmIHRoZXJl
IGlzIGFjdGl2aXR5IG5vdGhpbmcgdG8gZG8gKi8KKwkJCXJldHVybjsKKwl9CisKKwlocnRpbWVy
X2NhbmNlbCgmcG11LT5ocnRpbWVyKTsKKwlzdG0zMl9kZHJfc3RvcF9jb3VudGVycyhwbXUpOwor
CisJcG11LT5zZWxlY3RlZF9zZXQgPSAtMTsKKworCWNsa19kaXNhYmxlKHBtdS0+Y2xrKTsKK30K
Kworc3RhdGljIGludCBzdG0zMl9kZHJfcG11X2V2ZW50X2luaXQoc3RydWN0IHBlcmZfZXZlbnQg
KmV2ZW50KQoreworCWlmIChldmVudC0+YXR0ci50eXBlICE9IGV2ZW50LT5wbXUtPnR5cGUpCisJ
CXJldHVybiAtRU5PRU5UOworCisJaWYgKGlzX3NhbXBsaW5nX2V2ZW50KGV2ZW50KSB8fCBldmVu
dC0+YXR0YWNoX3N0YXRlICYgUEVSRl9BVFRBQ0hfVEFTSykKKwkJcmV0dXJuIC1FSU5WQUw7CisK
KwlyZXR1cm4gMDsKK30KKworc3RhdGljIGVudW0gaHJ0aW1lcl9yZXN0YXJ0IHN0bTMyX2Rkcl9w
bXVfcG9sbChzdHJ1Y3QgaHJ0aW1lciAqaHJ0aW1lcikKK3sKKwlzdHJ1Y3Qgc3RtMzJfZGRyX3Bt
dSAqcG11ID0gaHJ0aW1lcl90b19zdG0zMl9kZHJfcG11KGhydGltZXIpOworCisJc3RtMzJfZGRy
X3N0b3BfY291bnRlcnMocG11KTsKKworCWZvciAoaW50IGkgPSAwOyBpIDwgTVAyX0NOVF9OQjsg
aSsrKQorCQlpZiAoIWxpc3RfZW1wdHkoJnBtdS0+Y291bnRlcnNbaV0pKQorCQkJc3RtMzJfZGRy
X3BtdV9ldmVudF91cGRhdGVfbGlzdChwbXUsICZwbXUtPmNvdW50ZXJzW2ldKTsKKworCWlmIChs
aXN0X2VtcHR5KCZwbXUtPmNvdW50ZXJzW3BtdS0+Y2ZnLT50aW1lX2NudF9pZHhdKSkKKwkJc3Rt
MzJfZGRyX2NsZWFyX3RpbWVfY291bnRlcihwbXUpOworCisJc3RtMzJfZGRyX3N0YXJ0X2NvdW50
ZXJzKHBtdSk7CisKKwlocnRpbWVyX2ZvcndhcmRfbm93KGhydGltZXIsIHBtdS0+cG9sbF9wZXJp
b2QpOworCisJcmV0dXJuIEhSVElNRVJfUkVTVEFSVDsKK30KKworc3RhdGljIHNzaXplX3Qgc3Rt
MzJfZGRyX3BtdV9zeXNmc19zaG93KHN0cnVjdCBkZXZpY2UgKmRldiwgc3RydWN0IGRldmljZV9h
dHRyaWJ1dGUgKmF0dHIsCisJCQkJCWNoYXIgKmJ1ZikKK3sKKwlzdHJ1Y3QgcGVyZl9wbXVfZXZl
bnRzX2F0dHIgKnBtdV9hdHRyOworCisJcG11X2F0dHIgPSBjb250YWluZXJfb2YoYXR0ciwgc3Ry
dWN0IHBlcmZfcG11X2V2ZW50c19hdHRyLCBhdHRyKTsKKworCXJldHVybiBzeXNmc19lbWl0KGJ1
ZiwgImV2ZW50PTB4JTAybGx4XG4iLCBwbXVfYXR0ci0+aWQpOworfQorCitzdGF0aWMgaW50IHN0
bTMyX2Rkcl9wbXVfZ2V0X21lbW9yeV90eXBlKHN0cnVjdCBzdG0zMl9kZHJfcG11ICpwbXUpCit7
CisJc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldiA9IHRvX3BsYXRmb3JtX2RldmljZShwbXUt
PmRldik7CisJc3RydWN0IGRldmljZV9ub2RlICptZW1jaGFuOworCisJbWVtY2hhbiA9IG9mX3Bh
cnNlX3BoYW5kbGUocGRldi0+ZGV2Lm9mX25vZGUsICJtZW1vcnktY2hhbm5lbCIsIDApOworCWlm
ICghbWVtY2hhbikKKwkJcmV0dXJuIGRldl9lcnJfcHJvYmUoJnBkZXYtPmRldiwgLUVJTlZBTCwK
KwkJCQkgICAgICJNaXNzaW5nIGRldmljZS10cmVlIHByb3BlcnR5ICdtZW1vcnktY2hhbm5lbCdc
biIpOworCisJaWYgKG9mX2RldmljZV9pc19jb21wYXRpYmxlKG1lbWNoYW4sICJqZWRlYyxscGRk
cjQtY2hhbm5lbCIpKQorCQlwbXUtPmRyYW1fdHlwZSA9IFNUTTMyX0REUl9QTVVfTFBERFI0Owor
CWVsc2UgaWYgKG9mX2RldmljZV9pc19jb21wYXRpYmxlKG1lbWNoYW4sICJqZWRlYyxscGRkcjMt
Y2hhbm5lbCIpKQorCQlwbXUtPmRyYW1fdHlwZSA9IFNUTTMyX0REUl9QTVVfTFBERFIzOworCWVs
c2UgaWYgKG9mX2RldmljZV9pc19jb21wYXRpYmxlKG1lbWNoYW4sICJqZWRlYyxkZHI0LWNoYW5u
ZWwiKSkKKwkJcG11LT5kcmFtX3R5cGUgPSBTVE0zMl9ERFJfUE1VX0REUjQ7CisJZWxzZSBpZiAo
b2ZfZGV2aWNlX2lzX2NvbXBhdGlibGUobWVtY2hhbiwgImplZGVjLGRkcjMtY2hhbm5lbCIpKQor
CQlwbXUtPmRyYW1fdHlwZSA9IFNUTTMyX0REUl9QTVVfRERSMzsKKwllbHNlCisJCXJldHVybiBk
ZXZfZXJyX3Byb2JlKCZwZGV2LT5kZXYsIC1FSU5WQUwsICJVbnN1cHBvcnRlZCBtZW1vcnkgY2hh
bm5lbCB0eXBlXG4iKTsKKworCWlmIChwbXUtPmRyYW1fdHlwZSA9PSBTVE0zMl9ERFJfUE1VX0xQ
RERSMykKKwkJZGV2X3dhcm4oJnBkZXYtPmRldiwKKwkJCSAiTFBERFIzIHN1cHBvcnRlZCBieSBE
RFJQRVJGTSBidXQgbm90IHN1cHBvcnRlZCBieSBERFJDVFJML0REUlBIWVxuIik7CisKKwlyZXR1
cm4gMDsKK30KKworI2RlZmluZSBTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIoX25hbWUsIF9pZCkJ
CQlcCisJUE1VX0VWRU5UX0FUVFJfSUQoX25hbWUsIHN0bTMyX2Rkcl9wbXVfc3lzZnNfc2hvdywg
X2lkKQorCitzdGF0aWMgc3RydWN0IGF0dHJpYnV0ZSAqc3RtMzJfZGRyX3BtdV9ldmVudHNfYXR0
cnNfbXBbXSA9IHsKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIocGVyZl9vcF9pc19yZCwgUEVS
Rl9PUF9JU19SRCksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9BVFRSKHBlcmZfb3BfaXNfd3IsIFBF
UkZfT1BfSVNfV1IpLAorCVNUTTMyX0REUl9QTVVfRVZFTlRfQVRUUihwZXJmX29wX2lzX2FjdGl2
YXRlLCBQRVJGX09QX0lTX0FDVElWQVRFKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIoY3Rs
X2lkbGUsIENUTF9JRExFKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIocGVyZl9ocHJfcmVx
X3dpdGhfbm9fY3JlZGl0LCBQRVJGX0hQUl9SRVFfV0lUSF9OT19DUkVESVQpLAorCVNUTTMyX0RE
Ul9QTVVfRVZFTlRfQVRUUihwZXJmX2xwcl9yZXFfd2l0aF9ub19jcmVkaXQsIFBFUkZfTFBSX1JF
UV9XSVRIX05PX0NSRURJVCksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9BVFRSKGNhY3RpdmVfZGRy
YywgQ0FDVElWRV9ERFJDKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIocGVyZl9vcF9pc19l
bnRlcl9wb3dlcmRvd24sIFBFUkZfT1BfSVNfRU5URVJfUE9XRVJET1dOKSwKKwlTVE0zMl9ERFJf
UE1VX0VWRU5UX0FUVFIocGVyZl9vcF9pc19yZWZyZXNoLCBQRVJGX09QX0lTX1JFRlJFU0gpLAor
CVNUTTMyX0REUl9QTVVfRVZFTlRfQVRUUihwZXJmX3NlbGZyZXNoX21vZGUsIFBFUkZfU0VMRlJF
U0hfTU9ERSksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9BVFRSKGRmaV9scF9yZXEsIERGSV9MUF9S
RVEpLAorCVNUTTMyX0REUl9QTVVfRVZFTlRfQVRUUihwZXJmX2hwcl94YWN0X3doZW5fY3JpdGlj
YWwsIFBFUkZfSFBSX1hBQ1RfV0hFTl9DUklUSUNBTCksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9B
VFRSKHBlcmZfbHByX3hhY3Rfd2hlbl9jcml0aWNhbCwgUEVSRl9MUFJfWEFDVF9XSEVOX0NSSVRJ
Q0FMKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIocGVyZl93cl94YWN0X3doZW5fY3JpdGlj
YWwsIFBFUkZfV1JfWEFDVF9XSEVOX0NSSVRJQ0FMKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FU
VFIoZGZpX2xwX3JlcV9jcHksIERGSV9MUF9SRVEpLCAgLyogU3VmZml4ZWQgJ19jcHknIHRvIGFs
bG93IHRoZQorCQkJCQkJCQkqIGNob2ljZSBiZXR3ZWVuIHNldHMgMiBhbmQgMworCQkJCQkJCQkq
LworCVNUTTMyX0REUl9QTVVfRVZFTlRfQVRUUih0aW1lX2NudCwgVElNRV9DTlQpLAorCU5VTEwK
K307CisKK3N0YXRpYyBzdHJ1Y3QgYXR0cmlidXRlX2dyb3VwIHN0bTMyX2Rkcl9wbXVfZXZlbnRz
X2F0dHJzX2dyb3VwX21wID0geworCS5uYW1lID0gImV2ZW50cyIsCisJLmF0dHJzID0gc3RtMzJf
ZGRyX3BtdV9ldmVudHNfYXR0cnNfbXAsCit9OworCitzdGF0aWMgc3RydWN0IGF0dHJpYnV0ZSAq
c3RtMzJfZGRyX3BtdV9ldmVudHNfYXR0cnNfbXAyW10gPSB7CisJU1RNMzJfRERSX1BNVV9FVkVO
VF9BVFRSKGRmaV9pc19hY3QsIERGSV9JU19BQ1QpLAorCVNUTTMyX0REUl9QTVVfRVZFTlRfQVRU
UihkZmlfaXNfcHJlcGIsIERGSV9JU19QUkVQQiksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9BVFRS
KGRmaV9pc19wcmVhYiwgREZJX0lTX1BSRUFCKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIo
ZGZpX2lzX3JkLCBERklfSVNfUkQpLAorCVNUTTMyX0REUl9QTVVfRVZFTlRfQVRUUihkZmlfaXNf
cmRhLCBERklfSVNfUkRBKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIoZGZpX2lzX3dyLCBE
RklfSVNfV1IpLAorCVNUTTMyX0REUl9QTVVfRVZFTlRfQVRUUihkZmlfaXNfd3JhLCBERklfSVNf
V1JBKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIoZGZpX2lzX213ciwgREZJX0lTX01XUiks
CisJU1RNMzJfRERSX1BNVV9FVkVOVF9BVFRSKGRmaV9pc19td3JhLCBERklfSVNfTVdSQSksCisJ
U1RNMzJfRERSX1BNVV9FVkVOVF9BVFRSKGRmaV9pc19tcncsIERGSV9JU19NUlcpLAorCVNUTTMy
X0REUl9QTVVfRVZFTlRfQVRUUihkZmlfaXNfbXJyLCBERklfSVNfTVJSKSwKKwlTVE0zMl9ERFJf
UE1VX0VWRU5UX0FUVFIoZGZpX2lzX3JlZnBiLCBERklfSVNfUkVGUEIpLAorCVNUTTMyX0REUl9Q
TVVfRVZFTlRfQVRUUihkZmlfaXNfcmVmYWIsIERGSV9JU19SRUZBQiksCisJU1RNMzJfRERSX1BN
VV9FVkVOVF9BVFRSKGRmaV9pc19tcGMsIERGSV9JU19NUEMpLAorCVNUTTMyX0REUl9QTVVfRVZF
TlRfQVRUUihwZXJmX29wX2lzX2FjdCwgUEVSRl9PUF9JU19BQ1QpLAorCVNUTTMyX0REUl9QTVVf
RVZFTlRfQVRUUihwZXJmX29wX2lzX3JkLCBQRVJGX09QX0lTX1JEKSwKKwlTVE0zMl9ERFJfUE1V
X0VWRU5UX0FUVFIocGVyZl9vcF9pc193ciwgUEVSRl9PUF9JU19XUiksCisJU1RNMzJfRERSX1BN
VV9FVkVOVF9BVFRSKHBlcmZfb3BfaXNfbXdyLCBQRVJGX09QX0lTX01XUiksCisJU1RNMzJfRERS
X1BNVV9FVkVOVF9BVFRSKHBlcmZfb3BfaXNfcmVmLCBQRVJGX09QX0lTX1JFRiksCisJU1RNMzJf
RERSX1BNVV9FVkVOVF9BVFRSKHBlcmZfb3BfaXNfY3JpdF9yZWYsIFBFUkZfT1BfSVNfQ1JJVF9S
RUYpLAorCVNUTTMyX0REUl9QTVVfRVZFTlRfQVRUUihwZXJmX29wX2lzX3NwZWNfcmVmLCBQRVJG
X09QX0lTX1NQRUNfUkVGKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIocGVyZl9vcF9pc196
cWNhbCwgUEVSRl9PUF9JU19aUUNBTCksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9BVFRSKHBlcmZf
b3BfaXNfZW50ZXJfcG93ZG4sIFBFUkZfT1BfSVNfRU5URVJfUE9XRE4pLAorCVNUTTMyX0REUl9Q
TVVfRVZFTlRfQVRUUihwZXJmX29wX2lzX2VudGVyX3NlbGZyZWYsIFBFUkZfT1BfSVNfRU5URVJf
U0VMRlJFRiksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9BVFRSKHBlcmZfb3BfaXNfcHJlLCBQRVJG
X09QX0lTX1BSRSksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9BVFRSKHBlcmZfb3BfaXNfcHJlX2Zv
cl9yZHdyLCBQRVJGX09QX0lTX1BSRV9GT1JfUkRXUiksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9B
VFRSKHBlcmZfb3BfaXNfcHJlX2Zvcl9vdGhlcnMsIFBFUkZfT1BfSVNfUFJFX0ZPUl9PVEhFUlMp
LAorCVNUTTMyX0REUl9QTVVfRVZFTlRfQVRUUihwZXJmX29wX2lzX3JkX2FjdGl2YXRlLCBQRVJG
X09QX0lTX1JEX0FDVElWQVRFKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIocGVyZl9ocHJf
cmVxX3dpdGhfbm9jcmVkaXQsIFBFUkZfSFBSX1JFUV9XSVRIX05PQ1JFRElUKSwKKwlTVE0zMl9E
RFJfUE1VX0VWRU5UX0FUVFIocGVyZl9scHJfcmVxX3dpdGhfbm9jcmVkaXQsIFBFUkZfTFBSX1JF
UV9XSVRIX05PQ1JFRElUKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIocGVyZl9ocHJfeGFj
dF93aGVuX2NyaXRpY2FsLCBQRVJGX0hQUl9YQUNUX1dIRU5fQ1JJVElDQUwpLAorCVNUTTMyX0RE
Ul9QTVVfRVZFTlRfQVRUUihwZXJmX2xwcl94YWN0X3doZW5fY3JpdGljYWwsIFBFUkZfTFBSX1hB
Q1RfV0hFTl9DUklUSUNBTCksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9BVFRSKHBlcmZfd3JfeGFj
dF93aGVuX2NyaXRpY2FsLCBQRVJGX1dSX1hBQ1RfV0hFTl9DUklUSUNBTCksCisJU1RNMzJfRERS
X1BNVV9FVkVOVF9BVFRSKHBlcmZfcmR3cl90cmFuc2l0aW9ucywgUEVSRl9SRFdSX1RSQU5TSVRJ
T05TKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIocGVyZl93YXJfaGF6YXJkLCBQRVJGX1dB
Ul9IQVpBUkQpLAorCVNUTTMyX0REUl9QTVVfRVZFTlRfQVRUUihwZXJmX3Jhd19oYXphcmQsIFBF
UkZfUkFXX0hBWkFSRCksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9BVFRSKHBlcmZfd2F3X2hhemFy
ZCwgUEVSRl9XQVdfSEFaQVJEKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIocGVyZl9yYW5r
LCBQRVJGX1JBTkspLAorCVNUTTMyX0REUl9QTVVfRVZFTlRfQVRUUihwZXJmX3JlYWRfYnlwYXNz
LCBQRVJGX1JFQURfQllQQVNTKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIocGVyZl9hY3Rf
YnlwYXNzLCBQRVJGX0FDVF9CWVBBU1MpLAorCVNUTTMyX0REUl9QTVVfRVZFTlRfQVRUUihwZXJm
X3dpbmRvd19saW1pdF9yZWFjaGVkX3JkLCBQRVJGX1dJTkRPV19MSU1JVF9SRUFDSEVEX1JEKSwK
KwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIocGVyZl93aW5kb3dfbGltaXRfcmVhY2hlZF93ciwg
UEVSRl9XSU5ET1dfTElNSVRfUkVBQ0hFRF9XUiksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9BVFRS
KHRpbWVfY250LCBUSU1FX0NOVCksCisJTlVMTAorfTsKKworc3RhdGljIHN0cnVjdCBhdHRyaWJ1
dGVfZ3JvdXAgc3RtMzJfZGRyX3BtdV9ldmVudHNfYXR0cnNfZ3JvdXBfbXAyID0geworCS5uYW1l
ID0gImV2ZW50cyIsCisJLmF0dHJzID0gc3RtMzJfZGRyX3BtdV9ldmVudHNfYXR0cnNfbXAyLAor
fTsKKworUE1VX0ZPUk1BVF9BVFRSKGV2ZW50LCAiY29uZmlnOjAtOCIpOworCitzdGF0aWMgc3Ry
dWN0IGF0dHJpYnV0ZSAqc3RtMzJfZGRyX3BtdV9mb3JtYXRfYXR0cnNbXSA9IHsKKwkmZm9ybWF0
X2F0dHJfZXZlbnQuYXR0ciwKKwlOVUxMCit9OworCitzdGF0aWMgY29uc3Qgc3RydWN0IGF0dHJp
YnV0ZV9ncm91cCBzdG0zMl9kZHJfcG11X2Zvcm1hdF9hdHRyX2dyb3VwID0geworCS5uYW1lID0g
ImZvcm1hdCIsCisJLmF0dHJzID0gc3RtMzJfZGRyX3BtdV9mb3JtYXRfYXR0cnMsCit9OworCitz
dGF0aWMgY29uc3Qgc3RydWN0IGF0dHJpYnV0ZV9ncm91cCAqc3RtMzJfZGRyX3BtdV9hdHRyX2dy
b3Vwc19tcDFbXSA9IHsKKwkmc3RtMzJfZGRyX3BtdV9ldmVudHNfYXR0cnNfZ3JvdXBfbXAsCisJ
JnN0bTMyX2Rkcl9wbXVfZm9ybWF0X2F0dHJfZ3JvdXAsCisJTlVMTAorfTsKKworc3RhdGljIGNv
bnN0IHN0cnVjdCBhdHRyaWJ1dGVfZ3JvdXAgKnN0bTMyX2Rkcl9wbXVfYXR0cl9ncm91cHNfbXAy
W10gPSB7CisJJnN0bTMyX2Rkcl9wbXVfZXZlbnRzX2F0dHJzX2dyb3VwX21wMiwKKwkmc3RtMzJf
ZGRyX3BtdV9mb3JtYXRfYXR0cl9ncm91cCwKKwlOVUxMCit9OworCitzdGF0aWMgaW50IHN0bTMy
X2Rkcl9wbXVfZGV2aWNlX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCit7CisJ
c3RydWN0IHN0bTMyX2ZpcmV3YWxsIGZpcmV3YWxsOworCXN0cnVjdCBzdG0zMl9kZHJfcG11ICpw
bXU7CisJc3RydWN0IHJlc2V0X2NvbnRyb2wgKnJzdDsKKwlzdHJ1Y3QgcmVzb3VyY2UgKnJlczsK
KwlpbnQgcmV0OworCisJcG11ID0gZGV2bV9remFsbG9jKCZwZGV2LT5kZXYsIHN0cnVjdF9zaXpl
KHBtdSwgY291bnRlcnMsIE1QMl9DTlRfTkIpLCBHRlBfS0VSTkVMKTsKKwlpZiAoIXBtdSkKKwkJ
cmV0dXJuIC1FTk9NRU07CisKKwlwbGF0Zm9ybV9zZXRfZHJ2ZGF0YShwZGV2LCBwbXUpOworCXBt
dS0+ZGV2ID0gJnBkZXYtPmRldjsKKworCXBtdS0+Y2ZnID0gZGV2aWNlX2dldF9tYXRjaF9kYXRh
KHBtdS0+ZGV2KTsKKworCXBtdS0+bWVtYmFzZSA9IGRldm1fcGxhdGZvcm1fZ2V0X2FuZF9pb3Jl
bWFwX3Jlc291cmNlKHBkZXYsIDAsICZyZXMpOworCWlmIChJU19FUlIocG11LT5tZW1iYXNlKSkK
KwkJcmV0dXJuIFBUUl9FUlIocG11LT5tZW1iYXNlKTsKKworCWlmIChvZl9wcm9wZXJ0eV9wcmVz
ZW50KHBtdS0+ZGV2LT5vZl9ub2RlLCAiYWNjZXNzLWNvbnRyb2xsZXJzIikpIHsKKwkJcmV0ID0g
c3RtMzJfZmlyZXdhbGxfZ2V0X2ZpcmV3YWxsKHBtdS0+ZGV2LT5vZl9ub2RlLCAmZmlyZXdhbGws
IDEpOworCQlpZiAocmV0KQorCQkJcmV0dXJuIGRldl9lcnJfcHJvYmUocG11LT5kZXYsIHJldCwg
IkZhaWxlZCB0byBnZXQgZmlyZXdhbGxcbiIpOworCQlyZXQgPSBzdG0zMl9maXJld2FsbF9ncmFu
dF9hY2Nlc3NfYnlfaWQoJmZpcmV3YWxsLCBmaXJld2FsbC5maXJld2FsbF9pZCk7CisJCWlmIChy
ZXQpCisJCQlyZXR1cm4gZGV2X2Vycl9wcm9iZShwbXUtPmRldiwgcmV0LCAiRmFpbGVkIHRvIGdy
YW50IGFjY2Vzc1xuIik7CisJfQorCisJcG11LT5jbGsgPSBkZXZtX2Nsa19nZXRfb3B0aW9uYWxf
ZW5hYmxlZChwbXUtPmRldiwgTlVMTCk7CisJaWYgKElTX0VSUihwbXUtPmNsaykpCisJCXJldHVy
biBkZXZfZXJyX3Byb2JlKHBtdS0+ZGV2LCBQVFJfRVJSKHBtdS0+Y2xrKSwKKwkJCQkgICAgICJG
YWlsZWQgdG8gZ2V0IHByZXBhcmUgZW5hYmxlIGNsb2NrXG4iKTsKKworCXJzdCA9IGRldm1fcmVz
ZXRfY29udHJvbF9nZXRfb3B0aW9uYWxfZXhjbHVzaXZlKHBtdS0+ZGV2LCBOVUxMKTsKKwlpZiAo
SVNfRVJSKHJzdCkpCisJCXJldHVybiBkZXZfZXJyX3Byb2JlKHBtdS0+ZGV2LCBQVFJfRVJSKHJz
dCksICJGYWlsZWQgdG8gZ2V0IHJlc2V0XG4iKTsKKworCXJlc2V0X2NvbnRyb2xfYXNzZXJ0KHJz
dCk7CisJcmVzZXRfY29udHJvbF9kZWFzc2VydChyc3QpOworCisJcG11LT5wb2xsX3BlcmlvZCA9
IG1zX3RvX2t0aW1lKFBPTExfTVMpOworCWhydGltZXJfc2V0dXAoJnBtdS0+aHJ0aW1lciwgc3Rt
MzJfZGRyX3BtdV9wb2xsLCBDTE9DS19NT05PVE9OSUMsIEhSVElNRVJfTU9ERV9SRUwpOworCisJ
Zm9yIChpbnQgaSA9IDA7IGkgPCBNUDJfQ05UX05COyBpKyspCisJCUlOSVRfTElTVF9IRUFEKCZw
bXUtPmNvdW50ZXJzW2ldKTsKKworCXBtdS0+c2VsZWN0ZWRfc2V0ID0gLTE7CisKKwlwbXUtPnBt
dSA9IChzdHJ1Y3QgcG11KSB7CisJCS50YXNrX2N0eF9uciA9IHBlcmZfaW52YWxpZF9jb250ZXh0
LAorCQkuc3RhcnQgPSBzdG0zMl9kZHJfcG11X2V2ZW50X3N0YXJ0LAorCQkuc3RvcCA9IHN0bTMy
X2Rkcl9wbXVfZXZlbnRfc3RvcCwKKwkJLmFkZCA9IHN0bTMyX2Rkcl9wbXVfZXZlbnRfYWRkLAor
CQkuZGVsID0gc3RtMzJfZGRyX3BtdV9ldmVudF9kZWwsCisJCS5yZWFkID0gc3RtMzJfZGRyX3Bt
dV9ldmVudF9yZWFkLAorCQkuZXZlbnRfaW5pdCA9IHN0bTMyX2Rkcl9wbXVfZXZlbnRfaW5pdCwK
KwkJLmF0dHJfZ3JvdXBzID0gcG11LT5jZmctPmF0dHJpYnV0ZSwKKwkJLm1vZHVsZSA9IFRISVNf
TU9EVUxFLAorCX07CisKKwlpZiAocG11LT5jZmctPnJlZ3MtPmRyYW1faW5mLnJlZykgeworCQly
ZXQgPSBzdG0zMl9kZHJfcG11X2dldF9tZW1vcnlfdHlwZShwbXUpOworCQlpZiAocmV0KQorCQkJ
cmV0dXJuIGRldl9lcnJfcHJvYmUocG11LT5kZXYsIHJldCwgIkZhaWxlZCB0byBnZXQgbWVtb3J5
IHR5cGVcbiIpOworCisJCXdyaXRlbF9yZWxheGVkKHBtdS0+ZHJhbV90eXBlLCBwbXUtPm1lbWJh
c2UgKyBwbXUtPmNmZy0+cmVncy0+ZHJhbV9pbmYucmVnKTsKKwl9CisKKwlyZXQgPSBwZXJmX3Bt
dV9yZWdpc3RlcigmcG11LT5wbXUsIERSSVZFUl9OQU1FLCAtMSk7CisJaWYgKHJldCkKKwkJcmV0
dXJuIGRldl9lcnJfcHJvYmUocG11LT5kZXYsIHJldCwKKwkJCQkiQ291bGRuJ3QgcmVnaXN0ZXIg
RERSUEVSRk0gZHJpdmVyIGFzIGEgUE1VXG4iKTsKKworCWNsa19kaXNhYmxlKHBtdS0+Y2xrKTsK
KworCXJldHVybiAwOworfQorCitzdGF0aWMgdm9pZCBzdG0zMl9kZHJfcG11X2RldmljZV9yZW1v
dmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKK3sKKwlzdHJ1Y3Qgc3RtMzJfZGRyX3Bt
dSAqc3RtMzJfZGRyX3BtdSA9IHBsYXRmb3JtX2dldF9kcnZkYXRhKHBkZXYpOworCisJcGVyZl9w
bXVfdW5yZWdpc3Rlcigmc3RtMzJfZGRyX3BtdS0+cG11KTsKK30KKworc3RhdGljIGludCBfX21h
eWJlX3VudXNlZCBzdG0zMl9kZHJfcG11X2RldmljZV9yZXN1bWUoc3RydWN0IGRldmljZSAqZGV2
KQoreworCXN0cnVjdCBzdG0zMl9kZHJfcG11ICpwbXUgPSBkZXZfZ2V0X2RydmRhdGEoZGV2KTsK
KworCWNsa19lbmFibGUocG11LT5jbGspOworCXdyaXRlbF9yZWxheGVkKHBtdS0+ZHJhbV90eXBl
LCBwbXUtPm1lbWJhc2UgKyBwbXUtPmNmZy0+cmVncy0+ZHJhbV9pbmYucmVnKTsKKwljbGtfZGlz
YWJsZShwbXUtPmNsayk7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGNvbnN0IHN0cnVjdCBz
dG0zMl9kZHJfcG11X3JlZ3NwZWMgc3RtMzJfZGRyX3BtdV9yZWdzcGVjX21wMSA9IHsKKwkuc3Rv
cCA9CQl7IEREUlBFUkZNX0NUUkwsIENUUkxfU1RPUCB9LAorCS5zdGFydCA9CXsgRERSUEVSRk1f
Q1RSTCwgQ1RSTF9TVEFSVCB9LAorCS5lbmFibGUgPQl7IEREUlBFUkZNX0NGRyB9LAorCS5jZmcg
PQkJeyBERFJQRVJGTV9DRkcgfSwKKwkuc3RhdHVzID0JeyBERFJQRVJGTV9TVEFUVVMsIE1QMV9T
VEFUVVNfQlVTWSB9LAorCS5jbGVhcl9jbnQgPQl7IEREUlBFUkZNX0NMUiwgTVAxX0NMUl9DTlQg
fSwKKwkuY2xlYXJfdGltZSA9CXsgRERSUEVSRk1fQ0xSLCBNUDFfQ0xSX1RJTUUgfSwKKwkuY291
bnRlcl90aW1lID0JeyBERFJQRVJGTV9UQ05UIH0sCisJLmNvdW50ZXJfZXZ0ID0JeworCQl7IERE
UlBFUkZNX0VWQ05UKDApIH0sCisJCXsgRERSUEVSRk1fRVZDTlQoMSkgfSwKKwkJeyBERFJQRVJG
TV9FVkNOVCgyKSB9LAorCQl7IEREUlBFUkZNX0VWQ05UKDMpIH0sCisJfSwKK307CisKK3N0YXRp
YyBjb25zdCBzdHJ1Y3Qgc3RtMzJfZGRyX3BtdV9yZWdzcGVjIHN0bTMyX2Rkcl9wbXVfcmVnc3Bl
Y19tcDIgPSB7CisJLnN0b3AgPQkJeyBERFJQRVJGTV9DVFJMLCBDVFJMX1NUT1AgfSwKKwkuc3Rh
cnQgPQl7IEREUlBFUkZNX0NUUkwsIENUUkxfU1RBUlQgfSwKKwkuc3RhdHVzID0JeyBERFJQRVJG
TV9NUDJfU1RBVFVTLCBNUDJfU1RBVFVTX0JVU1kgfSwKKwkuY2xlYXJfY250ID0JeyBERFJQRVJG
TV9DTFIsIE1QMl9DTFJfQ05UIH0sCisJLmNsZWFyX3RpbWUgPQl7IEREUlBFUkZNX0NMUiwgTVAy
X0NMUl9USU1FIH0sCisJLmNmZzAgPQkJeyBERFJQRVJGTV9NUDJfQ0ZHMCB9LAorCS5jZmcxID0J
CXsgRERSUEVSRk1fTVAyX0NGRzEgfSwKKwkuZW5hYmxlID0JeyBERFJQRVJGTV9NUDJfQ0ZHNSB9
LAorCS5kcmFtX2luZiA9CXsgRERSUEVSRk1fTVAyX0RSQU1JTkYgfSwKKwkuY291bnRlcl90aW1l
ID0JeyBERFJQRVJGTV9NUDJfVENOVCB9LAorCS5jb3VudGVyX2V2dCA9CXsKKwkJeyBERFJQRVJG
TV9NUDJfRVZDTlQoMCkgfSwKKwkJeyBERFJQRVJGTV9NUDJfRVZDTlQoMSkgfSwKKwkJeyBERFJQ
RVJGTV9NUDJfRVZDTlQoMikgfSwKKwkJeyBERFJQRVJGTV9NUDJfRVZDTlQoMykgfSwKKwkJeyBE
RFJQRVJGTV9NUDJfRVZDTlQoNCkgfSwKKwkJeyBERFJQRVJGTV9NUDJfRVZDTlQoNSkgfSwKKwkJ
eyBERFJQRVJGTV9NUDJfRVZDTlQoNikgfSwKKwkJeyBERFJQRVJGTV9NUDJfRVZDTlQoNykgfSwK
Kwl9LAorfTsKKworc3RhdGljIGNvbnN0IHN0cnVjdCBzdG0zMl9kZHJfcG11X2NmZyBzdG0zMl9k
ZHJfcG11X2NmZ19tcDEgPSB7CisJLnJlZ3MgPSAmc3RtMzJfZGRyX3BtdV9yZWdzcGVjX21wMSwK
KwkuYXR0cmlidXRlID0gc3RtMzJfZGRyX3BtdV9hdHRyX2dyb3Vwc19tcDEsCisJLmNvdW50ZXJz
X25iID0gTVAxX0NOVF9OQiwKKwkuZXZ0X2NvdW50ZXJzX25iID0gTVAxX0NOVF9OQiAtIDEsIC8q
IFRpbWUgY291bnRlciBpcyBub3QgYW4gZXZlbnQgY291bnRlciAqLworCS50aW1lX2NudF9pZHgg
PSBNUDFfVElNRV9DTlRfSURYLAorCS5nZXRfY291bnRlciA9IHN0bTMyX2Rkcl9wbXVfZ2V0X2V2
ZW50X2NvdW50ZXJfbXAxLAorfTsKKworc3RhdGljIGNvbnN0IHN0cnVjdCBzdG0zMl9kZHJfcG11
X2NmZyBzdG0zMl9kZHJfcG11X2NmZ19tcDIgPSB7CisJLnJlZ3MgPSAmc3RtMzJfZGRyX3BtdV9y
ZWdzcGVjX21wMiwKKwkuYXR0cmlidXRlID0gc3RtMzJfZGRyX3BtdV9hdHRyX2dyb3Vwc19tcDIs
CisJLmNvdW50ZXJzX25iID0gTVAyX0NOVF9OQiwKKwkuZXZ0X2NvdW50ZXJzX25iID0gTVAyX0NO
VF9OQiAtIDEsIC8qIFRpbWUgY291bnRlciBpcyBhbiBldmVudCBjb3VudGVyICovCisJLnRpbWVf
Y250X2lkeCA9IE1QMl9USU1FX0NOVF9JRFgsCisJLmdldF9jb3VudGVyID0gc3RtMzJfZGRyX3Bt
dV9nZXRfZXZlbnRfY291bnRlcl9tcDIsCit9OworCitzdGF0aWMgREVGSU5FX1NJTVBMRV9ERVZf
UE1fT1BTKHN0bTMyX2Rkcl9wbXVfcG1fb3BzLCBOVUxMLCBzdG0zMl9kZHJfcG11X2RldmljZV9y
ZXN1bWUpOworCitzdGF0aWMgY29uc3Qgc3RydWN0IG9mX2RldmljZV9pZCBzdG0zMl9kZHJfcG11
X29mX21hdGNoW10gPSB7CisJeworCQkuY29tcGF0aWJsZSA9ICJzdCxzdG0zMm1wMTMxLWRkci1w
bXUiLAorCQkuZGF0YSA9ICZzdG0zMl9kZHJfcG11X2NmZ19tcDEKKwl9LAorCXsKKwkJLmNvbXBh
dGlibGUgPSAic3Qsc3RtMzJtcDI1MS1kZHItcG11IiwKKwkJLmRhdGEgPSAmc3RtMzJfZGRyX3Bt
dV9jZmdfbXAyCisJfSwKKwl7IH0KK307CitNT0RVTEVfREVWSUNFX1RBQkxFKG9mLCBzdG0zMl9k
ZHJfcG11X29mX21hdGNoKTsKKworc3RhdGljIHN0cnVjdCBwbGF0Zm9ybV9kcml2ZXIgc3RtMzJf
ZGRyX3BtdV9kcml2ZXIgPSB7CisJLmRyaXZlciA9IHsKKwkJLm5hbWUgPSBEUklWRVJfTkFNRSwK
KwkJLnBtID0gcG1fc2xlZXBfcHRyKCZzdG0zMl9kZHJfcG11X3BtX29wcyksCisJCS5vZl9tYXRj
aF90YWJsZSA9IHN0bTMyX2Rkcl9wbXVfb2ZfbWF0Y2gsCisJfSwKKwkucHJvYmUgPSBzdG0zMl9k
ZHJfcG11X2RldmljZV9wcm9iZSwKKwkucmVtb3ZlID0gc3RtMzJfZGRyX3BtdV9kZXZpY2VfcmVt
b3ZlLAorfTsKKworbW9kdWxlX3BsYXRmb3JtX2RyaXZlcihzdG0zMl9kZHJfcG11X2RyaXZlcik7
CisKK01PRFVMRV9BVVRIT1IoIkNsw6ltZW50IExlIEdvZmZpYyIpOworTU9EVUxFX0RFU0NSSVBU
SU9OKCJTVE1pY3JvZWxlY3Ryb25pY3MgU1RNMzIgRERSIHBlcmZvcm1hbmNlIG1vbml0b3IgZHJp
dmVyIik7CitNT0RVTEVfTElDRU5TRSgiR1BMIik7CgotLSAKMi40My4wCgpfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpMaW51eC1zdG0zMiBtYWlsaW5nIGxp
c3QKTGludXgtc3RtMzJAc3QtbWQtbWFpbG1hbi5zdG9ybXJlcGx5LmNvbQpodHRwczovL3N0LW1k
LW1haWxtYW4uc3Rvcm1yZXBseS5jb20vbWFpbG1hbi9saXN0aW5mby9saW51eC1zdG0zMgo=
