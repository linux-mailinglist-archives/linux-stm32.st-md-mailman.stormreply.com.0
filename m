Return-Path: <linux-stm32-bounces@st-md-mailman.stormreply.com>
X-Original-To: lists+linux-stm32@lfdr.de
Delivered-To: lists+linux-stm32@lfdr.de
Received: from stm-ict-prod-mailman-01.stormreply.prv (st-md-mailman.stormreply.com [52.209.6.89])
	by mail.lfdr.de (Postfix) with ESMTPS id 64BA2A9211F
	for <lists+linux-stm32@lfdr.de>; Thu, 17 Apr 2025 17:16:53 +0200 (CEST)
Received: from ip-172-31-3-47.eu-west-1.compute.internal (localhost [127.0.0.1])
	by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTP id 274E8C78F74;
	Thu, 17 Apr 2025 15:16:53 +0000 (UTC)
Received: from mail-wr1-f42.google.com (mail-wr1-f42.google.com
 [209.85.221.42])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTPS id B332EC78F8C
 for <linux-stm32@st-md-mailman.stormreply.com>;
 Thu, 17 Apr 2025 15:16:51 +0000 (UTC)
Received: by mail-wr1-f42.google.com with SMTP id
 ffacd0b85a97d-39c0dfba946so581149f8f.3
 for <linux-stm32@st-md-mailman.stormreply.com>;
 Thu, 17 Apr 2025 08:16:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=linaro.org; s=google; t=1744903011; x=1745507811;
 darn=st-md-mailman.stormreply.com; 
 h=content-transfer-encoding:mime-version:references:in-reply-to
 :message-id:date:subject:cc:to:from:from:to:cc:subject:date
 :message-id:reply-to;
 bh=KCt9HM5J8mDC2T2Qr7aKXtqKry6PyjzOv49rLCCphuA=;
 b=U1xN0Wj9sq8Oj6juwl87X7qPPacTa8HnCyUb7W5Mm1+oI8XiupH5yETQxh/1RTf1z5
 of48sjBNju/AQ/UNXWhXVNOoXD+MnCj4Sq3P7ousJ3vD291UHukg83hRnKSXeQIrNkx4
 mTZkIZNI2BdSTh0zqwLwLOqJ8DCfXeg0h498AzibHAuGTpP2bgfPTwS0XHaupbFAq3Qv
 7MM0iqmuIyYBj/HbS/bixWn/9wYK9gLZpx/lybXAjJeuxHhC1cEeHe1iw01UXqmXtMkr
 oWqyugqMDLKCCA/sXAzot2pEMyh4yl7t/+XR/2zBro9Vrcg2P+PvoCmCY4ldfipFc4+4
 oA9A==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20230601; t=1744903011; x=1745507811;
 h=content-transfer-encoding:mime-version:references:in-reply-to
 :message-id:date:subject:cc:to:from:x-gm-message-state:from:to:cc
 :subject:date:message-id:reply-to;
 bh=KCt9HM5J8mDC2T2Qr7aKXtqKry6PyjzOv49rLCCphuA=;
 b=Kd1ZER3d/Njoy7cAT2Xv2txxIFrzZc/C0pTqOAXu87k7VM5naXFJaAQR3kZrHrlp/s
 OJKFvfj/FCdhdFxYOP8fkjt4tZ/mdk2Co9WsOVdfq2pabZPzuF76k4YZyRwzsrYI1RNS
 K6YrpnE+8lnAzcUYu7MyEIVnbVrhSla2+cYiP5JYCPScQwkIjgMm8Oya4p4QBVs97+oF
 7sLSeNIQWlnxi/qIXeP2DifzQrDk1pKIbHdBljrND/3XA4KzeoHuTXEVisdHp27XhFVr
 lX7C8sSDIJDaNJN915ES6Qy66e1aarQSJLp3gLksirkiv8Gyg7Jko0VgANDPlVJJW4Wi
 FYvw==
X-Forwarded-Encrypted: i=1;
 AJvYcCU+7c3H0WcxGilIZ543qx1Smx/R3bXv2px+5vrNAVX+sETd1gccjHfA10QH/NmJh/snpQVWJ7H+pXjUFw==@st-md-mailman.stormreply.com
X-Gm-Message-State: AOJu0YwKDCg6oiVtoqos79753xxptbNYerF0Dzq344ygPf5p/qVqFwwb
 4qJYdOS0EwYvZ+DuP5Zm+pSp573fGtbEKaOqFuAkF8ek6zBR9qtuD6O3J9atKsQ=
X-Gm-Gg: ASbGnculXliI3enrZTn1ujdN8V9rJ/nrSCBbijFkKYoRyk11MRCnPrrYPf+qnQVrNM5
 TGOSLI8jfz6z7CKb4QFMz9SIy6sC0p3CakgPSwkFWCIaWOpKXFtxUf+4wM/IYbZTyqGPSZkI6Jm
 YqyypYCpCnZ4QVCEX6mJ0e7dREbAp+07RRQKg6UJojHPstJorF6Aceutmy6Gkht8XaajiE3Vp7B
 mxyBjslf3xPo+8zbWhn7y8uX14VRuAv2yOAhWahM1J1YcxT/D8OJajLL34HAidX0ZlK9Li0ndyC
 GUi7gNYvaM0GnM/2lxSi35sJb3GVJfgkatHuUhieJGlUkM4PIcQdERTBqhIAe6Mw21E=
X-Google-Smtp-Source: AGHT+IEONMUQIFnudwL0Y9Twoy76WitfoTjggM2FFYsSm4ms/R7wr1rx7aM9u2nAk3VteC7wf+AxNg==
X-Received: by 2002:a5d:5f82:0:b0:390:f6aa:4e72 with SMTP id
 ffacd0b85a97d-39ee5b16e7bmr6016358f8f.18.1744903010992; 
 Thu, 17 Apr 2025 08:16:50 -0700 (PDT)
Received: from mai.. (146725694.box.freepro.com. [130.180.211.218])
 by smtp.gmail.com with ESMTPSA id
 ffacd0b85a97d-39eaf445315sm20528346f8f.82.2025.04.17.08.16.50
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 17 Apr 2025 08:16:50 -0700 (PDT)
From: Daniel Lezcano <daniel.lezcano@linaro.org>
To: daniel.lezcano@linaro.org,
	tglx@linutronix.de
Date: Thu, 17 Apr 2025 17:16:19 +0200
Message-ID: <20250417151623.121109-3-daniel.lezcano@linaro.org>
X-Mailer: git-send-email 2.43.0
In-Reply-To: <20250417151623.121109-1-daniel.lezcano@linaro.org>
References: <20250417151623.121109-1-daniel.lezcano@linaro.org>
MIME-Version: 1.0
Cc: S32@nxp.com, "moderated list:ARM/STM32 ARCHITECTURE"
 <linux-stm32@st-md-mailman.stormreply.com>, Larisa.Grigore@nxp.com,
 linux-kernel@vger.kernel.org, krzysztof.kozlowski@linaro.org,
 Maxime Coquelin <mcoquelin.stm32@gmail.com>, thomas.fossati@linaro.org,
 Ghennadi Procopciuc <ghennadi.procopciuc@oss.nxp.com>,
 ghennadi.procopciuc@nxp.com,
 "moderated list:ARM/STM32 ARCHITECTURE" <linux-arm-kernel@lists.infradead.org>
Subject: [Linux-stm32] [PATCH v5 2/2] clocksource/drivers/nxp-timer: Add the
	System Timer Module for the s32gx platforms
X-BeenThere: linux-stm32@st-md-mailman.stormreply.com
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: <linux-stm32.st-md-mailman.stormreply.com>
List-Unsubscribe: <https://st-md-mailman.stormreply.com/mailman/options/linux-stm32>, 
 <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=unsubscribe>
List-Archive: <http://st-md-mailman.stormreply.com/pipermail/linux-stm32/>
List-Post: <mailto:linux-stm32@st-md-mailman.stormreply.com>
List-Help: <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=help>
List-Subscribe: <https://st-md-mailman.stormreply.com/mailman/listinfo/linux-stm32>, 
 <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linux-stm32-bounces@st-md-mailman.stormreply.com
Sender: "Linux-stm32" <linux-stm32-bounces@st-md-mailman.stormreply.com>

U1RNIHN1cHBvcnRzIGNvbW1vbmx5IHJlcXVpcmVkIHN5c3RlbSBhbmQgYXBwbGljYXRpb24gc29m
dHdhcmUgdGltaW5nCmZ1bmN0aW9ucy4gU1RNIGluY2x1ZGVzIGEgMzItYml0IGNvdW50LXVwIHRp
bWVyIGFuZCBmb3VyIDMyLWJpdApjb21wYXJlIGNoYW5uZWxzIHdpdGggYSBzZXBhcmF0ZSBpbnRl
cnJ1cHQgc291cmNlIGZvciBlYWNoCmNoYW5uZWwuIFRoZSB0aW1lciBpcyBkcml2ZW4gYnkgdGhl
IFNUTSBtb2R1bGUgY2xvY2sgZGl2aWRlZCBieSBhbgo4LWJpdCBwcmVzY2FsZSB2YWx1ZSAoMSB0
byAyNTYpLgoKU1RNIGhhcyB0aGUgZm9sbG93aW5nIGZlYXR1cmVzOgogICAg4oCiIE9uZSAzMi1i
aXQgY291bnQtdXAgdGltZXIgd2l0aCBhbiA4LWJpdCBwcmVzY2FsZXIKICAgIOKAoiBGb3VyIDMy
LWJpdCBjb21wYXJlIGNoYW5uZWxzCiAgICDigKIgQW4gaW5kZXBlbmRlbnQgaW50ZXJydXB0IHNv
dXJjZSBmb3IgZWFjaCBjaGFubmVsCiAgICDigKIgQWJpbGl0eSB0byBzdG9wIHRoZSB0aW1lciBp
biBEZWJ1ZyBtb2RlCgpUaGUgczMyZyBwbGF0Zm9ybSBpcyBkZWNsaW5lZCBpbnRvIHR3byB2ZXJz
aW9ucywgdGhlIHMzMmcyIGFuZCB0aGUKczMyZzMuIFRoZSBmb3JtZXIgaGFzIGEgU1RNIGJsb2Nr
IHdpdGggOCB0aW1lcnMgYW5kIHRoZSBsYXR0ZXIgaGFzIDEyCnRpbWVycy4KClRoZSBwbGF0Zm9y
bSBpcyBkZXNpZ25lZCB0byBoYXZlIG9uZSB1c2FibGUgU1RNIGluc3RhbmNlIHBlciBjb3JlIG9u
CnRoZSBzeXN0ZW0gd2hpY2ggaXMgY29tcG9zZWQgb2YgMyB4IENvcnRleC1NMyArIDQgQ29ydGV4
LUE1MyBmb3IgdGhlCnMzMmcyIGFuZCAzIHggQ29ydGV4LU0zICsgOCBDb3J0ZXgtQTUzIGZvciB0
aGUgczMyZzMuCgpUaGVyZSBpcyBhIHNwZWNpYWwgU1RNIGluc3RhbmNlIGNhbGxlZCBTVE1fVFMg
d2hpY2ggaXMgZGVkaWNhdGVkIHRvCnRoZSB0aW1lc3RhbXAuIFRoZSA3dGggU1RNIGluc3RhbmNl
IFNUTV8wNyBpcyBkaXJlY3RseSB0aWVkIHRvIHRoZQpTVE1fVFMgd2hpY2ggbWVhbnMgaXQgaXMg
bm90IHVzYWJsZSBhcyBhIGNsb2NrZXZlbnQuCgpUaGUgZHJpdmVyIGluc3RhbnRpYXRlIGVhY2gg
U1RNIGRlc2NyaWJlZCBpbiB0aGUgZGV2aWNlIHRyZWUgYXMgYQpjbG9ja3NvdXJjZSBhbmQgYSBj
bG9ja2V2ZW50IGNvbmZvcm1pbmcgdG8gdGhlIHJlZmVyZW5jZSBtYW51YWwgZXZlbgppZiB0aGUg
TGludXggc3lzdGVtIGRvZXMgbm90IHVzZSBhbGwgb2YgdGhlIGNsb2Nrc291cmNlLiBFYWNoCmNs
b2NrZXZlbnQgd2lsbCBoYXZlIGEgY3B1bWFzayBzZXQgZm9yIGEgc3BlY2lmaWMgQ1BVLgoKR2l2
ZW4gdGhlIGNvdW50ZXIgaXMgc2hhcmVkIGJldHdlZW4gdGhlIGNsb2Nrc291cmNlIGFuZCB0aGUK
Y2xvY2tldmVudCwgdGhlIFNUTSBtb2R1bGUgY2FuIG5vdCBiZSBkaXNhYmxlZCBieSBvbmUgb3Ig
YW5vdGhlciBzbwp0aGUgcmVmY291bnRpbmcgbWVjaGFuaXNtIGlzIHVzZWQgdG8gc3RvcCB0aGUg
Y291bnRlciB3aGVuIGl0IHJlYWNoZXMKemVybyBhbmQgdG8gc3RhcnQgaXQgd2hlbiBpdCBpcyBv
bmUuIFRoZSBzdXNwZW5kIGFuZCByZXN1bWUgcmVsaWVzIG9uCnRoZSByZWZjb3VudCB0byBzdG9w
IHRoZSBtb2R1bGUuCgpBcyB0aGUgZGV2aWNlIHRyZWUgd2lsbCBoYXZlIG11bHRpcGxlIFNUTSBl
bnRyaWVzLCB0aGUgZHJpdmVyIGNhbiBiZQpwcm9iZWQgaW4gcGFyYWxsZWwgd2l0aCB0aGUgYXN5
bmMgb3B0aW9uIGJ1dCBpdCBpcyBub3QgZW5hYmxlZAp5ZXQuIEhvd2V2ZXIsIHRoZSBkcml2ZXIg
Y29kZSB0YWtlcyBjYXJlIG9mIHByZXZlbnRpbmcgYSByYWNlIGJ5CnB1dHRpbmcgYSBsb2NrIHRv
IHByb3RlY3QgdGhlIG51bWJlciBvZiBTVE0gaW5zdGFuY2VzIGdsb2JhbCB2YXJpYWJsZQp3aGlj
aCBtZWFucyBpdCBpcyByZWFkeSB0byBzdXBwb3J0IHRoZSBvcHRpb24gd2hlbiBlbm91Z2ggdGVz
dGluZyB3aWxsCmJlIGRvbmUgd2l0aCB0aGUgdW5kZXJseWluZyB0aW1lIGZyYW1ld29yay4KCkNj
OiBHaGVubmFkaSBQcm9jb3BjaXVjIDxnaGVubmFkaS5wcm9jb3BjaXVjQG9zcy5ueHAuY29tPgpD
YzogS3J6eXN6dG9mIEtvemxvd3NraSA8a3J6eXN6dG9mLmtvemxvd3NraUBsaW5hcm8ub3JnPgpD
YzogVGhvbWFzIEZvc3NhdGkgPHRob21hcy5mb3NzYXRpQGxpbmFyby5vcmc+ClN1Z2dlc3RlZC1i
eTogR2hlbm5hZGkgUHJvY29wY2l1YyA8Z2hlbm5hZGkucHJvY29wY2l1Y0BueHAuY29tPgpTaWdu
ZWQtb2ZmLWJ5OiBEYW5pZWwgTGV6Y2FubyA8ZGFuaWVsLmxlemNhbm9AbGluYXJvLm9yZz4KLS0t
CiBkcml2ZXJzL2Nsb2Nrc291cmNlL0tjb25maWcgICAgICAgICB8ICAgOCArCiBkcml2ZXJzL2Ns
b2Nrc291cmNlL01ha2VmaWxlICAgICAgICB8ICAgMiArCiBkcml2ZXJzL2Nsb2Nrc291cmNlL3Rp
bWVyLW54cC1zdG0uYyB8IDQ5NSArKysrKysrKysrKysrKysrKysrKysrKysrKysrCiAzIGZpbGVz
IGNoYW5nZWQsIDUwNSBpbnNlcnRpb25zKCspCiBjcmVhdGUgbW9kZSAxMDA2NDQgZHJpdmVycy9j
bG9ja3NvdXJjZS90aW1lci1ueHAtc3RtLmMKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2Nsb2Nrc291
cmNlL0tjb25maWcgYi9kcml2ZXJzL2Nsb2Nrc291cmNlL0tjb25maWcKaW5kZXggNDg3Yzg1MjU5
OTY3Li4yODYxYjJjODk2MzEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvY2xvY2tzb3VyY2UvS2NvbmZp
ZworKysgYi9kcml2ZXJzL2Nsb2Nrc291cmNlL0tjb25maWcKQEAgLTc2Myw0ICs3NjMsMTIgQEAg
Y29uZmlnIFJBTElOS19USU1FUgogCSAgRW5hYmxlcyBzdXBwb3J0IGZvciBzeXN0ZW0gdGljayBj
b3VudGVyIHByZXNlbnQgb24KIAkgIFJhbGluayBTb0NzIFJUMzM1MiBhbmQgTVQ3NjIwLgogCitj
b25maWcgTlhQX1NUTV9USU1FUgorCWJvb2wgIk5YUCBTeXN0ZW0gVGltZXIgTW9kdWxlIGRyaXZl
ciIKKwlkZXBlbmRzIG9uIEFSQ0hfUzMyIHx8IENPTVBJTEVfVEVTVAorCXNlbGVjdCBDTEtTUkNf
TU1JTworCWhlbHAKKyAgICAgICAgICBFbmFibGVzIHRoZSBzdXBwb3J0IGZvciBOWFAgU3lzdGVt
IFRpbWVyIE1vZHVsZSBmb3VuZCBpbiB0aGUKKyAgICAgICAgICBzMzJnIE5YUCBwbGF0Zm9ybSBz
ZXJpZXMuCisKIGVuZG1lbnUKZGlmZiAtLWdpdCBhL2RyaXZlcnMvY2xvY2tzb3VyY2UvTWFrZWZp
bGUgYi9kcml2ZXJzL2Nsb2Nrc291cmNlL01ha2VmaWxlCmluZGV4IDQzZWYxNmE0ZWZhNi4uYzNh
OTJlNmI5Zjk0IDEwMDY0NAotLS0gYS9kcml2ZXJzL2Nsb2Nrc291cmNlL01ha2VmaWxlCisrKyBi
L2RyaXZlcnMvY2xvY2tzb3VyY2UvTWFrZWZpbGUKQEAgLTkyLDMgKzkyLDUgQEAgb2JqLSQoQ09O
RklHX0dYUF9USU1FUikJCQkrPSB0aW1lci1neHAubwogb2JqLSQoQ09ORklHX0NMS1NSQ19MT09O
R1NPTjFfUFdNKQkrPSB0aW1lci1sb29uZ3NvbjEtcHdtLm8KIG9iai0kKENPTkZJR19FUDkzWFhf
VElNRVIpCQkrPSB0aW1lci1lcDkzeHgubwogb2JqLSQoQ09ORklHX1JBTElOS19USU1FUikJCSs9
IHRpbWVyLXJhbGluay5vCitvYmotJChDT05GSUdfTlhQX1NUTV9USU1FUikJCSs9IHRpbWVyLW54
cC1zdG0ubworCmRpZmYgLS1naXQgYS9kcml2ZXJzL2Nsb2Nrc291cmNlL3RpbWVyLW54cC1zdG0u
YyBiL2RyaXZlcnMvY2xvY2tzb3VyY2UvdGltZXItbnhwLXN0bS5jCm5ldyBmaWxlIG1vZGUgMTAw
NjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uZDdjY2Y5MDAxNzI5Ci0tLSAvZGV2L251bGwKKysrIGIv
ZHJpdmVycy9jbG9ja3NvdXJjZS90aW1lci1ueHAtc3RtLmMKQEAgLTAsMCArMSw0OTUgQEAKKy8v
IFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wLW9yLWxhdGVyCisvKgorICogQ29weXJp
Z2h0IDIwMTYgRnJlZXNjYWxlIFNlbWljb25kdWN0b3IsIEluYy4KKyAqIENvcHlyaWdodCAyMDE4
LDIwMjEtMjAyNSBOWFAKKyAqCisgKiBOWFAgU3lzdGVtIFRpbWVyIE1vZHVsZToKKyAqCisgKiAg
U1RNIHN1cHBvcnRzIGNvbW1vbmx5IHJlcXVpcmVkIHN5c3RlbSBhbmQgYXBwbGljYXRpb24gc29m
dHdhcmUKKyAqICB0aW1pbmcgZnVuY3Rpb25zLiBTVE0gaW5jbHVkZXMgYSAzMi1iaXQgY291bnQt
dXAgdGltZXIgYW5kIGZvdXIKKyAqICAzMi1iaXQgY29tcGFyZSBjaGFubmVscyB3aXRoIGEgc2Vw
YXJhdGUgaW50ZXJydXB0IHNvdXJjZSBmb3IgZWFjaAorICogIGNoYW5uZWwuIFRoZSB0aW1lciBp
cyBkcml2ZW4gYnkgdGhlIFNUTSBtb2R1bGUgY2xvY2sgZGl2aWRlZCBieSBhbgorICogIDgtYml0
IHByZXNjYWxlIHZhbHVlICgxIHRvIDI1NikuIEl0IGhhcyBhYmlsaXR5IHRvIHN0b3AgdGhlIHRp
bWVyCisgKiAgaW4gRGVidWcgbW9kZQorICovCisjaW5jbHVkZSA8bGludXgvY2xrLmg+CisjaW5j
bHVkZSA8bGludXgvY2xvY2tjaGlwcy5oPgorI2luY2x1ZGUgPGxpbnV4L2NwdWhvdHBsdWcuaD4K
KyNpbmNsdWRlIDxsaW51eC9pbnRlcnJ1cHQuaD4KKyNpbmNsdWRlIDxsaW51eC9tb2R1bGUuaD4K
KyNpbmNsdWRlIDxsaW51eC9vZl9pcnEuaD4KKyNpbmNsdWRlIDxsaW51eC9wbGF0Zm9ybV9kZXZp
Y2UuaD4KKyNpbmNsdWRlIDxsaW51eC9zY2hlZF9jbG9jay5oPgorI2luY2x1ZGUgPGxpbnV4L3Vu
aXRzLmg+CisKKyNkZWZpbmUgU1RNX0NSKF9fYmFzZSkJCShfX2Jhc2UpCisKKyNkZWZpbmUgU1RN
X0NSX1RFTgkJQklUKDApCisjZGVmaW5lIFNUTV9DUl9GUloJCUJJVCgxKQorI2RlZmluZSBTVE1f
Q1JfQ1BTX09GRlNFVAk4dQorI2RlZmluZSBTVE1fQ1JfQ1BTX01BU0sJCUdFTk1BU0soMTUsIFNU
TV9DUl9DUFNfT0ZGU0VUKQorCisjZGVmaW5lIFNUTV9DTlQoX19iYXNlKQkJKChfX2Jhc2UpICsg
MHgwNCkKKworI2RlZmluZSBTVE1fQ0NSMChfX2Jhc2UpCSgoX19iYXNlKSArIDB4MTApCisjZGVm
aW5lIFNUTV9DQ1IxKF9fYmFzZSkJKChfX2Jhc2UpICsgMHgyMCkKKyNkZWZpbmUgU1RNX0NDUjIo
X19iYXNlKQkoKF9fYmFzZSkgKyAweDMwKQorI2RlZmluZSBTVE1fQ0NSMyhfX2Jhc2UpCSgoX19i
YXNlKSArIDB4NDApCisKKyNkZWZpbmUgU1RNX0NDUl9DRU4JCUJJVCgwKQorCisjZGVmaW5lIFNU
TV9DSVIwKF9fYmFzZSkJKChfX2Jhc2UpICsgMHgxNCkKKyNkZWZpbmUgU1RNX0NJUjEoX19iYXNl
KQkoKF9fYmFzZSkgKyAweDI0KQorI2RlZmluZSBTVE1fQ0lSMihfX2Jhc2UpCSgoX19iYXNlKSAr
IDB4MzQpCisjZGVmaW5lIFNUTV9DSVIzKF9fYmFzZSkJKChfX2Jhc2UpICsgMHg0NCkKKworI2Rl
ZmluZSBTVE1fQ0lSX0NJRgkJQklUKDApCisKKyNkZWZpbmUgU1RNX0NNUDAoX19iYXNlKQkoKF9f
YmFzZSkgKyAweDE4KQorI2RlZmluZSBTVE1fQ01QMShfX2Jhc2UpCSgoX19iYXNlKSArIDB4Mjgp
CisjZGVmaW5lIFNUTV9DTVAyKF9fYmFzZSkJKChfX2Jhc2UpICsgMHgzOCkKKyNkZWZpbmUgU1RN
X0NNUDMoX19iYXNlKQkoKF9fYmFzZSkgKyAweDQ4KQorCisjZGVmaW5lIFNUTV9FTkFCTEVfTUFT
SwkoU1RNX0NSX0ZSWiB8IFNUTV9DUl9URU4pCisKK3N0cnVjdCBzdG1fdGltZXIgeworCXZvaWQg
X19pb21lbSAqYmFzZTsKKwl1bnNpZ25lZCBsb25nIHJhdGU7CisJdW5zaWduZWQgbG9uZyBkZWx0
YTsKKwl1bnNpZ25lZCBsb25nIGNvdW50ZXI7CisJc3RydWN0IGNsb2NrX2V2ZW50X2RldmljZSBj
ZWQ7CisJc3RydWN0IGNsb2Nrc291cmNlIGNzOworCWF0b21pY190IHJlZmNudDsKK307CisKK3N0
YXRpYyBERUZJTkVfUEVSX0NQVShzdHJ1Y3Qgc3RtX3RpbWVyICosIHN0bV90aW1lcnMpOworCitz
dGF0aWMgc3RydWN0IHN0bV90aW1lciAqc3RtX3NjaGVkX2Nsb2NrOworCisvKgorICogR2xvYmFs
IHN0cnVjdHVyZSBmb3IgbXVsdGlwbGUgU1RNcyBpbml0aWFsaXphdGlvbgorICovCitzdGF0aWMg
aW50IHN0bV9pbnN0YW5jZXM7CisKKy8qCisgKiBUaGlzIGdsb2JhbCBsb2NrIGlzIHVzZWQgdG8g
cHJldmVudCByYWNlIGNvbmRpdGlvbnMgd2l0aCB0aGUKKyAqIHN0bV9pbnN0YW5jZXMgaW4gY2Fz
ZSB0aGUgZHJpdmVyIGlzIHVzaW5nIHRoZSBBU1lOQyBvcHRpb24KKyAqLworc3RhdGljIERFRklO
RV9NVVRFWChzdG1faW5zdGFuY2VzX2xvY2spOworCitERUZJTkVfR1VBUkQoc3RtX2luc3RhbmNl
cywgc3RydWN0IG11dGV4ICosIG11dGV4X2xvY2soX1QpLCBtdXRleF91bmxvY2soX1QpKQorCitz
dGF0aWMgc3RydWN0IHN0bV90aW1lciAqY3NfdG9fc3RtKHN0cnVjdCBjbG9ja3NvdXJjZSAqY3Mp
Cit7CisJcmV0dXJuIGNvbnRhaW5lcl9vZihjcywgc3RydWN0IHN0bV90aW1lciwgY3MpOworfQor
CitzdGF0aWMgc3RydWN0IHN0bV90aW1lciAqY2VkX3RvX3N0bShzdHJ1Y3QgY2xvY2tfZXZlbnRf
ZGV2aWNlICpjZWQpCit7CisJcmV0dXJuIGNvbnRhaW5lcl9vZihjZWQsIHN0cnVjdCBzdG1fdGlt
ZXIsIGNlZCk7Cit9CisKK3N0YXRpYyB1NjQgbm90cmFjZSBueHBfc3RtX3JlYWRfc2NoZWRfY2xv
Y2sodm9pZCkKK3sKKwlyZXR1cm4gcmVhZGwoU1RNX0NOVChzdG1fc2NoZWRfY2xvY2stPmJhc2Up
KTsKK30KKworc3RhdGljIHUzMiBueHBfc3RtX2Nsb2Nrc291cmNlX2dldGNudChzdHJ1Y3Qgc3Rt
X3RpbWVyICpzdG1fdGltZXIpCit7CisJcmV0dXJuIHJlYWRsKFNUTV9DTlQoc3RtX3RpbWVyLT5i
YXNlKSk7Cit9CisKK3N0YXRpYyB2b2lkIG54cF9zdG1fY2xvY2tzb3VyY2Vfc2V0Y250KHN0cnVj
dCBzdG1fdGltZXIgKnN0bV90aW1lciwgdTMyIGNudCkKK3sKKwl3cml0ZWwoY250LCBTVE1fQ05U
KHN0bV90aW1lci0+YmFzZSkpOworfQorCitzdGF0aWMgdTY0IG54cF9zdG1fY2xvY2tzb3VyY2Vf
cmVhZChzdHJ1Y3QgY2xvY2tzb3VyY2UgKmNzKQoreworCXN0cnVjdCBzdG1fdGltZXIgKnN0bV90
aW1lciA9IGNzX3RvX3N0bShjcyk7CisKKwlyZXR1cm4gKHU2NClueHBfc3RtX2Nsb2Nrc291cmNl
X2dldGNudChzdG1fdGltZXIpOworfQorCitzdGF0aWMgdm9pZCBueHBfc3RtX21vZHVsZV9lbmFi
bGUoc3RydWN0IHN0bV90aW1lciAqc3RtX3RpbWVyKQoreworCXUzMiByZWc7CisKKwlyZWcgPSBy
ZWFkbChTVE1fQ1Ioc3RtX3RpbWVyLT5iYXNlKSk7CisKKwlyZWcgfD0gU1RNX0VOQUJMRV9NQVNL
OworCisJd3JpdGVsKHJlZywgU1RNX0NSKHN0bV90aW1lci0+YmFzZSkpOworfQorCitzdGF0aWMg
dm9pZCBueHBfc3RtX21vZHVsZV9kaXNhYmxlKHN0cnVjdCBzdG1fdGltZXIgKnN0bV90aW1lcikK
K3sKKwl1MzIgcmVnOworCisJcmVnID0gcmVhZGwoU1RNX0NSKHN0bV90aW1lci0+YmFzZSkpOwor
CisJcmVnICY9IH5TVE1fRU5BQkxFX01BU0s7CisKKwl3cml0ZWwocmVnLCBTVE1fQ1Ioc3RtX3Rp
bWVyLT5iYXNlKSk7Cit9CisKK3N0YXRpYyB2b2lkIG54cF9zdG1fbW9kdWxlX3B1dChzdHJ1Y3Qg
c3RtX3RpbWVyICpzdG1fdGltZXIpCit7CisJaWYgKGF0b21pY19kZWNfYW5kX3Rlc3QoJnN0bV90
aW1lci0+cmVmY250KSkKKwkJbnhwX3N0bV9tb2R1bGVfZGlzYWJsZShzdG1fdGltZXIpOworfQor
CitzdGF0aWMgdm9pZCBueHBfc3RtX21vZHVsZV9nZXQoc3RydWN0IHN0bV90aW1lciAqc3RtX3Rp
bWVyKQoreworCWlmIChhdG9taWNfaW5jX3JldHVybigmc3RtX3RpbWVyLT5yZWZjbnQpID09IDEp
CisJCW54cF9zdG1fbW9kdWxlX2VuYWJsZShzdG1fdGltZXIpOworfQorCitzdGF0aWMgaW50IG54
cF9zdG1fY2xvY2tzb3VyY2VfZW5hYmxlKHN0cnVjdCBjbG9ja3NvdXJjZSAqY3MpCit7CisJc3Ry
dWN0IHN0bV90aW1lciAqc3RtX3RpbWVyID0gY3NfdG9fc3RtKGNzKTsKKworCW54cF9zdG1fbW9k
dWxlX2dldChzdG1fdGltZXIpOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyB2b2lkIG54cF9z
dG1fY2xvY2tzb3VyY2VfZGlzYWJsZShzdHJ1Y3QgY2xvY2tzb3VyY2UgKmNzKQoreworCXN0cnVj
dCBzdG1fdGltZXIgKnN0bV90aW1lciA9IGNzX3RvX3N0bShjcyk7CisKKwlueHBfc3RtX21vZHVs
ZV9wdXQoc3RtX3RpbWVyKTsKK30KKworc3RhdGljIHZvaWQgbnhwX3N0bV9jbG9ja3NvdXJjZV9z
dXNwZW5kKHN0cnVjdCBjbG9ja3NvdXJjZSAqY3MpCit7CisJc3RydWN0IHN0bV90aW1lciAqc3Rt
X3RpbWVyID0gY3NfdG9fc3RtKGNzKTsKKworCW54cF9zdG1fY2xvY2tzb3VyY2VfZGlzYWJsZShj
cyk7CisJc3RtX3RpbWVyLT5jb3VudGVyID0gbnhwX3N0bV9jbG9ja3NvdXJjZV9nZXRjbnQoc3Rt
X3RpbWVyKTsKK30KKworc3RhdGljIHZvaWQgbnhwX3N0bV9jbG9ja3NvdXJjZV9yZXN1bWUoc3Ry
dWN0IGNsb2Nrc291cmNlICpjcykKK3sKKwlzdHJ1Y3Qgc3RtX3RpbWVyICpzdG1fdGltZXIgPSBj
c190b19zdG0oY3MpOworCisJbnhwX3N0bV9jbG9ja3NvdXJjZV9zZXRjbnQoc3RtX3RpbWVyLCBz
dG1fdGltZXItPmNvdW50ZXIpOworCW54cF9zdG1fY2xvY2tzb3VyY2VfZW5hYmxlKGNzKTsKK30K
Kworc3RhdGljIHZvaWQgX19pbml0IGRldm1fY2xvY2tzb3VyY2VfdW5yZWdpc3Rlcih2b2lkICpk
YXRhKQoreworCXN0cnVjdCBzdG1fdGltZXIgKnN0bV90aW1lciA9IGRhdGE7CisKKwljbG9ja3Nv
dXJjZV91bnJlZ2lzdGVyKCZzdG1fdGltZXItPmNzKTsKK30KKworc3RhdGljIGludCBfX2luaXQg
bnhwX3N0bV9jbG9ja3NvdXJjZV9pbml0KHN0cnVjdCBkZXZpY2UgKmRldiwgc3RydWN0IHN0bV90
aW1lciAqc3RtX3RpbWVyLAorCQkJCQkgICBjb25zdCBjaGFyICpuYW1lLCB2b2lkIF9faW9tZW0g
KmJhc2UsIHN0cnVjdCBjbGsgKmNsaykKK3sKKwlpbnQgcmV0OworCisJc3RtX3RpbWVyLT5iYXNl
ID0gYmFzZTsKKwlzdG1fdGltZXItPnJhdGUgPSBjbGtfZ2V0X3JhdGUoY2xrKTsKKworCXN0bV90
aW1lci0+Y3MubmFtZSA9IG5hbWU7CisJc3RtX3RpbWVyLT5jcy5yYXRpbmcgPSA0NjA7CisJc3Rt
X3RpbWVyLT5jcy5yZWFkID0gbnhwX3N0bV9jbG9ja3NvdXJjZV9yZWFkOworCXN0bV90aW1lci0+
Y3MuZW5hYmxlID0gbnhwX3N0bV9jbG9ja3NvdXJjZV9lbmFibGU7CisJc3RtX3RpbWVyLT5jcy5k
aXNhYmxlID0gbnhwX3N0bV9jbG9ja3NvdXJjZV9kaXNhYmxlOworCXN0bV90aW1lci0+Y3Muc3Vz
cGVuZCA9IG54cF9zdG1fY2xvY2tzb3VyY2Vfc3VzcGVuZDsKKwlzdG1fdGltZXItPmNzLnJlc3Vt
ZSA9IG54cF9zdG1fY2xvY2tzb3VyY2VfcmVzdW1lOworCXN0bV90aW1lci0+Y3MubWFzayA9IENM
T0NLU09VUkNFX01BU0soMzIpOworCXN0bV90aW1lci0+Y3MuZmxhZ3MgPSBDTE9DS19TT1VSQ0Vf
SVNfQ09OVElOVU9VUzsKKworCXJldCA9IGNsb2Nrc291cmNlX3JlZ2lzdGVyX2h6KCZzdG1fdGlt
ZXItPmNzLCBzdG1fdGltZXItPnJhdGUpOworCWlmIChyZXQpCisJCXJldHVybiByZXQ7CisKKwly
ZXQgPSBkZXZtX2FkZF9hY3Rpb25fb3JfcmVzZXQoZGV2LCBkZXZtX2Nsb2Nrc291cmNlX3VucmVn
aXN0ZXIsIHN0bV90aW1lcik7CisJaWYgKHJldCkgeworCQljbG9ja3NvdXJjZV91bnJlZ2lzdGVy
KCZzdG1fdGltZXItPmNzKTsKKwkJcmV0dXJuIHJldDsKKwl9CisKKwlzdG1fc2NoZWRfY2xvY2sg
PSBzdG1fdGltZXI7CisKKwlzY2hlZF9jbG9ja19yZWdpc3RlcihueHBfc3RtX3JlYWRfc2NoZWRf
Y2xvY2ssIDMyLCBzdG1fdGltZXItPnJhdGUpOworCisJZGV2X2RiZyhkZXYsICJSZWdpc3RlcmVk
IGNsb2Nrc291cmNlICVzXG4iLCBuYW1lKTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50
IG54cF9zdG1fY2xvY2tldmVudF9yZWFkX2NvdW50ZXIoc3RydWN0IHN0bV90aW1lciAqc3RtX3Rp
bWVyKQoreworCXJldHVybiByZWFkbChTVE1fQ05UKHN0bV90aW1lci0+YmFzZSkpOworfQorCitz
dGF0aWMgdm9pZCBueHBfc3RtX2Nsb2NrZXZlbnRfZGlzYWJsZShzdHJ1Y3Qgc3RtX3RpbWVyICpz
dG1fdGltZXIpCit7CisJd3JpdGVsKDAsIFNUTV9DQ1IwKHN0bV90aW1lci0+YmFzZSkpOworfQor
CitzdGF0aWMgdm9pZCBueHBfc3RtX2Nsb2NrZXZlbnRfZW5hYmxlKHN0cnVjdCBzdG1fdGltZXIg
KnN0bV90aW1lcikKK3sKKwl3cml0ZWwoU1RNX0NDUl9DRU4sIFNUTV9DQ1IwKHN0bV90aW1lci0+
YmFzZSkpOworfQorCitzdGF0aWMgaW50IG54cF9zdG1fY2xvY2tldmVudF9zaHV0ZG93bihzdHJ1
Y3QgY2xvY2tfZXZlbnRfZGV2aWNlICpjZWQpCit7CisJc3RydWN0IHN0bV90aW1lciAqc3RtX3Rp
bWVyID0gY2VkX3RvX3N0bShjZWQpOworCisJbnhwX3N0bV9jbG9ja2V2ZW50X2Rpc2FibGUoc3Rt
X3RpbWVyKTsKKworCXJldHVybiAwOworfQorCitzdGF0aWMgaW50IG54cF9zdG1fY2xvY2tldmVu
dF9zZXRfbmV4dF9ldmVudCh1bnNpZ25lZCBsb25nIGRlbHRhLCBzdHJ1Y3QgY2xvY2tfZXZlbnRf
ZGV2aWNlICpjZWQpCit7CisJc3RydWN0IHN0bV90aW1lciAqc3RtX3RpbWVyID0gY2VkX3RvX3N0
bShjZWQpOworCXUzMiB2YWw7CisKKwlueHBfc3RtX2Nsb2NrZXZlbnRfZGlzYWJsZShzdG1fdGlt
ZXIpOworCisJc3RtX3RpbWVyLT5kZWx0YSA9IGRlbHRhOworCisJdmFsID0gbnhwX3N0bV9jbG9j
a2V2ZW50X3JlYWRfY291bnRlcihzdG1fdGltZXIpICsgZGVsdGE7CisKKwl3cml0ZWwodmFsLCBT
VE1fQ01QMChzdG1fdGltZXItPmJhc2UpKTsKKworCS8qCisJICogVGhlIGNvdW50ZXIgaXMgc2hh
cmVkIGFjcm9zcyB0aGUgY2hhbm5lbHMgYW5kIGNhbiBub3QgYmUKKwkgKiBzdG9wcGVkIHdoaWxl
IHdlIGFyZSBzZXR0aW5nIHRoZSBuZXh0IGV2ZW50LiBJZiB0aGUgZGVsdGEKKwkgKiBpcyB2ZXJ5
IHNtYWxsIGl0IGlzIHBvc3NpYmxlIHRoZSBjb3VudGVyIGluY3JlYXNlcyBhYm92ZQorCSAqIHRo
ZSBjb21wdXRlZCAndmFsJy4gVGhlIG1pbl9kZWx0YSB2YWx1ZSBzcGVjaWZpZWQgd2hlbgorCSAq
IHJlZ2lzdGVyaW5nIHRoZSBjbG9ja2V2ZW50IHdpbGwgcHJldmVudCB0aGF0LiBUaGUgc2Vjb25k
CisJICogY2FzZSBpcyBpZiB0aGUgY291bnRlciB3cmFwcyB3aGlsZSB3ZSBjb21wdXRlIHRoZSAn
dmFsJyBhbmQKKwkgKiBiZWZvcmUgd3JpdGluZyB0aGUgY29tcGFyYXRvciByZWdpc3Rlci4gV2Ug
cmVhZCB0aGUgY291bnRlciwKKwkgKiBjaGVjayBpZiB3ZSBhcmUgYmFjayBpbiB0aW1lIGFuZCBh
Ym9ydCB0aGUgdGltZXIgd2l0aCAtRVRJTUUuCisJICovCisJaWYgKHZhbCA+IG54cF9zdG1fY2xv
Y2tldmVudF9yZWFkX2NvdW50ZXIoc3RtX3RpbWVyKSArIGRlbHRhKQorCQlyZXR1cm4gLUVUSU1F
OworCisJbnhwX3N0bV9jbG9ja2V2ZW50X2VuYWJsZShzdG1fdGltZXIpOworCisJcmV0dXJuIDA7
Cit9CisKK3N0YXRpYyBpbnQgbnhwX3N0bV9jbG9ja2V2ZW50X3NldF9wZXJpb2RpYyhzdHJ1Y3Qg
Y2xvY2tfZXZlbnRfZGV2aWNlICpjZWQpCit7CisJc3RydWN0IHN0bV90aW1lciAqc3RtX3RpbWVy
ID0gY2VkX3RvX3N0bShjZWQpOworCisJcmV0dXJuIG54cF9zdG1fY2xvY2tldmVudF9zZXRfbmV4
dF9ldmVudChzdG1fdGltZXItPnJhdGUsIGNlZCk7Cit9CisKK3N0YXRpYyB2b2lkIG54cF9zdG1f
Y2xvY2tldmVudF9zdXNwZW5kKHN0cnVjdCBjbG9ja19ldmVudF9kZXZpY2UgKmNlZCkKK3sKKwlz
dHJ1Y3Qgc3RtX3RpbWVyICpzdG1fdGltZXIgPSBjZWRfdG9fc3RtKGNlZCk7CisKKwlueHBfc3Rt
X21vZHVsZV9wdXQoc3RtX3RpbWVyKTsKK30KKworc3RhdGljIHZvaWQgbnhwX3N0bV9jbG9ja2V2
ZW50X3Jlc3VtZShzdHJ1Y3QgY2xvY2tfZXZlbnRfZGV2aWNlICpjZWQpCit7CisJc3RydWN0IHN0
bV90aW1lciAqc3RtX3RpbWVyID0gY2VkX3RvX3N0bShjZWQpOworCisJbnhwX3N0bV9tb2R1bGVf
Z2V0KHN0bV90aW1lcik7Cit9CisKK3N0YXRpYyBpbnQgX19pbml0IG54cF9zdG1fY2xvY2tldmVu
dF9wZXJfY3B1X2luaXQoc3RydWN0IGRldmljZSAqZGV2LCBzdHJ1Y3Qgc3RtX3RpbWVyICpzdG1f
dGltZXIsCisJCQkJCQkgIGNvbnN0IGNoYXIgKm5hbWUsIHZvaWQgX19pb21lbSAqYmFzZSwgaW50
IGlycSwKKwkJCQkJCSAgc3RydWN0IGNsayAqY2xrLCBpbnQgY3B1KQoreworCXN0bV90aW1lci0+
YmFzZSA9IGJhc2U7CisJc3RtX3RpbWVyLT5yYXRlID0gY2xrX2dldF9yYXRlKGNsayk7CisKKwlz
dG1fdGltZXItPmNlZC5uYW1lID0gbmFtZTsKKwlzdG1fdGltZXItPmNlZC5mZWF0dXJlcyA9IENM
T0NLX0VWVF9GRUFUX1BFUklPRElDIHwgQ0xPQ0tfRVZUX0ZFQVRfT05FU0hPVDsKKwlzdG1fdGlt
ZXItPmNlZC5zZXRfc3RhdGVfc2h1dGRvd24gPSBueHBfc3RtX2Nsb2NrZXZlbnRfc2h1dGRvd247
CisJc3RtX3RpbWVyLT5jZWQuc2V0X3N0YXRlX3BlcmlvZGljID0gbnhwX3N0bV9jbG9ja2V2ZW50
X3NldF9wZXJpb2RpYzsKKwlzdG1fdGltZXItPmNlZC5zZXRfbmV4dF9ldmVudCA9IG54cF9zdG1f
Y2xvY2tldmVudF9zZXRfbmV4dF9ldmVudDsKKwlzdG1fdGltZXItPmNlZC5zdXNwZW5kID0gbnhw
X3N0bV9jbG9ja2V2ZW50X3N1c3BlbmQ7CisJc3RtX3RpbWVyLT5jZWQucmVzdW1lID0gbnhwX3N0
bV9jbG9ja2V2ZW50X3Jlc3VtZTsKKwlzdG1fdGltZXItPmNlZC5jcHVtYXNrID0gY3B1bWFza19v
ZihjcHUpOworCXN0bV90aW1lci0+Y2VkLnJhdGluZyA9IDQ2MDsKKwlzdG1fdGltZXItPmNlZC5p
cnEgPSBpcnE7CisKKwlwZXJfY3B1KHN0bV90aW1lcnMsIGNwdSkgPSBzdG1fdGltZXI7CisKKwlu
eHBfc3RtX21vZHVsZV9nZXQoc3RtX3RpbWVyKTsKKworCWRldl9kYmcoZGV2LCAiSW5pdGlhbGl6
ZWQgcGVyIGNwdSBjbG9ja2V2ZW50IG5hbWU9JXMsIGlycT0lZCwgY3B1PSVkXG4iLCBuYW1lLCBp
cnEsIGNwdSk7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGludCBueHBfc3RtX2Nsb2NrZXZl
bnRfc3RhcnRpbmdfY3B1KHVuc2lnbmVkIGludCBjcHUpCit7CisJc3RydWN0IHN0bV90aW1lciAq
c3RtX3RpbWVyID0gcGVyX2NwdShzdG1fdGltZXJzLCBjcHUpOworCWludCByZXQ7CisKKwlpZiAo
V0FSTl9PTighc3RtX3RpbWVyKSkKKwkJcmV0dXJuIC1FRkFVTFQ7CisKKwlyZXQgPSBpcnFfZm9y
Y2VfYWZmaW5pdHkoc3RtX3RpbWVyLT5jZWQuaXJxLCBjcHVtYXNrX29mKGNwdSkpOworCWlmIChy
ZXQpCisJCXJldHVybiByZXQ7CisKKwkvKgorCSAqIFRoZSB0aW1pbmdzIG1lYXN1cmVtZW50IHNo
b3cgcmVhZGluZyB0aGUgY291bnRlciByZWdpc3RlcgorCSAqIGFuZCB3cml0aW5nIHRvIHRoZSBj
b21wYXJhdG9yIHJlZ2lzdGVyIHRha2VzIGFzIGEgbWF4aW11bQorCSAqIHZhbHVlIDExMDAgbnMg
YXQgMTMzTUh6IHJhdGUgZnJlcXVlbmN5LiBUaGUgdGltZXIgbXVzdCBiZQorCSAqIHNldCBhYm92
ZSB0aGlzIHZhbHVlIGFuZCB0byBiZSBzZWN1cmUgd2Ugc2V0IHRoZSBtaW5pbXVtCisJICogdmFs
dWUgZXF1YWwgdG8gMjAwMG5zLCBzbyAydXMuCisJICoKKwkgKiBtaW5pbXVtIHRpY2tzID0gKHJh
dGUgLyBNSUNSTykgKiAyCisJICovCisJY2xvY2tldmVudHNfY29uZmlnX2FuZF9yZWdpc3Rlcigm
c3RtX3RpbWVyLT5jZWQsIHN0bV90aW1lci0+cmF0ZSwKKwkJCQkJKHN0bV90aW1lci0+cmF0ZSAv
IE1JQ1JPKSAqIDIsIFVMT05HX01BWCk7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIGlycXJl
dHVybl90IG54cF9zdG1fbW9kdWxlX2ludGVycnVwdChpbnQgaXJxLCB2b2lkICpkZXZfaWQpCit7
CisJc3RydWN0IHN0bV90aW1lciAqc3RtX3RpbWVyID0gZGV2X2lkOworCXN0cnVjdCBjbG9ja19l
dmVudF9kZXZpY2UgKmNlZCA9ICZzdG1fdGltZXItPmNlZDsKKwl1MzIgdmFsOworCisJLyoKKwkg
KiBUaGUgaW50ZXJydXB0IGlzIHNoYXJlZCBhY3Jvc3MgdGhlIGNoYW5uZWxzIGluIHRoZQorCSAq
IG1vZHVsZS4gQnV0IHRoaXMgb25lIGlzIGNvbmZpZ3VyZWQgdG8gcnVuIG9ubHkgb25lIGNoYW5u
ZWwsCisJICogY29uc2VxdWVudGx5IGl0IGlzIHBvaW50bGVzcyB0byB0ZXN0IHRoZSBpbnRlcnJ1
cHQgZmxhZ3MKKwkgKiBiZWZvcmUgYW5kIHdlIGNhbiBkaXJlY3RseSByZXNldCB0aGUgY2hhbm5l
bCAwIGlycSBmbGFnCisJICogcmVnaXN0ZXIuCisJICovCisJd3JpdGVsKFNUTV9DSVJfQ0lGLCBT
VE1fQ0lSMChzdG1fdGltZXItPmJhc2UpKTsKKworCS8qCisJICogVXBkYXRlIFNUTV9DTVAgdmFs
dWUgdXNpbmcgdGhlIGNvdW50ZXIgdmFsdWUKKwkgKi8KKwl2YWwgPSBueHBfc3RtX2Nsb2NrZXZl
bnRfcmVhZF9jb3VudGVyKHN0bV90aW1lcikgKyBzdG1fdGltZXItPmRlbHRhOworCisJd3JpdGVs
KHZhbCwgU1RNX0NNUDAoc3RtX3RpbWVyLT5iYXNlKSk7CisKKwkvKgorCSAqIHN0bSBoYXJkd2Fy
ZSBkb2Vzbid0IHN1cHBvcnQgb25lc2hvdCwgaXQgd2lsbCBnZW5lcmF0ZSBhbgorCSAqIGludGVy
cnVwdCBhbmQgc3RhcnQgdGhlIGNvdW50ZXIgYWdhaW4gc28gc29mdHdhcmUgbmVlZHMgdG8KKwkg
KiBkaXNhYmxlIHRoZSB0aW1lciB0byBzdG9wIHRoZSBjb3VudGVyIGxvb3AgaW4gT05FU0hPVCBt
b2RlLgorCSAqLworCWlmIChsaWtlbHkoY2xvY2tldmVudF9zdGF0ZV9vbmVzaG90KGNlZCkpKQor
CQlueHBfc3RtX2Nsb2NrZXZlbnRfZGlzYWJsZShzdG1fdGltZXIpOworCisJY2VkLT5ldmVudF9o
YW5kbGVyKGNlZCk7CisKKwlyZXR1cm4gSVJRX0hBTkRMRUQ7Cit9CisKK3N0YXRpYyBpbnQgX19p
bml0IG54cF9zdG1fdGltZXJfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKK3sK
KwlzdHJ1Y3Qgc3RtX3RpbWVyICpzdG1fdGltZXI7CisJc3RydWN0IGRldmljZSAqZGV2ID0gJnBk
ZXYtPmRldjsKKwlzdHJ1Y3QgZGV2aWNlX25vZGUgKm5wID0gZGV2LT5vZl9ub2RlOworCWNvbnN0
IGNoYXIgKm5hbWUgPSBvZl9ub2RlX2Z1bGxfbmFtZShucCk7CisJc3RydWN0IGNsayAqY2xrOwor
CXZvaWQgX19pb21lbSAqYmFzZTsKKwlpbnQgaXJxLCByZXQ7CisKKwkvKgorCSAqIFRoZSBkZXZp
Y2UgdHJlZSBjYW4gaGF2ZSBtdWx0aXBsZSBTVE0gbm9kZXMgZGVzY3JpYmVkLCBzbworCSAqIGl0
IG1ha2VzIHRoaXMgZHJpdmVyIGEgZ29vZCBjYW5kaWRhdGUgZm9yIHRoZSBhc3luYyBwcm9iZS4K
KwkgKiBJdCBpcyBzdGlsbCB1bmNsZWFyIGlmIHRoZSB0aW1lIGZyYW1ld29yayBjb3JyZWN0bHkg
aGFuZGxlcworCSAqIHBhcmFsbGVsIGxvYWRpbmcgb2YgdGhlIHRpbWVycyBidXQgYXQgbGVhc3Qg
dGhpcyBkcml2ZXIgaXMKKwkgKiByZWFkeSB0byBzdXBwb3J0IHRoZSBvcHRpb24uCisJICovCisJ
Z3VhcmQoc3RtX2luc3RhbmNlcykoJnN0bV9pbnN0YW5jZXNfbG9jayk7CisKKwkvKgorCSAqIFRo
ZSBTMzJHeCBhcmUgU29DcyBmZWF0dXJpbmcgYSBkaXZlcnNlIHNldCBvZiBjb3Jlcy4gTGludXgK
KwkgKiBpcyBleHBlY3RlZCB0byBydW4gb24gQ29ydGV4LUE1MyBjb3Jlcywgd2hpbGUgb3RoZXIK
KwkgKiBzb2Z0d2FyZSBzdGFja3Mgd2lsbCBvcGVyYXRlIG9uIENvcnRleC1NIGNvcmVzLiBUaGUg
bnVtYmVyCisJICogb2YgU1RNIGluc3RhbmNlcyBoYXMgYmVlbiBzaXplZCB0byBpbmNsdWRlIGF0
IG1vc3Qgb25lCisJICogaW5zdGFuY2UgcGVyIGNvcmUuCisJICoKKwkgKiBBcyB3ZSBuZWVkIGEg
Y2xvY2tzb3VyY2UgYW5kIGEgY2xvY2tldmVudCBwZXIgY3B1LCB3ZQorCSAqIHNpbXBseSBpbml0
aWFsaXplIGEgY2xvY2tzb3VyY2UgcGVyIGNwdSBhbG9uZyB3aXRoIHRoZQorCSAqIGNsb2NrZXZl
bnQgd2hpY2ggbWFrZXMgdGhlIHJlc3VsdGluZyBjb2RlIHNpbXBsZXIuCisJICoKKwkgKiBIb3dl
dmVyIGlmIHRoZSBkZXZpY2UgdHJlZSBpcyBkZXNjcmliaW5nIG1vcmUgU1RNIGluc3RhbmNlcwor
CSAqIHRoYW4gdGhlIG51bWJlciBvZiBjb3JlcywgdGhlbiB3ZSBpZ25vcmUgdGhlbS4KKwkgKi8K
KwlpZiAoc3RtX2luc3RhbmNlcyA+PSBudW1fcG9zc2libGVfY3B1cygpKQorCQlyZXR1cm4gMDsK
KworCWJhc2UgPSBkZXZtX29mX2lvbWFwKGRldiwgbnAsIDAsIE5VTEwpOworCWlmIChJU19FUlIo
YmFzZSkpCisJCXJldHVybiBkZXZfZXJyX3Byb2JlKGRldiwgUFRSX0VSUihiYXNlKSwgIkZhaWxl
ZCB0byBpb21hcCAlcE9GblxuIiwgbnApOworCisJaXJxID0gcGxhdGZvcm1fZ2V0X2lycShwZGV2
LCAwKTsKKwlpZiAoaXJxIDwgMCkKKwkJcmV0dXJuIGRldl9lcnJfcHJvYmUoZGV2LCBpcnEsICJG
YWlsZWQgdG8gZ2V0IElSUVxuIik7CisKKwljbGsgPSBkZXZtX2Nsa19nZXRfZW5hYmxlZChkZXYs
IE5VTEwpOworCWlmIChJU19FUlIoY2xrKSkKKwkJcmV0dXJuIGRldl9lcnJfcHJvYmUoZGV2LCBQ
VFJfRVJSKGNsayksICJDbG9jayBub3QgZm91bmRcbiIpOworCisJc3RtX3RpbWVyID0gZGV2bV9r
emFsbG9jKGRldiwgc2l6ZW9mKCpzdG1fdGltZXIpLCBHRlBfS0VSTkVMKTsKKwlpZiAoIXN0bV90
aW1lcikKKwkJcmV0dXJuIC1FTk9NRU07CisKKwlyZXQgPSBkZXZtX3JlcXVlc3RfaXJxKGRldiwg
aXJxLCBueHBfc3RtX21vZHVsZV9pbnRlcnJ1cHQsCisJCQkgICAgICAgSVJRRl9USU1FUiB8IElS
UUZfTk9CQUxBTkNJTkcsIG5hbWUsIHN0bV90aW1lcik7CisJaWYgKHJldCkKKwkJcmV0dXJuIGRl
dl9lcnJfcHJvYmUoZGV2LCByZXQsICJVbmFibGUgdG8gYWxsb2NhdGUgaW50ZXJydXB0IGxpbmVc
biIpOworCisJcmV0ID0gbnhwX3N0bV9jbG9ja3NvdXJjZV9pbml0KGRldiwgc3RtX3RpbWVyLCBu
YW1lLCBiYXNlLCBjbGspOworCWlmIChyZXQpCisJCXJldHVybiByZXQ7CisKKwkvKgorCSAqIE5l
eHQgcHJvYmVkIFNUTSB3aWxsIGJlIGEgcGVyIENQVSBjbG9ja2V2ZW50LCB1bnRpbCB3ZQorCSAq
IHByb2JlIGFzIG1hbnkgYXMgd2UgaGF2ZSBDUFVzIGF2YWlsYWJsZSBvbiB0aGUgc3lzdGVtLCB3
ZQorCSAqIGRvIGEgcGFydGlhbCBpbml0aWFsaXphdGlvbgorCSAqLworCXJldCA9IG54cF9zdG1f
Y2xvY2tldmVudF9wZXJfY3B1X2luaXQoZGV2LCBzdG1fdGltZXIsIG5hbWUsCisJCQkJCSAgICAg
IGJhc2UsIGlycSwgY2xrLAorCQkJCQkgICAgICBzdG1faW5zdGFuY2VzKTsKKwlpZiAocmV0KQor
CQlyZXR1cm4gcmV0OworCisJc3RtX2luc3RhbmNlcysrOworCisJLyoKKwkgKiBUaGUgbnVtYmVy
IG9mIHByb2JlZCBTVE1zIGZvciBwZXIgQ1BVIGNsb2NrZXZlbnQgaXMKKwkgKiBlcXVhbCB0byB0
aGUgbnVtYmVyIG9mIGF2YWlsYWJsZSBDUFVzIG9uIHRoZQorCSAqIHN5c3RlbS4gV2UgaW5zdGFs
bCB0aGUgY3B1IGhvdHBsdWcgdG8gZmluaXNoIHRoZQorCSAqIGluaXRpYWxpemF0aW9uIGJ5IHJl
Z2lzdGVyaW5nIHRoZSBjbG9ja2V2ZW50cworCSAqLworCWlmIChzdG1faW5zdGFuY2VzID09IG51
bV9wb3NzaWJsZV9jcHVzKCkpIHsKKwkJcmV0ID0gY3B1aHBfc2V0dXBfc3RhdGUoQ1BVSFBfQVBf
T05MSU5FX0RZTiwgIlNUTSB0aW1lcjpzdGFydGluZyIsCisJCQkJCW54cF9zdG1fY2xvY2tldmVu
dF9zdGFydGluZ19jcHUsIE5VTEwpOworCQlpZiAocmV0IDwgMCkKKwkJCXJldHVybiByZXQ7CisJ
fQorCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lkIG54
cF9zdG1fb2ZfbWF0Y2hbXSA9IHsKKwl7IC5jb21wYXRpYmxlID0gIm54cCxzMzJnMi1zdG0iIH0s
CisJeyB9Cit9OworTU9EVUxFX0RFVklDRV9UQUJMRShvZiwgbnhwX3N0bV9vZl9tYXRjaCk7CisK
K3N0YXRpYyBzdHJ1Y3QgcGxhdGZvcm1fZHJpdmVyIG54cF9zdG1fcHJvYmUgPSB7CisJLnByb2Jl
CT0gbnhwX3N0bV90aW1lcl9wcm9iZSwKKwkuZHJpdmVyCT0geworCQkubmFtZQkJPSAibnhwLXN0
bSIsCisJCS5vZl9tYXRjaF90YWJsZQk9IG54cF9zdG1fb2ZfbWF0Y2gsCisJfSwKK307Cittb2R1
bGVfcGxhdGZvcm1fZHJpdmVyKG54cF9zdG1fcHJvYmUpOworCitNT0RVTEVfREVTQ1JJUFRJT04o
Ik5YUCBTeXN0ZW0gVGltZXIgTW9kdWxlIGRyaXZlciIpOworTU9EVUxFX0xJQ0VOU0UoIkdQTCIp
OwotLSAKMi40My4wCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fXwpMaW51eC1zdG0zMiBtYWlsaW5nIGxpc3QKTGludXgtc3RtMzJAc3QtbWQtbWFpbG1hbi5z
dG9ybXJlcGx5LmNvbQpodHRwczovL3N0LW1kLW1haWxtYW4uc3Rvcm1yZXBseS5jb20vbWFpbG1h
bi9saXN0aW5mby9saW51eC1zdG0zMgo=
