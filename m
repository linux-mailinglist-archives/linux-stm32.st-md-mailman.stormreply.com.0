Return-Path: <linux-stm32-bounces@st-md-mailman.stormreply.com>
X-Original-To: lists+linux-stm32@lfdr.de
Delivered-To: lists+linux-stm32@lfdr.de
Received: from stm-ict-prod-mailman-01.stormreply.prv (st-md-mailman.stormreply.com [52.209.6.89])
	by mail.lfdr.de (Postfix) with ESMTPS id 3CBB3758466
	for <lists+linux-stm32@lfdr.de>; Tue, 18 Jul 2023 20:19:06 +0200 (CEST)
Received: from ip-172-31-3-47.eu-west-1.compute.internal (localhost [127.0.0.1])
	by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTP id E2E82C6B442;
	Tue, 18 Jul 2023 18:19:05 +0000 (UTC)
Received: from metis.ext.pengutronix.de (metis.ext.pengutronix.de
 [85.220.165.71])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested)
 by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTPS id 326C0C6A60C
 for <linux-stm32@st-md-mailman.stormreply.com>;
 Tue, 18 Jul 2023 18:19:05 +0000 (UTC)
Received: from drehscheibe.grey.stw.pengutronix.de ([2a0a:edc0:0:c01:1d::a2])
 by metis.ext.pengutronix.de with esmtps
 (TLS1.3:ECDHE_RSA_AES_256_GCM_SHA384:256) (Exim 4.92)
 (envelope-from <ukl@pengutronix.de>)
 id 1qLpHp-0001tZ-KJ; Tue, 18 Jul 2023 20:19:01 +0200
Received: from [2a0a:edc0:0:900:1d::77] (helo=ptz.office.stw.pengutronix.de)
 by drehscheibe.grey.stw.pengutronix.de with esmtp (Exim 4.94.2)
 (envelope-from <ukl@pengutronix.de>)
 id 1qLpHn-000Qnc-4v; Tue, 18 Jul 2023 20:18:59 +0200
Received: from ukl by ptz.office.stw.pengutronix.de with local (Exim 4.94.2)
 (envelope-from <ukl@pengutronix.de>)
 id 1qLpHm-005uoR-D0; Tue, 18 Jul 2023 20:18:58 +0200
From: =?UTF-8?q?Uwe=20Kleine-K=C3=B6nig?= <u.kleine-koenig@pengutronix.de>
To: Fabrice Gasnier <fabrice.gasnier@foss.st.com>,
 Thierry Reding <thierry.reding@gmail.com>,
 Maxime Coquelin <mcoquelin.stm32@gmail.com>,
 Alexandre Torgue <alexandre.torgue@foss.st.com>
Date: Tue, 18 Jul 2023 20:18:48 +0200
Message-Id: <20230718181849.3947851-18-u.kleine-koenig@pengutronix.de>
X-Mailer: git-send-email 2.39.2
In-Reply-To: <20230718181849.3947851-1-u.kleine-koenig@pengutronix.de>
References: <20230718181849.3947851-1-u.kleine-koenig@pengutronix.de>
MIME-Version: 1.0
X-Developer-Signature: v=1; a=openpgp-sha256; l=4591;
 i=u.kleine-koenig@pengutronix.de; h=from:subject;
 bh=u86XsNNP9xPpUQDfeiRdXDHtFE5LnIzzsU2bX8BET9M=;
 b=owEBbQGS/pANAwAKAY+A+1h9Ev5OAcsmYgBkttb6wJ6iKJHFw/ycL+HtyGUhOiNsh0wE5GvcH
 ndusH46/tWJATMEAAEKAB0WIQQ/gaxpOnoeWYmt/tOPgPtYfRL+TgUCZLbW+gAKCRCPgPtYfRL+
 Tv3ACAClcE/e/zFcuDNcTFUyF0vn6w5fYbBmtsGFftYI+INrtyvaytCvxDs6cFVkwX/HmOJRtLw
 nRIr2t7LDuaGeXChRZiQAw81I+3EBSEWJa4ov07S17PhfbQrj1SV+0D5fZbsXx8jAzau499LTpJ
 M6R/JRyrzakesBA7Ssy+ymxfI90TPs6h+e1uMJZO5utRNFf0EqSkTEiK3XFUa5Mu5pieviKpPs8
 gmR3+nTIK4C0ByNMhiaO55mk9gZmV6nrNreRboGyybcQYgJu9krFXhMy1daxFgrS9GzuqTPOYqG
 6MFwXBBtsrhO/Sy3+QSI25oiwMXgO67mTOre8B+8/QHk3+sn
X-Developer-Key: i=u.kleine-koenig@pengutronix.de; a=openpgp;
 fpr=0D2511F322BFAB1C1580266BE2DCDD9132669BD6
X-SA-Exim-Connect-IP: 2a0a:edc0:0:c01:1d::a2
X-SA-Exim-Mail-From: ukl@pengutronix.de
X-SA-Exim-Scanned: No (on metis.ext.pengutronix.de);
 SAEximRunCond expanded to false
X-PTX-Original-Recipient: linux-stm32@st-md-mailman.stormreply.com
Cc: kernel@pengutronix.de, linux-pwm@vger.kernel.org,
 linux-stm32@st-md-mailman.stormreply.com, linux-arm-kernel@lists.infradead.org
Subject: [Linux-stm32] [PATCH 17/18] pwm: stm32: Make use of
	devm_pwmchip_alloc() function
X-BeenThere: linux-stm32@st-md-mailman.stormreply.com
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: <linux-stm32.st-md-mailman.stormreply.com>
List-Unsubscribe: <https://st-md-mailman.stormreply.com/mailman/options/linux-stm32>, 
 <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=unsubscribe>
List-Archive: <http://st-md-mailman.stormreply.com/pipermail/linux-stm32/>
List-Post: <mailto:linux-stm32@st-md-mailman.stormreply.com>
List-Help: <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=help>
List-Subscribe: <https://st-md-mailman.stormreply.com/mailman/listinfo/linux-stm32>, 
 <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linux-stm32-bounces@st-md-mailman.stormreply.com
Sender: "Linux-stm32" <linux-stm32-bounces@st-md-mailman.stormreply.com>

VGhpcyBwcmVwYXJlcyB0aGUgcHdtLXN0bTMyIGRyaXZlciB0byBmdXJ0aGVyIGNoYW5nZXMgb2Yg
dGhlIHB3bSBjb3JlCm91dGxpbmVkIGluIHRoZSBjb21taXQgaW50cm9kdWNpbmcgZGV2bV9wd21j
aGlwX2FsbG9jKCkuIFRoZXJlIGlzIG5vCmludGVuZGVkIHNlbWFudGljYWwgY2hhbmdlIGFuZCB0
aGUgZHJpdmVyIHNob3VsZCBiZWhhdmUgYXMgYmVmb3JlLgoKU2lnbmVkLW9mZi1ieTogVXdlIEts
ZWluZS1Lw7ZuaWcgPHUua2xlaW5lLWtvZW5pZ0BwZW5ndXRyb25peC5kZT4KLS0tCiBkcml2ZXJz
L3B3bS9wd20tc3RtMzIuYyB8IDQyICsrKysrKysrKysrKysrKysrKysrKysrKysrLS0tLS0tLS0t
LS0tLS0tCiAxIGZpbGUgY2hhbmdlZCwgMjcgaW5zZXJ0aW9ucygrKSwgMTUgZGVsZXRpb25zKC0p
CgpkaWZmIC0tZ2l0IGEvZHJpdmVycy9wd20vcHdtLXN0bTMyLmMgYi9kcml2ZXJzL3B3bS9wd20t
c3RtMzIuYwppbmRleCAzZDZiZTc3NDllMjMuLmFkZTg5YjE2OWJkMSAxMDA2NDQKLS0tIGEvZHJp
dmVycy9wd20vcHdtLXN0bTMyLmMKKysrIGIvZHJpdmVycy9wd20vcHdtLXN0bTMyLmMKQEAgLTI3
LDcgKzI3LDYgQEAgc3RydWN0IHN0bTMyX2JyZWFraW5wdXQgewogfTsKIAogc3RydWN0IHN0bTMy
X3B3bSB7Ci0Jc3RydWN0IHB3bV9jaGlwIGNoaXA7CiAJc3RydWN0IG11dGV4IGxvY2s7IC8qIHBy
b3RlY3QgcHdtIGNvbmZpZy9lbmFibGUgKi8KIAlzdHJ1Y3QgY2xrICpjbGs7CiAJc3RydWN0IHJl
Z21hcCAqcmVnbWFwOwpAQCAtNDAsNyArMzksNyBAQCBzdHJ1Y3Qgc3RtMzJfcHdtIHsKIAogc3Rh
dGljIGlubGluZSBzdHJ1Y3Qgc3RtMzJfcHdtICp0b19zdG0zMl9wd21fZGV2KHN0cnVjdCBwd21f
Y2hpcCAqY2hpcCkKIHsKLQlyZXR1cm4gY29udGFpbmVyX29mKGNoaXAsIHN0cnVjdCBzdG0zMl9w
d20sIGNoaXApOworCXJldHVybiBwd21jaGlwX3ByaXYoY2hpcCk7CiB9CiAKIHN0YXRpYyB1MzIg
YWN0aXZlX2NoYW5uZWxzKHN0cnVjdCBzdG0zMl9wd20gKmRldikKQEAgLTEwOSw3ICsxMDgsNyBA
QCBzdGF0aWMgaW50IHN0bTMyX3B3bV9yYXdfY2FwdHVyZShzdHJ1Y3Qgc3RtMzJfcHdtICpwcml2
LCBzdHJ1Y3QgcHdtX2RldmljZSAqcHdtLAogCQkJCSB1bnNpZ25lZCBsb25nIHRtb19tcywgdTMy
ICpyYXdfcHJkLAogCQkJCSB1MzIgKnJhd19kdHkpCiB7Ci0Jc3RydWN0IGRldmljZSAqcGFyZW50
ID0gcHJpdi0+Y2hpcC5kZXYtPnBhcmVudDsKKwlzdHJ1Y3QgZGV2aWNlICpwYXJlbnQgPSBwd20t
PmNoaXAtPmRldi0+cGFyZW50OwogCWVudW0gc3RtMzJfdGltZXJzX2RtYXMgZG1hX2lkOwogCXUz
MiBjY2VuLCBjY3I7CiAJaW50IHJldDsKQEAgLTE4NSw3ICsxODQsNyBAQCBzdGF0aWMgaW50IHN0
bTMyX3B3bV9jYXB0dXJlKHN0cnVjdCBwd21fY2hpcCAqY2hpcCwgc3RydWN0IHB3bV9kZXZpY2Ug
KnB3bSwKIAogCXJldCA9IGNsa19lbmFibGUocHJpdi0+Y2xrKTsKIAlpZiAocmV0KSB7Ci0JCWRl
dl9lcnIocHJpdi0+Y2hpcC5kZXYsICJmYWlsZWQgdG8gZW5hYmxlIGNvdW50ZXIgY2xvY2tcbiIp
OworCQlkZXZfZXJyKGNoaXAtPmRldiwgImZhaWxlZCB0byBlbmFibGUgY291bnRlciBjbG9ja1xu
Iik7CiAJCWdvdG8gdW5sb2NrOwogCX0KIApAQCAtNDUxLDYgKzQ1MCw3IEBAIHN0YXRpYyBpbnQg
c3RtMzJfcHdtX2FwcGx5KHN0cnVjdCBwd21fY2hpcCAqY2hpcCwgc3RydWN0IHB3bV9kZXZpY2Ug
KnB3bSwKIAlzdHJ1Y3Qgc3RtMzJfcHdtICpwcml2ID0gdG9fc3RtMzJfcHdtX2RldihjaGlwKTsK
IAlpbnQgcmV0OwogCisJZGV2X2luZm8oY2hpcC0+ZGV2LCAiJXM6JWQsIHByaXY9JXB4XG4iLCBf
X2Z1bmNfXywgX19MSU5FX18sIHByaXYpOwogCWVuYWJsZWQgPSBwd20tPnN0YXRlLmVuYWJsZWQ7
CiAKIAlpZiAoZW5hYmxlZCAmJiAhc3RhdGUtPmVuYWJsZWQpIHsKQEAgLTYxMywxMSArNjEzLDE0
IEBAIHN0YXRpYyBpbnQgc3RtMzJfcHdtX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBk
ZXYpCiAJc3RydWN0IGRldmljZV9ub2RlICpucCA9IGRldi0+b2Zfbm9kZTsKIAlzdHJ1Y3Qgc3Rt
MzJfdGltZXJzICpkZGF0YSA9IGRldl9nZXRfZHJ2ZGF0YShwZGV2LT5kZXYucGFyZW50KTsKIAlz
dHJ1Y3Qgc3RtMzJfcHdtICpwcml2OworCXN0cnVjdCBwd21fY2hpcCAqY2hpcDsKIAlpbnQgcmV0
OwogCi0JcHJpdiA9IGRldm1fa3phbGxvYyhkZXYsIHNpemVvZigqcHJpdiksIEdGUF9LRVJORUwp
OwotCWlmICghcHJpdikKKwljaGlwID0gZGV2bV9wd21jaGlwX2FsbG9jKGRldiwgc2l6ZW9mKCpw
cml2KSk7CisJaWYgKCFjaGlwKQogCQlyZXR1cm4gLUVOT01FTTsKKwlwcml2ID0gdG9fc3RtMzJf
cHdtX2RldihjaGlwKTsKKwlkZXZfaW5mbyhjaGlwLT5kZXYsICIlczolZCwgcHJpdj0lcHhcbiIs
IF9fZnVuY19fLCBfX0xJTkVfXywgcHJpdik7CiAKIAltdXRleF9pbml0KCZwcml2LT5sb2NrKTsK
IAlwcml2LT5yZWdtYXAgPSBkZGF0YS0+cmVnbWFwOwpAQCAtNjMzLDMzICs2MzYsNDAgQEAgc3Rh
dGljIGludCBzdG0zMl9wd21fcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKIAog
CXN0bTMyX3B3bV9kZXRlY3RfY29tcGxlbWVudGFyeShwcml2KTsKIAotCXByaXYtPmNoaXAuZGV2
ID0gZGV2OwotCXByaXYtPmNoaXAub3BzID0gJnN0bTMycHdtX29wczsKLQlwcml2LT5jaGlwLm5w
d20gPSBzdG0zMl9wd21fZGV0ZWN0X2NoYW5uZWxzKHByaXYpOworCWNoaXAtPm9wcyA9ICZzdG0z
MnB3bV9vcHM7CisJY2hpcC0+bnB3bSA9IHN0bTMyX3B3bV9kZXRlY3RfY2hhbm5lbHMocHJpdik7
CiAKLQlyZXQgPSBkZXZtX3B3bWNoaXBfYWRkKGRldiwgJnByaXYtPmNoaXApOworCXJldCA9IGRl
dm1fcHdtY2hpcF9hZGQoZGV2LCBjaGlwKTsKIAlpZiAocmV0IDwgMCkKIAkJcmV0dXJuIHJldDsK
IAotCXBsYXRmb3JtX3NldF9kcnZkYXRhKHBkZXYsIHByaXYpOworCXBsYXRmb3JtX3NldF9kcnZk
YXRhKHBkZXYsIGNoaXApOwogCiAJcmV0dXJuIDA7CiB9CiAKK3N0YXRpYyB2b2lkIHN0bTMyX3B3
bV9yZW1vdmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikKK3sKKwlzdHJ1Y3QgcHdtX2No
aXAgKmNoaXAgPSBwbGF0Zm9ybV9nZXRfZHJ2ZGF0YShwZGV2KTsKKwlkZXZfaW5mbygmcGRldi0+
ZGV2LCAiJXM6JWQ6IGNoaXA9JXB4XG4iLCBfX2Z1bmNfXywgX19MSU5FX18sIGNoaXApOworCWNo
aXAtPm9wcyA9IDA7Cit9CisKIHN0YXRpYyBpbnQgX19tYXliZV91bnVzZWQgc3RtMzJfcHdtX3N1
c3BlbmQoc3RydWN0IGRldmljZSAqZGV2KQogewotCXN0cnVjdCBzdG0zMl9wd20gKnByaXYgPSBk
ZXZfZ2V0X2RydmRhdGEoZGV2KTsKKwlzdHJ1Y3QgcHdtX2NoaXAgKmNoaXAgPSBkZXZfZ2V0X2Ry
dmRhdGEoZGV2KTsKKwlzdHJ1Y3Qgc3RtMzJfcHdtICpwcml2ID0gdG9fc3RtMzJfcHdtX2Rldihj
aGlwKTsKIAl1bnNpZ25lZCBpbnQgaTsKIAl1MzIgY2NlciwgbWFzazsKIAogCS8qIExvb2sgZm9y
IGFjdGl2ZSBjaGFubmVscyAqLwogCWNjZXIgPSBhY3RpdmVfY2hhbm5lbHMocHJpdik7CiAKLQlm
b3IgKGkgPSAwOyBpIDwgcHJpdi0+Y2hpcC5ucHdtOyBpKyspIHsKKwlmb3IgKGkgPSAwOyBpIDwg
Y2hpcC0+bnB3bTsgaSsrKSB7CiAJCW1hc2sgPSBUSU1fQ0NFUl9DQzFFIDw8IChpICogNCk7CiAJ
CWlmIChjY2VyICYgbWFzaykgewogCQkJZGV2X2VycihkZXYsICJQV00gJXUgc3RpbGwgaW4gdXNl
IGJ5IGNvbnN1bWVyICVzXG4iLAotCQkJCWksIHByaXYtPmNoaXAucHdtc1tpXS5sYWJlbCk7CisJ
CQkJaSwgY2hpcC0+cHdtc1tpXS5sYWJlbCk7CiAJCQlyZXR1cm4gLUVCVVNZOwogCQl9CiAJfQpA
QCAtNjY5LDcgKzY3OSw4IEBAIHN0YXRpYyBpbnQgX19tYXliZV91bnVzZWQgc3RtMzJfcHdtX3N1
c3BlbmQoc3RydWN0IGRldmljZSAqZGV2KQogCiBzdGF0aWMgaW50IF9fbWF5YmVfdW51c2VkIHN0
bTMyX3B3bV9yZXN1bWUoc3RydWN0IGRldmljZSAqZGV2KQogewotCXN0cnVjdCBzdG0zMl9wd20g
KnByaXYgPSBkZXZfZ2V0X2RydmRhdGEoZGV2KTsKKwlzdHJ1Y3QgcHdtX2NoaXAgKmNoaXAgPSBk
ZXZfZ2V0X2RydmRhdGEoZGV2KTsKKwlzdHJ1Y3Qgc3RtMzJfcHdtICpwcml2ID0gdG9fc3RtMzJf
cHdtX2RldihjaGlwKTsKIAlpbnQgcmV0OwogCiAJcmV0ID0gcGluY3RybF9wbV9zZWxlY3RfZGVm
YXVsdF9zdGF0ZShkZXYpOwpAQCAtNjkwLDYgKzcwMSw3IEBAIE1PRFVMRV9ERVZJQ0VfVEFCTEUo
b2YsIHN0bTMyX3B3bV9vZl9tYXRjaCk7CiAKIHN0YXRpYyBzdHJ1Y3QgcGxhdGZvcm1fZHJpdmVy
IHN0bTMyX3B3bV9kcml2ZXIgPSB7CiAJLnByb2JlCT0gc3RtMzJfcHdtX3Byb2JlLAorCS5yZW1v
dmVfbmV3ID0gc3RtMzJfcHdtX3JlbW92ZSwKIAkuZHJpdmVyCT0gewogCQkubmFtZSA9ICJzdG0z
Mi1wd20iLAogCQkub2ZfbWF0Y2hfdGFibGUgPSBzdG0zMl9wd21fb2ZfbWF0Y2gsCi0tIAoyLjM5
LjIKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkxpbnV4
LXN0bTMyIG1haWxpbmcgbGlzdApMaW51eC1zdG0zMkBzdC1tZC1tYWlsbWFuLnN0b3JtcmVwbHku
Y29tCmh0dHBzOi8vc3QtbWQtbWFpbG1hbi5zdG9ybXJlcGx5LmNvbS9tYWlsbWFuL2xpc3RpbmZv
L2xpbnV4LXN0bTMyCg==
