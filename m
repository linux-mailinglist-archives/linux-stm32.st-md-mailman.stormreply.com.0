Return-Path: <linux-stm32-bounces@st-md-mailman.stormreply.com>
X-Original-To: lists+linux-stm32@lfdr.de
Delivered-To: lists+linux-stm32@lfdr.de
Received: from stm-ict-prod-mailman-01.stormreply.prv (st-md-mailman.stormreply.com [52.209.6.89])
	by mail.lfdr.de (Postfix) with ESMTPS id D1409B01F97
	for <lists+linux-stm32@lfdr.de>; Fri, 11 Jul 2025 16:52:34 +0200 (CEST)
Received: from ip-172-31-3-47.eu-west-1.compute.internal (localhost [127.0.0.1])
	by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTP id 94163C3F931;
	Fri, 11 Jul 2025 14:52:34 +0000 (UTC)
Received: from mx07-00178001.pphosted.com (mx07-00178001.pphosted.com
 [185.132.182.106])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested)
 by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTPS id EAF2EC3F92F
 for <linux-stm32@st-md-mailman.stormreply.com>;
 Fri, 11 Jul 2025 14:52:33 +0000 (UTC)
Received: from pps.filterd (m0369458.ppops.net [127.0.0.1])
 by mx07-00178001.pphosted.com (8.18.1.2/8.18.1.2) with ESMTP id 56BEWU4V022237;
 Fri, 11 Jul 2025 16:52:17 +0200
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=foss.st.com; h=
 cc:content-transfer-encoding:content-type:date:from:in-reply-to
 :message-id:mime-version:references:subject:to; s=selector1; bh=
 BknNkD07mHknRQC5q03gNC2Tm94NXg+uovaY99NGBhA=; b=d+jY9HOwOpBlif4H
 GhCScqF7mowYfOA3WOr/Lljrej2k1h6dkq/qAsLe8rTHYsFmBuMX9OiStaKc8dzX
 /RHzD8DPUE7wq+UmFQn4gsRuvNbh8+SZfAIoptsJG+73sTldQAqOZGz5nRQz8opk
 usTGZootyGXe6YUsaerqwmjIity8JW5MDyvq46CcDG1fFKlJ60H4V27wYXKlKca2
 0li2BrFRExvC2EoltCpqKYgaR8hgPDSncTskywLo4lYtt2vxV8UM+p5I215GhEp+
 izWwVd9vDAjeuB/XPvWsj7/QaPuWCOjtIGl3Um6SIzj5HinB2mtZYqq6/odep/qX
 1a4u3A==
Received: from beta.dmz-ap.st.com (beta.dmz-ap.st.com [138.198.100.35])
 by mx07-00178001.pphosted.com (PPS) with ESMTPS id 47qdm6csej-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Fri, 11 Jul 2025 16:52:17 +0200 (MEST)
Received: from euls16034.sgp.st.com (euls16034.sgp.st.com [10.75.44.20])
 by beta.dmz-ap.st.com (STMicroelectronics) with ESMTP id 99F264004F;
 Fri, 11 Jul 2025 16:51:02 +0200 (CEST)
Received: from Webmail-eu.st.com (shfdag1node2.st.com [10.75.129.70])
 by euls16034.sgp.st.com (STMicroelectronics) with ESMTP id 8E6F6B5155A;
 Fri, 11 Jul 2025 16:49:20 +0200 (CEST)
Received: from localhost (10.252.16.187) by SHFDAG1NODE2.st.com (10.75.129.70)
 with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256) id 15.1.2507.39; Fri, 11 Jul
 2025 16:49:20 +0200
From: =?utf-8?q?Cl=C3=A9ment_Le_Goffic?= <clement.legoffic@foss.st.com>
Date: Fri, 11 Jul 2025 16:49:01 +0200
MIME-Version: 1.0
Message-ID: <20250711-ddrperfm-upstream-v2-9-cdece720348f@foss.st.com>
References: <20250711-ddrperfm-upstream-v2-0-cdece720348f@foss.st.com>
In-Reply-To: <20250711-ddrperfm-upstream-v2-0-cdece720348f@foss.st.com>
To: Will Deacon <will@kernel.org>, Mark Rutland <mark.rutland@arm.com>, Rob
 Herring <robh@kernel.org>, Krzysztof Kozlowski <krzk+dt@kernel.org>, Conor
 Dooley <conor+dt@kernel.org>, Maxime Coquelin <mcoquelin.stm32@gmail.com>,
 Alexandre Torgue <alexandre.torgue@foss.st.com>, Philipp Zabel
 <p.zabel@pengutronix.de>, Jonathan Corbet <corbet@lwn.net>,
 Gatien Chevallier <gatien.chevallier@foss.st.com>,
 Michael Turquette <mturquette@baylibre.com>,
 Stephen Boyd <sboyd@kernel.org>, Gabriel Fernandez
 <gabriel.fernandez@foss.st.com>, Krzysztof Kozlowski <krzk@kernel.org>, Le
 Goffic <legoffic.clement@gmail.com>
X-Mailer: b4 0.15-dev-7616d
X-Originating-IP: [10.252.16.187]
X-ClientProxiedBy: SHFCAS1NODE1.st.com (10.75.129.72) To SHFDAG1NODE2.st.com
 (10.75.129.70)
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.293,Aquarius:18.0.1099,Hydra:6.1.7,FMLib:17.12.80.40
 definitions=2025-07-11_03,2025-07-09_01,2025-03-28_01
Cc: devicetree@vger.kernel.org, linux-doc@vger.kernel.org,
 linux-kernel@vger.kernel.org, linux-clk@vger.kernel.org,
 linux-perf-users@vger.kernel.org, linux-stm32@st-md-mailman.stormreply.com,
 linux-arm-kernel@lists.infradead.org
Subject: [Linux-stm32] [PATCH v2 09/16] perf: stm32: introduce DDRPERFM
	driver
X-BeenThere: linux-stm32@st-md-mailman.stormreply.com
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: <linux-stm32.st-md-mailman.stormreply.com>
List-Unsubscribe: <https://st-md-mailman.stormreply.com/mailman/options/linux-stm32>, 
 <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=unsubscribe>
List-Archive: <http://st-md-mailman.stormreply.com/pipermail/linux-stm32/>
List-Post: <mailto:linux-stm32@st-md-mailman.stormreply.com>
List-Help: <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=help>
List-Subscribe: <https://st-md-mailman.stormreply.com/mailman/listinfo/linux-stm32>, 
 <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linux-stm32-bounces@st-md-mailman.stormreply.com
Sender: "Linux-stm32" <linux-stm32-bounces@st-md-mailman.stormreply.com>

SW50cm9kdWNlIHRoZSBkcml2ZXIgZm9yIHRoZSBERFIgUGVyZm9ybWFuY2UgTW9uaXRvciBhdmFp
bGFibGUgb24KU1RNMzJNUFUgU29DLgoKT24gU1RNMzJNUDIgcGxhdGZvcm1zLCB0aGUgRERSUEVS
Rk0gYWxsb3dzIHRvIG1vbml0b3IgdXAgdG8gOCBERFIgZXZlbnRzCnRoYXQgY29tZSBmcm9tIHRo
ZSBERFIgQ29udHJvbGxlciBzdWNoIGFzIHJlYWQgb3Igd3JpdGUgZXZlbnRzLgoKT24gU1RNMzJN
UDEgcGxhdGZvcm1zLCB0aGUgRERSUEVSRk0gY2Fubm90IG1vbml0b3IgYW55IGV2ZW50IG9uIGFu
eQpjb3VudGVyLCB0aGVyZSBpcyBhIG5vdGlvbiBvZiBzZXQgb2YgZXZlbnRzLgpFdmVudHMgZnJv
bSBkaWZmZXJlbnQgc2V0cyBjYW5ub3QgYmUgbW9uaXRvcmVkIGF0IHRoZSBzYW1lIHRpbWUuClRo
ZSBmaXJzdCBjaG9zZW4gZXZlbnQgc2VsZWN0cyB0aGUgc2V0LgpUaGUgc2V0IGlzIGNvZGVkIGlu
IHRoZSBmaXJzdCB0d28gYnl0ZXMgb2YgdGhlIGNvbmZpZyB2YWx1ZSB3aGljaCBpcyBvbiA0CmJ5
dGVzLgoKT24gU1RNMzJNUDI1eCBzZXJpZXMsIHRoZSBERFJQRVJGTSBjbG9jayBpcyBzaGFyZWQg
d2l0aCB0aGUgRERSIGNvbnRyb2xsZXIKYW5kIG1heSBiZSBzZWN1cmVkIGJ5IGJvb3Rsb2FkZXJz
LgpBY2Nlc3MgY29udHJvbGxlcnMgYWxsb3cgdG8gY2hlY2sgYWNjZXNzIHRvIGEgcmVzb3VyY2Uu
IFVzZSB0aGUgYWNjZXNzCmNvbnRyb2xsZXIgZGVmaW5lZCBpbiB0aGUgZGV2aWNldHJlZSB0byBr
bm93IGFib3V0IHRoZSBhY2Nlc3MgdG8gdGhlCkREUlBFUkZNIGNsb2NrLgoKU2lnbmVkLW9mZi1i
eTogQ2zDqW1lbnQgTGUgR29mZmljIDxjbGVtZW50LmxlZ29mZmljQGZvc3Muc3QuY29tPgotLS0K
IGRyaXZlcnMvcGVyZi9LY29uZmlnICAgICAgICAgfCAgMTEgKwogZHJpdmVycy9wZXJmL01ha2Vm
aWxlICAgICAgICB8ICAgMSArCiBkcml2ZXJzL3BlcmYvc3RtMzJfZGRyX3BtdS5jIHwgOTEwICsr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysKIDMgZmlsZXMgY2hhbmdl
ZCwgOTIyIGluc2VydGlvbnMoKykKCmRpZmYgLS1naXQgYS9kcml2ZXJzL3BlcmYvS2NvbmZpZyBi
L2RyaXZlcnMvcGVyZi9LY29uZmlnCmluZGV4IDI3OGM5MjlkYzg3YS4uNTExODUzNTEzNGVlIDEw
MDY0NAotLS0gYS9kcml2ZXJzL3BlcmYvS2NvbmZpZworKysgYi9kcml2ZXJzL3BlcmYvS2NvbmZp
ZwpAQCAtMTk4LDYgKzE5OCwxNyBAQCBjb25maWcgUUNPTV9MM19QTVUKIAkgICBBZGRzIHRoZSBM
MyBjYWNoZSBQTVUgaW50byB0aGUgcGVyZiBldmVudHMgc3Vic3lzdGVtIGZvcgogCSAgIG1vbml0
b3JpbmcgTDMgY2FjaGUgZXZlbnRzLgogCitjb25maWcgU1RNMzJfRERSX1BNVQorCXRyaXN0YXRl
ICJTVE0zMiBERFIgUE1VIgorCWRlcGVuZHMgb24gQVJDSF9TVE0zMiB8fCBDT01QSUxFX1RFU1QK
KwlkZWZhdWx0IG0KKwloZWxwCisJICBQcm92aWRlcyBzdXBwb3J0IGZvciB0aGUgRERSIHBlcmZv
cm1hbmNlIG1vbml0b3Igb24gU1RNMzJNUFUgcGxhdGZvcm1zLgorCSAgVGhlIG1vbml0b3IgcHJv
dmlkZXMgY291bnRlcnMgZm9yIG1lbW9yeSByZWxhdGVkIGV2ZW50cy4KKwkgIEl0IGFsbG93cyBk
ZXZlbG9wZXJzIHRvIGFuYWx5emUgYW5kIG9wdGltaXplIEREUiBwZXJmb3JtYW5jZS4KKwkgIEVu
YWJsaW5nIHRoaXMgZmVhdHVyZSBpcyB1c2VmdWwgZm9yIHBlcmZvcm1hbmNlIHR1bmluZyBhbmQg
ZGVidWdnaW5nIG1lbW9yeQorCSAgc3Vic3lzdGVtIGlzc3VlcyBvbiBzdXBwb3J0ZWQgaGFyZHdh
cmUuCisKIGNvbmZpZyBUSFVOREVSWDJfUE1VCiAJdHJpc3RhdGUgIkNhdml1bSBUaHVuZGVyWDIg
U29DIFBNVSBVTkNPUkUiCiAJZGVwZW5kcyBvbiBBUkNIX1RIVU5ERVIyIHx8IENPTVBJTEVfVEVT
VApkaWZmIC0tZ2l0IGEvZHJpdmVycy9wZXJmL01ha2VmaWxlIGIvZHJpdmVycy9wZXJmL01ha2Vm
aWxlCmluZGV4IGRlNzFkMjU3NDg1Ny4uN2Y4M2I1MGZlYjcxIDEwMDY0NAotLS0gYS9kcml2ZXJz
L3BlcmYvTWFrZWZpbGUKKysrIGIvZHJpdmVycy9wZXJmL01ha2VmaWxlCkBAIC0yMCw2ICsyMCw3
IEBAIG9iai0kKENPTkZJR19SSVNDVl9QTVUpICs9IHJpc2N2X3BtdS5vCiBvYmotJChDT05GSUdf
UklTQ1ZfUE1VX0xFR0FDWSkgKz0gcmlzY3ZfcG11X2xlZ2FjeS5vCiBvYmotJChDT05GSUdfUklT
Q1ZfUE1VX1NCSSkgKz0gcmlzY3ZfcG11X3NiaS5vCiBvYmotJChDT05GSUdfU1RBUkZJVkVfU1RB
UkxJTktfUE1VKSArPSBzdGFyZml2ZV9zdGFybGlua19wbXUubworb2JqLSQoQ09ORklHX1NUTTMy
X0REUl9QTVUpICs9IHN0bTMyX2Rkcl9wbXUubwogb2JqLSQoQ09ORklHX1RIVU5ERVJYMl9QTVUp
ICs9IHRodW5kZXJ4Ml9wbXUubwogb2JqLSQoQ09ORklHX1hHRU5FX1BNVSkgKz0geGdlbmVfcG11
Lm8KIG9iai0kKENPTkZJR19BUk1fU1BFX1BNVSkgKz0gYXJtX3NwZV9wbXUubwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9wZXJmL3N0bTMyX2Rkcl9wbXUuYyBiL2RyaXZlcnMvcGVyZi9zdG0zMl9kZHJf
cG11LmMKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMDAwLi4xYmU1YmJlMTI5
NzgKLS0tIC9kZXYvbnVsbAorKysgYi9kcml2ZXJzL3BlcmYvc3RtMzJfZGRyX3BtdS5jCkBAIC0w
LDAgKzEsOTEwIEBACisvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMC1vbmx5Cisv
KgorICogQ29weXJpZ2h0IChDKSAyMDI1LCBTVE1pY3JvZWxlY3Ryb25pY3MgLSBBbGwgUmlnaHRz
IFJlc2VydmVkCisgKiBBdXRob3I6IENsw6ltZW50IExlIEdvZmZpYyA8Y2xlbWVudC5sZWdvZmZp
Y0Bmb3NzLnN0LmNvbT4gZm9yIFNUTWljcm9lbGVjdHJvbmljcy4KKyAqLworCisjaW5jbHVkZSA8
bGludXgvYnVzL3N0bTMyX2ZpcmV3YWxsX2RldmljZS5oPgorI2luY2x1ZGUgPGxpbnV4L2Nsay5o
PgorI2luY2x1ZGUgPGxpbnV4L2hydGltZXIuaD4KKyNpbmNsdWRlIDxsaW51eC9pby5oPgorI2lu
Y2x1ZGUgPGxpbnV4L21vZHVsZS5oPgorI2luY2x1ZGUgPGxpbnV4L29mX3BsYXRmb3JtLmg+Cisj
aW5jbHVkZSA8bGludXgvcGVyZl9ldmVudC5oPgorI2luY2x1ZGUgPGxpbnV4L3Jlc2V0Lmg+CisK
KyNkZWZpbmUgRFJJVkVSX05BTUUJCSJzdG0zMl9kZHJfcG11IgorCisvKgorICogVGhlIFBNVSBp
cyBhYmxlIHRvIGZyZWV6ZSBhbGwgY291bnRlcnMgYW5kIGdlbmVyYXRlIGFuIGludGVycnVwdCB3
aGVuIHRoZXJlCisgKiBpcyBhIGNvdW50ZXIgb3ZlcmZsb3cuIEJ1dCwgcmVseWluZyBvbiB0aGlz
IG1lYW5zIHRoYXQgd2UgbG9zZSBhbGwgdGhlCisgKiBldmVudHMgdGhhdCBvY2N1ciBiZXR3ZWVu
IHRoZSBmcmVlemUgYW5kIHRoZSBpbnRlcnJ1cHQgaGFuZGxlciBleGVjdXRpb24uCisgKiBTbyB3
ZSB1c2UgYSBwb2xsaW5nIG1lY2hhbmlzbSB0byBhdm9pZCB0aGlzIGxvc3Qgb2YgaW5mb3JtYXRp
b24uCisgKiBUaGUgZmFzdGVzdCBjb3VudGVyIGNhbiBvdmVyZmxvdyBpbiB+N3MgQDYwME1IeiAo
dGhhdCBpcyB0aGUgbWF4aW11bSBERFIKKyAqIGZyZXF1ZW5jeSBzdXBwb3J0ZWQgb24gU1RNMzJN
UDI1NyksIHNvIHdlIHBvbGwgaW4gMy41cyBpbnRlcnZhbHMgdG8gZW5zdXJlCisgKiB3ZSBkb24n
dCByZWFjaCB0aGlzIGxpbWl0LgorICovCisjZGVmaW5lIFBPTExfTVMJCQkzNTAwCisKKyNkZWZp
bmUgRERSUEVSRk1fQ1RSTAkJMHgwMDAKKyNkZWZpbmUgRERSUEVSRk1fQ0ZHCQkweDAwNAorI2Rl
ZmluZSBERFJQRVJGTV9TVEFUVVMJCTB4MDA4CisjZGVmaW5lIEREUlBFUkZNX0NMUgkJMHgwMEMK
KyNkZWZpbmUgRERSUEVSRk1fVENOVAkJMHgwMjAKKyNkZWZpbmUgRERSUEVSRk1fRVZDTlQoWCkJ
KDB4MDMwICsgOCAqIChYKSkKKworI2RlZmluZSBERFJQRVJGTV9NUDJfQ0ZHMAkweDAxMAorI2Rl
ZmluZSBERFJQRVJGTV9NUDJfQ0ZHMQkweDAxNAorI2RlZmluZSBERFJQRVJGTV9NUDJfQ0ZHNQkw
eDAyNAorI2RlZmluZSBERFJQRVJGTV9NUDJfRFJBTUlORgkweDAyOAorI2RlZmluZSBERFJQRVJG
TV9NUDJfRVZDTlQoWCkJKDB4MDQwICsgNCAqIChYKSkKKyNkZWZpbmUgRERSUEVSRk1fTVAyX1RD
TlQJMHgwNjAKKyNkZWZpbmUgRERSUEVSRk1fTVAyX1NUQVRVUwkweDA4MAorCisjZGVmaW5lIE1Q
MV9TVEFUVVNfQlVTWQkJQklUKDE2KQorI2RlZmluZSBNUDJfU1RBVFVTX0JVU1kJCUJJVCgzMSkK
KworI2RlZmluZSBDVFJMX1NUQVJUCQlCSVQoMCkKKyNkZWZpbmUgQ1RSTF9TVE9QCQlCSVQoMSkK
KworI2RlZmluZSBDRkdfU0VMX01TSwkJR0VOTUFTSygxNywgMTYpCisjZGVmaW5lIENGR19TRUxf
U0hJRlQJCTE2CisjZGVmaW5lIENGR19FTl9NU0sJCUdFTk1BU0soMywgMCkKKworI2RlZmluZSBN
UDFfQ0xSX0NOVAkJR0VOTUFTSygzLCAwKQorI2RlZmluZSBNUDFfQ0xSX1RJTUUJCUJJVCgzMSkK
KyNkZWZpbmUgTVAyX0NMUl9DTlQJCUdFTk1BU0soNywgMCkKKyNkZWZpbmUgTVAyX0NMUl9USU1F
CQlCSVQoOCkKKworLyogNCBldmVudCBjb3VudGVycyBwbHVzIDEgZGVkaWNhdGVkIHRvIHRpbWUg
Ki8KKyNkZWZpbmUgTVAxX0NOVF9OQgkJKDQgKyAxKQorLyogSW5kZXggb2YgdGhlIHRpbWUgZGVk
aWNhdGVkIGNvdW50ZXIgKi8KKyNkZWZpbmUgTVAxX1RJTUVfQ05UX0lEWAk0CisKKy8qIDggZXZl
bnQgY291bnRlcnMgcGx1cyAxIGRlZGljYXRlZCB0byB0aW1lICovCisjZGVmaW5lIE1QMl9DTlRf
TkIJCSg4ICsgMSkKKy8qIEluZGV4IG9mIHRoZSB0aW1lIGRlZGljYXRlZCBjb3VudGVyICovCisj
ZGVmaW5lIE1QMl9USU1FX0NOVF9JRFgJOAorLyogNCBldmVudCBjb3VudGVycyBwZXIgcmVnaXN0
ZXIgKi8KKyNkZWZpbmUgTVAyX0NOVF9TRUxfUEVSX1JFRwk0CisKKy8qIEFyYml0cmFyeSB2YWx1
ZSB1c2VkIHRvIGlkZW50aWZ5IGEgdGltZSBldmVudCAqLworI2RlZmluZSBUSU1FX0NOVAkJNjQK
Kworc3RydWN0IHN0bTMyX2Rkcl9wbXVfcmVnIHsKKwl1bnNpZ25lZCBpbnQgcmVnOworCXUzMiBt
YXNrOworfTsKKworc3RydWN0IHN0bTMyX2Rkcl9jbnQgeworCWludCBpZHg7CisJc3RydWN0IHBl
cmZfZXZlbnQgKmV2dDsKKwlzdHJ1Y3QgbGlzdF9oZWFkIGNudF9saXN0OworfTsKKworc3RydWN0
IHN0bTMyX2Rkcl9wbXVfcmVnc3BlYyB7CisJY29uc3Qgc3RydWN0IHN0bTMyX2Rkcl9wbXVfcmVn
IHN0b3A7CisJY29uc3Qgc3RydWN0IHN0bTMyX2Rkcl9wbXVfcmVnIHN0YXJ0OworCWNvbnN0IHN0
cnVjdCBzdG0zMl9kZHJfcG11X3JlZyBlbmFibGU7CisJY29uc3Qgc3RydWN0IHN0bTMyX2Rkcl9w
bXVfcmVnIHN0YXR1czsKKwljb25zdCBzdHJ1Y3Qgc3RtMzJfZGRyX3BtdV9yZWcgY2xlYXJfY250
OworCWNvbnN0IHN0cnVjdCBzdG0zMl9kZHJfcG11X3JlZyBjbGVhcl90aW1lOworCWNvbnN0IHN0
cnVjdCBzdG0zMl9kZHJfcG11X3JlZyBjZmc7CisJY29uc3Qgc3RydWN0IHN0bTMyX2Rkcl9wbXVf
cmVnIGNmZzA7CisJY29uc3Qgc3RydWN0IHN0bTMyX2Rkcl9wbXVfcmVnIGNmZzE7CisJY29uc3Qg
c3RydWN0IHN0bTMyX2Rkcl9wbXVfcmVnIGRyYW1faW5mOworCWNvbnN0IHN0cnVjdCBzdG0zMl9k
ZHJfcG11X3JlZyBjb3VudGVyX3RpbWU7CisJY29uc3Qgc3RydWN0IHN0bTMyX2Rkcl9wbXVfcmVn
IGNvdW50ZXJfZXZ0W107Cit9OworCitzdHJ1Y3Qgc3RtMzJfZGRyX3BtdSB7CisJc3RydWN0IHBt
dSBwbXU7CisJdm9pZCBfX2lvbWVtICptZW1iYXNlOworCXN0cnVjdCBkZXZpY2UgKmRldjsKKwlz
dHJ1Y3QgY2xrICpjbGs7CisJY29uc3Qgc3RydWN0IHN0bTMyX2Rkcl9wbXVfY2ZnICpjZmc7CisJ
c3RydWN0IGhydGltZXIgaHJ0aW1lcjsKKwlrdGltZV90IHBvbGxfcGVyaW9kOworCWludCBzZWxl
Y3RlZF9zZXQ7CisJdTMyIGRyYW1fdHlwZTsKKwlzdHJ1Y3QgbGlzdF9oZWFkIGNvdW50ZXJzW107
Cit9OworCitzdHJ1Y3Qgc3RtMzJfZGRyX3BtdV9jZmcgeworCWNvbnN0IHN0cnVjdCBzdG0zMl9k
ZHJfcG11X3JlZ3NwZWMgKnJlZ3M7CisJY29uc3Qgc3RydWN0IGF0dHJpYnV0ZV9ncm91cCAqKmF0
dHJpYnV0ZTsKKwl1MzIgY291bnRlcnNfbmI7CisJdTMyIGV2dF9jb3VudGVyc19uYjsKKwl1MzIg
dGltZV9jbnRfaWR4OworCXN0cnVjdCBzdG0zMl9kZHJfY250ICogKCpnZXRfY291bnRlcikoc3Ry
dWN0IHN0bTMyX2Rkcl9wbXUgKnAsIHN0cnVjdCBwZXJmX2V2ZW50ICplKTsKK307CisKKyNkZWZp
bmUgRVZFTlRfTlVNQkVSKGdyb3VwLCBpbmRleCkJKCgoZ3JvdXApIDw8IDgpIHwgKGluZGV4KSkK
KyNkZWZpbmUgR1JPVVBfVkFMVUUoZXZlbnRfbnVtYmVyKQkJKChldmVudF9udW1iZXIpID4+IDgp
CisjZGVmaW5lIEVWRU5UX0lOREVYKGV2ZW50X251bWJlcikJKChldmVudF9udW1iZXIpICYgMHhG
RikKKworLyogTVAxIGRkcnBlcmZtIGV2ZW50cyAqLworZW51bSBzdG0zMl9kZHJfcG11X2V2ZW50
c19tcDEgeworCVBFUkZfT1BfSVNfUkQJCQk9IEVWRU5UX05VTUJFUigwLCAwKSwKKwlQRVJGX09Q
X0lTX1dSCQkJPSBFVkVOVF9OVU1CRVIoMCwgMSksCisJUEVSRl9PUF9JU19BQ1RJVkFURQkJPSBF
VkVOVF9OVU1CRVIoMCwgMiksCisJQ1RMX0lETEUJCQk9IEVWRU5UX05VTUJFUigwLCAzKSwKKwlQ
RVJGX0hQUl9SRVFfV0lUSF9OT19DUkVESVQJPSBFVkVOVF9OVU1CRVIoMSwgMCksCisJUEVSRl9M
UFJfUkVRX1dJVEhfTk9fQ1JFRElUCT0gRVZFTlRfTlVNQkVSKDEsIDEpLAorCUNBQ1RJVkVfRERS
QwkJCT0gRVZFTlRfTlVNQkVSKDEsIDMpLAorCVBFUkZfT1BfSVNfRU5URVJfUE9XRVJET1dOCT0g
RVZFTlRfTlVNQkVSKDIsIDApLAorCVBFUkZfT1BfSVNfUkVGUkVTSAkJPSBFVkVOVF9OVU1CRVIo
MiwgMSksCisJUEVSRl9TRUxGUkVTSF9NT0RFCQk9IEVWRU5UX05VTUJFUigyLCAyKSwKKwlERklf
TFBfUkVRCQkJPSBFVkVOVF9OVU1CRVIoMiwgMyksCisJUEVSRl9IUFJfWEFDVF9XSEVOX0NSSVRJ
Q0FMCT0gRVZFTlRfTlVNQkVSKDMsIDApLAorCVBFUkZfTFBSX1hBQ1RfV0hFTl9DUklUSUNBTAk9
IEVWRU5UX05VTUJFUigzLCAxKSwKKwlQRVJGX1dSX1hBQ1RfV0hFTl9DUklUSUNBTAk9IEVWRU5U
X05VTUJFUigzLCAyKSwKKwlERklfTFBfUkVRX1NDTkQJCQk9IEVWRU5UX05VTUJFUigzLCAzKSwK
K307CisKKy8qIE1QMiBkZHJwZXJmbSBldmVudHMgKi8KK2VudW0gc3RtMzJfZGRyX3BtdV9ldmVu
dHNfbXAyIHsKKwlERklfSVNfQUNUCQkJPSBFVkVOVF9OVU1CRVIoMCwgMCksCisJREZJX0lTX1BS
RVBCCQkJPSBFVkVOVF9OVU1CRVIoMCwgMSksCisJREZJX0lTX1BSRUFCCQkJPSBFVkVOVF9OVU1C
RVIoMCwgMiksCisJREZJX0lTX1JECQkJPSBFVkVOVF9OVU1CRVIoMCwgMyksCisJREZJX0lTX1JE
QQkJCT0gRVZFTlRfTlVNQkVSKDAsIDQpLAorCURGSV9JU19XUgkJCT0gRVZFTlRfTlVNQkVSKDAs
IDYpLAorCURGSV9JU19XUkEJCQk9IEVWRU5UX05VTUJFUigwLCA3KSwKKwlERklfSVNfTVdSCQkJ
PSBFVkVOVF9OVU1CRVIoMCwgOSksCisJREZJX0lTX01XUkEJCQk9IEVWRU5UX05VTUJFUigwLCAx
MCksCisJREZJX0lTX01SVwkJCT0gRVZFTlRfTlVNQkVSKDAsIDEyKSwKKwlERklfSVNfTVJSCQkJ
PSBFVkVOVF9OVU1CRVIoMCwgMTMpLAorCURGSV9JU19SRUZQQgkJCT0gRVZFTlRfTlVNQkVSKDAs
IDE0KSwKKwlERklfSVNfUkVGQUIJCQk9IEVWRU5UX05VTUJFUigwLCAxNSksCisJREZJX0lTX01Q
QwkJCT0gRVZFTlRfTlVNQkVSKDAsIDE2KSwKKwlQRVJGX09QX0lTX0FDVAkJCT0gRVZFTlRfTlVN
QkVSKDAsIDMyKSwKKwlQRVJGX09QX0lTX1JEX01QMgkJPSBFVkVOVF9OVU1CRVIoMCwgMzMpLAor
CVBFUkZfT1BfSVNfV1JfTVAyCQk9IEVWRU5UX05VTUJFUigwLCAzNCksCisJUEVSRl9PUF9JU19N
V1IJCQk9IEVWRU5UX05VTUJFUigwLCAzNSksCisJUEVSRl9PUF9JU19SRUYJCQk9IEVWRU5UX05V
TUJFUigwLCAzNiksCisJUEVSRl9PUF9JU19DUklUX1JFRgkJPSBFVkVOVF9OVU1CRVIoMCwgMzcp
LAorCVBFUkZfT1BfSVNfU1BFQ19SRUYJCT0gRVZFTlRfTlVNQkVSKDAsIDM4KSwKKwlQRVJGX09Q
X0lTX1pRQ0FMCQk9IEVWRU5UX05VTUJFUigwLCAzOSksCisJUEVSRl9PUF9JU19FTlRFUl9QT1dE
TgkJPSBFVkVOVF9OVU1CRVIoMCwgNDApLAorCVBFUkZfT1BfSVNfRU5URVJfU0VMRlJFRgk9IEVW
RU5UX05VTUJFUigwLCA0MSksCisJUEVSRl9PUF9JU19QUkUJCQk9IEVWRU5UX05VTUJFUigwLCA0
MiksCisJUEVSRl9PUF9JU19QUkVfRk9SX1JEV1IJCT0gRVZFTlRfTlVNQkVSKDAsIDQzKSwKKwlQ
RVJGX09QX0lTX1BSRV9GT1JfT1RIRVJTCT0gRVZFTlRfTlVNQkVSKDAsIDQ0KSwKKwlQRVJGX09Q
X0lTX1JEX0FDVElWQVRFCQk9IEVWRU5UX05VTUJFUigwLCA0NSksCisJUEVSRl9IUFJfUkVRX1dJ
VEhfTk9DUkVESVQJPSBFVkVOVF9OVU1CRVIoMCwgNDgpLAorCVBFUkZfTFBSX1JFUV9XSVRIX05P
Q1JFRElUCT0gRVZFTlRfTlVNQkVSKDAsIDQ5KSwKKwlQRVJGX0hQUl9YQUNUX1dIRU5fQ1JJVElD
QUxfTVAyCT0gRVZFTlRfTlVNQkVSKDAsIDUwKSwKKwlQRVJGX0xQUl9YQUNUX1dIRU5fQ1JJVElD
QUxfTVAyCT0gRVZFTlRfTlVNQkVSKDAsIDUxKSwKKwlQRVJGX1dSX1hBQ1RfV0hFTl9DUklUSUNB
TF9NUDIJPSBFVkVOVF9OVU1CRVIoMCwgNTIpLAorCVBFUkZfUkRXUl9UUkFOU0lUSU9OUwkJPSBF
VkVOVF9OVU1CRVIoMCwgNTMpLAorCVBFUkZfV0FSX0hBWkFSRAkJCT0gRVZFTlRfTlVNQkVSKDAs
IDU0KSwKKwlQRVJGX1JBV19IQVpBUkQJCQk9IEVWRU5UX05VTUJFUigwLCA1NSksCisJUEVSRl9X
QVdfSEFaQVJECQkJPSBFVkVOVF9OVU1CRVIoMCwgNTYpLAorCVBFUkZfUkFOSwkJCT0gRVZFTlRf
TlVNQkVSKDAsIDU4KSwKKwlQRVJGX1JFQURfQllQQVNTCQk9IEVWRU5UX05VTUJFUigwLCA1OSks
CisJUEVSRl9BQ1RfQllQQVNTCQkJPSBFVkVOVF9OVU1CRVIoMCwgNjApLAorCVBFUkZfV0lORE9X
X0xJTUlUX1JFQUNIRURfUkQJPSBFVkVOVF9OVU1CRVIoMCwgNjEpLAorCVBFUkZfV0lORE9XX0xJ
TUlUX1JFQUNIRURfV1IJPSBFVkVOVF9OVU1CRVIoMCwgNjIpLAorCU5PX0VWRU5UCQkJPSBFVkVO
VF9OVU1CRVIoMCwgNjMpLAorfTsKKworZW51bSBzdG0zMl9kZHJfcG11X21lbW9yeV90eXBlIHsK
KwlTVE0zMl9ERFJfUE1VX0xQRERSNCwKKwlTVE0zMl9ERFJfUE1VX0xQRERSMywKKwlTVE0zMl9E
RFJfUE1VX0REUjQsCisJU1RNMzJfRERSX1BNVV9ERFIzCit9OworCitzdGF0aWMgc3RydWN0IHN0
bTMyX2Rkcl9wbXUgKnRvX3N0bTMyX2Rkcl9wbXUoc3RydWN0IHBtdSAqcCkKK3sKKwlyZXR1cm4g
Y29udGFpbmVyX29mKHAsIHN0cnVjdCBzdG0zMl9kZHJfcG11LCBwbXUpOworfQorCitzdGF0aWMg
c3RydWN0IHN0bTMyX2Rkcl9wbXUgKmhydGltZXJfdG9fc3RtMzJfZGRyX3BtdShzdHJ1Y3QgaHJ0
aW1lciAqaCkKK3sKKwlyZXR1cm4gY29udGFpbmVyX29mKGgsIHN0cnVjdCBzdG0zMl9kZHJfcG11
LCBocnRpbWVyKTsKK30KKworc3RhdGljIHZvaWQgc3RtMzJfZGRyX3N0YXJ0X2NvdW50ZXJzKHN0
cnVjdCBzdG0zMl9kZHJfcG11ICpwbXUpCit7CisJY29uc3Qgc3RydWN0IHN0bTMyX2Rkcl9wbXVf
cmVnc3BlYyAqciA9IHBtdS0+Y2ZnLT5yZWdzOworCisJd3JpdGVsX3JlbGF4ZWQoci0+c3RhcnQu
bWFzaywgcG11LT5tZW1iYXNlICsgci0+c3RhcnQucmVnKTsKK30KKworc3RhdGljIHZvaWQgc3Rt
MzJfZGRyX3N0b3BfY291bnRlcnMoc3RydWN0IHN0bTMyX2Rkcl9wbXUgKnBtdSkKK3sKKwljb25z
dCBzdHJ1Y3Qgc3RtMzJfZGRyX3BtdV9yZWdzcGVjICpyID0gcG11LT5jZmctPnJlZ3M7CisKKwl3
cml0ZWxfcmVsYXhlZChyLT5zdG9wLm1hc2ssIHBtdS0+bWVtYmFzZSArIHItPnN0b3AucmVnKTsK
K30KKworc3RhdGljIHZvaWQgc3RtMzJfZGRyX2NsZWFyX3RpbWVfY291bnRlcihzdHJ1Y3Qgc3Rt
MzJfZGRyX3BtdSAqcG11KQoreworCWNvbnN0IHN0cnVjdCBzdG0zMl9kZHJfcG11X3JlZ3NwZWMg
KnIgPSBwbXUtPmNmZy0+cmVnczsKKworCXdyaXRlbF9yZWxheGVkKHItPmNsZWFyX3RpbWUubWFz
aywgcG11LT5tZW1iYXNlICsgci0+Y2xlYXJfdGltZS5yZWcpOworfQorCitzdGF0aWMgdm9pZCBz
dG0zMl9kZHJfY2xlYXJfZXZlbnRfY291bnRlcihzdHJ1Y3Qgc3RtMzJfZGRyX3BtdSAqcG11LCBz
dHJ1Y3Qgc3RtMzJfZGRyX2NudCAqY291bnRlcikKK3sKKwljb25zdCBzdHJ1Y3Qgc3RtMzJfZGRy
X3BtdV9yZWdzcGVjICpyID0gcG11LT5jZmctPnJlZ3M7CisKKwl3cml0ZWxfcmVsYXhlZChyLT5j
bGVhcl9jbnQubWFzayAmIEJJVChjb3VudGVyLT5pZHgpLCBwbXUtPm1lbWJhc2UgKyByLT5jbGVh
cl9jbnQucmVnKTsKK30KKworc3RhdGljIHZvaWQgc3RtMzJfZGRyX2NsZWFyX2NvdW50ZXIoc3Ry
dWN0IHN0bTMyX2Rkcl9wbXUgKnBtdSwgc3RydWN0IHN0bTMyX2Rkcl9jbnQgKmNvdW50ZXIpCit7
CisJY29uc3Qgc3RydWN0IHN0bTMyX2Rkcl9wbXVfcmVnc3BlYyAqciA9IHBtdS0+Y2ZnLT5yZWdz
OworCXUzMiBzdGF0dXMgPSByZWFkbF9yZWxheGVkKHBtdS0+bWVtYmFzZSArIHItPnN0YXR1cy5y
ZWcpOworCisJaWYgKGNvdW50ZXItPmlkeCA9PSBwbXUtPmNmZy0+dGltZV9jbnRfaWR4KQorCQlz
dG0zMl9kZHJfY2xlYXJfdGltZV9jb3VudGVyKHBtdSk7CisJZWxzZQorCQlzdG0zMl9kZHJfY2xl
YXJfZXZlbnRfY291bnRlcihwbXUsIGNvdW50ZXIpOworCisJaWYgKHN0YXR1cyAmIHItPnN0YXR1
cy5tYXNrKQorCQlkZXZfZXJyKHBtdS0+ZGV2LCAiRmFpbGVkIHRvIGNsZWFyIGNvdW50ZXIgJWkg
YmVjYXVzZSB0aGUgUE1VIGlzIGJ1c3lcbiIsCisJCQljb3VudGVyLT5pZHgpOworfQorCitzdGF0
aWMgdm9pZCBzdG0zMl9kZHJfY291bnRlcl9lbmFibGUoc3RydWN0IHN0bTMyX2Rkcl9wbXUgKnBt
dSwgc3RydWN0IHN0bTMyX2Rkcl9jbnQgKmNvdW50ZXIpCit7CisJY29uc3Qgc3RydWN0IHN0bTMy
X2Rkcl9wbXVfcmVnc3BlYyAqciA9IHBtdS0+Y2ZnLT5yZWdzOworCXUzMiB2YWwgPSByZWFkbF9y
ZWxheGVkKHBtdS0+bWVtYmFzZSArIHItPmVuYWJsZS5yZWcpOworCisJdmFsIHw9IEJJVChjb3Vu
dGVyLT5pZHgpOworCXdyaXRlbF9yZWxheGVkKHZhbCwgcG11LT5tZW1iYXNlICsgci0+ZW5hYmxl
LnJlZyk7Cit9CisKK3N0YXRpYyB2b2lkIHN0bTMyX2Rkcl9jb3VudGVyX2Rpc2FibGUoc3RydWN0
IHN0bTMyX2Rkcl9wbXUgKnBtdSwgc3RydWN0IHN0bTMyX2Rkcl9jbnQgKmNvdW50ZXIpCit7CisJ
Y29uc3Qgc3RydWN0IHN0bTMyX2Rkcl9wbXVfcmVnc3BlYyAqciA9IHBtdS0+Y2ZnLT5yZWdzOwor
CXUzMiB2YWwgPSByZWFkbF9yZWxheGVkKHBtdS0+bWVtYmFzZSArIHItPmVuYWJsZS5yZWcpOwor
CisJdmFsICY9IH5CSVQoY291bnRlci0+aWR4KTsKKwl3cml0ZWxfcmVsYXhlZCh2YWwsIHBtdS0+
bWVtYmFzZSArIHItPmVuYWJsZS5yZWcpOworfQorCitzdGF0aWMgaW50IHN0bTMyX2Rkcl9zZWxf
ZXZudChzdHJ1Y3Qgc3RtMzJfZGRyX3BtdSAqcG11LCBzdHJ1Y3Qgc3RtMzJfZGRyX2NudCAqY291
bnRlcikKK3sKKwljb25zdCBzdHJ1Y3Qgc3RtMzJfZGRyX3BtdV9yZWdzcGVjICpyID0gcG11LT5j
ZmctPnJlZ3M7CisJdTMyIGNudF9zZWxfdmFsOworCisJdTMyIGdyb3VwX3ZhbCA9IEdST1VQX1ZB
TFVFKGNvdW50ZXItPmV2dC0+YXR0ci5jb25maWcpOworCXUzMiBldnRfdmFsID0gRVZFTlRfSU5E
RVgoY291bnRlci0+ZXZ0LT5hdHRyLmNvbmZpZyk7CisKKwlpZiAocG11LT5zZWxlY3RlZF9zZXQg
IT0gLTEgJiYgcG11LT5zZWxlY3RlZF9zZXQgIT0gZ3JvdXBfdmFsKSB7CisJCWRldl9lcnIocG11
LT5kZXYsICJTZWxlY3RlZCBldmVudHMgYXJlIGZyb20gZGlmZmVyZW50IHNldFxuIik7CisJCXJl
dHVybiAtRUlOVkFMOworCX0KKwlwbXUtPnNlbGVjdGVkX3NldCA9IGdyb3VwX3ZhbDsKKworCWlm
IChwbXUtPmNmZy0+cmVncy0+Y2ZnLnJlZykgeworCQljbnRfc2VsX3ZhbCA9IHJlYWRsX3JlbGF4
ZWQocG11LT5tZW1iYXNlICsgci0+Y2ZnLnJlZyk7CisJCWNudF9zZWxfdmFsICY9IH5DRkdfU0VM
X01TSzsKKwkJY250X3NlbF92YWwgfD0gKENGR19TRUxfTVNLICYgKGdyb3VwX3ZhbCA8PCBDRkdf
U0VMX1NISUZUKSk7CisJCXdyaXRlbF9yZWxheGVkKGNudF9zZWxfdmFsLCBwbXUtPm1lbWJhc2Ug
KyByLT5jZmcucmVnKTsKKworCQlyZXR1cm4gMDsKKwl9CisKKwkvKiBXZSBhc3N1bWUgY2ZnMCBh
bmQgY2ZnMSBhcmUgZmlsbGVkIGluIHRoZSBtYXRjaCBkYXRhICovCisJdTMyIGNudF9pZHggPSBj
b3VudGVyLT5pZHg7CisJdTMyIGNudF9zZWxfZXZ0X3JlZyA9IHItPmNmZzAucmVnOworCisJaWYg
KCEoY250X2lkeCA8IE1QMl9DTlRfU0VMX1BFUl9SRUcpKSB7CisJCWNudF9zZWxfZXZ0X3JlZyA9
IHItPmNmZzEucmVnOworCQljbnRfaWR4IC09IE1QMl9DTlRfU0VMX1BFUl9SRUc7CisJfQorCisJ
Y250X3NlbF92YWwgPSByZWFkbF9yZWxheGVkKHBtdS0+bWVtYmFzZSArIGNudF9zZWxfZXZ0X3Jl
Zyk7CisJY250X3NlbF92YWwgJj0gfkdFTk1BU0soOCAqIGNudF9pZHggKyA3LCA4ICogY250X2lk
eCk7CisJY250X3NlbF92YWwgfD0gZXZ0X3ZhbCA8PCAoOCAqIGNudF9pZHgpOworCisJd3JpdGVs
X3JlbGF4ZWQoY250X3NlbF92YWwsIHBtdS0+bWVtYmFzZSArIGNudF9zZWxfZXZ0X3JlZyk7CisK
KwlyZXR1cm4gMDsKK30KKworc3RhdGljIHN0cnVjdCBzdG0zMl9kZHJfY250ICpzdG0zMl9kZHJf
cG11X2dldF9ldmVudF9jb3VudGVyX21wMShzdHJ1Y3Qgc3RtMzJfZGRyX3BtdSAqcG11LAorCQkJ
CQkJCQkgc3RydWN0IHBlcmZfZXZlbnQgKmV2ZW50KQoreworCXUzMiBjb25maWcgPSBldmVudC0+
YXR0ci5jb25maWc7CisJdTMyIGV2ZW50X2lkeCA9IEVWRU5UX0lOREVYKGNvbmZpZyk7CisJc3Ry
dWN0IHN0bTMyX2Rkcl9jbnQgKmNudDsKKworCWNudCA9IGt6YWxsb2Moc2l6ZW9mKCpjbnQpLCBH
RlBfS0VSTkVMKTsKKwlpZiAoIWNudCkKKwkJcmV0dXJuIEVSUl9QVFIoLUVOT01FTSk7CisKKwlj
bnQtPmV2dCA9IGV2ZW50OworCWNudC0+aWR4ID0gZXZlbnRfaWR4OworCWV2ZW50LT5wbXVfcHJp
dmF0ZSA9IGNudDsKKwlsaXN0X2FkZCgmY250LT5jbnRfbGlzdCwgJnBtdS0+Y291bnRlcnNbZXZl
bnRfaWR4XSk7CisKKwlyZXR1cm4gY250OworfQorCitzdGF0aWMgc3RydWN0IHN0bTMyX2Rkcl9j
bnQgKnN0bTMyX2Rkcl9wbXVfZ2V0X2V2ZW50X2NvdW50ZXJfbXAyKHN0cnVjdCBzdG0zMl9kZHJf
cG11ICpwbXUsCisJCQkJCQkJCSBzdHJ1Y3QgcGVyZl9ldmVudCAqZXZlbnQpCit7CisJc3RydWN0
IHN0bTMyX2Rkcl9jbnQgKmNudDsKKwlpbnQgaWR4ID0gLTE7CisKKwkvKiBMb29wIG9uIGFsbCB0
aGUgY291bnRlcnMgZXhjZXB0IFRJTUVfQ05UX0lEWCAqLworCWZvciAoaW50IGkgPSAwOyBpIDwg
cG11LT5jZmctPmV2dF9jb3VudGVyc19uYjsgaSsrKSB7CisJCXU2NCBjb25maWc7CisKKwkJaWYg
KGxpc3RfZW1wdHkoJnBtdS0+Y291bnRlcnNbaV0pKSB7CisJCQlpZHggPSBpOworCQkJY29udGlu
dWU7CisJCX0KKwkJY29uZmlnID0gbGlzdF9maXJzdF9lbnRyeSgmcG11LT5jb3VudGVyc1tpXSwg
c3RydWN0IHN0bTMyX2Rkcl9jbnQsCisJCQkJCSAgY250X2xpc3QpLT5ldnQtPmF0dHIuY29uZmln
OworCQlpZiAoY29uZmlnID09IGV2ZW50LT5hdHRyLmNvbmZpZykgeworCQkJaWR4ID0gaTsKKwkJ
CWJyZWFrOworCQl9CisJfQorCisJaWYgKGlkeCA9PSAtMSkKKwkJcmV0dXJuIEVSUl9QVFIoLUVO
T0VOVCk7CisKKwljbnQgPSBremFsbG9jKHNpemVvZigqY250KSwgR0ZQX0tFUk5FTCk7CisJaWYg
KCFjbnQpCisJCXJldHVybiBFUlJfUFRSKC1FTk9NRU0pOworCisJY250LT5ldnQgPSBldmVudDsK
KwljbnQtPmlkeCA9IGlkeDsKKwlldmVudC0+cG11X3ByaXZhdGUgPSBjbnQ7CisKKwlsaXN0X2Fk
ZCgmY250LT5jbnRfbGlzdCwgJnBtdS0+Y291bnRlcnNbaWR4XSk7CisKKwlyZXR1cm4gY250Owor
fQorCitzdGF0aWMgaW5saW5lIHN0cnVjdCBzdG0zMl9kZHJfY250ICpzdG0zMl9nZXRfZXZlbnRf
Y291bnRlcihzdHJ1Y3Qgc3RtMzJfZGRyX3BtdSAqcG11LAorCQkJCQkJCSAgICBzdHJ1Y3QgcGVy
Zl9ldmVudCAqZXZlbnQpCit7CisJcmV0dXJuIHBtdS0+Y2ZnLT5nZXRfY291bnRlcihwbXUsIGV2
ZW50KTsKK30KKworc3RhdGljIGludCBzdG0zMl9kZHJfcG11X2dldF9jb3VudGVyKHN0cnVjdCBz
dG0zMl9kZHJfcG11ICpwbXUsIHN0cnVjdCBwZXJmX2V2ZW50ICpldmVudCkKK3sKKwl1MzIgdGlt
ZV9jbnRfaWR4ID0gcG11LT5jZmctPnRpbWVfY250X2lkeDsKKwl1MzIgY29uZmlnID0gZXZlbnQt
PmF0dHIuY29uZmlnOworCXN0cnVjdCBzdG0zMl9kZHJfY250ICpjbnQ7CisKKwlpZiAoIXBtdSB8
fCAhZXZlbnQpCisJCXJldHVybiAtRUlOVkFMOworCisJcG11LT5zZWxlY3RlZF9zZXQgPSBHUk9V
UF9WQUxVRShjb25maWcpOworCisJaWYgKGNvbmZpZyA9PSBUSU1FX0NOVCkgeworCQljbnQgPSBr
emFsbG9jKHNpemVvZigqY250KSwgR0ZQX0tFUk5FTCk7CisJCWlmICghY250KQorCQkJcmV0dXJu
IC1FTk9NRU07CisKKwkJY250LT5ldnQgPSBldmVudDsKKwkJY250LT5pZHggPSB0aW1lX2NudF9p
ZHg7CisJCWV2ZW50LT5wbXVfcHJpdmF0ZSA9IGNudDsKKwkJbGlzdF9hZGQoJmNudC0+Y250X2xp
c3QsICZwbXUtPmNvdW50ZXJzW3RpbWVfY250X2lkeF0pOworCisJCXJldHVybiAwOworCX0KKwor
CWNudCA9IHN0bTMyX2dldF9ldmVudF9jb3VudGVyKHBtdSwgZXZlbnQpOworCWlmIChJU19FUlIo
Y250KSkKKwkJcmV0dXJuIFBUUl9FUlIoY250KTsKKworCWlmIChsaXN0X2NvdW50X25vZGVzKCZj
bnQtPmNudF9saXN0KSA9PSAxKSB7CisJCXN0bTMyX2Rkcl9zdG9wX2NvdW50ZXJzKHBtdSk7CisJ
CXN0bTMyX2Rkcl9zZWxfZXZudChwbXUsIGNudCk7CisJCXN0bTMyX2Rkcl9jb3VudGVyX2VuYWJs
ZShwbXUsIGNudCk7CisJCXN0bTMyX2Rkcl9zdGFydF9jb3VudGVycyhwbXUpOworCX0KKworCXJl
dHVybiAwOworfQorCitzdGF0aWMgdm9pZCBzdG0zMl9kZHJfcG11X2ZyZWVfY291bnRlcihzdHJ1
Y3Qgc3RtMzJfZGRyX3BtdSAqcG11LAorCQkJCSAgICAgICBzdHJ1Y3Qgc3RtMzJfZGRyX2NudCAq
Y291bnRlcikKK3sKKwlzaXplX3QgY291bnQgPSBsaXN0X2NvdW50X25vZGVzKCZjb3VudGVyLT5j
bnRfbGlzdCk7CisKKwlpZiAoY291bnRlci0+ZXZ0LT5hdHRyLmNvbmZpZyAhPSBUSU1FX0NOVCAm
JiBjb3VudCA9PSAxKQorCQlzdG0zMl9kZHJfY291bnRlcl9kaXNhYmxlKHBtdSwgY291bnRlcik7
CisKKwlsaXN0X2RlbCgmY291bnRlci0+Y250X2xpc3QpOworCWtmcmVlKGNvdW50ZXIpOworfQor
CitzdGF0aWMgdm9pZCBzdG0zMl9kZHJfcG11X2V2ZW50X3VwZGF0ZV9saXN0KHN0cnVjdCBzdG0z
Ml9kZHJfcG11ICpwbXUsIHN0cnVjdCBsaXN0X2hlYWQgKmxpc3QpCit7CisJc3RydWN0IHN0bTMy
X2Rkcl9jbnQgKmNvdW50ZXIgPSBsaXN0X2ZpcnN0X2VudHJ5KGxpc3QsIHN0cnVjdCBzdG0zMl9k
ZHJfY250LCBjbnRfbGlzdCk7CisJY29uc3Qgc3RydWN0IHN0bTMyX2Rkcl9wbXVfcmVnc3BlYyAq
ciA9IHBtdS0+Y2ZnLT5yZWdzOworCXUzMiB2YWw7CisKKwlpZiAoY291bnRlci0+ZXZ0LT5hdHRy
LmNvbmZpZyAhPSBUSU1FX0NOVCkKKwkJdmFsID0gcmVhZGxfcmVsYXhlZChwbXUtPm1lbWJhc2Ug
KyByLT5jb3VudGVyX2V2dFtjb3VudGVyLT5pZHhdLnJlZyk7CisJZWxzZQorCQl2YWwgPSByZWFk
bF9yZWxheGVkKHBtdS0+bWVtYmFzZSArIHItPmNvdW50ZXJfdGltZS5yZWcpOworCisJc3RtMzJf
ZGRyX2NsZWFyX2NvdW50ZXIocG11LCBjb3VudGVyKTsKKworCWxpc3RfZm9yX2VhY2hfZW50cnko
Y291bnRlciwgbGlzdCwgY250X2xpc3QpCisJCWxvY2FsNjRfYWRkKHZhbCwgJmNvdW50ZXItPmV2
dC0+Y291bnQpOworfQorCitzdGF0aWMgdm9pZCBzdG0zMl9kZHJfcG11X2V2ZW50X3JlYWQoc3Ry
dWN0IHBlcmZfZXZlbnQgKmV2ZW50KQoreworCXN0cnVjdCBzdG0zMl9kZHJfcG11ICpwbXUgPSB0
b19zdG0zMl9kZHJfcG11KGV2ZW50LT5wbXUpOworCXN0cnVjdCBzdG0zMl9kZHJfY250ICpjbnQg
PSBldmVudC0+cG11X3ByaXZhdGU7CisKKwlocnRpbWVyX3N0YXJ0KCZwbXUtPmhydGltZXIsIHBt
dS0+cG9sbF9wZXJpb2QsIEhSVElNRVJfTU9ERV9SRUxfUElOTkVEKTsKKworCXN0bTMyX2Rkcl9z
dG9wX2NvdW50ZXJzKHBtdSk7CisKKwlzdG0zMl9kZHJfcG11X2V2ZW50X3VwZGF0ZV9saXN0KHBt
dSwgJnBtdS0+Y291bnRlcnNbY250LT5pZHhdKTsKKworCXN0bTMyX2Rkcl9zdGFydF9jb3VudGVy
cyhwbXUpOworfQorCitzdGF0aWMgdm9pZCBzdG0zMl9kZHJfcG11X2V2ZW50X3N0YXJ0KHN0cnVj
dCBwZXJmX2V2ZW50ICpldmVudCwgaW50IGZsYWdzKQoreworCXN0cnVjdCBzdG0zMl9kZHJfcG11
ICpwbXUgPSB0b19zdG0zMl9kZHJfcG11KGV2ZW50LT5wbXUpOworCXN0cnVjdCBzdG0zMl9kZHJf
Y250ICpjb3VudGVyID0gZXZlbnQtPnBtdV9wcml2YXRlOworCXN0cnVjdCBod19wZXJmX2V2ZW50
ICpodyA9ICZldmVudC0+aHc7CisKKwlpZiAoV0FSTl9PTl9PTkNFKCEoaHctPnN0YXRlICYgUEVS
Rl9IRVNfU1RPUFBFRCkpKQorCQlyZXR1cm47CisKKwlpZiAoZmxhZ3MgJiBQRVJGX0VGX1JFTE9B
RCkKKwkJV0FSTl9PTl9PTkNFKCEoaHctPnN0YXRlICYgUEVSRl9IRVNfVVBUT0RBVEUpKTsKKwor
CXN0bTMyX2Rkcl9zdG9wX2NvdW50ZXJzKHBtdSk7CisKKwlpZiAobGlzdF9jb3VudF9ub2Rlcygm
Y291bnRlci0+Y250X2xpc3QpID09IDEpCisJCXN0bTMyX2Rkcl9jbGVhcl9jb3VudGVyKHBtdSwg
Y291bnRlcik7CisJZWxzZQorCQlzdG0zMl9kZHJfcG11X2V2ZW50X3VwZGF0ZV9saXN0KHBtdSwg
JnBtdS0+Y291bnRlcnNbY291bnRlci0+aWR4XSk7CisKKwlzdG0zMl9kZHJfc3RhcnRfY291bnRl
cnMocG11KTsKKwlsb2NhbDY0X3NldCgmaHctPnByZXZfY291bnQsIDApOworCWh3LT5zdGF0ZSA9
IDA7Cit9CisKK3N0YXRpYyB2b2lkIHN0bTMyX2Rkcl9wbXVfZXZlbnRfc3RvcChzdHJ1Y3QgcGVy
Zl9ldmVudCAqZXZlbnQsIGludCBmbGFncykKK3sKKwlzdHJ1Y3QgaHdfcGVyZl9ldmVudCAqaHcg
PSAmZXZlbnQtPmh3OworCisJaWYgKFdBUk5fT05fT05DRShody0+c3RhdGUgJiBQRVJGX0hFU19T
VE9QUEVEKSkKKwkJcmV0dXJuOworCisJaHctPnN0YXRlIHw9IFBFUkZfSEVTX1NUT1BQRUQ7CisK
KwlpZiAoZmxhZ3MgJiBQRVJGX0VGX1VQREFURSkgeworCQlzdG0zMl9kZHJfcG11X2V2ZW50X3Jl
YWQoZXZlbnQpOworCQlody0+c3RhdGUgfD0gUEVSRl9IRVNfVVBUT0RBVEU7CisJfQorfQorCitz
dGF0aWMgaW50IHN0bTMyX2Rkcl9wbXVfZXZlbnRfYWRkKHN0cnVjdCBwZXJmX2V2ZW50ICpldmVu
dCwgaW50IGZsYWdzKQoreworCXN0cnVjdCBzdG0zMl9kZHJfcG11ICpwbXUgPSB0b19zdG0zMl9k
ZHJfcG11KGV2ZW50LT5wbXUpOworCWludCByZXQ7CisKKwljbGtfZW5hYmxlKHBtdS0+Y2xrKTsK
KworCWhydGltZXJfc3RhcnQoJnBtdS0+aHJ0aW1lciwgcG11LT5wb2xsX3BlcmlvZCwgSFJUSU1F
Ul9NT0RFX1JFTF9QSU5ORUQpOworCisJcmV0ID0gc3RtMzJfZGRyX3BtdV9nZXRfY291bnRlcihw
bXUsIGV2ZW50KTsKKwlpZiAocmV0KQorCQlyZXR1cm4gcmV0OworCisJZXZlbnQtPmh3LnN0YXRl
ID0gUEVSRl9IRVNfU1RPUFBFRCB8IFBFUkZfSEVTX1VQVE9EQVRFOworCisJaWYgKGZsYWdzICYg
UEVSRl9FRl9TVEFSVCkKKwkJc3RtMzJfZGRyX3BtdV9ldmVudF9zdGFydChldmVudCwgZmxhZ3Mp
OworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyB2b2lkIHN0bTMyX2Rkcl9wbXVfZXZlbnRfZGVs
KHN0cnVjdCBwZXJmX2V2ZW50ICpldmVudCwgaW50IGZsYWdzKQoreworCXN0cnVjdCBzdG0zMl9k
ZHJfcG11ICpwbXUgPSB0b19zdG0zMl9kZHJfcG11KGV2ZW50LT5wbXUpOworCXN0cnVjdCBzdG0z
Ml9kZHJfY250ICpjb3VudGVyID0gZXZlbnQtPnBtdV9wcml2YXRlOworCWJvb2wgZXZlbnRzID0g
dHJ1ZTsKKworCXN0bTMyX2Rkcl9wbXVfZXZlbnRfc3RvcChldmVudCwgUEVSRl9FRl9VUERBVEUp
OworCisJc3RtMzJfZGRyX3BtdV9mcmVlX2NvdW50ZXIocG11LCBjb3VudGVyKTsKKworCWZvciAo
aW50IGkgPSAwOyBpIDwgcG11LT5jZmctPmNvdW50ZXJzX25iOyBpKyspCisJCWV2ZW50cyA9ICFs
aXN0X2VtcHR5KCZwbXUtPmNvdW50ZXJzW2ldKTsKKworCS8qIElmIHRoZXJlIGlzIGFjdGl2aXR5
IG5vdGhpbmcgdG8gZG8gKi8KKwlpZiAoZXZlbnRzKQorCQlyZXR1cm47CisKKwlocnRpbWVyX2Nh
bmNlbCgmcG11LT5ocnRpbWVyKTsKKwlzdG0zMl9kZHJfc3RvcF9jb3VudGVycyhwbXUpOworCisJ
cG11LT5zZWxlY3RlZF9zZXQgPSAtMTsKKworCWNsa19kaXNhYmxlKHBtdS0+Y2xrKTsKK30KKwor
c3RhdGljIGludCBzdG0zMl9kZHJfcG11X2V2ZW50X2luaXQoc3RydWN0IHBlcmZfZXZlbnQgKmV2
ZW50KQoreworCWlmIChldmVudC0+YXR0ci50eXBlICE9IGV2ZW50LT5wbXUtPnR5cGUpCisJCXJl
dHVybiAtRU5PRU5UOworCisJaWYgKGlzX3NhbXBsaW5nX2V2ZW50KGV2ZW50KSB8fCBldmVudC0+
YXR0YWNoX3N0YXRlICYgUEVSRl9BVFRBQ0hfVEFTSykKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwly
ZXR1cm4gMDsKK30KKworc3RhdGljIGVudW0gaHJ0aW1lcl9yZXN0YXJ0IHN0bTMyX2Rkcl9wbXVf
cG9sbChzdHJ1Y3QgaHJ0aW1lciAqaHJ0aW1lcikKK3sKKwlzdHJ1Y3Qgc3RtMzJfZGRyX3BtdSAq
cG11ID0gaHJ0aW1lcl90b19zdG0zMl9kZHJfcG11KGhydGltZXIpOworCisJc3RtMzJfZGRyX3N0
b3BfY291bnRlcnMocG11KTsKKworCWZvciAoaW50IGkgPSAwOyBpIDwgTVAyX0NOVF9OQjsgaSsr
KQorCQlpZiAoIWxpc3RfZW1wdHkoJnBtdS0+Y291bnRlcnNbaV0pKQorCQkJc3RtMzJfZGRyX3Bt
dV9ldmVudF91cGRhdGVfbGlzdChwbXUsICZwbXUtPmNvdW50ZXJzW2ldKTsKKworCWlmIChsaXN0
X2VtcHR5KCZwbXUtPmNvdW50ZXJzW3BtdS0+Y2ZnLT50aW1lX2NudF9pZHhdKSkKKwkJc3RtMzJf
ZGRyX2NsZWFyX3RpbWVfY291bnRlcihwbXUpOworCisJc3RtMzJfZGRyX3N0YXJ0X2NvdW50ZXJz
KHBtdSk7CisKKwlocnRpbWVyX2ZvcndhcmRfbm93KGhydGltZXIsIHBtdS0+cG9sbF9wZXJpb2Qp
OworCisJcmV0dXJuIEhSVElNRVJfUkVTVEFSVDsKK30KKworc3RhdGljIHNzaXplX3Qgc3RtMzJf
ZGRyX3BtdV9zeXNmc19zaG93KHN0cnVjdCBkZXZpY2UgKmRldiwgc3RydWN0IGRldmljZV9hdHRy
aWJ1dGUgKmF0dHIsCisJCQkJCWNoYXIgKmJ1ZikKK3sKKwlzdHJ1Y3QgcGVyZl9wbXVfZXZlbnRz
X2F0dHIgKnBtdV9hdHRyOworCisJcG11X2F0dHIgPSBjb250YWluZXJfb2YoYXR0ciwgc3RydWN0
IHBlcmZfcG11X2V2ZW50c19hdHRyLCBhdHRyKTsKKworCXJldHVybiBzeXNmc19lbWl0KGJ1Ziwg
ImV2ZW50PTB4JTAybGx4XG4iLCBwbXVfYXR0ci0+aWQpOworfQorCitzdGF0aWMgaW50IHN0bTMy
X2Rkcl9wbXVfZ2V0X21lbW9yeV90eXBlKHN0cnVjdCBzdG0zMl9kZHJfcG11ICpwbXUpCit7CisJ
c3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldiA9IHRvX3BsYXRmb3JtX2RldmljZShwbXUtPmRl
dik7CisJc3RydWN0IGRldmljZV9ub2RlICptZW1jaGFuOworCisJbWVtY2hhbiA9IG9mX3BhcnNl
X3BoYW5kbGUocGRldi0+ZGV2Lm9mX25vZGUsICJtZW1vcnktY2hhbm5lbCIsIDApOworCWlmICgh
bWVtY2hhbikKKwkJcmV0dXJuIGRldl9lcnJfcHJvYmUoJnBkZXYtPmRldiwgLUVJTlZBTCwKKwkJ
CQkgICAgICJNaXNzaW5nIGRldmljZS10cmVlIHByb3BlcnR5ICdtZW1vcnktY2hhbm5lbCdcbiIp
OworCisJaWYgKG9mX2RldmljZV9pc19jb21wYXRpYmxlKG1lbWNoYW4sICJqZWRlYyxscGRkcjQt
Y2hhbm5lbCIpKQorCQlwbXUtPmRyYW1fdHlwZSA9IFNUTTMyX0REUl9QTVVfTFBERFI0OworCWVs
c2UgaWYgKG9mX2RldmljZV9pc19jb21wYXRpYmxlKG1lbWNoYW4sICJqZWRlYyxscGRkcjMtY2hh
bm5lbCIpKQorCQlwbXUtPmRyYW1fdHlwZSA9IFNUTTMyX0REUl9QTVVfTFBERFIzOworCWVsc2Ug
aWYgKG9mX2RldmljZV9pc19jb21wYXRpYmxlKG1lbWNoYW4sICJqZWRlYyxkZHI0LWNoYW5uZWwi
KSkKKwkJcG11LT5kcmFtX3R5cGUgPSBTVE0zMl9ERFJfUE1VX0REUjQ7CisJZWxzZSBpZiAob2Zf
ZGV2aWNlX2lzX2NvbXBhdGlibGUobWVtY2hhbiwgImplZGVjLGRkcjMtY2hhbm5lbCIpKQorCQlw
bXUtPmRyYW1fdHlwZSA9IFNUTTMyX0REUl9QTVVfRERSMzsKKwllbHNlCisJCXJldHVybiBkZXZf
ZXJyX3Byb2JlKCZwZGV2LT5kZXYsIC1FSU5WQUwsICJVbnN1cHBvcnRlZCBtZW1vcnkgY2hhbm5l
bCB0eXBlXG4iKTsKKworCWlmIChwbXUtPmRyYW1fdHlwZSA9PSBTVE0zMl9ERFJfUE1VX0xQRERS
MykKKwkJZGV2X3dhcm4oJnBkZXYtPmRldiwKKwkJCSAiTFBERFIzIHN1cHBvcnRlZCBieSBERFJQ
RVJGTSBidXQgbm90IHN1cHBvcnRlZCBieSBERFJDVFJML0REUlBIWVxuIik7CisKKwlyZXR1cm4g
MDsKK30KKworI2RlZmluZSBTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIoX25hbWUsIF9pZCkJCQlc
CisJUE1VX0VWRU5UX0FUVFJfSUQoX25hbWUsIHN0bTMyX2Rkcl9wbXVfc3lzZnNfc2hvdywgX2lk
KQorCitzdGF0aWMgc3RydWN0IGF0dHJpYnV0ZSAqc3RtMzJfZGRyX3BtdV9ldmVudHNfYXR0cnNf
bXBbXSA9IHsKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIocGVyZl9vcF9pc19yZCwgUEVSRl9P
UF9JU19SRCksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9BVFRSKHBlcmZfb3BfaXNfd3IsIFBFUkZf
T1BfSVNfV1IpLAorCVNUTTMyX0REUl9QTVVfRVZFTlRfQVRUUihwZXJmX29wX2lzX2FjdGl2YXRl
LCBQRVJGX09QX0lTX0FDVElWQVRFKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIoY3RsX2lk
bGUsIENUTF9JRExFKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIocGVyZl9ocHJfcmVxX3dp
dGhfbm9fY3JlZGl0LCBQRVJGX0hQUl9SRVFfV0lUSF9OT19DUkVESVQpLAorCVNUTTMyX0REUl9Q
TVVfRVZFTlRfQVRUUihwZXJmX2xwcl9yZXFfd2l0aF9ub19jcmVkaXQsIFBFUkZfTFBSX1JFUV9X
SVRIX05PX0NSRURJVCksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9BVFRSKGNhY3RpdmVfZGRyYywg
Q0FDVElWRV9ERFJDKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIocGVyZl9vcF9pc19lbnRl
cl9wb3dlcmRvd24sIFBFUkZfT1BfSVNfRU5URVJfUE9XRVJET1dOKSwKKwlTVE0zMl9ERFJfUE1V
X0VWRU5UX0FUVFIocGVyZl9vcF9pc19yZWZyZXNoLCBQRVJGX09QX0lTX1JFRlJFU0gpLAorCVNU
TTMyX0REUl9QTVVfRVZFTlRfQVRUUihwZXJmX3NlbGZyZXNoX21vZGUsIFBFUkZfU0VMRlJFU0hf
TU9ERSksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9BVFRSKGRmaV9scF9yZXEsIERGSV9MUF9SRVEp
LAorCVNUTTMyX0REUl9QTVVfRVZFTlRfQVRUUihwZXJmX2hwcl94YWN0X3doZW5fY3JpdGljYWws
IFBFUkZfSFBSX1hBQ1RfV0hFTl9DUklUSUNBTCksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9BVFRS
KHBlcmZfbHByX3hhY3Rfd2hlbl9jcml0aWNhbCwgUEVSRl9MUFJfWEFDVF9XSEVOX0NSSVRJQ0FM
KSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIocGVyZl93cl94YWN0X3doZW5fY3JpdGljYWws
IFBFUkZfV1JfWEFDVF9XSEVOX0NSSVRJQ0FMKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIo
ZGZpX2xwX3JlcV9jcHksIERGSV9MUF9SRVEpLCAgLyogU3VmZml4ZWQgJ19jcHknIHRvIGFsbG93
IHRoZQorCQkJCQkJCQkqIGNob2ljZSBiZXR3ZWVuIHNldHMgMiBhbmQgMworCQkJCQkJCQkqLwor
CVNUTTMyX0REUl9QTVVfRVZFTlRfQVRUUih0aW1lX2NudCwgVElNRV9DTlQpLAorCU5VTEwsCit9
OworCitzdGF0aWMgc3RydWN0IGF0dHJpYnV0ZV9ncm91cCBzdG0zMl9kZHJfcG11X2V2ZW50c19h
dHRyc19ncm91cF9tcCA9IHsKKwkubmFtZSA9ICJldmVudHMiLAorCS5hdHRycyA9IHN0bTMyX2Rk
cl9wbXVfZXZlbnRzX2F0dHJzX21wLAorfTsKKworc3RhdGljIHN0cnVjdCBhdHRyaWJ1dGUgKnN0
bTMyX2Rkcl9wbXVfZXZlbnRzX2F0dHJzX21wMltdID0geworCVNUTTMyX0REUl9QTVVfRVZFTlRf
QVRUUihkZmlfaXNfYWN0LCBERklfSVNfQUNUKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIo
ZGZpX2lzX3ByZXBiLCBERklfSVNfUFJFUEIpLAorCVNUTTMyX0REUl9QTVVfRVZFTlRfQVRUUihk
ZmlfaXNfcHJlYWIsIERGSV9JU19QUkVBQiksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9BVFRSKGRm
aV9pc19yZCwgREZJX0lTX1JEKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIoZGZpX2lzX3Jk
YSwgREZJX0lTX1JEQSksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9BVFRSKGRmaV9pc193ciwgREZJ
X0lTX1dSKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIoZGZpX2lzX3dyYSwgREZJX0lTX1dS
QSksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9BVFRSKGRmaV9pc19td3IsIERGSV9JU19NV1IpLAor
CVNUTTMyX0REUl9QTVVfRVZFTlRfQVRUUihkZmlfaXNfbXdyYSwgREZJX0lTX01XUkEpLAorCVNU
TTMyX0REUl9QTVVfRVZFTlRfQVRUUihkZmlfaXNfbXJ3LCBERklfSVNfTVJXKSwKKwlTVE0zMl9E
RFJfUE1VX0VWRU5UX0FUVFIoZGZpX2lzX21yciwgREZJX0lTX01SUiksCisJU1RNMzJfRERSX1BN
VV9FVkVOVF9BVFRSKGRmaV9pc19yZWZwYiwgREZJX0lTX1JFRlBCKSwKKwlTVE0zMl9ERFJfUE1V
X0VWRU5UX0FUVFIoZGZpX2lzX3JlZmFiLCBERklfSVNfUkVGQUIpLAorCVNUTTMyX0REUl9QTVVf
RVZFTlRfQVRUUihkZmlfaXNfbXBjLCBERklfSVNfTVBDKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5U
X0FUVFIocGVyZl9vcF9pc19hY3QsIFBFUkZfT1BfSVNfQUNUKSwKKwlTVE0zMl9ERFJfUE1VX0VW
RU5UX0FUVFIocGVyZl9vcF9pc19yZCwgUEVSRl9PUF9JU19SRCksCisJU1RNMzJfRERSX1BNVV9F
VkVOVF9BVFRSKHBlcmZfb3BfaXNfd3IsIFBFUkZfT1BfSVNfV1IpLAorCVNUTTMyX0REUl9QTVVf
RVZFTlRfQVRUUihwZXJmX29wX2lzX213ciwgUEVSRl9PUF9JU19NV1IpLAorCVNUTTMyX0REUl9Q
TVVfRVZFTlRfQVRUUihwZXJmX29wX2lzX3JlZiwgUEVSRl9PUF9JU19SRUYpLAorCVNUTTMyX0RE
Ul9QTVVfRVZFTlRfQVRUUihwZXJmX29wX2lzX2NyaXRfcmVmLCBQRVJGX09QX0lTX0NSSVRfUkVG
KSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIocGVyZl9vcF9pc19zcGVjX3JlZiwgUEVSRl9P
UF9JU19TUEVDX1JFRiksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9BVFRSKHBlcmZfb3BfaXNfenFj
YWwsIFBFUkZfT1BfSVNfWlFDQUwpLAorCVNUTTMyX0REUl9QTVVfRVZFTlRfQVRUUihwZXJmX29w
X2lzX2VudGVyX3Bvd2RuLCBQRVJGX09QX0lTX0VOVEVSX1BPV0ROKSwKKwlTVE0zMl9ERFJfUE1V
X0VWRU5UX0FUVFIocGVyZl9vcF9pc19lbnRlcl9zZWxmcmVmLCBQRVJGX09QX0lTX0VOVEVSX1NF
TEZSRUYpLAorCVNUTTMyX0REUl9QTVVfRVZFTlRfQVRUUihwZXJmX29wX2lzX3ByZSwgUEVSRl9P
UF9JU19QUkUpLAorCVNUTTMyX0REUl9QTVVfRVZFTlRfQVRUUihwZXJmX29wX2lzX3ByZV9mb3Jf
cmR3ciwgUEVSRl9PUF9JU19QUkVfRk9SX1JEV1IpLAorCVNUTTMyX0REUl9QTVVfRVZFTlRfQVRU
UihwZXJmX29wX2lzX3ByZV9mb3Jfb3RoZXJzLCBQRVJGX09QX0lTX1BSRV9GT1JfT1RIRVJTKSwK
KwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIocGVyZl9vcF9pc19yZF9hY3RpdmF0ZSwgUEVSRl9P
UF9JU19SRF9BQ1RJVkFURSksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9BVFRSKHBlcmZfaHByX3Jl
cV93aXRoX25vY3JlZGl0LCBQRVJGX0hQUl9SRVFfV0lUSF9OT0NSRURJVCksCisJU1RNMzJfRERS
X1BNVV9FVkVOVF9BVFRSKHBlcmZfbHByX3JlcV93aXRoX25vY3JlZGl0LCBQRVJGX0xQUl9SRVFf
V0lUSF9OT0NSRURJVCksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9BVFRSKHBlcmZfaHByX3hhY3Rf
d2hlbl9jcml0aWNhbCwgUEVSRl9IUFJfWEFDVF9XSEVOX0NSSVRJQ0FMKSwKKwlTVE0zMl9ERFJf
UE1VX0VWRU5UX0FUVFIocGVyZl9scHJfeGFjdF93aGVuX2NyaXRpY2FsLCBQRVJGX0xQUl9YQUNU
X1dIRU5fQ1JJVElDQUwpLAorCVNUTTMyX0REUl9QTVVfRVZFTlRfQVRUUihwZXJmX3dyX3hhY3Rf
d2hlbl9jcml0aWNhbCwgUEVSRl9XUl9YQUNUX1dIRU5fQ1JJVElDQUwpLAorCVNUTTMyX0REUl9Q
TVVfRVZFTlRfQVRUUihwZXJmX3Jkd3JfdHJhbnNpdGlvbnMsIFBFUkZfUkRXUl9UUkFOU0lUSU9O
UyksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9BVFRSKHBlcmZfd2FyX2hhemFyZCwgUEVSRl9XQVJf
SEFaQVJEKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIocGVyZl9yYXdfaGF6YXJkLCBQRVJG
X1JBV19IQVpBUkQpLAorCVNUTTMyX0REUl9QTVVfRVZFTlRfQVRUUihwZXJmX3dhd19oYXphcmQs
IFBFUkZfV0FXX0hBWkFSRCksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9BVFRSKHBlcmZfcmFuaywg
UEVSRl9SQU5LKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIocGVyZl9yZWFkX2J5cGFzcywg
UEVSRl9SRUFEX0JZUEFTUyksCisJU1RNMzJfRERSX1BNVV9FVkVOVF9BVFRSKHBlcmZfYWN0X2J5
cGFzcywgUEVSRl9BQ1RfQllQQVNTKSwKKwlTVE0zMl9ERFJfUE1VX0VWRU5UX0FUVFIocGVyZl93
aW5kb3dfbGltaXRfcmVhY2hlZF9yZCwgUEVSRl9XSU5ET1dfTElNSVRfUkVBQ0hFRF9SRCksCisJ
U1RNMzJfRERSX1BNVV9FVkVOVF9BVFRSKHBlcmZfd2luZG93X2xpbWl0X3JlYWNoZWRfd3IsIFBF
UkZfV0lORE9XX0xJTUlUX1JFQUNIRURfV1IpLAorCVNUTTMyX0REUl9QTVVfRVZFTlRfQVRUUih0
aW1lX2NudCwgVElNRV9DTlQpLAorCU5VTEwKK307CisKK3N0YXRpYyBzdHJ1Y3QgYXR0cmlidXRl
X2dyb3VwIHN0bTMyX2Rkcl9wbXVfZXZlbnRzX2F0dHJzX2dyb3VwX21wMiA9IHsKKwkubmFtZSA9
ICJldmVudHMiLAorCS5hdHRycyA9IHN0bTMyX2Rkcl9wbXVfZXZlbnRzX2F0dHJzX21wMiwKK307
CisKK1BNVV9GT1JNQVRfQVRUUihldmVudCwgImNvbmZpZzowLTgiKTsKKworc3RhdGljIHN0cnVj
dCBhdHRyaWJ1dGUgKnN0bTMyX2Rkcl9wbXVfZm9ybWF0X2F0dHJzW10gPSB7CisJJmZvcm1hdF9h
dHRyX2V2ZW50LmF0dHIsCisJTlVMTCwKK307CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgYXR0cmli
dXRlX2dyb3VwIHN0bTMyX2Rkcl9wbXVfZm9ybWF0X2F0dHJfZ3JvdXAgPSB7CisJLm5hbWUgPSAi
Zm9ybWF0IiwKKwkuYXR0cnMgPSBzdG0zMl9kZHJfcG11X2Zvcm1hdF9hdHRycywKK307CisKK3N0
YXRpYyBjb25zdCBzdHJ1Y3QgYXR0cmlidXRlX2dyb3VwICpzdG0zMl9kZHJfcG11X2F0dHJfZ3Jv
dXBzX21wMVtdID0geworCSZzdG0zMl9kZHJfcG11X2V2ZW50c19hdHRyc19ncm91cF9tcCwKKwkm
c3RtMzJfZGRyX3BtdV9mb3JtYXRfYXR0cl9ncm91cCwKKwlOVUxMLAorfTsKKworc3RhdGljIGNv
bnN0IHN0cnVjdCBhdHRyaWJ1dGVfZ3JvdXAgKnN0bTMyX2Rkcl9wbXVfYXR0cl9ncm91cHNfbXAy
W10gPSB7CisJJnN0bTMyX2Rkcl9wbXVfZXZlbnRzX2F0dHJzX2dyb3VwX21wMiwKKwkmc3RtMzJf
ZGRyX3BtdV9mb3JtYXRfYXR0cl9ncm91cCwKKwlOVUxMLAorfTsKKworc3RhdGljIGludCBzdG0z
Ml9kZHJfcG11X2RldmljZV9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQorewor
CXN0cnVjdCBzdG0zMl9maXJld2FsbCBmaXJld2FsbDsKKwlzdHJ1Y3Qgc3RtMzJfZGRyX3BtdSAq
cG11OworCXN0cnVjdCByZXNldF9jb250cm9sICpyc3Q7CisJc3RydWN0IHJlc291cmNlICpyZXM7
CisJaW50IHJldDsKKworCXBtdSA9IGRldm1fa3phbGxvYygmcGRldi0+ZGV2LCBzdHJ1Y3Rfc2l6
ZShwbXUsIGNvdW50ZXJzLCBNUDJfQ05UX05CKSwgR0ZQX0tFUk5FTCk7CisJaWYgKCFwbXUpCisJ
CXJldHVybiAtRU5PTUVNOworCisJcGxhdGZvcm1fc2V0X2RydmRhdGEocGRldiwgcG11KTsKKwlw
bXUtPmRldiA9ICZwZGV2LT5kZXY7CisKKwlwbXUtPmNmZyA9IGRldmljZV9nZXRfbWF0Y2hfZGF0
YSgmcGRldi0+ZGV2KTsKKworCXBtdS0+bWVtYmFzZSA9IGRldm1fcGxhdGZvcm1fZ2V0X2FuZF9p
b3JlbWFwX3Jlc291cmNlKHBkZXYsIDAsICZyZXMpOworCWlmIChJU19FUlIocG11LT5tZW1iYXNl
KSkKKwkJcmV0dXJuIFBUUl9FUlIocG11LT5tZW1iYXNlKTsKKworCWlmIChvZl9wcm9wZXJ0eV9w
cmVzZW50KHBtdS0+ZGV2LT5vZl9ub2RlLCAiYWNjZXNzLWNvbnRyb2xsZXJzIikpIHsKKwkJcmV0
ID0gc3RtMzJfZmlyZXdhbGxfZ2V0X2ZpcmV3YWxsKHBtdS0+ZGV2LT5vZl9ub2RlLCAmZmlyZXdh
bGwsIDEpOworCQlpZiAocmV0KQorCQkJcmV0dXJuIGRldl9lcnJfcHJvYmUocG11LT5kZXYsIHJl
dCwgIkZhaWxlZCB0byBnZXQgZmlyZXdhbGxcbiIpOworCQlyZXQgPSBzdG0zMl9maXJld2FsbF9n
cmFudF9hY2Nlc3NfYnlfaWQoJmZpcmV3YWxsLCBmaXJld2FsbC5maXJld2FsbF9pZCk7CisJCWlm
IChyZXQpCisJCQlyZXR1cm4gZGV2X2Vycl9wcm9iZShwbXUtPmRldiwgcmV0LCAiRmFpbGVkIHRv
IGdyYW50IGFjY2Vzc1xuIik7CisJfQorCisJcG11LT5jbGsgPSBkZXZtX2Nsa19nZXRfb3B0aW9u
YWxfcHJlcGFyZWQocG11LT5kZXYsIE5VTEwpOworCWlmIChJU19FUlIocG11LT5jbGspKQorCQly
ZXR1cm4gZGV2X2Vycl9wcm9iZShwbXUtPmRldiwgUFRSX0VSUihwbXUtPmNsayksICJGYWlsZWQg
dG8gZ2V0IHByZXBhcmUgY2xvY2tcbiIpOworCisJY2xrX2VuYWJsZShwbXUtPmNsayk7CisKKwly
c3QgPSBkZXZtX3Jlc2V0X2NvbnRyb2xfZ2V0X29wdGlvbmFsX2V4Y2x1c2l2ZSgmcGRldi0+ZGV2
LCBOVUxMKTsKKwlpZiAoSVNfRVJSKHJzdCkpIHsKKwkJY2xrX2Rpc2FibGVfdW5wcmVwYXJlKHBt
dS0+Y2xrKTsKKwkJcmV0dXJuIGRldl9lcnJfcHJvYmUoJnBkZXYtPmRldiwgUFRSX0VSUihyc3Qp
LCAiRmFpbGVkIHRvIGdldCByZXNldFxuIik7CisJfQorCisJcmVzZXRfY29udHJvbF9hc3NlcnQo
cnN0KTsKKwlyZXNldF9jb250cm9sX2RlYXNzZXJ0KHJzdCk7CisKKwlwbXUtPnBvbGxfcGVyaW9k
ID0gbXNfdG9fa3RpbWUoUE9MTF9NUyk7CisJaHJ0aW1lcl9zZXR1cCgmcG11LT5ocnRpbWVyLCBz
dG0zMl9kZHJfcG11X3BvbGwsIENMT0NLX01PTk9UT05JQywgSFJUSU1FUl9NT0RFX1JFTCk7CisK
Kwlmb3IgKGludCBpID0gMDsgaSA8IE1QMl9DTlRfTkI7IGkrKykKKwkJSU5JVF9MSVNUX0hFQUQo
JnBtdS0+Y291bnRlcnNbaV0pOworCisJcG11LT5zZWxlY3RlZF9zZXQgPSAtMTsKKworCXBtdS0+
cG11ID0gKHN0cnVjdCBwbXUpIHsKKwkJLnRhc2tfY3R4X25yID0gcGVyZl9pbnZhbGlkX2NvbnRl
eHQsCisJCS5zdGFydCA9IHN0bTMyX2Rkcl9wbXVfZXZlbnRfc3RhcnQsCisJCS5zdG9wID0gc3Rt
MzJfZGRyX3BtdV9ldmVudF9zdG9wLAorCQkuYWRkID0gc3RtMzJfZGRyX3BtdV9ldmVudF9hZGQs
CisJCS5kZWwgPSBzdG0zMl9kZHJfcG11X2V2ZW50X2RlbCwKKwkJLnJlYWQgPSBzdG0zMl9kZHJf
cG11X2V2ZW50X3JlYWQsCisJCS5ldmVudF9pbml0ID0gc3RtMzJfZGRyX3BtdV9ldmVudF9pbml0
LAorCQkuYXR0cl9ncm91cHMgPSBwbXUtPmNmZy0+YXR0cmlidXRlLAorCQkubW9kdWxlID0gVEhJ
U19NT0RVTEUsCisJfTsKKworCXJldCA9IHBlcmZfcG11X3JlZ2lzdGVyKCZwbXUtPnBtdSwgRFJJ
VkVSX05BTUUsIC0xKTsKKwlpZiAocmV0KSB7CisJCWNsa19kaXNhYmxlX3VucHJlcGFyZShwbXUt
PmNsayk7CisJCXJldHVybiBkZXZfZXJyX3Byb2JlKCZwZGV2LT5kZXYsIHJldCwKKwkJCQkgICAg
ICJDb3VsZG4ndCByZWdpc3RlciBERFJQRVJGTSBkcml2ZXIgYXMgYSBQTVVcbiIpOworCX0KKwor
CWlmIChwbXUtPmNmZy0+cmVncy0+ZHJhbV9pbmYucmVnKSB7CisJCXJldCA9IHN0bTMyX2Rkcl9w
bXVfZ2V0X21lbW9yeV90eXBlKHBtdSk7CisJCWlmIChyZXQpIHsKKwkJCXBlcmZfcG11X3VucmVn
aXN0ZXIoJnBtdS0+cG11KTsKKwkJCWNsa19kaXNhYmxlX3VucHJlcGFyZShwbXUtPmNsayk7CisJ
CQlyZXR1cm4gZGV2X2Vycl9wcm9iZSgmcGRldi0+ZGV2LCByZXQsICJGYWlsZWQgdG8gZ2V0IG1l
bW9yeSB0eXBlXG4iKTsKKwkJfQorCisJCXdyaXRlbF9yZWxheGVkKHBtdS0+ZHJhbV90eXBlLCBw
bXUtPm1lbWJhc2UgKyBwbXUtPmNmZy0+cmVncy0+ZHJhbV9pbmYucmVnKTsKKwl9CisKKwljbGtf
ZGlzYWJsZShwbXUtPmNsayk7CisKKwlyZXR1cm4gMDsKK30KKworc3RhdGljIHZvaWQgc3RtMzJf
ZGRyX3BtdV9kZXZpY2VfcmVtb3ZlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpCit7CisJ
c3RydWN0IHN0bTMyX2Rkcl9wbXUgKnN0bTMyX2Rkcl9wbXUgPSBwbGF0Zm9ybV9nZXRfZHJ2ZGF0
YShwZGV2KTsKKworCXBlcmZfcG11X3VucmVnaXN0ZXIoJnN0bTMyX2Rkcl9wbXUtPnBtdSk7Cit9
CisKK3N0YXRpYyBpbnQgX19tYXliZV91bnVzZWQgc3RtMzJfZGRyX3BtdV9kZXZpY2VfcmVzdW1l
KHN0cnVjdCBkZXZpY2UgKmRldikKK3sKKwlzdHJ1Y3Qgc3RtMzJfZGRyX3BtdSAqcG11ID0gZGV2
X2dldF9kcnZkYXRhKGRldik7CisKKwljbGtfZW5hYmxlKHBtdS0+Y2xrKTsKKwl3cml0ZWxfcmVs
YXhlZChwbXUtPmRyYW1fdHlwZSwgcG11LT5tZW1iYXNlICsgcG11LT5jZmctPnJlZ3MtPmRyYW1f
aW5mLnJlZyk7CisJY2xrX2Rpc2FibGUocG11LT5jbGspOworCisJcmV0dXJuIDA7Cit9CisKK3N0
YXRpYyBjb25zdCBzdHJ1Y3Qgc3RtMzJfZGRyX3BtdV9yZWdzcGVjIHN0bTMyX2Rkcl9wbXVfcmVn
c3BlY19tcDEgPSB7CisJLnN0b3AgPQkJeyBERFJQRVJGTV9DVFJMLCBDVFJMX1NUT1AgfSwKKwku
c3RhcnQgPQl7IEREUlBFUkZNX0NUUkwsIENUUkxfU1RBUlQgfSwKKwkuZW5hYmxlID0JeyBERFJQ
RVJGTV9DRkcgfSwKKwkuY2ZnID0JCXsgRERSUEVSRk1fQ0ZHIH0sCisJLnN0YXR1cyA9CXsgRERS
UEVSRk1fU1RBVFVTLCBNUDFfU1RBVFVTX0JVU1kgfSwKKwkuY2xlYXJfY250ID0JeyBERFJQRVJG
TV9DTFIsIE1QMV9DTFJfQ05UfSwKKwkuY2xlYXJfdGltZSA9CXsgRERSUEVSRk1fQ0xSLCBNUDFf
Q0xSX1RJTUV9LAorCS5jb3VudGVyX3RpbWUgPQl7IEREUlBFUkZNX1RDTlQgfSwKKwkuY291bnRl
cl9ldnQgPQl7CisJCQkJeyBERFJQRVJGTV9FVkNOVCgwKSB9LAorCQkJCXsgRERSUEVSRk1fRVZD
TlQoMSkgfSwKKwkJCQl7IEREUlBFUkZNX0VWQ05UKDIpIH0sCisJCQkJeyBERFJQRVJGTV9FVkNO
VCgzKSB9LAorCX0sCit9OworCitzdGF0aWMgY29uc3Qgc3RydWN0IHN0bTMyX2Rkcl9wbXVfcmVn
c3BlYyBzdG0zMl9kZHJfcG11X3JlZ3NwZWNfbXAyID0geworCS5zdG9wID0JCXsgRERSUEVSRk1f
Q1RSTCwgQ1RSTF9TVE9QIH0sCisJLnN0YXJ0ID0JeyBERFJQRVJGTV9DVFJMLCBDVFJMX1NUQVJU
IH0sCisJLnN0YXR1cyA9CXsgRERSUEVSRk1fTVAyX1NUQVRVUywgTVAyX1NUQVRVU19CVVNZIH0s
CisJLmNsZWFyX2NudCA9CXsgRERSUEVSRk1fQ0xSLCBNUDJfQ0xSX0NOVH0sCisJLmNsZWFyX3Rp
bWUgPQl7IEREUlBFUkZNX0NMUiwgTVAyX0NMUl9USU1FfSwKKwkuY2ZnMCA9CQl7IEREUlBFUkZN
X01QMl9DRkcwIH0sCisJLmNmZzEgPQkJeyBERFJQRVJGTV9NUDJfQ0ZHMSB9LAorCS5lbmFibGUg
PQl7IEREUlBFUkZNX01QMl9DRkc1IH0sCisJLmRyYW1faW5mID0JeyBERFJQRVJGTV9NUDJfRFJB
TUlORiB9LAorCS5jb3VudGVyX3RpbWUgPQl7IEREUlBFUkZNX01QMl9UQ05UIH0sCisJLmNvdW50
ZXJfZXZ0ID0JeworCQkJCXsgRERSUEVSRk1fTVAyX0VWQ05UKDApIH0sCisJCQkJeyBERFJQRVJG
TV9NUDJfRVZDTlQoMSkgfSwKKwkJCQl7IEREUlBFUkZNX01QMl9FVkNOVCgyKSB9LAorCQkJCXsg
RERSUEVSRk1fTVAyX0VWQ05UKDMpIH0sCisJCQkJeyBERFJQRVJGTV9NUDJfRVZDTlQoNCkgfSwK
KwkJCQl7IEREUlBFUkZNX01QMl9FVkNOVCg1KSB9LAorCQkJCXsgRERSUEVSRk1fTVAyX0VWQ05U
KDYpIH0sCisJCQkJeyBERFJQRVJGTV9NUDJfRVZDTlQoNykgfSwKKwl9LAorfTsKKworc3RhdGlj
IGNvbnN0IHN0cnVjdCBzdG0zMl9kZHJfcG11X2NmZyBzdG0zMl9kZHJfcG11X2NmZ19tcDEgPSB7
CisJLnJlZ3MgPSAmc3RtMzJfZGRyX3BtdV9yZWdzcGVjX21wMSwKKwkuYXR0cmlidXRlID0gc3Rt
MzJfZGRyX3BtdV9hdHRyX2dyb3Vwc19tcDEsCisJLmNvdW50ZXJzX25iID0gTVAxX0NOVF9OQiwK
KwkuZXZ0X2NvdW50ZXJzX25iID0gTVAxX0NOVF9OQiAtIDEsIC8qIFRpbWUgY291bnRlciBpcyBu
b3QgYW4gZXZlbnQgY291bnRlciAqLworCS50aW1lX2NudF9pZHggPSBNUDFfVElNRV9DTlRfSURY
LAorCS5nZXRfY291bnRlciA9IHN0bTMyX2Rkcl9wbXVfZ2V0X2V2ZW50X2NvdW50ZXJfbXAxLAor
fTsKKworc3RhdGljIGNvbnN0IHN0cnVjdCBzdG0zMl9kZHJfcG11X2NmZyBzdG0zMl9kZHJfcG11
X2NmZ19tcDIgPSB7CisJLnJlZ3MgPSAmc3RtMzJfZGRyX3BtdV9yZWdzcGVjX21wMiwKKwkuYXR0
cmlidXRlID0gc3RtMzJfZGRyX3BtdV9hdHRyX2dyb3Vwc19tcDIsCisJLmNvdW50ZXJzX25iID0g
TVAyX0NOVF9OQiwKKwkuZXZ0X2NvdW50ZXJzX25iID0gTVAyX0NOVF9OQiAtIDEsIC8qIFRpbWUg
Y291bnRlciBpcyBhbiBldmVudCBjb3VudGVyICovCisJLnRpbWVfY250X2lkeCA9IE1QMl9USU1F
X0NOVF9JRFgsCisJLmdldF9jb3VudGVyID0gc3RtMzJfZGRyX3BtdV9nZXRfZXZlbnRfY291bnRl
cl9tcDIsCit9OworCitzdGF0aWMgY29uc3Qgc3RydWN0IGRldl9wbV9vcHMgc3RtMzJfZGRyX3Bt
dV9wbV9vcHMgPSB7CisJU0VUX1NZU1RFTV9TTEVFUF9QTV9PUFMoTlVMTCwgc3RtMzJfZGRyX3Bt
dV9kZXZpY2VfcmVzdW1lKQorfTsKKworc3RhdGljIGNvbnN0IHN0cnVjdCBvZl9kZXZpY2VfaWQg
c3RtMzJfZGRyX3BtdV9vZl9tYXRjaFtdID0geworCXsKKwkJLmNvbXBhdGlibGUgPSAic3Qsc3Rt
MzJtcDEzMS1kZHItcG11IiwKKwkJLmRhdGEgPSAmc3RtMzJfZGRyX3BtdV9jZmdfbXAxCisJfSwK
Kwl7CisJCS5jb21wYXRpYmxlID0gInN0LHN0bTMybXAyNTEtZGRyLXBtdSIsCisJCS5kYXRhID0g
JnN0bTMyX2Rkcl9wbXVfY2ZnX21wMgorCX0sCisJeyB9LAorfTsKK01PRFVMRV9ERVZJQ0VfVEFC
TEUob2YsIHN0bTMyX2Rkcl9wbXVfb2ZfbWF0Y2gpOworCitzdGF0aWMgc3RydWN0IHBsYXRmb3Jt
X2RyaXZlciBzdG0zMl9kZHJfcG11X2RyaXZlciA9IHsKKwkuZHJpdmVyID0geworCQkubmFtZSA9
IERSSVZFUl9OQU1FLAorCQkucG0gPSBwbV9zbGVlcF9wdHIoJnN0bTMyX2Rkcl9wbXVfcG1fb3Bz
KSwKKwkJLm9mX21hdGNoX3RhYmxlID0gc3RtMzJfZGRyX3BtdV9vZl9tYXRjaCwKKwl9LAorCS5w
cm9iZSA9IHN0bTMyX2Rkcl9wbXVfZGV2aWNlX3Byb2JlLAorCS5yZW1vdmUgPSBzdG0zMl9kZHJf
cG11X2RldmljZV9yZW1vdmUsCit9OworCittb2R1bGVfcGxhdGZvcm1fZHJpdmVyKHN0bTMyX2Rk
cl9wbXVfZHJpdmVyKTsKKworTU9EVUxFX0FVVEhPUigiQ2zDqW1lbnQgTGUgR29mZmljIik7CitN
T0RVTEVfREVTQ1JJUFRJT04oIlNUTWljcm9lbGVjdHJvbmljcyBTVE0zMiBERFIgcGVyZm9ybWFu
Y2UgbW9uaXRvciBkcml2ZXIiKTsKK01PRFVMRV9MSUNFTlNFKCJHUEwiKTsKCi0tIAoyLjQzLjAK
Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCkxpbnV4LXN0
bTMyIG1haWxpbmcgbGlzdApMaW51eC1zdG0zMkBzdC1tZC1tYWlsbWFuLnN0b3JtcmVwbHkuY29t
Cmh0dHBzOi8vc3QtbWQtbWFpbG1hbi5zdG9ybXJlcGx5LmNvbS9tYWlsbWFuL2xpc3RpbmZvL2xp
bnV4LXN0bTMyCg==
