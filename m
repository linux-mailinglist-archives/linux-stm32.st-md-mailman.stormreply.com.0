Return-Path: <linux-stm32-bounces@st-md-mailman.stormreply.com>
X-Original-To: lists+linux-stm32@lfdr.de
Delivered-To: lists+linux-stm32@lfdr.de
Received: from stm-ict-prod-mailman-01.stormreply.prv (st-md-mailman.stormreply.com [52.209.6.89])
	by mail.lfdr.de (Postfix) with ESMTPS id 00132B35F06
	for <lists+linux-stm32@lfdr.de>; Tue, 26 Aug 2025 14:19:44 +0200 (CEST)
Received: from ip-172-31-3-47.eu-west-1.compute.internal (localhost [127.0.0.1])
	by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTP id 11C81C3F932;
	Tue, 26 Aug 2025 12:19:44 +0000 (UTC)
Received: from mx07-00178001.pphosted.com (mx07-00178001.pphosted.com
 [185.132.182.106])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested)
 by stm-ict-prod-mailman-01.stormreply.prv (Postfix) with ESMTPS id 44C34C3F930
 for <linux-stm32@st-md-mailman.stormreply.com>;
 Tue, 26 Aug 2025 12:19:43 +0000 (UTC)
Received: from pps.filterd (m0241204.ppops.net [127.0.0.1])
 by mx07-00178001.pphosted.com (8.18.1.2/8.18.1.2) with ESMTP id 57QCHvoi002374;
 Tue, 26 Aug 2025 14:19:21 +0200
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=foss.st.com; h=
 cc:content-transfer-encoding:content-type:date:from:in-reply-to
 :message-id:mime-version:references:subject:to; s=selector1; bh=
 ujNkOZE0cuMCrkJwlKMLY6SmezeQ3JXoWavUp7i/iqo=; b=1/5Dba4O/peeQRSN
 JloI1F6I0ZRIfDeV4KvyF97b4X2XBjk4UIqo4TnTVCK6Q6OkTQKG7eTENFcUU4PL
 zXiSvv80PEDoGQxZ2F7RqehPvFLYgJ9ISh4Lj4lccEj9icRRUQU+K4v2J0DGqbp3
 OGjQCOTIgWbbfEfsAU3F66Mqgf8Ty3LIEe3s6zuL+XEYWyA8WbDJrcvfYA0Zj8FG
 7i79DDwiUrNiO9ZCFZLCdAOrODpfeqRQkPfSyJOks7JgheNE4z6VAn13KVR6hYps
 uGBE2G3GvBL1Hs/YdR+T6EZxPuagx2HKq5mXufsSq2cV+ps0aJfVsDmo7QtsaISm
 aRHKtQ==
Received: from beta.dmz-ap.st.com (beta.dmz-ap.st.com [138.198.100.35])
 by mx07-00178001.pphosted.com (PPS) with ESMTPS id 48q5tsu8ym-1
 (version=TLSv1.2 cipher=ECDHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT);
 Tue, 26 Aug 2025 14:19:20 +0200 (MEST)
Received: from euls16034.sgp.st.com (euls16034.sgp.st.com [10.75.44.20])
 by beta.dmz-ap.st.com (STMicroelectronics) with ESMTP id 3E05640046;
 Tue, 26 Aug 2025 14:18:21 +0200 (CEST)
Received: from Webmail-eu.st.com (shfdag1node3.st.com [10.75.129.71])
 by euls16034.sgp.st.com (STMicroelectronics) with ESMTP id BA55E6C67D9;
 Tue, 26 Aug 2025 14:17:49 +0200 (CEST)
Received: from [10.48.87.178] (10.48.87.178) by SHFDAG1NODE3.st.com
 (10.75.129.71) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256) id 15.1.2507.39; Tue, 26 Aug
 2025 14:17:49 +0200
Message-ID: <33ee08ca-2cf9-4229-b58c-a533814f13ba@foss.st.com>
Date: Tue, 26 Aug 2025 14:17:47 +0200
MIME-Version: 1.0
User-Agent: Mozilla Thunderbird
To: Raphael Gallais-Pou <raphael.gallais-pou@foss.st.com>, Philippe Cornu
 <philippe.cornu@foss.st.com>, Maarten Lankhorst
 <maarten.lankhorst@linux.intel.com>, Maxime Ripard <mripard@kernel.org>,
 Thomas Zimmermann <tzimmermann@suse.de>,
 David Airlie <airlied@gmail.com>, Simona Vetter <simona@ffwll.ch>,
 Maxime Coquelin <mcoquelin.stm32@gmail.com>,
 Alexandre Torgue <alexandre.torgue@foss.st.com>
References: <20250825132951.547899-1-raphael.gallais-pou@foss.st.com>
Content-Language: en-US
From: Yannick FERTRE <yannick.fertre@foss.st.com>
In-Reply-To: <20250825132951.547899-1-raphael.gallais-pou@foss.st.com>
X-Originating-IP: [10.48.87.178]
X-ClientProxiedBy: SHFCAS1NODE1.st.com (10.75.129.72) To SHFDAG1NODE3.st.com
 (10.75.129.71)
X-Proofpoint-Virus-Version: vendor=baseguard
 engine=ICAP:2.0.293,Aquarius:18.0.1099,Hydra:6.1.9,FMLib:17.12.80.40
 definitions=2025-08-26_02,2025-08-26_01,2025-03-28_01
Cc: linux-arm-kernel@lists.infradead.org,
 linux-stm32@st-md-mailman.stormreply.com, dri-devel@lists.freedesktop.org,
 linux-kernel@vger.kernel.org
Subject: Re: [Linux-stm32] [PATCH v2] drm/stm: ltdc: unify log system
X-BeenThere: linux-stm32@st-md-mailman.stormreply.com
X-Mailman-Version: 2.1.15
Precedence: list
List-Id: <linux-stm32.st-md-mailman.stormreply.com>
List-Unsubscribe: <https://st-md-mailman.stormreply.com/mailman/options/linux-stm32>, 
 <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=unsubscribe>
List-Archive: <http://st-md-mailman.stormreply.com/pipermail/linux-stm32/>
List-Post: <mailto:linux-stm32@st-md-mailman.stormreply.com>
List-Help: <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=help>
List-Subscribe: <https://st-md-mailman.stormreply.com/mailman/listinfo/linux-stm32>, 
 <mailto:linux-stm32-request@st-md-mailman.stormreply.com?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: linux-stm32-bounces@st-md-mailman.stormreply.com
Sender: "Linux-stm32" <linux-stm32-bounces@st-md-mailman.stormreply.com>

SGkgUmFwaGFlbCwKClRoYW5rcyBmb3IgdGhlIHBhdGNoLgoKQWNrZWQtYnk6IFlhbm5pY2sgRmVy
dHJlIDx5YW5uaWNrLmZlcnRyZUBmb3NzLnN0LmNvbT4KCkxlIDI1LzA4LzIwMjUgw6AgMTU6Mjks
IFJhcGhhZWwgR2FsbGFpcy1Qb3UgYSDDqWNyaXTCoDoKPiBEUk1fRVJST1IgYW5kIHNpbWlsYXIg
YXJlIGRlcHJlY2F0ZWQuICBVc2UgZHJtX2RldiBiYXNlZCBsb2dnaW5nLgo+Cj4gTGluazogaHR0
cHM6Ly9sb3JlLmtlcm5lbC5vcmcvci8yMDI1MDgyMTEzMDM1Ni44ODM1NTMtMS1yYXBoYWVsLmdh
bGxhaXMtcG91QGZvc3Muc3QuY29tCj4gU2lnbmVkLW9mZi1ieTogUmFwaGFlbCBHYWxsYWlzLVBv
dSA8cmFwaGFlbC5nYWxsYWlzLXBvdUBmb3NzLnN0LmNvbT4KPiAtLS0KPiBDaGFuZ2VzIGluIHYy
Ogo+IC0gRml4IGtlcm5lbCB0ZXN0IHJvYm90J3Mgd2FybmluZ3MKPiBodHRwczovL2xvcmUua2Vy
bmVsLm9yZy9hbGwvMjAyNTA4MjUwNjM3Lm5MeHRrUzI2LWxrcEBpbnRlbC5jb20vCj4gLSBSZWJh
c2VkIG9udG8gbGF0ZXN0IGRybS1taXNjLW5leHQKPiAtIFJlbW92ZSBZYW5uaWNrJ3MgYWNrZWQt
Ynkgc2luY2UgdGhlIHBhdGNoIGNoYW5nZWQKPiAtLS0KPiAgIGRyaXZlcnMvZ3B1L2RybS9zdG0v
bHRkYy5jIHwgMTM5ICsrKysrKysrKysrKysrKysrKystLS0tLS0tLS0tLS0tLS0tLS0KPiAgIDEg
ZmlsZSBjaGFuZ2VkLCA3MCBpbnNlcnRpb25zKCspLCA2OSBkZWxldGlvbnMoLSkKPgo+IGRpZmYg
LS1naXQgYS9kcml2ZXJzL2dwdS9kcm0vc3RtL2x0ZGMuYyBiL2RyaXZlcnMvZ3B1L2RybS9zdG0v
bHRkYy5jCj4gaW5kZXggYmEzMTVjNjZhMDRkLi5iOTQ3N2ZiZWMxYzEgMTAwNjQ0Cj4gLS0tIGEv
ZHJpdmVycy9ncHUvZHJtL3N0bS9sdGRjLmMKPiArKysgYi9kcml2ZXJzL2dwdS9kcm0vc3RtL2x0
ZGMuYwo+IEBAIC02NDEsNyArNjQxLDcgQEAgc3RhdGljIGlubGluZSB2b2lkIGx0ZGNfc2V0X3lj
YmNyX2NvbmZpZyhzdHJ1Y3QgZHJtX3BsYW5lICpwbGFuZSwgdTMyIGRybV9waXhfZm0KPiAgIAkJ
YnJlYWs7Cj4gICAJZGVmYXVsdDoKPiAgIAkJLyogUkdCIG9yIG5vdCBhIFlDYkNyIHN1cHBvcnRl
ZCBmb3JtYXQgKi8KPiAtCQlEUk1fRVJST1IoIlVuc3VwcG9ydGVkIHBpeGVsIGZvcm1hdDogJXVc
biIsIGRybV9waXhfZm10KTsKPiArCQlkcm1fZXJyKHBsYW5lLT5kZXYsICJVbnN1cHBvcnRlZCBw
aXhlbCBmb3JtYXQ6ICV1XG4iLCBkcm1fcGl4X2ZtdCk7Cj4gICAJCXJldHVybjsKPiAgIAl9Cj4g
ICAKPiBAQCAtNjY0LDE4ICs2NjQsMTkgQEAgc3RhdGljIGlubGluZSB2b2lkIGx0ZGNfc2V0X3lj
YmNyX2NvZWZmcyhzdHJ1Y3QgZHJtX3BsYW5lICpwbGFuZSkKPiAgIAl1MzIgbG9mcyA9IHBsYW5l
LT5pbmRleCAqIExBWV9PRlM7Cj4gICAKPiAgIAlpZiAoZW5jICE9IERSTV9DT0xPUl9ZQ0JDUl9C
VDYwMSAmJiBlbmMgIT0gRFJNX0NPTE9SX1lDQkNSX0JUNzA5KSB7Cj4gLQkJRFJNX0VSUk9SKCJj
b2xvciBlbmNvZGluZyAlZCBub3Qgc3VwcG9ydGVkLCB1c2UgYnQ2MDEgYnkgZGVmYXVsdFxuIiwg
ZW5jKTsKPiArCQlkcm1fZXJyKHBsYW5lLT5kZXYsICJjb2xvciBlbmNvZGluZyAlZCBub3Qgc3Vw
cG9ydGVkLCB1c2UgYnQ2MDEgYnkgZGVmYXVsdFxuIiwgZW5jKTsKPiAgIAkJLyogc2V0IGJ5IGRl
ZmF1bHQgY29sb3IgZW5jb2RpbmcgdG8gRFJNX0NPTE9SX1lDQkNSX0JUNjAxICovCj4gICAJCWVu
YyA9IERSTV9DT0xPUl9ZQ0JDUl9CVDYwMTsKPiAgIAl9Cj4gICAKPiAgIAlpZiAocmFuICE9IERS
TV9DT0xPUl9ZQ0JDUl9MSU1JVEVEX1JBTkdFICYmIHJhbiAhPSBEUk1fQ09MT1JfWUNCQ1JfRlVM
TF9SQU5HRSkgewo+IC0JCURSTV9FUlJPUigiY29sb3IgcmFuZ2UgJWQgbm90IHN1cHBvcnRlZCwg
dXNlIGxpbWl0ZWQgcmFuZ2UgYnkgZGVmYXVsdFxuIiwgcmFuKTsKPiArCQlkcm1fZXJyKHBsYW5l
LT5kZXYsCj4gKwkJCSJjb2xvciByYW5nZSAlZCBub3Qgc3VwcG9ydGVkLCB1c2UgbGltaXRlZCBy
YW5nZSBieSBkZWZhdWx0XG4iLCByYW4pOwo+ICAgCQkvKiBzZXQgYnkgZGVmYXVsdCBjb2xvciBy
YW5nZSB0byBEUk1fQ09MT1JfWUNCQ1JfTElNSVRFRF9SQU5HRSAqLwo+ICAgCQlyYW4gPSBEUk1f
Q09MT1JfWUNCQ1JfTElNSVRFRF9SQU5HRTsKPiAgIAl9Cj4gICAKPiAtCURSTV9ERUJVR19EUklW
RVIoIkNvbG9yIGVuY29kaW5nPSVkLCByYW5nZT0lZFxuIiwgZW5jLCByYW4pOwo+ICsJZHJtX2Vy
cihwbGFuZS0+ZGV2LCAiQ29sb3IgZW5jb2Rpbmc9JWQsIHJhbmdlPSVkXG4iLCBlbmMsIHJhbik7
Cj4gICAJcmVnbWFwX3dyaXRlKGxkZXYtPnJlZ21hcCwgTFREQ19MMUNZUjBSICsgbG9mcywKPiAg
IAkJICAgICBsdGRjX3ljYmNyMnJnYl9jb2VmZnNbZW5jXVtyYW5dWzBdKTsKPiAgIAlyZWdtYXBf
d3JpdGUobGRldi0+cmVnbWFwLCBMVERDX0wxQ1lSMVIgKyBsb2ZzLAo+IEBAIC03NzQsNyArNzc1
LDcgQEAgc3RhdGljIHZvaWQgbHRkY19jcnRjX2F0b21pY19lbmFibGUoc3RydWN0IGRybV9jcnRj
ICpjcnRjLAo+ICAgCXN0cnVjdCBsdGRjX2RldmljZSAqbGRldiA9IGNydGNfdG9fbHRkYyhjcnRj
KTsKPiAgIAlzdHJ1Y3QgZHJtX2RldmljZSAqZGRldiA9IGNydGMtPmRldjsKPiAgIAo+IC0JRFJN
X0RFQlVHX0RSSVZFUigiXG4iKTsKPiArCWRybV9kYmdfZHJpdmVyKGNydGMtPmRldiwgIlxuIik7
Cj4gICAKPiAgIAlwbV9ydW50aW1lX2dldF9zeW5jKGRkZXYtPmRldik7Cj4gICAKPiBAQCAtNzk4
LDcgKzc5OSw3IEBAIHN0YXRpYyB2b2lkIGx0ZGNfY3J0Y19hdG9taWNfZGlzYWJsZShzdHJ1Y3Qg
ZHJtX2NydGMgKmNydGMsCj4gICAJc3RydWN0IGRybV9kZXZpY2UgKmRkZXYgPSBjcnRjLT5kZXY7
Cj4gICAJaW50IGxheWVyX2luZGV4ID0gMDsKPiAgIAo+IC0JRFJNX0RFQlVHX0RSSVZFUigiXG4i
KTsKPiArCWRybV9kYmdfZHJpdmVyKGNydGMtPmRldiwgIlxuIik7Cj4gICAKPiAgIAlkcm1fY3J0
Y192Ymxhbmtfb2ZmKGNydGMpOwo+ICAgCj4gQEAgLTgzNyw3ICs4MzgsNyBAQCBsdGRjX2NydGNf
bW9kZV92YWxpZChzdHJ1Y3QgZHJtX2NydGMgKmNydGMsCj4gICAKPiAgIAlyZXN1bHQgPSBjbGtf
cm91bmRfcmF0ZShsZGV2LT5waXhlbF9jbGssIHRhcmdldCk7Cj4gICAKPiAtCURSTV9ERUJVR19E
UklWRVIoImNsayByYXRlIHRhcmdldCAlZCwgYXZhaWxhYmxlICVkXG4iLCB0YXJnZXQsIHJlc3Vs
dCk7Cj4gKwlkcm1fZGJnX2RyaXZlcihjcnRjLT5kZXYsICJjbGsgcmF0ZSB0YXJnZXQgJWQsIGF2
YWlsYWJsZSAlZFxuIiwgdGFyZ2V0LCByZXN1bHQpOwo+ICAgCj4gICAJLyogRmlsdGVyIG1vZGVz
IGFjY29yZGluZyB0byB0aGUgbWF4IGZyZXF1ZW5jeSBzdXBwb3J0ZWQgYnkgdGhlIHBhZHMgKi8K
PiAgIAlpZiAocmVzdWx0ID4gbGRldi0+Y2Fwcy5wYWRfbWF4X2ZyZXFfaHopCj4gQEAgLTg3Miwx
NCArODczLDE0IEBAIHN0YXRpYyBib29sIGx0ZGNfY3J0Y19tb2RlX2ZpeHVwKHN0cnVjdCBkcm1f
Y3J0YyAqY3J0YywKPiAgIAlpbnQgcmF0ZSA9IG1vZGUtPmNsb2NrICogMTAwMDsKPiAgIAo+ICAg
CWlmIChjbGtfc2V0X3JhdGUobGRldi0+cGl4ZWxfY2xrLCByYXRlKSA8IDApIHsKPiAtCQlEUk1f
RVJST1IoIkNhbm5vdCBzZXQgcmF0ZSAoJWRIeikgZm9yIHBpeGVsIGNsa1xuIiwgcmF0ZSk7Cj4g
KwkJZHJtX2VycihjcnRjLT5kZXYsICJDYW5ub3Qgc2V0IHJhdGUgKCVkSHopIGZvciBwaXhlbCBj
bGtcbiIsIHJhdGUpOwo+ICAgCQlyZXR1cm4gZmFsc2U7Cj4gICAJfQo+ICAgCj4gICAJYWRqdXN0
ZWRfbW9kZS0+Y2xvY2sgPSBjbGtfZ2V0X3JhdGUobGRldi0+cGl4ZWxfY2xrKSAvIDEwMDA7Cj4g
ICAKPiAtCURSTV9ERUJVR19EUklWRVIoInJlcXVlc3RlZCBjbG9jayAlZGtIeiwgYWRqdXN0ZWQg
Y2xvY2sgJWRrSHpcbiIsCj4gLQkJCSBtb2RlLT5jbG9jaywgYWRqdXN0ZWRfbW9kZS0+Y2xvY2sp
Owo+ICsJZHJtX2RiZ19kcml2ZXIoY3J0Yy0+ZGV2LCAicmVxdWVzdGVkIGNsb2NrICVka0h6LCBh
ZGp1c3RlZCBjbG9jayAlZGtIelxuIiwKPiArCQkgICAgICAgbW9kZS0+Y2xvY2ssIGFkanVzdGVk
X21vZGUtPmNsb2NrKTsKPiAgIAo+ICAgCXJldHVybiB0cnVlOwo+ICAgfQo+IEBAIC05MzQsMjAg
KzkzNSwyMCBAQCBzdGF0aWMgdm9pZCBsdGRjX2NydGNfbW9kZV9zZXRfbm9mYihzdHJ1Y3QgZHJt
X2NydGMgKmNydGMpCj4gICAJaWYgKCFwbV9ydW50aW1lX2FjdGl2ZShkZGV2LT5kZXYpKSB7Cj4g
ICAJCXJldCA9IHBtX3J1bnRpbWVfZ2V0X3N5bmMoZGRldi0+ZGV2KTsKPiAgIAkJaWYgKHJldCkg
ewo+IC0JCQlEUk1fRVJST1IoIkZhaWxlZCB0byBzZXQgbW9kZSwgY2Fubm90IGdldCBzeW5jXG4i
KTsKPiArCQkJZHJtX2VycihjcnRjLT5kZXYsICJGYWlsZWQgdG8gc2V0IG1vZGUsIGNhbm5vdCBn
ZXQgc3luY1xuIik7Cj4gICAJCQlyZXR1cm47Cj4gICAJCX0KPiAgIAl9Cj4gICAKPiAtCURSTV9E
RUJVR19EUklWRVIoIkNSVEM6JWQgbW9kZTolc1xuIiwgY3J0Yy0+YmFzZS5pZCwgbW9kZS0+bmFt
ZSk7Cj4gLQlEUk1fREVCVUdfRFJJVkVSKCJWaWRlbyBtb2RlOiAlZHglZCIsIG1vZGUtPmhkaXNw
bGF5LCBtb2RlLT52ZGlzcGxheSk7Cj4gLQlEUk1fREVCVUdfRFJJVkVSKCIgaGZwICVkIGhicCAl
ZCBoc2wgJWQgdmZwICVkIHZicCAlZCB2c2wgJWRcbiIsCj4gLQkJCSBtb2RlLT5oc3luY19zdGFy
dCAtIG1vZGUtPmhkaXNwbGF5LAo+IC0JCQkgbW9kZS0+aHRvdGFsIC0gbW9kZS0+aHN5bmNfZW5k
LAo+IC0JCQkgbW9kZS0+aHN5bmNfZW5kIC0gbW9kZS0+aHN5bmNfc3RhcnQsCj4gLQkJCSBtb2Rl
LT52c3luY19zdGFydCAtIG1vZGUtPnZkaXNwbGF5LAo+IC0JCQkgbW9kZS0+dnRvdGFsIC0gbW9k
ZS0+dnN5bmNfZW5kLAo+IC0JCQkgbW9kZS0+dnN5bmNfZW5kIC0gbW9kZS0+dnN5bmNfc3RhcnQp
Owo+ICsJZHJtX2RiZ19kcml2ZXIoY3J0Yy0+ZGV2LCAiQ1JUQzolZCBtb2RlOiVzXG4iLCBjcnRj
LT5iYXNlLmlkLCBtb2RlLT5uYW1lKTsKPiArCWRybV9kYmdfZHJpdmVyKGNydGMtPmRldiwgIlZp
ZGVvIG1vZGU6ICVkeCVkIiwgbW9kZS0+aGRpc3BsYXksIG1vZGUtPnZkaXNwbGF5KTsKPiArCWRy
bV9kYmdfZHJpdmVyKGNydGMtPmRldiwgIiBoZnAgJWQgaGJwICVkIGhzbCAlZCB2ZnAgJWQgdmJw
ICVkIHZzbCAlZFxuIiwKPiArCQkgICAgICAgbW9kZS0+aHN5bmNfc3RhcnQgLSBtb2RlLT5oZGlz
cGxheSwKPiArCQkgICAgICAgbW9kZS0+aHRvdGFsIC0gbW9kZS0+aHN5bmNfZW5kLAo+ICsJCSAg
ICAgICBtb2RlLT5oc3luY19lbmQgLSBtb2RlLT5oc3luY19zdGFydCwKPiArCQkgICAgICAgbW9k
ZS0+dnN5bmNfc3RhcnQgLSBtb2RlLT52ZGlzcGxheSwKPiArCQkgICAgICAgbW9kZS0+dnRvdGFs
IC0gbW9kZS0+dnN5bmNfZW5kLAo+ICsJCSAgICAgICBtb2RlLT52c3luY19lbmQgLSBtb2RlLT52
c3luY19zdGFydCk7Cj4gICAKPiAgIAkvKiBDb252ZXJ0IHZpZGVvIHRpbWluZ3MgdG8gbHRkYyB0
aW1pbmdzICovCj4gICAJaHN5bmMgPSBtb2RlLT5oc3luY19lbmQgLSBtb2RlLT5oc3luY19zdGFy
dCAtIDE7Cj4gQEAgLTEwMzMsNyArMTAzNCw3IEBAIHN0YXRpYyB2b2lkIGx0ZGNfY3J0Y19hdG9t
aWNfZmx1c2goc3RydWN0IGRybV9jcnRjICpjcnRjLAo+ICAgCXN0cnVjdCBkcm1fZGV2aWNlICpk
ZGV2ID0gY3J0Yy0+ZGV2Owo+ICAgCXN0cnVjdCBkcm1fcGVuZGluZ192YmxhbmtfZXZlbnQgKmV2
ZW50ID0gY3J0Yy0+c3RhdGUtPmV2ZW50Owo+ICAgCj4gLQlEUk1fREVCVUdfQVRPTUlDKCJcbiIp
Owo+ICsJZHJtX2RiZ19hdG9taWMoY3J0Yy0+ZGV2LCAiXG4iKTsKPiAgIAo+ICAgCWx0ZGNfY3J0
Y191cGRhdGVfY2x1dChjcnRjKTsKPiAgIAo+IEBAIC0xMTIxLDcgKzExMjIsNyBAQCBzdGF0aWMg
aW50IGx0ZGNfY3J0Y19lbmFibGVfdmJsYW5rKHN0cnVjdCBkcm1fY3J0YyAqY3J0YykKPiAgIAlz
dHJ1Y3QgbHRkY19kZXZpY2UgKmxkZXYgPSBjcnRjX3RvX2x0ZGMoY3J0Yyk7Cj4gICAJc3RydWN0
IGRybV9jcnRjX3N0YXRlICpzdGF0ZSA9IGNydGMtPnN0YXRlOwo+ICAgCj4gLQlEUk1fREVCVUdf
RFJJVkVSKCJcbiIpOwo+ICsJZHJtX2RiZ19kcml2ZXIoY3J0Yy0+ZGV2LCAiXG4iKTsKPiAgIAo+
ICAgCWlmIChzdGF0ZS0+ZW5hYmxlKQo+ICAgCQlyZWdtYXBfc2V0X2JpdHMobGRldi0+cmVnbWFw
LCBMVERDX0lFUiwgSUVSX0xJRSk7Cj4gQEAgLTExMzUsNyArMTEzNiw3IEBAIHN0YXRpYyB2b2lk
IGx0ZGNfY3J0Y19kaXNhYmxlX3ZibGFuayhzdHJ1Y3QgZHJtX2NydGMgKmNydGMpCj4gICB7Cj4g
ICAJc3RydWN0IGx0ZGNfZGV2aWNlICpsZGV2ID0gY3J0Y190b19sdGRjKGNydGMpOwo+ICAgCj4g
LQlEUk1fREVCVUdfRFJJVkVSKCJcbiIpOwo+ICsJZHJtX2RiZ19kcml2ZXIoY3J0Yy0+ZGV2LCAi
XG4iKTsKPiAgIAlyZWdtYXBfY2xlYXJfYml0cyhsZGV2LT5yZWdtYXAsIExURENfSUVSLCBJRVJf
TElFKTsKPiAgIH0KPiAgIAo+IEBAIC0xMTQ0LDExICsxMTQ1LDExIEBAIHN0YXRpYyBpbnQgbHRk
Y19jcnRjX3NldF9jcmNfc291cmNlKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywgY29uc3QgY2hhciAq
c291cmNlKQo+ICAgCXN0cnVjdCBsdGRjX2RldmljZSAqbGRldjsKPiAgIAlpbnQgcmV0Owo+ICAg
Cj4gLQlEUk1fREVCVUdfRFJJVkVSKCJcbiIpOwo+IC0KPiAgIAlpZiAoIWNydGMpCj4gICAJCXJl
dHVybiAtRU5PREVWOwo+ICAgCj4gKwlkcm1fZGJnX2RyaXZlcihjcnRjLT5kZXYsICJcbiIpOwo+
ICsKPiAgIAlsZGV2ID0gY3J0Y190b19sdGRjKGNydGMpOwo+ICAgCj4gICAJaWYgKHNvdXJjZSAm
JiBzdHJjbXAoc291cmNlLCAiYXV0byIpID09IDApIHsKPiBAQCAtMTE2OCwxNCArMTE2OSwxNCBA
QCBzdGF0aWMgaW50IGx0ZGNfY3J0Y19zZXRfY3JjX3NvdXJjZShzdHJ1Y3QgZHJtX2NydGMgKmNy
dGMsIGNvbnN0IGNoYXIgKnNvdXJjZSkKPiAgIHN0YXRpYyBpbnQgbHRkY19jcnRjX3ZlcmlmeV9j
cmNfc291cmNlKHN0cnVjdCBkcm1fY3J0YyAqY3J0YywKPiAgIAkJCQkgICAgICAgY29uc3QgY2hh
ciAqc291cmNlLCBzaXplX3QgKnZhbHVlc19jbnQpCj4gICB7Cj4gLQlEUk1fREVCVUdfRFJJVkVS
KCJcbiIpOwo+IC0KPiAgIAlpZiAoIWNydGMpCj4gICAJCXJldHVybiAtRU5PREVWOwo+ICAgCj4g
Kwlkcm1fZGJnX2RyaXZlcihjcnRjLT5kZXYsICJcbiIpOwo+ICsKPiAgIAlpZiAoc291cmNlICYm
IHN0cmNtcChzb3VyY2UsICJhdXRvIikgIT0gMCkgewo+IC0JCURSTV9ERUJVR19EUklWRVIoIlVu
a25vd24gQ1JDIHNvdXJjZSAlcyBmb3IgJXNcbiIsCj4gLQkJCQkgc291cmNlLCBjcnRjLT5uYW1l
KTsKPiArCQlkcm1fZGJnX2RyaXZlcihjcnRjLT5kZXYsICJVbmtub3duIENSQyBzb3VyY2UgJXMg
Zm9yICVzXG4iLAo+ICsJCQkgICAgICAgc291cmNlLCBjcnRjLT5uYW1lKTsKPiAgIAkJcmV0dXJu
IC1FSU5WQUw7Cj4gICAJfQo+ICAgCj4gQEAgLTEyMzMsNyArMTIzNCw3IEBAIHN0YXRpYyBpbnQg
bHRkY19wbGFuZV9hdG9taWNfY2hlY2soc3RydWN0IGRybV9wbGFuZSAqcGxhbmUsCj4gICAJc3Ry
dWN0IGRybV9mcmFtZWJ1ZmZlciAqZmIgPSBuZXdfcGxhbmVfc3RhdGUtPmZiOwo+ICAgCXUzMiBz
cmNfdywgc3JjX2g7Cj4gICAKPiAtCURSTV9ERUJVR19EUklWRVIoIlxuIik7Cj4gKwlkcm1fZGJn
X2RyaXZlcihwbGFuZS0+ZGV2LCAiXG4iKTsKPiAgIAo+ICAgCWlmICghZmIpCj4gICAJCXJldHVy
biAwOwo+IEBAIC0xMjQ0LDcgKzEyNDUsNyBAQCBzdGF0aWMgaW50IGx0ZGNfcGxhbmVfYXRvbWlj
X2NoZWNrKHN0cnVjdCBkcm1fcGxhbmUgKnBsYW5lLAo+ICAgCj4gICAJLyogUmVqZWN0IHNjYWxp
bmcgKi8KPiAgIAlpZiAoc3JjX3cgIT0gbmV3X3BsYW5lX3N0YXRlLT5jcnRjX3cgfHwgc3JjX2gg
IT0gbmV3X3BsYW5lX3N0YXRlLT5jcnRjX2gpIHsKPiAtCQlEUk1fREVCVUdfRFJJVkVSKCJTY2Fs
aW5nIGlzIG5vdCBzdXBwb3J0ZWQiKTsKPiArCQlkcm1fZGJnX2RyaXZlcihwbGFuZS0+ZGV2LCAi
U2NhbGluZyBpcyBub3Qgc3VwcG9ydGVkIik7Cj4gICAKPiAgIAkJcmV0dXJuIC1FSU5WQUw7Cj4g
ICAJfQo+IEBAIC0xMjcwLDcgKzEyNzEsNyBAQCBzdGF0aWMgdm9pZCBsdGRjX3BsYW5lX2F0b21p
Y191cGRhdGUoc3RydWN0IGRybV9wbGFuZSAqcGxhbmUsCj4gICAJZW51bSBsdGRjX3BpeF9mbXQg
cGY7Cj4gICAKPiAgIAlpZiAoIW5ld3N0YXRlLT5jcnRjIHx8ICFmYikgewo+IC0JCURSTV9ERUJV
R19EUklWRVIoImZiIG9yIGNydGMgTlVMTCIpOwo+ICsJCWRybV9kYmdfZHJpdmVyKHBsYW5lLT5k
ZXYsICJmYiBvciBjcnRjIE5VTEwiKTsKPiAgIAkJcmV0dXJuOwo+ICAgCX0KPiAgIAo+IEBAIC0x
MjgwLDExICsxMjgxLDExIEBAIHN0YXRpYyB2b2lkIGx0ZGNfcGxhbmVfYXRvbWljX3VwZGF0ZShz
dHJ1Y3QgZHJtX3BsYW5lICpwbGFuZSwKPiAgIAlzcmNfdyA9IG5ld3N0YXRlLT5zcmNfdyA+PiAx
NjsKPiAgIAlzcmNfaCA9IG5ld3N0YXRlLT5zcmNfaCA+PiAxNjsKPiAgIAo+IC0JRFJNX0RFQlVH
X0RSSVZFUigicGxhbmU6JWQgZmI6JWQgKCVkeCVkKUAoJWQsJWQpIC0+ICglZHglZClAKCVkLCVk
KVxuIiwKPiAtCQkJIHBsYW5lLT5iYXNlLmlkLCBmYi0+YmFzZS5pZCwKPiAtCQkJIHNyY193LCBz
cmNfaCwgc3JjX3gsIHNyY195LAo+IC0JCQkgbmV3c3RhdGUtPmNydGNfdywgbmV3c3RhdGUtPmNy
dGNfaCwKPiAtCQkJIG5ld3N0YXRlLT5jcnRjX3gsIG5ld3N0YXRlLT5jcnRjX3kpOwo+ICsJZHJt
X2RiZ19kcml2ZXIocGxhbmUtPmRldiwgInBsYW5lOiVkIGZiOiVkICglZHglZClAKCVkLCVkKSAt
PiAoJWR4JWQpQCglZCwlZClcbiIsCj4gKwkJICAgICAgIHBsYW5lLT5iYXNlLmlkLCBmYi0+YmFz
ZS5pZCwKPiArCQkgICAgICAgc3JjX3csIHNyY19oLCBzcmNfeCwgc3JjX3ksCj4gKwkJICAgICAg
IG5ld3N0YXRlLT5jcnRjX3csIG5ld3N0YXRlLT5jcnRjX2gsCj4gKwkJICAgICAgIG5ld3N0YXRl
LT5jcnRjX3gsIG5ld3N0YXRlLT5jcnRjX3kpOwo+ICAgCj4gICAJcmVnbWFwX3JlYWQobGRldi0+
cmVnbWFwLCBMVERDX0JQQ1IsICZicGNyKTsKPiAgIAo+IEBAIC0xMzEyLDggKzEzMTMsOCBAQCBz
dGF0aWMgdm9pZCBsdGRjX3BsYW5lX2F0b21pY191cGRhdGUoc3RydWN0IGRybV9wbGFuZSAqcGxh
bmUsCj4gICAJCXZhbCA9IGx0ZGNfc2V0X2ZsZXhpYmxlX3BpeGVsX2Zvcm1hdChwbGFuZSwgcGYp
Owo+ICAgCj4gICAJaWYgKHZhbCA9PSBOQl9QRikgewo+IC0JCURSTV9FUlJPUigiUGl4ZWwgZm9y
bWF0ICUuNHMgbm90IHN1cHBvcnRlZFxuIiwKPiAtCQkJICAoY2hhciAqKSZmYi0+Zm9ybWF0LT5m
b3JtYXQpOwo+ICsJCWRybV9lcnIoZmItPmRldiwgIlBpeGVsIGZvcm1hdCAlLjRzIG5vdCBzdXBw
b3J0ZWRcbiIsCj4gKwkJCShjaGFyICopJmZiLT5mb3JtYXQtPmZvcm1hdCk7Cj4gICAJCXZhbCA9
IDA7CS8qIHNldCBieSBkZWZhdWx0IEFSR0IgMzIgYml0cyAqLwo+ICAgCX0KPiAgIAlyZWdtYXBf
d3JpdGVfYml0cyhsZGV2LT5yZWdtYXAsIExURENfTDFQRkNSICsgbG9mcywgTFhQRkNSX1BGLCB2
YWwpOwo+IEBAIC0xMzUwLDcgKzEzNTEsNyBAQCBzdGF0aWMgdm9pZCBsdGRjX3BsYW5lX2F0b21p
Y191cGRhdGUoc3RydWN0IGRybV9wbGFuZSAqcGxhbmUsCj4gICAJaWYgKG5ld3N0YXRlLT5yb3Rh
dGlvbiAmIERSTV9NT0RFX1JFRkxFQ1RfWSkKPiAgIAkJcGFkZHIgKz0gKGZiLT5waXRjaGVzWzBd
ICogKHkxIC0geTApKTsKPiAgIAo+IC0JRFJNX0RFQlVHX0RSSVZFUigiZmI6IHBoeXMgMHglMDh4
IiwgcGFkZHIpOwo+ICsJZHJtX2RiZ19kcml2ZXIoZmItPmRldiwgImZiOiBwaHlzIDB4JTA4eCIs
IHBhZGRyKTsKPiAgIAlyZWdtYXBfd3JpdGUobGRldi0+cmVnbWFwLCBMVERDX0wxQ0ZCQVIgKyBs
b2ZzLCBwYWRkcik7Cj4gICAKPiAgIAkvKiBDb25maWd1cmVzIHRoZSBjb2xvciBmcmFtZSBidWZm
ZXIgcGl0Y2ggaW4gYnl0ZXMgJiBsaW5lIGxlbmd0aCAqLwo+IEBAIC0xNTE3LDggKzE1MTgsOCBA
QCBzdGF0aWMgdm9pZCBsdGRjX3BsYW5lX2F0b21pY19kaXNhYmxlKHN0cnVjdCBkcm1fcGxhbmUg
KnBsYW5lLAo+ICAgCQlyZWdtYXBfd3JpdGVfYml0cyhsZGV2LT5yZWdtYXAsIExURENfTDFSQ1Ig
KyBsb2ZzLAo+ICAgCQkJCSAgTFhSQ1JfSU1SIHwgTFhSQ1JfVkJSIHwgTFhSQ1JfR1JNU0ssIExY
UkNSX1ZCUik7Cj4gICAKPiAtCURSTV9ERUJVR19EUklWRVIoIkNSVEM6JWQgcGxhbmU6JWRcbiIs
Cj4gLQkJCSBvbGRzdGF0ZS0+Y3J0Yy0+YmFzZS5pZCwgcGxhbmUtPmJhc2UuaWQpOwo+ICsJZHJt
X2RiZ19kcml2ZXIocGxhbmUtPmRldiwgIkNSVEM6JWQgcGxhbmU6JWRcbiIsCj4gKwkJICAgICAg
IG9sZHN0YXRlLT5jcnRjLT5iYXNlLmlkLCBwbGFuZS0+YmFzZS5pZCk7Cj4gICB9Cj4gICAKPiAg
IHN0YXRpYyB2b2lkIGx0ZGNfcGxhbmVfYXRvbWljX3ByaW50X3N0YXRlKHN0cnVjdCBkcm1fcHJp
bnRlciAqcCwKPiBAQCAtMTYzMiw3ICsxNjMzLDcgQEAgc3RhdGljIHN0cnVjdCBkcm1fcGxhbmUg
Kmx0ZGNfcGxhbmVfY3JlYXRlKHN0cnVjdCBkcm1fZGV2aWNlICpkZGV2LAo+ICAgCj4gICAJZHJt
X3BsYW5lX2NyZWF0ZV9hbHBoYV9wcm9wZXJ0eShwbGFuZSk7Cj4gICAKPiAtCURSTV9ERUJVR19E
UklWRVIoInBsYW5lOiVkIGNyZWF0ZWRcbiIsIHBsYW5lLT5iYXNlLmlkKTsKPiArCWRybV9kYmdf
ZHJpdmVyKHBsYW5lLT5kZXYsICJwbGFuZTolZCBjcmVhdGVkXG4iLCBwbGFuZS0+YmFzZS5pZCk7
Cj4gICAKPiAgIAlyZXR1cm4gcGxhbmU7Cj4gICB9Cj4gQEAgLTE2NDcsNyArMTY0OCw3IEBAIHN0
YXRpYyBpbnQgbHRkY19jcnRjX2luaXQoc3RydWN0IGRybV9kZXZpY2UgKmRkZXYsIHN0cnVjdCBk
cm1fY3J0YyAqY3J0YykKPiAgIAo+ICAgCXByaW1hcnkgPSBsdGRjX3BsYW5lX2NyZWF0ZShkZGV2
LCBEUk1fUExBTkVfVFlQRV9QUklNQVJZLCAwKTsKPiAgIAlpZiAoIXByaW1hcnkpIHsKPiAtCQlE
Uk1fRVJST1IoIkNhbiBub3QgY3JlYXRlIHByaW1hcnkgcGxhbmVcbiIpOwo+ICsJCWRybV9lcnIo
ZGRldiwgIkNhbiBub3QgY3JlYXRlIHByaW1hcnkgcGxhbmVcbiIpOwo+ICAgCQlyZXR1cm4gLUVJ
TlZBTDsKPiAgIAl9Cj4gICAKPiBAQCAtMTY2OCw3ICsxNjY5LDcgQEAgc3RhdGljIGludCBsdGRj
X2NydGNfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZGRldiwgc3RydWN0IGRybV9jcnRjICpjcnRj
KQo+ICAgCQlyZXQgPSBkcm1tX2NydGNfaW5pdF93aXRoX3BsYW5lcyhkZGV2LCBjcnRjLCBwcmlt
YXJ5LCBOVUxMLAo+ICAgCQkJCQkJICZsdGRjX2NydGNfZnVuY3MsIE5VTEwpOwo+ICAgCWlmIChy
ZXQpIHsKPiAtCQlEUk1fRVJST1IoIkNhbiBub3QgaW5pdGlhbGl6ZSBDUlRDXG4iKTsKPiArCQlk
cm1fZXJyKGRkZXYsICJDYW4gbm90IGluaXRpYWxpemUgQ1JUQ1xuIik7Cj4gICAJCXJldHVybiBy
ZXQ7Cj4gICAJfQo+ICAgCj4gQEAgLTE2NzcsMTMgKzE2NzgsMTMgQEAgc3RhdGljIGludCBsdGRj
X2NydGNfaW5pdChzdHJ1Y3QgZHJtX2RldmljZSAqZGRldiwgc3RydWN0IGRybV9jcnRjICpjcnRj
KQo+ICAgCWRybV9tb2RlX2NydGNfc2V0X2dhbW1hX3NpemUoY3J0YywgQ0xVVF9TSVpFKTsKPiAg
IAlkcm1fY3J0Y19lbmFibGVfY29sb3JfbWdtdChjcnRjLCAwLCBmYWxzZSwgQ0xVVF9TSVpFKTsK
PiAgIAo+IC0JRFJNX0RFQlVHX0RSSVZFUigiQ1JUQzolZCBjcmVhdGVkXG4iLCBjcnRjLT5iYXNl
LmlkKTsKPiArCWRybV9kYmdfZHJpdmVyKGRkZXYsICJDUlRDOiVkIGNyZWF0ZWRcbiIsIGNydGMt
PmJhc2UuaWQpOwo+ICAgCj4gICAJLyogQWRkIHBsYW5lcy4gTm90ZSA6IHRoZSBmaXJzdCBsYXll
ciBpcyB1c2VkIGJ5IHByaW1hcnkgcGxhbmUgKi8KPiAgIAlmb3IgKGkgPSAxOyBpIDwgbGRldi0+
Y2Fwcy5uYl9sYXllcnM7IGkrKykgewo+ICAgCQlvdmVybGF5ID0gbHRkY19wbGFuZV9jcmVhdGUo
ZGRldiwgRFJNX1BMQU5FX1RZUEVfT1ZFUkxBWSwgaSk7Cj4gICAJCWlmICghb3ZlcmxheSkgewo+
IC0JCQlEUk1fRVJST1IoIkNhbiBub3QgY3JlYXRlIG92ZXJsYXkgcGxhbmUgJWRcbiIsIGkpOwo+
ICsJCQlkcm1fZXJyKGRkZXYsICJDYW4gbm90IGNyZWF0ZSBvdmVybGF5IHBsYW5lICVkXG4iLCBp
KTsKPiAgIAkJCXJldHVybiAtRU5PTUVNOwo+ICAgCQl9Cj4gICAJCWlmIChsZGV2LT5jYXBzLmR5
bmFtaWNfem9yZGVyKQo+IEBAIC0xNzA0LDcgKzE3MDUsNyBAQCBzdGF0aWMgdm9pZCBsdGRjX2Vu
Y29kZXJfZGlzYWJsZShzdHJ1Y3QgZHJtX2VuY29kZXIgKmVuY29kZXIpCj4gICAJc3RydWN0IGRy
bV9kZXZpY2UgKmRkZXYgPSBlbmNvZGVyLT5kZXY7Cj4gICAJc3RydWN0IGx0ZGNfZGV2aWNlICps
ZGV2ID0gZGRldi0+ZGV2X3ByaXZhdGU7Cj4gICAKPiAtCURSTV9ERUJVR19EUklWRVIoIlxuIik7
Cj4gKwlkcm1fZGJnX2RyaXZlcihlbmNvZGVyLT5kZXYsICJcbiIpOwo+ICAgCj4gICAJLyogRGlz
YWJsZSBMVERDICovCj4gICAJcmVnbWFwX2NsZWFyX2JpdHMobGRldi0+cmVnbWFwLCBMVERDX0dD
UiwgR0NSX0xURENFTik7Cj4gQEAgLTE3MTgsNyArMTcxOSw3IEBAIHN0YXRpYyB2b2lkIGx0ZGNf
ZW5jb2Rlcl9lbmFibGUoc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyKQo+ICAgCXN0cnVjdCBk
cm1fZGV2aWNlICpkZGV2ID0gZW5jb2Rlci0+ZGV2Owo+ICAgCXN0cnVjdCBsdGRjX2RldmljZSAq
bGRldiA9IGRkZXYtPmRldl9wcml2YXRlOwo+ICAgCj4gLQlEUk1fREVCVUdfRFJJVkVSKCJcbiIp
Owo+ICsJZHJtX2RiZ19kcml2ZXIoZW5jb2Rlci0+ZGV2LCAiXG4iKTsKPiAgIAo+ICAgCS8qIHNl
dCBmaWZvIHVuZGVycnVuIHRocmVzaG9sZCByZWdpc3RlciAqLwo+ICAgCWlmIChsZGV2LT5jYXBz
LmZpZm9fdGhyZXNob2xkKQo+IEBAIC0xNzM0LDcgKzE3MzUsNyBAQCBzdGF0aWMgdm9pZCBsdGRj
X2VuY29kZXJfbW9kZV9zZXQoc3RydWN0IGRybV9lbmNvZGVyICplbmNvZGVyLAo+ICAgewo+ICAg
CXN0cnVjdCBkcm1fZGV2aWNlICpkZGV2ID0gZW5jb2Rlci0+ZGV2Owo+ICAgCj4gLQlEUk1fREVC
VUdfRFJJVkVSKCJcbiIpOwo+ICsJZHJtX2RiZ19kcml2ZXIoZW5jb2Rlci0+ZGV2LCAiXG4iKTsK
PiAgIAo+ICAgCS8qCj4gICAJICogU2V0IHRvIGRlZmF1bHQgc3RhdGUgdGhlIHBpbmN0cmwgb25s
eSB3aXRoIERQSSB0eXBlLgo+IEBAIC0xNzcwLDcgKzE3NzEsNyBAQCBzdGF0aWMgaW50IGx0ZGNf
ZW5jb2Rlcl9pbml0KHN0cnVjdCBkcm1fZGV2aWNlICpkZGV2LCBzdHJ1Y3QgZHJtX2JyaWRnZSAq
YnJpZGdlKQo+ICAgCWlmIChyZXQpCj4gICAJCXJldHVybiByZXQ7Cj4gICAKPiAtCURSTV9ERUJV
R19EUklWRVIoIkJyaWRnZSBlbmNvZGVyOiVkIGNyZWF0ZWRcbiIsIGVuY29kZXItPmJhc2UuaWQp
Owo+ICsJZHJtX2RiZ19kcml2ZXIoZW5jb2Rlci0+ZGV2LCAiQnJpZGdlIGVuY29kZXI6JWQgY3Jl
YXRlZFxuIiwgZW5jb2Rlci0+YmFzZS5pZCk7Cj4gICAKPiAgIAlyZXR1cm4gMDsKPiAgIH0KPiBA
QCAtMTg3MCw3ICsxODcxLDcgQEAgdm9pZCBsdGRjX3N1c3BlbmQoc3RydWN0IGRybV9kZXZpY2Ug
KmRkZXYpCj4gICB7Cj4gICAJc3RydWN0IGx0ZGNfZGV2aWNlICpsZGV2ID0gZGRldi0+ZGV2X3By
aXZhdGU7Cj4gICAKPiAtCURSTV9ERUJVR19EUklWRVIoIlxuIik7Cj4gKwlkcm1fZGJnX2RyaXZl
cihkZGV2LCAiXG4iKTsKPiAgIAljbGtfZGlzYWJsZV91bnByZXBhcmUobGRldi0+cGl4ZWxfY2xr
KTsKPiAgIH0KPiAgIAo+IEBAIC0xODc5LDExICsxODgwLDExIEBAIGludCBsdGRjX3Jlc3VtZShz
dHJ1Y3QgZHJtX2RldmljZSAqZGRldikKPiAgIAlzdHJ1Y3QgbHRkY19kZXZpY2UgKmxkZXYgPSBk
ZGV2LT5kZXZfcHJpdmF0ZTsKPiAgIAlpbnQgcmV0Owo+ICAgCj4gLQlEUk1fREVCVUdfRFJJVkVS
KCJcbiIpOwo+ICsJZHJtX2RiZ19kcml2ZXIoZGRldiwgIlxuIik7Cj4gICAKPiAgIAlyZXQgPSBj
bGtfcHJlcGFyZV9lbmFibGUobGRldi0+cGl4ZWxfY2xrKTsKPiAgIAlpZiAocmV0KSB7Cj4gLQkJ
RFJNX0VSUk9SKCJmYWlsZWQgdG8gZW5hYmxlIHBpeGVsIGNsb2NrICglZClcbiIsIHJldCk7Cj4g
KwkJZHJtX2VycihkZGV2LCAiZmFpbGVkIHRvIGVuYWJsZSBwaXhlbCBjbG9jayAoJWQpXG4iLCBy
ZXQpOwo+ICAgCQlyZXR1cm4gcmV0Owo+ICAgCX0KPiAgIAo+IEBAIC0xOTAzLDcgKzE5MDQsNyBA
QCBpbnQgbHRkY19sb2FkKHN0cnVjdCBkcm1fZGV2aWNlICpkZGV2KQo+ICAgCWludCBpcnEsIGks
IG5iX2VuZHBvaW50czsKPiAgIAlpbnQgcmV0ID0gLUVOT0RFVjsKPiAgIAo+IC0JRFJNX0RFQlVH
X0RSSVZFUigiXG4iKTsKPiArCWRybV9kYmdfZHJpdmVyKGRkZXYsICJcbiIpOwo+ICAgCj4gICAJ
LyogR2V0IG51bWJlciBvZiBlbmRwb2ludHMgKi8KPiAgIAluYl9lbmRwb2ludHMgPSBvZl9ncmFw
aF9nZXRfZW5kcG9pbnRfY291bnQobnApOwo+IEBAIC0xOTEzLDEyICsxOTE0LDEyIEBAIGludCBs
dGRjX2xvYWQoc3RydWN0IGRybV9kZXZpY2UgKmRkZXYpCj4gICAJbGRldi0+cGl4ZWxfY2xrID0g
ZGV2bV9jbGtfZ2V0KGRldiwgImxjZCIpOwo+ICAgCWlmIChJU19FUlIobGRldi0+cGl4ZWxfY2xr
KSkgewo+ICAgCQlpZiAoUFRSX0VSUihsZGV2LT5waXhlbF9jbGspICE9IC1FUFJPQkVfREVGRVIp
Cj4gLQkJCURSTV9FUlJPUigiVW5hYmxlIHRvIGdldCBsY2QgY2xvY2tcbiIpOwo+ICsJCQlkcm1f
ZXJyKGRkZXYsICJVbmFibGUgdG8gZ2V0IGxjZCBjbG9ja1xuIik7Cj4gICAJCXJldHVybiBQVFJf
RVJSKGxkZXYtPnBpeGVsX2Nsayk7Cj4gICAJfQo+ICAgCj4gICAJaWYgKGNsa19wcmVwYXJlX2Vu
YWJsZShsZGV2LT5waXhlbF9jbGspKSB7Cj4gLQkJRFJNX0VSUk9SKCJVbmFibGUgdG8gcHJlcGFy
ZSBwaXhlbCBjbG9ja1xuIik7Cj4gKwkJZHJtX2VycihkZGV2LCAiVW5hYmxlIHRvIHByZXBhcmUg
cGl4ZWwgY2xvY2tcbiIpOwo+ICAgCQlyZXR1cm4gLUVOT0RFVjsKPiAgIAl9Cj4gICAKPiBAQCAt
MTkzOSw3ICsxOTQwLDcgQEAgaW50IGx0ZGNfbG9hZChzdHJ1Y3QgZHJtX2RldmljZSAqZGRldikK
PiAgIAkJaWYgKHBhbmVsKSB7Cj4gICAJCQlicmlkZ2UgPSBkcm1tX3BhbmVsX2JyaWRnZV9hZGQo
ZGRldiwgcGFuZWwpOwo+ICAgCQkJaWYgKElTX0VSUihicmlkZ2UpKSB7Cj4gLQkJCQlEUk1fRVJS
T1IoInBhbmVsLWJyaWRnZSBlbmRwb2ludCAlZFxuIiwgaSk7Cj4gKwkJCQlkcm1fZXJyKGRkZXYs
ICJwYW5lbC1icmlkZ2UgZW5kcG9pbnQgJWRcbiIsIGkpOwo+ICAgCQkJCXJldCA9IFBUUl9FUlIo
YnJpZGdlKTsKPiAgIAkJCQlnb3RvIGVycjsKPiAgIAkJCX0KPiBAQCAtMTk0OSw3ICsxOTUwLDcg
QEAgaW50IGx0ZGNfbG9hZChzdHJ1Y3QgZHJtX2RldmljZSAqZGRldikKPiAgIAkJCXJldCA9IGx0
ZGNfZW5jb2Rlcl9pbml0KGRkZXYsIGJyaWRnZSk7Cj4gICAJCQlpZiAocmV0KSB7Cj4gICAJCQkJ
aWYgKHJldCAhPSAtRVBST0JFX0RFRkVSKQo+IC0JCQkJCURSTV9FUlJPUigiaW5pdCBlbmNvZGVy
IGVuZHBvaW50ICVkXG4iLCBpKTsKPiArCQkJCQlkcm1fZXJyKGRkZXYsICJpbml0IGVuY29kZXIg
ZW5kcG9pbnQgJWRcbiIsIGkpOwo+ICAgCQkJCWdvdG8gZXJyOwo+ICAgCQkJfQo+ICAgCQl9Cj4g
QEAgLTE5NjcsMjkgKzE5NjgsMjkgQEAgaW50IGx0ZGNfbG9hZChzdHJ1Y3QgZHJtX2RldmljZSAq
ZGRldikKPiAgIAo+ICAgCWxkZXYtPnJlZ3MgPSBkZXZtX3BsYXRmb3JtX2lvcmVtYXBfcmVzb3Vy
Y2UocGRldiwgMCk7Cj4gICAJaWYgKElTX0VSUihsZGV2LT5yZWdzKSkgewo+IC0JCURSTV9FUlJP
UigiVW5hYmxlIHRvIGdldCBsdGRjIHJlZ2lzdGVyc1xuIik7Cj4gKwkJZHJtX2VycihkZGV2LCAi
VW5hYmxlIHRvIGdldCBsdGRjIHJlZ2lzdGVyc1xuIik7Cj4gICAJCXJldCA9IFBUUl9FUlIobGRl
di0+cmVncyk7Cj4gICAJCWdvdG8gZXJyOwo+ICAgCX0KPiAgIAo+ICAgCWxkZXYtPnJlZ21hcCA9
IGRldm1fcmVnbWFwX2luaXRfbW1pbygmcGRldi0+ZGV2LCBsZGV2LT5yZWdzLCAmc3RtMzJfbHRk
Y19yZWdtYXBfY2ZnKTsKPiAgIAlpZiAoSVNfRVJSKGxkZXYtPnJlZ21hcCkpIHsKPiAtCQlEUk1f
RVJST1IoIlVuYWJsZSB0byByZWdtYXAgbHRkYyByZWdpc3RlcnNcbiIpOwo+ICsJCWRybV9lcnIo
ZGRldiwgIlVuYWJsZSB0byByZWdtYXAgbHRkYyByZWdpc3RlcnNcbiIpOwo+ICAgCQlyZXQgPSBQ
VFJfRVJSKGxkZXYtPnJlZ21hcCk7Cj4gICAJCWdvdG8gZXJyOwo+ICAgCX0KPiAgIAo+ICAgCXJl
dCA9IGx0ZGNfZ2V0X2NhcHMoZGRldik7Cj4gICAJaWYgKHJldCkgewo+IC0JCURSTV9FUlJPUigi
aGFyZHdhcmUgaWRlbnRpZmllciAoMHglMDh4KSBub3Qgc3VwcG9ydGVkIVxuIiwKPiAtCQkJICBs
ZGV2LT5jYXBzLmh3X3ZlcnNpb24pOwo+ICsJCWRybV9lcnIoZGRldiwgImhhcmR3YXJlIGlkZW50
aWZpZXIgKDB4JTA4eCkgbm90IHN1cHBvcnRlZCFcbiIsCj4gKwkJCWxkZXYtPmNhcHMuaHdfdmVy
c2lvbik7Cj4gICAJCWdvdG8gZXJyOwo+ICAgCX0KPiAgIAo+ICAgCS8qIERpc2FibGUgYWxsIGlu
dGVycnVwdHMgKi8KPiAgIAlyZWdtYXBfY2xlYXJfYml0cyhsZGV2LT5yZWdtYXAsIExURENfSUVS
LCBJRVJfTUFTSyk7Cj4gICAKPiAtCURSTV9ERUJVR19EUklWRVIoImx0ZGMgaHcgdmVyc2lvbiAw
eCUwOHhcbiIsIGxkZXYtPmNhcHMuaHdfdmVyc2lvbik7Cj4gKwlkcm1fZGJnX2RyaXZlcihkZGV2
LCAibHRkYyBodyB2ZXJzaW9uIDB4JTA4eFxuIiwgbGRldi0+Y2Fwcy5od192ZXJzaW9uKTsKPiAg
IAo+ICAgCS8qIGluaXRpYWxpemUgZGVmYXVsdCB2YWx1ZSBmb3IgZmlmbyB1bmRlcnJ1biB0aHJl
c2hvbGQgJiBjbGVhciBpbnRlcnJ1cHQgZXJyb3IgY291bnRlcnMgKi8KPiAgIAlsZGV2LT50cmFu
c2Zlcl9lcnIgPSAwOwo+IEBAIC0yMDA4LDI3ICsyMDA5LDI3IEBAIGludCBsdGRjX2xvYWQoc3Ry
dWN0IGRybV9kZXZpY2UgKmRkZXYpCj4gICAJCQkJCQlsdGRjX2lycV90aHJlYWQsIElSUUZfT05F
U0hPVCwKPiAgIAkJCQkJCWRldl9uYW1lKGRldiksIGRkZXYpOwo+ICAgCQlpZiAocmV0KSB7Cj4g
LQkJCURSTV9FUlJPUigiRmFpbGVkIHRvIHJlZ2lzdGVyIExUREMgaW50ZXJydXB0XG4iKTsKPiAr
CQkJZHJtX2VycihkZGV2LCAiRmFpbGVkIHRvIHJlZ2lzdGVyIExUREMgaW50ZXJydXB0XG4iKTsK
PiAgIAkJCWdvdG8gZXJyOwo+ICAgCQl9Cj4gICAJfQo+ICAgCj4gICAJY3J0YyA9IGRybW1fa3ph
bGxvYyhkZGV2LCBzaXplb2YoKmNydGMpLCBHRlBfS0VSTkVMKTsKPiAgIAlpZiAoIWNydGMpIHsK
PiAtCQlEUk1fRVJST1IoIkZhaWxlZCB0byBhbGxvY2F0ZSBjcnRjXG4iKTsKPiArCQlkcm1fZXJy
KGRkZXYsICJGYWlsZWQgdG8gYWxsb2NhdGUgY3J0Y1xuIik7Cj4gICAJCXJldCA9IC1FTk9NRU07
Cj4gICAJCWdvdG8gZXJyOwo+ICAgCX0KPiAgIAo+ICAgCXJldCA9IGx0ZGNfY3J0Y19pbml0KGRk
ZXYsIGNydGMpOwo+ICAgCWlmIChyZXQpIHsKPiAtCQlEUk1fRVJST1IoIkZhaWxlZCB0byBpbml0
IGNydGNcbiIpOwo+ICsJCWRybV9lcnIoZGRldiwgIkZhaWxlZCB0byBpbml0IGNydGNcbiIpOwo+
ICAgCQlnb3RvIGVycjsKPiAgIAl9Cj4gICAKPiAgIAlyZXQgPSBkcm1fdmJsYW5rX2luaXQoZGRl
diwgTkJfQ1JUQyk7Cj4gICAJaWYgKHJldCkgewo+IC0JCURSTV9FUlJPUigiRmFpbGVkIGNhbGxp
bmcgZHJtX3ZibGFua19pbml0KClcbiIpOwo+ICsJCWRybV9lcnIoZGRldiwgIkZhaWxlZCBjYWxs
aW5nIGRybV92YmxhbmtfaW5pdCgpXG4iKTsKPiAgIAkJZ290byBlcnI7Cj4gICAJfQo+ICAgCj4g
QEAgLTIwNDcsNyArMjA0OCw3IEBAIGludCBsdGRjX2xvYWQoc3RydWN0IGRybV9kZXZpY2UgKmRk
ZXYpCj4gICAKPiAgIHZvaWQgbHRkY191bmxvYWQoc3RydWN0IGRybV9kZXZpY2UgKmRkZXYpCj4g
ICB7Cj4gLQlEUk1fREVCVUdfRFJJVkVSKCJcbiIpOwo+ICsJZHJtX2RiZ19kcml2ZXIoZGRldiwg
IlxuIik7Cj4gICAKPiAgIAlwbV9ydW50aW1lX2Rpc2FibGUoZGRldi0+ZGV2KTsKPiAgIH0KX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KTGludXgtc3RtMzIg
bWFpbGluZyBsaXN0CkxpbnV4LXN0bTMyQHN0LW1kLW1haWxtYW4uc3Rvcm1yZXBseS5jb20KaHR0
cHM6Ly9zdC1tZC1tYWlsbWFuLnN0b3JtcmVwbHkuY29tL21haWxtYW4vbGlzdGluZm8vbGludXgt
c3RtMzIK
